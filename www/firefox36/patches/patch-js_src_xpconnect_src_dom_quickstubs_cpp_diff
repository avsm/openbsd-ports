$OpenBSD: patch-js_src_xpconnect_src_dom_quickstubs_cpp_diff,v 1.1.1.1 2010/03/29 20:44:10 naddy Exp $
--- js/src/xpconnect/src/dom_quickstubs.cpp.diff.orig	Thu Jan 21 19:20:07 2010
+++ js/src/xpconnect/src/dom_quickstubs.cpp.diff	Thu Jan 21 19:23:46 2010
@@ -0,0 +1,20 @@
+--- dom_quickstubs.cpp.orig	Thu Jan 21 17:16:42 2010
++++ dom_quickstubs.cpp	Thu Jan 21 17:21:17 2010
+@@ -5273,7 +5273,7 @@
+     xpc_qsDOMString arg0(cx, &argv[0]);
+     if (!arg0.IsValid())
+         return JS_FALSE;
+-    nsCOMPtr<nsIVariant> arg1(already_AddRefed<nsIVariant>(XPCVariant::newVariant(ccx, argv[1])));
++    nsCOMPtr<nsIVariant> arg1 = nsCOMPtr<nsIVariant>(already_AddRefed<nsIVariant>(XPCVariant::newVariant(ccx, argv[1])));
+     if (!arg1)
+         return JS_FALSE;
+     nsresult rv;
+@@ -5305,7 +5305,7 @@
+         return JSVAL_VOID;
+     }
+     XPCReadableJSStringWrapper arg0(_arg0);
+-    nsCOMPtr<nsIVariant> arg1(already_AddRefed<nsIVariant>(XPCVariant::newVariant(ccx, _arg1)));
++    nsCOMPtr<nsIVariant> arg1 = nsCOMPtr<nsIVariant>(already_AddRefed<nsIVariant>(XPCVariant::newVariant(ccx, _arg1)));
+     if (!arg1) {
+         js_SetTraceableNativeFailed(cx);
+         return JSVAL_VOID;
