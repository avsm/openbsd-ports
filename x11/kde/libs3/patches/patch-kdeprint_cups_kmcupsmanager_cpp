$OpenBSD: patch-kdeprint_cups_kmcupsmanager_cpp,v 1.1 2007/10/06 12:47:20 ajacoutot Exp $
--- kdeprint/cups/kmcupsmanager.cpp.orig	Sat Oct  6 09:19:06 2007
+++ kdeprint/cups/kmcupsmanager.cpp	Sat Oct  6 09:23:44 2007
@@ -102,10 +102,10 @@ QString KMCupsManager::driverDirectory()
 {
 	QString	d = cupsInstallDir();
 	if (d.isEmpty())
-		d = "/usr";
+		d = "!!LOCALBASE!!";
 	d.append("/share/cups/model");
 	// raw foomatic support
-	d.append(":/usr/share/foomatic/db/source");
+	d.append(":!!LOCALBASE!!/share/foomatic/db/source");
 	return d;
 }
 
@@ -576,7 +576,7 @@ DrMain* KMCupsManager::loadMaticDriver(const QString& 
 {
 	QStringList	comps = QStringList::split('/', drname, false);
 	QString	tmpFile = locateLocal("tmp", "foomatic_" + kapp->randomString(8));
-	QString	PATH = getenv("PATH") + QString::fromLatin1(":/usr/sbin:/usr/local/sbin:/opt/sbin:/opt/local/sbin");
+	QString	PATH = getenv("PATH") + QString::fromLatin1(":!!LOCALBASE!!/bin:/usr/sbin:/usr/local/sbin:/opt/sbin:/opt/local/sbin");
 	QString	exe = KStandardDirs::findExe("foomatic-datafile", PATH);
 	if (exe.isEmpty())
 	{
@@ -867,7 +867,7 @@ void KMCupsManager::exportDriver()
 	{
 		QString	path = cupsInstallDir();
 		if (path.isEmpty())
-			path = "/usr/share/cups";
+			path = "!!LOCALBASE!!/share/cups";
 		else
 			path += "/share/cups";
 		CupsAddSmb::exportDest(m_currentprinter->printerName(), path);
