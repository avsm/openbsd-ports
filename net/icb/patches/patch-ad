--- tcl/tclCmdAH.c.orig	Sun Jan 16 01:41:46 2000
+++ tcl/tclCmdAH.c	Sun Jan 16 01:41:22 2000
@@ -38,9 +38,14 @@
 #include <sys/wait.h>
 #include "tclInt.h"
 
+#if (defined(__unix__) || defined(unix)) && !defined(USG)
+#include <sys/param.h>
+#endif
+
 extern int errno;
+#if !(defined(BSD) && BSD >= 199306)
 extern long lseek();
-extern char *mktemp();
+#endif
 
 /*
  *----------------------------------------------------------------------
@@ -501,8 +506,7 @@
     } else {
 	char tmp[sizeof(TMP_FILE_NAME) + 1];
 	strcpy(tmp, TMP_FILE_NAME);
-	mktemp(tmp);
-	stdIn[0] = open(tmp, O_RDWR|O_CREAT, 0);
+	stdIn[0] = mkstemp(tmp);
 	if (stdIn[0] < 0) {
 	    sprintf(interp->result,
 		    "couldn't create input file for \"%.50s\" command: %.50s",
@@ -627,7 +631,7 @@
 	while (1) {
 	    int child;
 
-	    child = wait(&status);
+	    child = wait((int *)&status);
 	    if (child == -1) {
 		sprintf(interp->result,
 			"child process disappeared mysteriously");
