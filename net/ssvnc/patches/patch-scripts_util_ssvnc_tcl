$OpenBSD: patch-scripts_util_ssvnc_tcl,v 1.4 2010/04/10 13:42:25 sthen Exp $

type sometimes returns "xx is a tracked alias for /foo/bar" which
isn't handled. whence is sufficient and more reliable.

--- scripts/util/ssvnc.tcl.orig	Fri Apr  2 05:08:15 2010
+++ scripts/util/ssvnc.tcl	Sat Apr 10 14:38:16 2010
@@ -17755,7 +17755,7 @@ proc check_zeroconf_browse {} {
 		return 0;
 	}
 	set p ""
-	set r [catch {set p [exec /bin/sh -c {type avahi-browse}]}]
+	set r [catch {set p [exec /bin/sh -c {whence avahi-browse}]}]
 	if {$r == 0} {
 		regsub {^.* is  *} $p "" p
 		regsub -all {[ \t\n\r]} $p "" p
@@ -17765,7 +17765,7 @@ proc check_zeroconf_browse {} {
 		}
 	}
 	set p ""
-	set r [catch {set p [exec /bin/sh -c {type dns-sd}]}]
+	set r [catch {set p [exec /bin/sh -c {whence dns-sd}]}]
 	if {$r == 0} {
 		regsub {^.* is  *} $p "" p
 		regsub -all {[ \t\n\r]} $p "" p
@@ -17780,7 +17780,7 @@ proc check_zeroconf_browse {} {
 		}
 	}
 	set p ""
-	set r [catch {set p [exec /bin/sh -c {type mDNS}]}]
+	set r [catch {set p [exec /bin/sh -c {whence mDNS}]}]
 	if {$r == 0} {
 		regsub {^.* is  *} $p "" p
 		regsub -all {[ \t\n\r]} $p "" p
