$OpenBSD: patch-j2sdk1_3_1_src_bsd_include_bsdmisc_h,v 1.1 2004/08/14 21:50:38 naddy Exp $
--- j2sdk1.3.1/src/bsd/include/bsdmisc.h.orig	2004-06-03 16:47:33.000000000 -0400
+++ j2sdk1.3.1/src/bsd/include/bsdmisc.h	2004-06-03 16:48:36.000000000 -0400
@@ -37,7 +37,7 @@ char *bsd_c_sym(const char *);
 #define BSD_SHLIB_EXT ".so"
 #endif
 
-#ifdef __OpenBSD__
+#if defined(__OpenBSD__) && defined(_DLFCN_H_) && !defined(RTLD_DEFAULT)
 typedef struct {
 	const char *dli_fname;
 	char *_padding[3]; 
