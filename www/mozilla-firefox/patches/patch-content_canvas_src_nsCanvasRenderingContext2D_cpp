$OpenBSD: patch-content_canvas_src_nsCanvasRenderingContext2D_cpp,v 1.1 2007/11/28 20:22:26 martynas Exp $
--- content/canvas/src/nsCanvasRenderingContext2D.cpp.orig	Wed Nov 14 13:34:35 2007
+++ content/canvas/src/nsCanvasRenderingContext2D.cpp	Tue Nov 27 20:33:10 2007
@@ -2143,7 +2143,7 @@ nsCanvasRenderingContext2D::CairoSurfaceFromElement(ns
 
         PRUint32 status;
         imgRequest->GetImageStatus(&status);
-        if (status != imgIRequest::STATUS_LOAD_COMPLETE)
+        if ((status & imgIRequest::STATUS_LOAD_COMPLETE) == 0)
             return NS_ERROR_NOT_AVAILABLE;
 
         nsCOMPtr<nsIURI> uri;
