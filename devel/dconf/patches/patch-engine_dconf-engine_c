$OpenBSD: patch-engine_dconf-engine_c,v 1.4 2011/05/08 12:20:37 ajacoutot Exp $

From c80896f5644ec0a07822047dd7e899da63b42e89 Mon Sep 17 00:00:00 2001
From: Ryan Lortie <desrt@desrt.ca>
Date: Sun, 08 May 2011 12:08:38 +0000
Subject: Fix crash when user database is not present

--- engine/dconf-engine.c.orig	Fri May  6 14:45:33 2011
+++ engine/dconf-engine.c	Sun May  8 14:15:42 2011
@@ -452,7 +452,11 @@ dconf_engine_read_internal (DConfEngine  *engine,
       break;
 
   while (i < limit && value == NULL)
-    value = gvdb_table_get_value (engine->gvdbs[i++], key);
+    {
+      if (engine->gvdbs[i] != NULL)
+        value = gvdb_table_get_value (engine->gvdbs[i], key);
+      i++;
+    }
 
   g_static_mutex_unlock (&engine->lock);
 
