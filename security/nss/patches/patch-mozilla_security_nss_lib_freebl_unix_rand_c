$OpenBSD: patch-mozilla_security_nss_lib_freebl_unix_rand_c,v 1.3 2008/02/12 23:26:31 martynas Exp $
--- mozilla/security/nss/lib/freebl/unix_rand.c.orig	Thu Jul 26 02:18:55 2007
+++ mozilla/security/nss/lib/freebl/unix_rand.c	Wed Feb 13 01:23:57 2008
@@ -866,7 +866,8 @@ safe_pclose(FILE *fp)
     /* if the child hasn't exited, kill it -- we're done with its output */
     while ((rv = waitpid(pid, &status, WNOHANG)) == -1 && errno == EINTR)
 	;
-    if (rv == 0 && kill(pid, SIGKILL) == 0) {
+    if (rv == 0) {
+	kill(pid, SIGKILL);
 	while ((rv = waitpid(pid, &status, 0)) == -1 && errno == EINTR)
 	    ;
     }
@@ -887,7 +888,6 @@ safe_pclose(FILE *fp)
 /* Fork netstat to collect its output by default. Do not unset this unless
  * another source of entropy is available
  */
-#define DO_NETSTAT 1
 
 void RNG_SystemInfoForRNG(void)
 {
