$OpenBSD: patch-flow_gsl_gslcommon_c,v 1.1.1.1 2002/03/23 14:57:58 espie Exp $
--- flow/gsl/gslcommon.c.orig	Tue Mar  5 16:15:55 2002
+++ flow/gsl/gslcommon.c	Tue Mar  5 16:17:12 2002
@@ -858,7 +858,9 @@ gsl_mutex_spin_lock (GslMutex *mutex)
       /* on uni processor systems, there's no point in busy spinning */
       do
 	{
+#ifdef _POSIX_PRIORITY_SCHEDULING
 	  sched_yield ();
+#endif
 	  if (g_mutex_trylock (mutex->mutex_pointer))
 	    return;
 	}
@@ -887,7 +889,9 @@ gsl_mutex_sync_lock (GslMutex *mutex)
     return;
 
   /* already locked, share processor */
+#ifdef _POSIX_PRIORITY_SCHEDULING
   sched_yield ();
+#endif
 
   /* sharing didn't help, perform lengthy wait in mutex_lock() */
   g_mutex_lock (mutex->mutex_pointer);
