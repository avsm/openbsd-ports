$OpenBSD: patch-Makefile,v 1.2 2005/07/08 17:57:27 jolan Exp $
--- Makefile.orig	Mon May 30 12:54:49 2005
+++ Makefile	Thu Jul  7 23:41:21 2005
@@ -8,17 +8,21 @@ V= 1.1
 DIST_DIR= luafilesystem-$V
 TAR_FILE= $(DIST_DIR).tar.gz
 ZIP_FILE= $(DIST_DIR).zip
-LIBNAME= lib$T.$V.so
+LIBNAME= libfs.so
 
 COMPAT_O= $(COMPAT_DIR)/compat-5.1.o
 SRCS= src/$T.c
-OBJS= src/$T.o $(COMPAT_O)
+OBJS= src/$T.o
 
+all: lib
 
 lib: src/$(LIBNAME)
 
 src/$(LIBNAME): $(OBJS)
 	$(CC) $(CFLAGS) $(LIBS) $(LIB_OPTION) -o src/$(LIBNAME) $(OBJS)
+
+$(OBJS): $(SRCS)
+	$(CC) -c $(CFLAGS) -o $@ src/lfs.c
 
 $(COMPAT_O): $(COMPAT_DIR)/compat-5.1.c
 	$(CC) -c $(CFLAGS) -o $@ $(COMPAT_DIR)/compat-5.1.c
