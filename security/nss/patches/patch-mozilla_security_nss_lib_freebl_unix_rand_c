$OpenBSD: patch-mozilla_security_nss_lib_freebl_unix_rand_c,v 1.2 2007/08/01 21:16:10 kurt Exp $
--- mozilla/security/nss/lib/freebl/unix_rand.c.orig	Wed Feb 14 20:48:36 2007
+++ mozilla/security/nss/lib/freebl/unix_rand.c	Wed Jul 25 12:51:08 2007
@@ -859,7 +859,8 @@ safe_pclose(FILE *fp)
     /* if the child hasn't exited, kill it -- we're done with its output */
     while ((rv = waitpid(pid, &status, WNOHANG)) == -1 && errno == EINTR)
 	;
-    if (rv == 0 && kill(pid, SIGKILL) == 0) {
+    if (rv == 0) {
+	kill(pid, SIGKILL);
 	while ((rv = waitpid(pid, &status, 0)) == -1 && errno == EINTR)
 	    ;
     }
@@ -880,7 +881,6 @@ safe_pclose(FILE *fp)
 /* Fork netstat to collect its output by default. Do not unset this unless
  * another source of entropy is available
  */
-#define DO_NETSTAT 1
 
 void RNG_SystemInfoForRNG(void)
 {
