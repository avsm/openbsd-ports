$OpenBSD: patch-configure_ac,v 1.1 2011/07/12 09:25:32 ajacoutot Exp $

https://bugzilla.gnome.org/show_bug.cgi?id=654444

--- configure.ac.orig	Mon May 23 17:06:26 2011
+++ configure.ac	Tue Jul 12 10:33:07 2011
@@ -185,15 +185,6 @@ AM_CPPFLAGS="$WARNING_FLAGS -fno-strict-aliasing"
 AC_SUBST(AM_CPPFLAGS)
 
 
-case "$host" in
-*openbsd*|*freebsd*)
-	dnl Do not set '-Wl,--no-undefined' on freebsd/openbsd
-	;;
-*)
-	LDFLAGS="$LDFLAGS -Wl,--no-undefined"
-	;;
-esac
-
 dnl ******************************
 dnl Initialize maintainer mode
 dnl ******************************
@@ -265,6 +256,15 @@ dnl Gtk Doc stuff
 dnl ******************************
 GTK_DOC_CHECK(1.9)
 
+case "$host" in
+*openbsd*|*freebsd*)
+	dnl Do not set '-Wl,--no-undefined' on freebsd/openbsd
+	;;
+*)
+	LDFLAGS="$LDFLAGS -Wl,--no-undefined"
+;;
+esac
+
 dnl ******************************
 dnl Check for Win32
 dnl ******************************
@@ -278,6 +278,13 @@ case "$host" in
 	LIBEXECDIR_IN_SERVER_FILE='../../../libexec'
 	AC_CACHE_VAL(ac_cv_have_addrinfo, [ac_cv_have_addrinfo=yes])
 	AC_DEFINE(_WIN32_WINNT, 0x501, [To get getaddrinfo etc declarations])
+	;;
+*openbsd*|*freebsd*)
+	os_win32='no'
+	NO_UNDEFINED=''
+	SOCKET_LIBS=''
+	DL_LIB=''
+	LIBEXECDIR_IN_SERVER_FILE="$libexecdir"
 	;;
 *)
 	os_win32='no'
