$OpenBSD: patch-src_Makefile,v 1.1 2003/09/26 17:57:38 marcm Exp $
--- src/Makefile.orig	2003-09-18 03:33:18.000000000 -0700
+++ src/Makefile	2003-09-26 10:41:57.000000000 -0700
@@ -16,7 +16,7 @@ NULL = /dev/null
 CPPFLAGS = -E
 CFLAGS = -c -Wall -O2 -fomit-frame-pointer
 ASFLAGS = -c
-LDFLAGS = -s
+LDFLAGS = -s -lm
 OPT_NORMAL = -funroll-loops
 OPT_INLINE = -finline-functions
 
@@ -183,7 +183,7 @@ openbsd-x86-any:
 	$(LN) x86-any.h arch.h
 	$(MAKE) $(PROJ) \
 		JOHN_OBJS="$(JOHN_OBJS) x86.o" \
-		ASFLAGS="$(ASFLAGS) -DUNDERSCORES -DALIGN_LOG -DBSD"
+		ASFLAGS="$(ASFLAGS) -DBSD"
 
 openbsd-sparc:
 	$(MAKE) use-openbsd-sparc HAMMER=use-openbsd-sparc NAIL=sparc.h
@@ -194,7 +194,7 @@ use-openbsd-sparc:
 	$(MAKE) $(NAIL) \
 		BENCH_DES_OBJS_DEPEND="$(BENCH_DES_OBJS_ORIG) sparc.o" \
 		JOHN_OBJS="$(JOHN_OBJS_ORIG) sparc.o" \
-		ASFLAGS="-c -DUNDERSCORES -DBSD"
+		ASFLAGS="-c -DBSD"
 
 openbsd-vax:
 	$(LN) vax.h arch.h
