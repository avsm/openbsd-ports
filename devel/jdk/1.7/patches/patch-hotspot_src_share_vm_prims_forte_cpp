$OpenBSD: patch-hotspot_src_share_vm_prims_forte_cpp,v 1.1 2009/05/23 03:03:25 kurt Exp $
--- hotspot/src/share/vm/prims/forte.cpp.orig	Sat May 16 17:05:01 2009
+++ hotspot/src/share/vm/prims/forte.cpp	Sat May 16 17:05:10 2009
@@ -626,6 +626,11 @@ void AsyncGetCallTrace(ASGCT_CallTrace *trace, jint de
 // Method to let libcollector know about a dynamically loaded function.
 // Because it is weakly bound, the calls become NOP's when the library
 // isn't present.
+#ifdef __APPLE__
+// XXXDARWIN: Link errors occur even when __attribute__((weak_import))
+// is added
+#define collector_func_load(x0,x1,x2,x3,x4,x5,x6) (0)
+#else
 void    collector_func_load(char* name,
                             void* null_argument_1,
                             void* null_argument_2,
@@ -636,6 +641,7 @@ void    collector_func_load(char* name,
 #pragma weak collector_func_load
 #define collector_func_load(x0,x1,x2,x3,x4,x5,x6) \
         ( collector_func_load ? collector_func_load(x0,x1,x2,x3,x4,x5,x6),0 : 0 )
+#endif // __APPLE__
 #endif // !_WINDOWS
 
 } // end extern "C"
