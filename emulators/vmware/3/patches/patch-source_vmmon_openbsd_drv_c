$OpenBSD: patch-source_vmmon_openbsd_drv_c,v 1.4 2007/05/31 20:31:36 aanriot Exp $
--- source/vmmon/openbsd/drv.c.orig	Sun Mar 14 14:58:50 2004
+++ source/vmmon/openbsd/drv.c	Wed May 30 22:53:16 2007
@@ -414,6 +414,7 @@ vmmon_fake_clonedev(dev_t dev, int flag, struct proc *
 #endif 
 
 	p->p_dupfd = fd;
+	p->p_descfd = p->p_dupfd;	/* XXX */
 
 	return ENXIO;
 }
@@ -436,6 +437,7 @@ vmmon_alloc_low_pages(struct vmx86_softc *vmxsc, unsig
 	int error, n;
 	extern paddr_t avail_end;
 	struct rmem_pgrange *pgrp;
+#if !defined(__OpenBSD__)
 #if 0
 #define ISA_DMA_BOUNCE_THRESHOLD (16UL * 1024 * 1024)
 #else
@@ -445,6 +447,7 @@ vmmon_alloc_low_pages(struct vmx86_softc *vmxsc, unsig
 	 * So just use any pages we can get.
 	 */
 #define ISA_DMA_BOUNCE_THRESHOLD (3072UL * 1024 * 1024)
+#endif
 #endif
 
 	if (numPages == 0)
