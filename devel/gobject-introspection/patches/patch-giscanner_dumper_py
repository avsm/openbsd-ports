$OpenBSD: patch-giscanner_dumper_py,v 1.1.1.1 2009/09/24 20:08:09 jasper Exp $

Make g-ir-scanner 64-bit enable. 
GNOME Bugzilla #593639.

--- giscanner/dumper.py.orig	Thu Sep 24 20:01:20 2009
+++ giscanner/dumper.py	Thu Sep 24 20:03:12 2009
@@ -155,6 +155,10 @@ class DumpCompiler(object):
             args.append('-I' + os.path.join(self._uninst_srcdir,
                                                'girepository'))
         args.extend(pkgconfig_flags)
+        cflags = os.environ.get('CFLAGS')
+        if (cflags):
+            for iflag in cflags.split():
+                args.append(iflag)
         for include in self._options.cpp_includes:
             args.append('-I' + include)
         args.extend(['-c', '-o', output])
@@ -175,6 +179,11 @@ class DumpCompiler(object):
             args.append('--silent')
 
         args.extend([self._linker_cmd, '-o', output])
+
+        cflags = os.environ.get('CFLAGS')
+        if (cflags):
+            for iflag in cflags.split():
+                args.append(iflag)
 
         # Make sure to list the library to be introspected first since it's
         # likely to be uninstalled yet and we want the uninstalled RPATHs have
