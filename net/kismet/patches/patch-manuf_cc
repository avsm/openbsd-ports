$OpenBSD: patch-manuf_cc,v 1.1 2006/11/01 21:13:20 kili Exp $

# From upstream SVN.

--- manuf.cc.orig	Wed Jan 14 03:18:32 2004
+++ manuf.cc	Fri Oct 20 15:38:06 2006
@@ -48,8 +48,8 @@ macmap<vector<manuf *> > ReadManufMap(FI
     // Read from the file
     char dline[8192];
     while (!feof(in_file)) {
-        fgets(dline, 8192, in_file);
-        if (feof(in_file)) break;
+        if (fgets(dline, 8192, in_file) == NULL ||
+	    feof(in_file)) break;
 
         linenum++;
 
