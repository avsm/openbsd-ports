$OpenBSD: patch-src_proxy_c,v 1.8 2005/02/27 06:52:22 brad Exp $
--- src/proxy.c.orig	Sun Feb 20 15:16:54 2005
+++ src/proxy.c	Sat Feb 26 23:01:08 2005
@@ -319,7 +319,7 @@ static void host_resolved(gpointer data,
 	int rc, err;
 	GSList *hosts = NULL;
 	struct sockaddr *addr = NULL;
-	size_t addrlen;
+	socklen_t addrlen;
 
 	gaim_debug(GAIM_DEBUG_INFO, "dns", "Host '%s' resolved\n", req->host);
 	gaim_input_remove(req->inpa);
@@ -387,7 +387,7 @@ static void trap_gdb_bug()
 	fputs("\n* * *\n",stderr);
 	fputs(message,stderr);
 	fputs("* * *\n\n",stderr);
-	execlp("xmessage","xmessage","-center", message, NULL);
+	execlp("xmessage","xmessage","-center", message, (void *)NULL);
 	_exit(1);
 }
 
@@ -428,7 +428,7 @@ gaim_dns_childthread(int child_out, int 
 	char servname[20];
 #else
 	struct sockaddr_in sin;
-	const size_t addrlen = sizeof(sin);
+	const socklen_t addrlen = sizeof(sin);
 #endif
 
 #ifdef HAVE_SIGNAL_H
@@ -494,8 +494,7 @@ gaim_dns_childthread(int child_out, int 
 		write(child_out, &zero, sizeof(zero));
 		tmp = res;
 		while(res) {
-			size_t ai_addrlen = res->ai_addrlen;
-			write(child_out, &ai_addrlen, sizeof(ai_addrlen));
+			write(child_out, &(res->ai_addrlen), sizeof(res->ai_addrlen));
 			write(child_out, res->ai_addr, res->ai_addrlen);
 			res = res->ai_next;
 		}
