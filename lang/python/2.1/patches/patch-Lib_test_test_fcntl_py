$OpenBSD: patch-Lib_test_test_fcntl_py,v 1.3 2003/12/30 17:05:30 sturm Exp $

        This has been submitted to the Python team as part of patch
        554718.

--- Lib/test/test_fcntl.py.orig	2001-04-11 22:58:20.000000000 +0200
+++ Lib/test/test_fcntl.py	2003-12-29 20:22:46.000000000 +0100
@@ -18,9 +18,13 @@ if verbose:
 
 if sys.platform in ('netbsd1', 'Darwin1.2', 'darwin1',
                     'freebsd2', 'freebsd3', 'freebsd4', 'freebsd5',
-                    'bsdos2', 'bsdos3', 'bsdos4',
-                    'openbsd', 'openbsd2'):
+                    'bsdos2', 'bsdos3', 'bsdos4'):
     lockdata = struct.pack('lxxxxlxxxxlhh', 0, 0, 0, FCNTL.F_WRLCK, 0)
+elif sys.platform in ['openbsd', 'openbsd2', 'openbsd3']:
+    if sys.maxint == '2147483647':
+        lockdata = struct.pack('lxxxxlxxxxlhh', 0, 0, 0, FCNTL.F_WRLCK, 0)
+    else:
+        lockdata = struct.pack('ixxxxixxxxihh', 0, 0, 0, FCNTL.F_WRLCK, 0)
 elif sys.platform in ['aix3', 'aix4', 'hp-uxB', 'unixware7']:
     lockdata = struct.pack('hhlllii', FCNTL.F_WRLCK, 0, 0, 0, 0, 0, 0)
 else:
