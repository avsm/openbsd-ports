$OpenBSD: patch-config_h,v 1.2 2011/06/24 07:55:18 dcoppa Exp $
--- config.h.orig	Mon Aug  9 14:22:42 2010
+++ config.h	Fri Jun 17 15:48:19 2011
@@ -268,7 +268,7 @@ NAMESPACE_END
 
 	// SSSE3 was actually introduced in GNU as 2.17, which was released 6/23/2006, but we can't tell what version of binutils is installed.
 	// GCC 4.1.2 was released on 2/13/2007, so we'll use that as a proxy for the binutils version.
-	#if !defined(CRYPTOPP_DISABLE_SSSE3) && (_MSC_VER >= 1400 || CRYPTOPP_GCC_VERSION >= 40102)
+	#if !defined(CRYPTOPP_DISABLE_SSSE3) && (defined(_MSC_VER) && _MSC_VER >= 1400 || CRYPTOPP_GCC_VERSION >= 40102)
 		#define CRYPTOPP_BOOL_SSSE3_ASM_AVAILABLE 1
 	#else
 		#define CRYPTOPP_BOOL_SSSE3_ASM_AVAILABLE 0
@@ -289,13 +289,13 @@ NAMESPACE_END
 	#define CRYPTOPP_BOOL_SSE2_INTRINSICS_AVAILABLE 0
 #endif
 
-#if !defined(CRYPTOPP_DISABLE_SSSE3) && !defined(CRYPTOPP_DISABLE_AESNI) && CRYPTOPP_BOOL_SSE2_INTRINSICS_AVAILABLE && (CRYPTOPP_GCC_VERSION >= 40400 || _MSC_FULL_VER >= 150030729 || __INTEL_COMPILER >= 1110)
+#if !defined(CRYPTOPP_DISABLE_SSSE3) && !defined(CRYPTOPP_DISABLE_AESNI) && CRYPTOPP_BOOL_SSE2_INTRINSICS_AVAILABLE && (CRYPTOPP_GCC_VERSION >= 40400 || (defined(_MSC_FULL_VER) && _MSC_FULL_VER >= 150030729) || (defined(__INTEL_COMPILER) && __INTEL_COMPILER >= 1110))
 	#define CRYPTOPP_BOOL_AESNI_INTRINSICS_AVAILABLE 1
 #else
 	#define CRYPTOPP_BOOL_AESNI_INTRINSICS_AVAILABLE 0
 #endif
 
-#if CRYPTOPP_BOOL_SSE2_INTRINSICS_AVAILABLE || CRYPTOPP_BOOL_SSE2_ASM_AVAILABLE || defined(CRYPTOPP_X64_MASM_AVAILABLE)
+#if CRYPTOPP_BOOL_SSE2_INTRINSICS_AVAILABLE || defined(CRYPTOPP_BOOL_SSE2_ASM_AVAILABLE) && CRYPTOPP_BOOL_SSE2_ASM_AVAILABLE || defined(CRYPTOPP_X64_MASM_AVAILABLE)
 	#define CRYPTOPP_BOOL_ALIGN16_ENABLED 1
 #else
 	#define CRYPTOPP_BOOL_ALIGN16_ENABLED 0
