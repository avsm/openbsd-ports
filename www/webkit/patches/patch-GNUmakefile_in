$OpenBSD: patch-GNUmakefile_in,v 1.10 2011/05/11 06:00:08 ajacoutot Exp $
install GtkLauncher, remove silent build lines, fix lpthread/pthread
--- GNUmakefile.in.orig	Tue Apr 26 03:30:49 2011
+++ GNUmakefile.in	Sat May  7 10:00:31 2011
@@ -78,9 +78,9 @@ POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
 bin_PROGRAMS = Programs/jsc-@WEBKITGTK_API_MAJOR_VERSION@$(EXEEXT) \
-	$(am__EXEEXT_1)
+	$(am__EXEEXT_1) Programs/GtkLauncher$(EXEEXT)
 noinst_PROGRAMS = Programs/jsc$(EXEEXT) Programs/minidom$(EXEEXT) \
-	$(am__EXEEXT_4)
+	$(am__EXEEXT_4) Programs/GtkLauncher$(EXEEXT)
 
 # For the Gtk port we want to use XP_UNIX both in X11 and Mac
 @TARGET_WIN32_FALSE@am__append_1 = \
@@ -15085,7 +15085,7 @@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 AM_V_CC = $(am__v_CC_$(V))
 am__v_CC_ = $(am__v_CC_$(AM_DEFAULT_VERBOSITY))
-am__v_CC_0 = @echo "  CC    " $@;
+am__v_CC_0 =
 AM_V_at = $(am__v_at_$(V))
 am__v_at_ = $(am__v_at_$(AM_DEFAULT_VERBOSITY))
 am__v_at_0 = @
@@ -15095,22 +15095,22 @@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
 	$(AM_LDFLAGS) $(LDFLAGS) -o $@
 AM_V_CCLD = $(am__v_CCLD_$(V))
 am__v_CCLD_ = $(am__v_CCLD_$(AM_DEFAULT_VERBOSITY))
-am__v_CCLD_0 = @echo "  CCLD  " $@;
+am__v_CCLD_0 =
 CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
 AM_V_CXX = $(am__v_CXX_$(V))
 am__v_CXX_ = $(am__v_CXX_$(AM_DEFAULT_VERBOSITY))
-am__v_CXX_0 = @echo "  CXX   " $@;
+am__v_CXX_0 =
 CXXLD = $(CXX)
 CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CXXLD) $(AM_CXXFLAGS) \
 	$(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
 AM_V_CXXLD = $(am__v_CXXLD_$(V))
 am__v_CXXLD_ = $(am__v_CXXLD_$(AM_DEFAULT_VERBOSITY))
-am__v_CXXLD_0 = @echo "  CXXLD " $@;
+am__v_CXXLD_0 =
 AM_V_GEN = $(am__v_GEN_$(V))
 am__v_GEN_ = $(am__v_GEN_$(AM_DEFAULT_VERBOSITY))
-am__v_GEN_0 = @echo "  GEN   " $@;
+am__v_GEN_0 =
 SOURCES = $(TestNetscapePlugin_libtestnetscapeplugin_la_SOURCES) \
 	$(libJavaScriptCore_la_SOURCES) \
 	$(nodist_libJavaScriptCore_la_SOURCES) \
@@ -20126,9 +20126,10 @@ libJavaScriptCore_la_SOURCES = \
 
 libJavaScriptCore_la_LIBADD = \
 	$(UNICODE_LIBS) \
-	$(GLIB_LIBS) \
-	-lpthread
+	$(GLIB_LIBS)
 
+libJavaScriptCore_la_LDFLAGS = -pthread
+
 libJavaScriptCore_la_CXXFLAGS = \
 	$(global_cxxflags) \
 	$(libJavaScriptCore_la_CFLAGS)
@@ -20171,7 +20172,7 @@ Programs_minidom_LDADD = \
 	 libJavaScriptCore.la \
 	 $(WINMM_LIBS) \
 	 -lm \
-	 -lstdc++
+	 -l${STDCPPLIB}
 
 Programs_minidom_LDFLAGS = \
 	-no-install \
@@ -21233,12 +21234,13 @@ dist_webresources_DATA = \
 @ENABLE_WEBKIT2_FALSE@	$(XT_CFLAGS)
 
 @ENABLE_WEBKIT2_FALSE@libwebkitgtk_@WEBKITGTK_API_MAJOR_VERSION@_@WEBKITGTK_API_MINOR_VERSION@_la_LDFLAGS = \
+@ENABLE_WEBKIT2_FALSE@	-pthread \
 @ENABLE_WEBKIT2_FALSE@	-version-info @LIBWEBKITGTK_VERSION@ \
 @ENABLE_WEBKIT2_FALSE@	$(version_script) \
 @ENABLE_WEBKIT2_FALSE@	$(no_undefined)
 
 @ENABLE_WEBKIT2_FALSE@libwebkitgtk_@WEBKITGTK_API_MAJOR_VERSION@_@WEBKITGTK_API_MINOR_VERSION@_la_LIBADD = \
-@ENABLE_WEBKIT2_FALSE@	-lpthread \
+@ENABLE_WEBKIT2_FALSE@	-pthread \
 @ENABLE_WEBKIT2_FALSE@	libWebCore.la \
 @ENABLE_WEBKIT2_FALSE@	libJavaScriptCore.la \
 @ENABLE_WEBKIT2_FALSE@	$(webcore_ldflags) \
