$OpenBSD: patch-gnome-session_gsm-dbus-client_c,v 1.2 2010/10/26 17:20:28 ajacoutot Exp $

dbus_message_get_path() can return NULL

--- gnome-session/gsm-dbus-client.c.orig	Tue Oct 26 19:10:23 2010
+++ gnome-session/gsm-dbus-client.c	Tue Oct 26 19:11:41 2010
@@ -215,10 +215,11 @@ client_dbus_filter_function (DBusConnection *connectio
 
         path = dbus_message_get_path (message);
 #ifdef GNOME_ENABLE_DEBUG
-        g_debug ("GsmDBusClient: obj_path=%s interface=%s method=%s",
-                 dbus_message_get_path (message),
-                 dbus_message_get_interface (message),
-                 dbus_message_get_member (message));
+        if (path != NULL)
+            g_debug ("GsmDBusClient: obj_path=%s interface=%s method=%s",
+                     dbus_message_get_path (message),
+                     dbus_message_get_interface (message),
+                     dbus_message_get_member (message));
 #endif
         if (dbus_message_is_method_call (message, SM_DBUS_CLIENT_PRIVATE_INTERFACE, "EndSessionResponse")) {
                 g_assert (gsm_client_peek_id (GSM_CLIENT (client)) != NULL);
