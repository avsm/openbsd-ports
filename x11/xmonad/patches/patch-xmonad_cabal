$OpenBSD: patch-xmonad_cabal,v 1.3 2008/04/16 21:00:56 kili Exp $
--- xmonad.cabal.orig	Sat Mar 29 21:59:44 2008
+++ xmonad.cabal	Mon Mar 31 23:12:04 2008
@@ -20,58 +20,29 @@ maintainer:         xmonad@haskell.org
 extra-source-files: README TODO CONFIG STYLE tests/loc.hs tests/Properties.hs
                     man/xmonad.1.in man/xmonad.1 man/xmonad.html man/xmonad.hs
                     util/GenerateManpage.hs
-cabal-version:      >= 1.2
-build-type:         Simple
+build-depends: base < 3, X11>=1.2.1, X11-extras>=0.4, mtl, unix
+exposed-modules:    XMonad
+                    XMonad.Main
+                    XMonad.Core
+                    XMonad.Config
+                    XMonad.Layout
+                    XMonad.ManageHook
+                    XMonad.Operations
+                    XMonad.StackSet
+ghc-options:        -funbox-strict-fields -Wall -optl-Wl,-s
+ghc-prof-options:   -prof -auto-all
+extensions:         CPP
 
-flag small_base
-    description: Choose the new smaller, split-up base package.
-
-flag testing
-    description: Testing mode, only build minimal components
-    default: False
-
-library
-    exposed-modules:    XMonad
-                        XMonad.Main
-                        XMonad.Core
-                        XMonad.Config
-                        XMonad.Layout
-                        XMonad.ManageHook
-                        XMonad.Operations
-                        XMonad.StackSet
-
-    if flag(small_base)
-        build-depends: base >= 3, containers, directory, process
-    else
-        build-depends: base < 3
-    build-depends: X11>=1.4.1, mtl, unix
-
-    ghc-options:        -funbox-strict-fields -Wall -optl-Wl,-s
-    ghc-prof-options:   -prof -auto-all
-    extensions:         CPP
-
-    if flag(testing)
-        buildable: False
-
-executable xmonad
-    main-is:            Main.hs
-    other-modules:      XMonad
-                        XMonad.Main
-                        XMonad.Core
-                        XMonad.Config
-                        XMonad.Layout
-                        XMonad.ManageHook
-                        XMonad.Operations
-                        XMonad.StackSet
-
-    ghc-options:        -funbox-strict-fields -Wall -optl-Wl,-s
-    ghc-prof-options:   -prof -auto-all
-    extensions:         CPP
-
-    if flag(testing)
-        cpp-options:    -DTESTING
-        hs-source-dirs: . tests/
-        build-depends:  QuickCheck < 2
-        ghc-options:    -Werror
-    if flag(testing) && flag(small_base)
-        build-depends:  random
+executable:         xmonad
+main-is:            Main.hs
+other-modules:      XMonad
+                    XMonad.Main
+                    XMonad.Core
+                    XMonad.Config
+                    XMonad.Layout
+                    XMonad.ManageHook
+                    XMonad.Operations
+                    XMonad.StackSet
+ghc-options:        -funbox-strict-fields -Wall -optl-Wl,-s
+ghc-prof-options:   -prof -auto-all
+extensions:         CPP
