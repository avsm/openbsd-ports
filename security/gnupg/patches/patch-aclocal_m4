$OpenBSD: patch-aclocal_m4,v 1.2 2003/05/27 14:54:43 brad Exp $
--- aclocal.m4.orig	Thu May  1 08:34:09 2003
+++ aclocal.m4	Tue May 13 14:38:17 2003
@@ -247,13 +247,6 @@ define(GNUPG_CHECK_PIC,
             esac
         fi
 
-        case "$host_cpu" in
-        rs6000 | powerpc | powerpcle)
-          # Yippee! All RS/6000 and PowerPC code is position-independent.
-          CFLAGS_PIC=""
-          ;;
-        esac
-
         if test "$NO_PIC" = yes; then
             AC_MSG_RESULT(not possible)
         else
@@ -583,8 +576,8 @@ changequote([,])dnl
     fi
 
     # Make sure that we snagged all the symbols we need.
-    if egrep ' _?nm_test_var$' "$ac_nlist" >/dev/null; then
-      if egrep ' _?nm_test_func$' "$ac_nlist" >/dev/null; then
+    if egrep ' nm_test_var$' "$ac_nlist" >/dev/null; then
+      if egrep ' nm_test_func$' "$ac_nlist" >/dev/null; then
         cat <<EOF > conftest.c
 #ifdef __cplusplus
 extern "C" {
@@ -592,7 +585,7 @@ extern "C" {
 
 EOF
         # Now generate the symbol file.
-        sed 's/^.* _\?\(.*\)$/extern char \1;/' < "$ac_nlist" >> conftest.c
+        sed 's/^.* \(.*\)$/extern char \1;/' < "$ac_nlist" >> conftest.c
 
         cat <<EOF >> conftest.c
 #if defined (__STDC__) && __STDC__
@@ -614,7 +607,7 @@ dld_preloaded_symbols[] =
 changequote([,])dnl
 {
 EOF
-        sed 's/^_\?\(.*\) _\?\(.*\)$/  {"\1", (__ptr_t) \&\2},/' < "$ac_nlist" >> conftest.c
+        sed 's/^\(.*\) \(.*\)$/  {"\1", (__ptr_t) \&\2},/' < "$ac_nlist" >> conftest.c
         cat <<\EOF >> conftest.c
   {0, (__ptr_t) 0}
 };
@@ -830,7 +823,7 @@ fi])])
 # CC etc. in the Makefile, will ask for an AC_PROG_CC use...
 
 
-AC_PREREQ([2.54])
+AC_PREREQ([2.52])
 
 # Autoconf 2.50 wants to disallow AM_ names.  We explicitly allow
 # the ones we care about.
