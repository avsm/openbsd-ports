$OpenBSD: patch-jdk_src_solaris_classes_sun_print_UnixPrintServiceLookup_java,v 1.2 2009/05/23 03:03:25 kurt Exp $
--- jdk/src/solaris/classes/sun/print/UnixPrintServiceLookup.java.orig	Fri May  8 03:35:06 2009
+++ jdk/src/solaris/classes/sun/print/UnixPrintServiceLookup.java	Mon May 18 16:49:44 2009
@@ -119,7 +119,11 @@ public class UnixPrintServiceLookup extends PrintServi
     }
 
     static boolean isBSD() {
-        return osname.equals("Linux");
+	return (osname.equals("Linux") ||
+		osname.equals("FreeBSD") ||
+		osname.equals("Darwin") ||
+		osname.equals("NetBSD") ||
+		osname.equals("OpenBSD"));
     }
 
     static final int UNINITIALIZED = -1;
@@ -134,8 +138,8 @@ public class UnixPrintServiceLookup extends PrintServi
     };
 
     String[] lpcAllCom = {
-        "/usr/sbin/lpc status | grep : | sed -e 's/://'",
-        "/usr/sbin/lpc -a status | grep -E '^[ 0-9a-zA-Z_-]*@' | awk -F'@' '{print $1}' | sort"
+        "/usr/sbin/lpc status all | grep : | sed -e 's/://'",
+        "/usr/sbin/lpc status all | grep -E '^[ 0-9a-zA-Z_-]*@' | awk -F'@' '{print $1}' | sort"
     };
 
     String[] lpcNameCom = {
@@ -145,7 +149,7 @@ public class UnixPrintServiceLookup extends PrintServi
 
 
     static int getBSDCommandIndex() {
-        String command  = "/usr/sbin/lpc status";
+        String command  = "/usr/sbin/lpc status all";
         String[] names = execCmd(command);
 
         if ((names == null) || (names.length == 0)) {
