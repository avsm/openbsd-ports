$OpenBSD: patch-get_table_cc,v 1.2 2002/08/10 20:10:24 wilfried Exp $
--- get_table.cc.orig	Wed Apr 11 21:12:25 2001
+++ get_table.cc	Fri Aug  9 16:37:28 2002
@@ -1,9 +1,9 @@
 // generated by Fast Light User Interface Designer (fluid) version 1.00
 #include <FL/Fl_Menu_.H>
 #include "get_table.h"
-#include <sqlplus.hh>
 #include "client.h"
 #include <FL/Fl_Pixmap.H>
+#include <sqlplus.hh>
 extern  char *image_mysql_do_sql[]; extern char *pass;
 
 static Fl_Pixmap pixmap_mysql_do_sql(image_mysql_do_sql);
@@ -12,7 +12,7 @@ class Tables {
 	Fl_Window *password;
 	Fl_Menu_Item *korisnici; vector <string> tables;
 	void cb_password(void) {
-		password->hide(); delete password;
+		password->hide(); delete password; password=0;
 	}
 	static void s_cb_password(Fl_Window*, void*s) {
 		Tables *P=(Tables *)s;
@@ -22,7 +22,7 @@ class Tables {
 
 	void cb_b_OK(void) {
 		chosen_table =  (string)korisnici[choice_user->value()].text;
-		password->hide(); delete password;
+		password->hide(); delete password; password=0;
 	}
 
 	static void s_cb_b_OK(Fl_Return_Button*, void*s) {
@@ -31,7 +31,7 @@ class Tables {
 	}
 
 	void cb_b_cancel() {
-		chosen_table=(string)"No string"; password->hide(); delete password;
+		chosen_table=(string)"No string"; password->hide(); delete password; password=0;
 	}
 	static void s_cb_b_cancel(Fl_Button*, void* s) {
 		Tables *P=(Tables *)s;
@@ -89,7 +89,7 @@ public:
       o->box(FL_ROUND_UP_BOX); o->down_box(FL_ROUND_DOWN_BOX); o->shortcut(0xff1b); o->labeltype(FL_ENGRAVED_LABEL);
       o->labelfont(8); o->labelsize(18);  o->labelcolor(177); o->user_data(this); o->callback((Fl_Callback*)s_cb_b_cancel); o->align(FL_ALIGN_CENTER|FL_ALIGN_INSIDE);
     }
-    w->end(); w->show(); while (w->visible()) Fl::wait();
+    w->end(); w->show(); while (password && w->visible()) Fl::wait();
   }
 };
 
