$OpenBSD: patch-src_tools_qsettings_unix_cpp,v 1.2 2002/10/26 11:45:52 espie Exp $
--- src/tools/qsettings_unix.cpp.orig	Thu Oct 17 17:08:57 2002
+++ src/tools/qsettings_unix.cpp	Thu Oct 24 12:13:00 2002
@@ -218,6 +218,8 @@ static int openlock( const QString &name
 	return fd;
     }
 
+    if (fd == -1)
+	return fd;
     struct flock fl;
     fl.l_type = type;
     fl.l_whence = SEEK_SET;
