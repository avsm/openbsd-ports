$OpenBSD: patch-configure,v 1.16 2008/06/18 01:26:41 brad Exp $
--- configure.orig	Sat Jun 14 19:16:03 2008
+++ configure	Mon Jun 16 02:30:50 2008
@@ -24350,6 +24350,9 @@ _ACEOF
 fi
 done
 
+LIBICONV=$LTLIBICONV
+LIBINTL=$LTLIBINTL
+INTLLIBS=$LTLIBINTL
 
 
 { echo "$as_me:$LINENO: checking whether byte ordering is bigendian" >&5
@@ -30687,13 +30690,13 @@ t q
 b
 :q
 q"
-x_lib_location="`ls -1 "${x_libraries:-/usr/local/lib}/libX11.so"* "${x_libraries:-/usr/lib}/libX11.so"* 2>/dev/null | sed -e \"${soname_script}\"`"
+x_lib_location="`ls -1 "${x_libraries:-/usr/local/lib}/libX11.so"* "${x_libraries:-/usr/lib}/libX11.so"* 2>/dev/null | sed 1q`"
 
 cat >>confdefs.h <<_ACEOF
 #define LIBX11_SO "${x_lib_location:-libX11.so}"
 _ACEOF
 
-x_lib_location="`ls -1 "${x_libraries:-/usr/local/lib}/libXv.so"*  "${x_libraries:-/usr/lib}/libXv.so"*  2>/dev/null | sed -e \"${soname_script}\"`"
+x_lib_location="`ls -1 "${x_libraries:-/usr/local/lib}/libXv.so"*  "${x_libraries:-/usr/lib}/libXv.so"*  2>/dev/null | sed 1q`"
 
 cat >>confdefs.h <<_ACEOF
 #define LIBXV_SO "${x_lib_location:-libXv.so}"
@@ -37541,7 +37544,7 @@ fi
     LIBFLAC_LIBS="-L$prefix/$XINE_LIBNAME"
   fi
 
-  LIBFLAC_LIBS="$LIBFLAC_LIBS -lFLAC -lm"
+  LIBFLAC_LIBS="$LIBFLAC_LIBS -lFLAC -logg -lm"
 
   if test "x$libFLAC_includes" != "x" ; then
     LIBFLAC_CFLAGS="-I$libFLAC_includes"
@@ -37790,7 +37793,7 @@ elif test "x$external_a52dec" = "xyes"; then
   have_a52="yes"
 
 
-for ac_header in a52dec/a52.h a52dec/a52_internal.h
+for ac_header in a52dec/a52.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 { echo "$as_me:$LINENO: checking for $ac_header" >&5
@@ -37929,7 +37932,7 @@ if test $ac_cv_lib_a52_a52_init = yes; then
 #define HAVE_LIBA52 1
 _ACEOF
 
-  LIBS="-la52 $LIBS"
+  LIBS="-la52 -lm $LIBS"
 
 else
   have_a52="no"
@@ -38495,7 +38498,7 @@ if test "${ac_cv_lib_mng_mng_initialize+set}" = set; t
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lmng  $LIBS"
+LIBS="-lmng -llcms -ljpeg -lz -lm $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -38678,7 +38681,7 @@ echo "${ECHO_T}$ac_cv_header_libmng_h" >&6; }
 fi
 if test $ac_cv_header_libmng_h = yes; then
    have_libmng=yes
-		  MNG_LIBS="-lmng"
+		  MNG_LIBS="-lmng -llcms -ljpeg -lz -lm"
 else
   { echo "$as_me:$LINENO: result: *** All libmng dependent parts will be disabled ***" >&5
 echo "${ECHO_T}*** All libmng dependent parts will be disabled ***" >&6; }
@@ -49976,7 +49979,7 @@ cat >>confdefs.h <<_ACEOF
 _ACEOF
 
         CFLAGS="$CFLAGS -faltivec -maltivec"
-        LIBMPEG2_CFLAGS="$LIBMPEG2_CFLAGS -force_cpusubtype_ALL -faltivec -maltivec"
+        LIBMPEG2_CFLAGS="$LIBMPEG2_CFLAGS -faltivec -maltivec"
     fi
     ;;
   ppc-*-linux* | powerpc-*)
@@ -50484,7 +50487,7 @@ XINE_SCRIPTPATH="\${xinedatadir}/scripts"
 
 XINE_BUILD_CC="`$CC -v 2>&1 | tail -1 2>/dev/null`"
 XINE_BUILD_OS="`uname -s -r -m`"
-XINE_BUILD_DATE="`date \"+%a %d %b %Y %T\"`"
+XINE_BUILD_DATE="`date "+%a %d %b %Y %T"`"
 
 
 
@@ -51365,7 +51368,7 @@ rm -f core conftest.err conftest.$ac_objext conftest_i
     { echo "$as_me:$LINENO: result: $ac_cv_try_ldflags_ok" >&5
 echo "${ECHO_T}$ac_cv_try_ldflags_ok" >&6; }
     if test x"$ac_cv_try_ldflags_ok" = x"yes"; then
-        NOUNDEF="-Wl,-z,defs"
+        : # NOUNDEF="-Wl,-z,defs"
     else
         :
     fi
