$OpenBSD: patch-filter_filter_smartyuv_c,v 1.1.1.1 2005/01/25 21:59:00 naddy Exp $
--- filter/filter_smartyuv.c.orig	Sat Jan  8 20:06:42 2005
+++ filter/filter_smartyuv.c	Sat Jan  8 20:13:21 2005
@@ -220,7 +220,9 @@ static void Erode_Dilate (uint8_t *_movi
     int sum, x, y;
     uint8_t  *m, *fmoving, *moving, *p;
     int w4 = width+PAD;
+#ifdef HAVE_MMX
     int can_use_mmx = !(width%4);
+#endif
 
     // Erode.
     fmoving = _fmoving;
@@ -406,8 +408,12 @@ static void smartyuv_core (char *_src, c
 	unsigned char		fiMotion;
 	int			cubic = mfd->cubic;
 	static int 		counter=0;
+#ifdef HAVE_MMX
 	const int		can_use_mmx = !(w%8); // width must a multiple of 8
-	// const int		can_use_altivec = !(w%16); // width must a multiple of 16
+#endif
+#ifdef CAN_COMPILE_C_ALTIVEC
+	const int		can_use_altivec = !(w%16); // width must a multiple of 16
+#endif
 
 
 	char * dst_buf;
