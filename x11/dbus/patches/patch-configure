$OpenBSD: patch-configure,v 1.7 2010/12/16 07:13:58 ajacoutot Exp $
--- configure.orig	Tue Mar 23 20:11:22 2010
+++ configure	Tue Apr 20 16:38:22 2010
@@ -22230,13 +22230,13 @@ fi
 { $as_echo "$as_me:$LINENO: result: $ac_cv_func_pthread_cond_timedwait" >&5
 $as_echo "$ac_cv_func_pthread_cond_timedwait" >&6; }
 if test "x$ac_cv_func_pthread_cond_timedwait" = x""yes; then
-  { $as_echo "$as_me:$LINENO: checking for pthread_cond_timedwait in -lpthread" >&5
-$as_echo_n "checking for pthread_cond_timedwait in -lpthread... " >&6; }
+  { $as_echo "$as_me:$LINENO: checking for pthread_cond_timedwait in -pthread" >&5
+$as_echo_n "checking for pthread_cond_timedwait in -pthread... " >&6; }
 if test "${ac_cv_lib_pthread_pthread_cond_timedwait+set}" = set; then
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -22296,7 +22296,7 @@ fi
 { $as_echo "$as_me:$LINENO: result: $ac_cv_lib_pthread_pthread_cond_timedwait" >&5
 $as_echo "$ac_cv_lib_pthread_pthread_cond_timedwait" >&6; }
 if test "x$ac_cv_lib_pthread_pthread_cond_timedwait" = x""yes; then
-  THREAD_LIBS="-lpthread"
+  THREAD_LIBS="-pthread"
 fi
 
 fi
@@ -25294,7 +25294,10 @@ if test "x$GCC" = "xyes"; then
      ;;
   esac
 
-  case " $CFLAGS " in
+  case $host in
+  arm-*-openbsd*) ;;
+  hppa-*-openbsd*) ;;
+  *) case " $CFLAGS " in
   *[\ \	]-fPIE[\ \	]*) ;;
   *) if cc_supports_flag -fPIE; then
         PIE_CFLAGS="-fPIE"
@@ -25306,6 +25309,7 @@ if test "x$GCC" = "xyes"; then
      fi
      ;;
   esac
+  esac
 
   ### Disabled warnings, and compiler flag overrides
 
@@ -25322,13 +25326,6 @@ if test "x$GCC" = "xyes"; then
   case " $CFLAGS " in
   *[\ \	]-Wno-sign-compare[\ \	]*) ;;
   *) CFLAGS="$CFLAGS -Wno-sign-compare" ;;
-  esac
-  case " $CFLAGS " in
-  *[\ \	]-Wno-pointer-sign[\ \	]*) ;;
-  *) if cc_supports_flag -Wno-pointer-sign; then
-        CFLAGS="$CFLAGS -Wno-pointer-sign"
-     fi
-     ;;
   esac
 
   # This one is special - it's not a warning override.
