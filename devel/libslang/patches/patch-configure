--- configure.orig	Sat Aug 19 22:20:18 2000
+++ configure	Sat Oct 21 15:23:53 2000
@@ -1887,6 +1887,20 @@
        ELF_DEP_LIBS=
      fi
      ;;
+  *openbsd* )
+    ELF_CC="\$(CC)"
+    ELF_CFLAGS="\$(CFLAGS) -fpic"
+    ELF_LINK_CMD="\$(ELF_LINK)"
+    ELF_DEP_LIBS=
+    case "`uname -r`" in
+      2.01234567)
+	ELF_LINK="ld -Bshareable -Bforcearchive"
+      ;;
+      *)
+	ELF_LINK="\$(CC) -shared -fpic"
+      ;;
+    esac
+    ;;
   * )
     echo "Note: ELF compiler for host_os=$host_os may be wrong"
     ELF_CC="\$(CC)"
@@ -1923,7 +1937,7 @@
 
 
 echo $ac_n "checking size of short""... $ac_c" 1>&6
-echo "configure:1927: checking size of short" >&5
+echo "configure:1941: checking size of short" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_short'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1931,7 +1945,7 @@
   ac_cv_sizeof_short=2
 else
   cat > conftest.$ac_ext <<EOF
-#line 1935 "configure"
+#line 1949 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 main()
@@ -1942,7 +1956,7 @@
   exit(0);
 }
 EOF
-if { (eval echo configure:1946: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:1960: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_short=`cat conftestval`
 else
@@ -1962,7 +1976,7 @@
 
 
 echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:1966: checking size of int" >&5
+echo "configure:1980: checking size of int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1970,7 +1984,7 @@
   ac_cv_sizeof_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 1974 "configure"
+#line 1988 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 main()
@@ -1981,7 +1995,7 @@
   exit(0);
 }
 EOF
-if { (eval echo configure:1985: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:1999: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_int=`cat conftestval`
 else
@@ -2001,7 +2015,7 @@
 
 
 echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:2005: checking size of long" >&5
+echo "configure:2019: checking size of long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2009,7 +2023,7 @@
   ac_cv_sizeof_long=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 2013 "configure"
+#line 2027 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 main()
@@ -2020,7 +2034,7 @@
   exit(0);
 }
 EOF
-if { (eval echo configure:2024: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:2038: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long=`cat conftestval`
 else
@@ -2040,7 +2054,7 @@
 
 
 echo $ac_n "checking size of float""... $ac_c" 1>&6
-echo "configure:2044: checking size of float" >&5
+echo "configure:2058: checking size of float" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_float'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2048,7 +2062,7 @@
   ac_cv_sizeof_float=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 2052 "configure"
+#line 2066 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 main()
@@ -2059,7 +2073,7 @@
   exit(0);
 }
 EOF
-if { (eval echo configure:2063: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:2077: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_float=`cat conftestval`
 else
@@ -2079,7 +2093,7 @@
 
 
 echo $ac_n "checking size of double""... $ac_c" 1>&6
-echo "configure:2083: checking size of double" >&5
+echo "configure:2097: checking size of double" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_double'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2087,7 +2101,7 @@
   ac_cv_sizeof_double=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 2091 "configure"
+#line 2105 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 main()
@@ -2098,7 +2112,7 @@
   exit(0);
 }
 EOF
-if { (eval echo configure:2102: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:2116: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_double=`cat conftestval`
 else
@@ -2127,7 +2141,7 @@
 TERMCAP=-ltermcap
 
 echo $ac_n "checking for Terminfo""... $ac_c" 1>&6
-echo "configure:2131: checking for Terminfo" >&5
+echo "configure:2145: checking for Terminfo" >&5
 for terminfo_dir in $JD_Terminfo_Dirs
 do
    if test -d $terminfo_dir 
@@ -2230,7 +2244,7 @@
 
 
 echo $ac_n "checking SLANG_VERSION""... $ac_c" 1>&6
-echo "configure:2234: checking SLANG_VERSION" >&5
+echo "configure:2248: checking SLANG_VERSION" >&5
 slang_version=`grep "^#define  *SLANG_VERSION " $srcdir/src/slang.h |
                awk '{ print $3 }'`
 slang_major_version=`echo $slang_version |
@@ -2240,7 +2254,8 @@
 slang_mminor_version=`echo $slang_version $slang_major_version $slang_minor_version |
  awk '{ print ($1 - $2*10000 - $3*100) }'`
 
-slang_minor_version="$slang_minor_version.$slang_mminor_version"
+slang_major_version=$slang_major_version$slang_minor_version
+slang_minor_version=$slang_mminor_version
 slang_version="$slang_major_version.$slang_minor_version"
 echo "$ac_t""$slang_version" 1>&6
 
