$OpenBSD: patch-configure_in,v 1.3 2002/06/29 13:39:26 couderc Exp $
--- configure.in.orig	Wed Feb  6 10:13:15 2002
+++ configure.in	Sat Jun 29 15:26:26 2002
@@ -477,7 +477,7 @@ case "$target_os" in
   else
     LDFLAGS="-rdynamic"
   fi;;
-netbsd*)
+netbsd*|openbsd*)
     if [[ "`$CC -dM -E - </dev/null | grep __ELF__`" != "" ]]
     then
 	netbsd_elf=yes
@@ -566,7 +566,7 @@ if test "$with_dln_a_out" != yes; then
 			    LDFLAGS="-Wl,-export-dynamic"
 			fi
 			rb_cv_dlopen=yes ;;
-	openbsd*) 	LDSHARED="ld -Bforcearchive -Bshareable"
+	openbsd*) 	LDSHARED='$(CC) -shared -fPIC'
 			rb_cv_dlopen=yes ;;
 	bsdi3*) 	case "$CC" in
 			*shlicc*)	LDSHARED="$CC -r"
@@ -842,7 +842,8 @@ if test "$enable_shared" = 'yes'; then
  	;;
     openbsd*)
 	SOLIBS='$(LIBS)'
- 	;;
+        LIBRUBY_SO='lib$(RUBY_INSTALL_NAME).so.$(MAJOR).'`expr ${MINOR} \* 10 + ${TEENY}`
+	;;
     solaris*)
 	XLDFLAGS='-R${prefix}/lib'
  	;;
