$OpenBSD: patch-src_tools_pgsql_drv_purge_sql,v 1.1 2006/03/23 17:17:40 todd Exp $
--- src/tools.pgsql_drv/purge.sql.orig	Sun Jan 22 17:02:03 2006
+++ src/tools.pgsql_drv/purge.sql	Sun Jan 22 17:02:06 2006
@@ -2,20 +2,20 @@
 
 DELETE FROM dspam_token_data
   WHERE (innocent_hits*2) + spam_hits < 5
-  AND CURRENT_DATE - last_hit > 60;
+  AND last_hit < CURRENT_DATE - 60;
 
 DELETE FROM dspam_token_data
   WHERE innocent_hits = 1 AND spam_hits = 0
-  AND CURRENT_DATE - last_hit > 15;
+  AND last_hit < CURRENT_DATE - 15;
 
 DELETE FROM dspam_token_data
   WHERE innocent_hits = 0 AND spam_hits = 1
-  AND CURRENT_DATE - last_hit > 15;
+  AND last_hit < CURRENT_DATE - 15;
 
 DELETE FROM dspam_token_data
-  WHERE CURRENT_DATE - last_hit > 90;
+  WHERE last_hit < CURRENT_DATE - 90;
 
 DELETE FROM dspam_signature_data
-  WHERE CURRENT_DATE - created_on > 14;
+  WHERE created_on < CURRENT_DATE - 14;
 
 VACUUM ANALYSE;
