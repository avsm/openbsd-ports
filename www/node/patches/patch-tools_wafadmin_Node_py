$OpenBSD: patch-tools_wafadmin_Node_py,v 1.1.1.1 2010/12/28 18:19:28 jasper Exp $
--- tools/wafadmin/Node.py.orig	Sun Oct 24 23:45:39 2010
+++ tools/wafadmin/Node.py	Thu Dec  2 15:04:05 2010
@@ -349,6 +349,12 @@ class Node(object):
 		if self == from_node: return '.'
 		if from_node.parent == self: return '..'
 
+		from_node_path = from_node.abspath()
+		from_node_realpath = os.path.realpath(from_node_path)
+		if from_node_path != from_node_realpath:
+			from_node = self.__class__.bld.root.find_dir(from_node_realpath)
+			return self.relpath_gen(from_node)
+
 		# up_path is '../../../' and down_path is 'dir/subdir/subdir/file'
 		ancestor = self.find_ancestor(from_node)
 		lst = []
