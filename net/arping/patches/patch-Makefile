$OpenBSD: patch-Makefile,v 1.8 2009/06/03 19:13:23 benoit Exp $
--- Makefile.orig	Mon Aug 11 08:33:31 2008
+++ Makefile	Wed Jun  3 08:52:32 2009
@@ -20,9 +20,9 @@ SOLARIS=0
 FREEBSD=0
 MACOSX=0
 
-CC=gcc
+#CC=gcc
 # explicit pcap include dir is for redhat which is fux0red
-CFLAGS=-g -I/usr/local/include -L/usr/local/lib -DFINDIF=$(FINDIF) -DUSE_NETIF=$(USE_NETIF) -DOPENBSD=$(OPENBSD) -DLINUX=$(LINUX) -DSOLARIS=$(SOLARIS) -DFREEBSD=$(FREEBSD) -DMACOSX=$(MACOSX) -I/usr/include/pcap -L/opt/csw/lib -R/opt/csw/lib
+CFLAGS=-g -I${LOCALBASE}/include -L${LOCALBASE}/lib -DFINDIF=$(FINDIF) -DUSE_NETIF=$(USE_NETIF) -DOPENBSD=$(OPENBSD) -DLINUX=$(LINUX) -DSOLARIS=$(SOLARIS) -DFREEBSD=$(FREEBSD) -DMACOSX=$(MACOSX) -I/usr/include/pcap
 
 CFLAGS2=-g -I/usr/local/include -I/usr/local/include/libnet-1.1 -I/usr/include/pcap -I/usr/local/include/libnet11
 LDFLAGS2=-g -L/usr/local/lib -L/usr/local/lib/libnet-1.1 -L/opt/csw/lib -L/usr/local/lib/libnet11
@@ -87,20 +87,22 @@ solaris:
 	$(MAKE) USE_NETIF=0 SOLARIS=1 arping1-make
 
 install:
-	install -c arping /usr/local/bin/arping
-	install arping.8 /usr/local/man/man8/arping.8
+	${BSD_INSTALL_PROGRAM} -c arping ${PREFIX}/bin/arping
+	${BSD_INSTALL_MAN} arping.8 ${PREFIX}/man/man8/arping.8
+	${BSD_INSTALL_DATA_DIR} ${PREFIX}/share/doc/arping
+	${BSD_INSTALL_DATA} README ${PREFIX}/share/doc/arping/README
 
 arping.o: arping.c
-	$(CC) -Wall $(CFLAGS) -c `libnet-config --defines` `libnet-config --cflags` arping.c
+	$(CC) -Wall `libnet-config-1.0 --defines` `libnet-config-1.0 --cflags` $(CFLAGS) -c arping.c
 
 O_arping=arping.o
 arping1-make: $(O_arping)
-	$(CC) $(CFLAGS) -g -o arping $(O_arping) `libnet-config --libs` -lpcap
+	$(CC) -g -o arping $(O_arping) `libnet-config-1.0 --libs` -lpcap
 
 SYS=$(shell uname -s)
-ifeq ($(SYS),SunOS)
-EXTRA_LIBS=-lsocket -lnsl
-endif
+#ifeq ($(SYS),SunOS)
+#EXTRA_LIBS=-lsocket -lnsl
+#endif
 
 O_arping2=arping-2/arping.c
 arping2: arping-2/arping
