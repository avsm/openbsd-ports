$OpenBSD: patch-mono_metadata_socket-io_c,v 1.2 2010/03/20 17:16:44 robert Exp $
--- mono/metadata/socket-io.c.orig	Tue Jan 12 01:00:55 2010
+++ mono/metadata/socket-io.c	Fri Mar 19 23:29:31 2010
@@ -2767,7 +2767,7 @@ MonoBoolean ves_icall_System_Net_Dns_GetHostByName_int
 	memset(&hints, 0, sizeof(hints));
 	hints.ai_family = get_family_hint ();
 	hints.ai_socktype = SOCK_STREAM;
-	hints.ai_flags = AI_CANONNAME | AI_ADDRCONFIG;
+	hints.ai_flags = AI_CANONNAME;
 
 	if (*hostname && getaddrinfo(hostname, NULL, &hints, &info) == -1) {
 		return(FALSE);
@@ -2912,7 +2912,7 @@ extern MonoBoolean ves_icall_System_Net_Dns_GetHostByA
 	struct sockaddr_in6 saddr6;
 	struct addrinfo *info = NULL, hints;
 	gint32 family;
-	char hostname[1024] = {0};
+	char hostname[NI_MAXHOST] = {0};
 	int flags = 0;
 #else
 	struct in_addr inaddr;
@@ -2969,7 +2969,7 @@ extern MonoBoolean ves_icall_System_Net_Dns_GetHostByA
 	memset (&hints, 0, sizeof(hints));
 	hints.ai_family = get_family_hint ();
 	hints.ai_socktype = SOCK_STREAM;
-	hints.ai_flags = AI_CANONNAME | AI_ADDRCONFIG;
+	hints.ai_flags = AI_CANONNAME;
 
 	if( getaddrinfo (hostname, NULL, &hints, &info) == -1 ) {
 		return(FALSE);
