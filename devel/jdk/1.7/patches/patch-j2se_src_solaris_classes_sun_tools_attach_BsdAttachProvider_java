$OpenBSD: patch-j2se_src_solaris_classes_sun_tools_attach_BsdAttachProvider_java,v 1.1 2007/09/06 15:46:19 kurt Exp $
--- j2se/src/solaris/classes/sun/tools/attach/BsdAttachProvider.java.orig	Fri Aug  3 18:02:50 2007
+++ j2se/src/solaris/classes/sun/tools/attach/BsdAttachProvider.java	Fri Aug  3 18:24:19 2007
@@ -54,31 +54,13 @@ public class BsdAttachProvider extends HotSpotAttachPr
     public VirtualMachine attachVirtualMachine(String vmid) 
 	throws AttachNotSupportedException, IOException 
     {
-	checkAttachPermission();
-
-	// AttachNotSupportedException will be thrown if the target VM can be determined
-        // to be not attachable. 
-	testAttachable(vmid);
-
-        return new BsdVirtualMachine(this, vmid);
+        throw new AttachNotSupportedException("Attach not yet supported on BSD");
     }	
 
     public VirtualMachine attachVirtualMachine(VirtualMachineDescriptor vmd) 
         throws AttachNotSupportedException, IOException
     {
-	if (vmd.provider() != this) {
-	    throw new AttachNotSupportedException("provider mismatch");
-	}
-        // To avoid re-checking if the VM if attachable, we check if the descriptor
-        // is for a hotspot VM - these descriptors are created by the listVirtualMachines
-        // implementation which only returns a list of attachable VMs.
-        if (vmd instanceof HotSpotVirtualMachineDescriptor) {
-            assert ((HotSpotVirtualMachineDescriptor)vmd).isAttachable();
-            checkAttachPermission();
-            return new BsdVirtualMachine(this, vmd.id());
-        } else {
-            return attachVirtualMachine(vmd.id());
-        }
+        throw new AttachNotSupportedException("Attach not yet supported on BSD");
     }
     
 }
