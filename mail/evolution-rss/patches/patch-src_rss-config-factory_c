$OpenBSD: patch-src_rss-config-factory_c,v 1.4 2011/09/22 10:55:13 jasper Exp $

From a7d886e3e383484ded07d9808eb8ada16ab1ca9c Mon Sep 17 00:00:00 2001
From: Lucian Langa <lucilanga@gnome.org>
Date: Thu, 11 Aug 2011 19:34:50 +0000
Subject: adapt to latest evolution changes

--- src/rss-config-factory.c.orig	Sun Jun 19 17:27:29 2011
+++ src/rss-config-factory.c	Thu Sep 22 12:46:44 2011
@@ -465,6 +465,9 @@ folder_cb (GtkWidget *widget, gpointer data)
 	GError *error = NULL;
 	EMFolderSelector *selector;
 	EMFolderTree *folder_tree;
+#if EVOLUTION_VERSION >= 30101
+	EMFolderTreeModel *model;
+#endif
 #else
 	GtkWidget *folder_tree;
 #endif
@@ -482,10 +485,16 @@ folder_cb (GtkWidget *widget, gpointer data)
 
 	window = e_mail_reader_get_window (reader);
 
+#if EVOLUTION_VERSION >= 30103
+	model = em_folder_tree_model_get_default ();
+#endif
 	dialog = em_folder_selector_new (
 			window,
 #if EVOLUTION_VERSION >= 30101
 			backend,
+#if EVOLUTION_VERSION >= 30103
+			model,
+#endif
 #else
 			EM_FOLDER_TREE (folder_tree),
 #endif
