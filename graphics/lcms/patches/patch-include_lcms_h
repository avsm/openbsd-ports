$OpenBSD: patch-include_lcms_h,v 1.7 2008/07/19 11:18:23 espie Exp $
--- include/lcms.h.orig	Sat Jul 19 12:52:40 2008
+++ include/lcms.h	Sat Jul 19 12:55:23 2008
@@ -143,17 +143,17 @@ typedef    pthread_rwlock_t      LCMS_RWLOCK_T;
 #   define USE_BIG_ENDIAN      1
 #endif
 
-#if TARGET_CPU_PPC
+#if defined(TARGET_CPU_PPC) && TARGET_CPU_PPC
 #   define USE_BIG_ENDIAN   1
 #endif
 
-#if macintosh
+#if defined(macintosh) && macintosh
 # ifndef __LITTLE_ENDIAN__
 #   define USE_BIG_ENDIAN      1
 # endif
 #endif
 
-#if __BIG_ENDIAN__
+#if defined(__BIG_ENDIAN__) && __BIG_ENDIAN__
 #   define USE_BIG_ENDIAN      1
 #endif
 
@@ -1407,7 +1407,6 @@ LCMS_INLINE WORD _cmsClampWord(int in)
 LCMS_INLINE void* _cmsMalloc(size_t size)
 {
     if (size > ((size_t) 1024*1024*500)) return NULL;  // Never allow over 500Mb
-    if (size < 0) return NULL;              // Prevent signed size_t exploits
 
     return (void*) malloc(size);
 }
