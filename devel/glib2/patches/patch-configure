$OpenBSD: patch-configure,v 1.3 2003/04/17 05:55:42 marcm Exp $
--- configure.orig	Tue Jan 28 14:00:25 2003
+++ configure	Tue Feb 25 14:49:45 2003
@@ -5836,7 +5836,7 @@ _ACEOF
 glib_save_prefix="$prefix"
 test "x$prefix" = xNONE && prefix=$ac_default_prefix
 if test "x$CATOBJEXT" = "x.mo" ; then
-  localedir=`eval echo "${libdir}/locale"`
+  localedir=`eval echo "${datadir}/locale"`
 else
   localedir=`eval echo "${datadir}/locale"`
 fi
@@ -8217,7 +8217,7 @@ else
     hardcode_shlibpath_var=no
     if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
       archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
-      hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
+      hardcode_libdir_flag_spec='${wl}-R$libdir'
       export_dynamic_flag_spec='${wl}-E'
     else
       case "$host_os" in
@@ -8227,7 +8227,7 @@ else
         ;;
       *)
         archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
-        hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
+        hardcode_libdir_flag_spec='${wl}-R$libdir'
         ;;
       esac
     fi
@@ -8784,6 +8784,8 @@ openbsd*)
   version_type=sunos
   need_lib_prefix=no
   need_version=no
+  sys_lib_search_path_spec="/usr/lib"
+  sys_lib_dlsearch_path_spec="/usr/lib /usr/local/lib"
   if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
     case "$host_os" in
     openbsd2.[89] | openbsd2.[89].*)
