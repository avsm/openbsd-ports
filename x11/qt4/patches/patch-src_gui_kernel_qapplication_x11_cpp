$OpenBSD: patch-src_gui_kernel_qapplication_x11_cpp,v 1.6 2006/10/08 21:43:50 espie Exp $
--- src/gui/kernel/qapplication_x11.cpp.orig	Fri Sep 29 16:45:03 2006
+++ src/gui/kernel/qapplication_x11.cpp	Sat Oct  7 13:10:23 2006
@@ -4707,7 +4707,7 @@ static void sm_performSaveYourself(QSess
     sm_setProperty(QString::fromLatin1(SmProgram), argument0);
     // tell the session manager about our user as well.
     struct passwd *entryPtr = 0;
-#if !defined(QT_NO_THREAD) && defined(_POSIX_THREAD_SAFE_FUNCTIONS)
+#if !defined(QT_NO_THREAD) && defined(_POSIX_THREAD_SAFE_FUNCTIONS) && !defined(Q_OS_OPENBSD)
     QVarLengthArray<char, 1024> buf(sysconf(_SC_GETPW_R_SIZE_MAX));
     struct passwd entry;
     getpwuid_r(geteuid(), &entry, buf.data(), buf.size(), &entryPtr);
