$OpenBSD: patch-configure_in,v 1.4 2004/10/10 18:20:17 naddy Exp $
--- configure.in.orig	Sun Jan 18 20:47:32 2004
+++ configure.in	Sun Oct 10 12:55:28 2004
@@ -68,15 +68,13 @@ else
 fi
 AM_GNU_GETTEXT
 
-AC_CHECK_FUNC(gettext, gettext_without_libintl=true)
-# same trick as with libdl:
-# if gettext() doesn't require linking against libintl,
-# we don't have to check for gettext in libintl. Otherwise
-# we may even require libintl.
-dnl AC_CHECK_LIB(intl, gettext, [LIBS="$LIBS -lintl"])
-if test "$gettext_without_libintl" != "true" -a "$USE_NLS" = "yes"; then
-        AC_CHECK_LIB(intl, gettext, [INTLLIBS="$INTLLIBS -lintl"])
-fi
+LIBS="$LIBS -liconv"
+AC_CHECK_LIB(intl, bindtextdomain,
+  [AC_CACHE_VAL(gt_cv_func_gettext_libintl,
+    [AC_CHECK_LIB(intl, gettext,
+      [gt_cv_func_gettext_libintl=yes; LIBS="$LIBS -lintl"],
+    gt_cv_func_gettext_libintl=no)],
+gt_cv_func_gettext_libintl=no)])
 
 dnl ---------------------------------------------------------------------------
 dnl Turn on debugging and all warnings when using gcc
