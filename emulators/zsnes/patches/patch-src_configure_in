$OpenBSD: patch-src_configure_in,v 1.1.1.1 2002/03/04 00:58:00 naddy Exp $
--- src/configure.in.orig	Wed Sep 19 22:32:16 2001
+++ src/configure.in	Sun Mar  3 09:47:11 2002
@@ -16,7 +16,7 @@ dnl See also: remarks supplied in the de
 AC_INIT(init.asm)
 AC_CONFIG_HEADER(config.h)	
 echo -- Where is our compiler, and who are we compiling for?
-CFLAGS="-pipe -I. -Wall"
+CFLAGS="$CFLAGS -I. -Wall"
 CXXFLAGS=$CFLAGS
 AC_PROG_CC
 AC_PROG_CXX
@@ -29,6 +29,10 @@ case "$target" in
 		CFLAGS="$CFLAGS -D__LINUX__"
         	NFLAGS="$NFLAGS -D__LINUX__ -f elf"
 		;;
+	*-*-*openbsd*)
+		CFLAGS="$CFLAGS -D__LINUX__ -D__FreeBSD__"
+		NFLAGS="$NFLAGS -D__LINUX__ -D__FreeBSD__ -f aoutb"
+		;;
 	*-*-*bsd*)
 		CFLAGS="$CFLAGS -D__LINUX__ -D__FreeBSD__"
 		NFLAGS="$NFLAGS -D__LINUX__ -D__FreeBSD__ -f elf"
@@ -139,31 +143,6 @@ else
 	
 	CFLAGS="$CFLAGS -Os -ffast-math -fomit-frame-pointer -fschedule-insns2 -s"
 	ZSNESEXE="zsnes"
-fi
-
-AC_MSG_CHECKING(which processor class to optimize for)
-if test x$debug != xyes; then
-			case "$target" in
-				i486-*-*)
-					CFLAGS="$CFLAGS -march=i486"
-					AC_MSG_RESULT(486)
-					;;
-				i586-*-*)
-					CFLAGS="$CFLAGS -march=pentium"
-					AC_MSG_RESULT(Pentium)
-					;;
-				i686-*-*)
-					CFLAGS="$CFLAGS -march=pentiumpro"
-					AC_MSG_RESULT(PPro/P2)
-					;;
-				*)
-					AC_MSG_RESULT(386)
-					AC_MSG_WARN(*** This is probably not what you want use --target)
-					;;
-			esac
-
-else
-	AC_MSG_RESULT(no optimization because debug enabled)
 fi
 
 dnl Checks for header files.
