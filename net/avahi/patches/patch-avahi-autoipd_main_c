$OpenBSD: patch-avahi-autoipd_main_c,v 1.2 2010/07/17 14:12:38 ajacoutot Exp $
--- avahi-autoipd/main.c.orig	Fri Jun 25 21:12:15 2010
+++ avahi-autoipd/main.c	Mon Jul  5 12:02:37 2010
@@ -27,19 +27,26 @@
 #include <sys/ioctl.h>
 #include <sys/socket.h>
 #include <sys/wait.h>
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
 #include <sys/sysctl.h>
-#endif
+#endif /* __FreeBSD__ || __OpenBSD__ */
 
+#include <net/if.h>
+
 #ifdef __linux__
 #include <netpacket/packet.h>
-#endif
+#endif /* __linux__ */
+#if defined(__OpenBSD__)
+#include <netinet/in.h>
+#include <netinet/if_ether.h>
+#include <net/if_arp.h>
+#else
 #include <net/ethernet.h>
-#include <net/if.h>
-#ifdef __FreeBSD__
+#endif /* __OpenBSD__ */
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
 #include <net/if_dl.h>
 #include <net/route.h>
-#endif
+#endif /* __FreeBSD__ || __OpenBSD__ */
 #include <arpa/inet.h>
 
 #include <assert.h>
@@ -62,7 +69,7 @@
 #include <pcap.h>
 
 /* Old versions of PCAP defined it as D_IN */
-#ifndef PCAP_D_IN
+#ifdef PCAP_D_IN
 #define PCAP_D_IN D_IN
 #endif
 
