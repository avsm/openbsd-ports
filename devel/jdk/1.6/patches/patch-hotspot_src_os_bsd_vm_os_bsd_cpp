$OpenBSD: patch-hotspot_src_os_bsd_vm_os_bsd_cpp,v 1.1 2008/03/17 03:28:26 kurt Exp $
--- hotspot/src/os/bsd/vm/os_bsd.cpp.orig	Sun Mar 16 09:33:24 2008
+++ hotspot/src/os/bsd/vm/os_bsd.cpp	Sun Mar 16 09:33:27 2008
@@ -277,7 +277,11 @@ void os::Bsd::initialize_system_info() {
   int mib[2];
   size_t len;
   int cpu_val;
+#ifdef HW_USERMEM64
+  int64_t mem_val;
+#else
   u_long mem_val;
+#endif
 
   /* get processors count via hw.ncpus sysctl */
   mib[0] = CTL_HW;
@@ -293,7 +297,11 @@ void os::Bsd::initialize_system_info() {
    * instead of hw.physmem because we need size of allocatable memory
    */
   mib[0] = CTL_HW;
+#ifdef HW_USERMEM64
+  mib[1] = HW_USERMEM64;
+#else
   mib[1] = HW_USERMEM;
+#endif
   len = sizeof(mem_val);
   if (sysctl(mib, 2, &mem_val, &len, NULL, 0) != -1)
        _physical_memory = mem_val;
