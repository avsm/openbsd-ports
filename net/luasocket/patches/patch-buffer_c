$OpenBSD: patch-buffer_c,v 1.1.1.1 2004/12/16 13:38:12 pedro Exp $
--- buffer.c.orig	Mon Jul 26 17:17:35 2004
+++ buffer.c	Tue Aug 10 21:11:45 2004
@@ -75,7 +75,9 @@ int buf_meth_setstats(lua_State *L, p_bu
 \*-------------------------------------------------------------------------*/
 int buf_meth_send(lua_State *L, p_buf buf) {
     int top = lua_gettop(L);
+#ifdef LUASOCKET_DEBUG
     p_tm tm = tm_markstart(buf->tm);
+#endif
     int err = IO_DONE;
     size_t size, sent;
     const char *data = luaL_checklstring(L, 2, &size);
@@ -108,7 +110,9 @@ int buf_meth_send(lua_State *L, p_buf bu
 \*-------------------------------------------------------------------------*/
 int buf_meth_receive(lua_State *L, p_buf buf) {
     int err = IO_DONE, top = lua_gettop(L);
+#ifdef LUASOCKET_DEBUG
     p_tm tm = tm_markstart(buf->tm);
+#endif
     luaL_Buffer b;
     size_t size;
     const char *part = luaL_optlstring(L, 3, "", &size);
