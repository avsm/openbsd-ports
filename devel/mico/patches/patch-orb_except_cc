$OpenBSD: patch-orb_except_cc,v 1.1 2004/09/26 12:11:00 espie Exp $
--- orb/except.cc.orig	Sun Sep  2 20:21:55 2001
+++ orb/except.cc	Sun Aug 15 19:40:09 2004
@@ -26,8 +26,8 @@
 #ifndef _WINDOWS
 #include <string.h>
 #endif
-#include <iostream.h>
-#include <strstream.h>
+#include <iostream>
+#include <sstream>
 #include <mico/throw.h>
 #include <mico/impl.h>
 #include <mico/template_impl.h>
@@ -116,14 +116,13 @@ CORBA::Exception::_clone () const
 void
 CORBA::Exception::_prepare_throw () const
 {
-    ostrstream ostr;
+    ostringstream ostr;
     _print (ostr);
-    ostr << "" << ends;
 
     if (_last_except_desc)
 	CORBA::string_free (_last_except_desc);
-    _last_except_desc = CORBA::string_dup (ostr.str());
-    ostr.rdbuf()->freeze (0);
+
+    _last_except_desc = CORBA::string_dup (ostr.str().c_str());
 }
 
 #endif
