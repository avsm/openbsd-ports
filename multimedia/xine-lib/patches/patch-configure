$OpenBSD: patch-configure,v 1.18 2008/08/20 01:54:01 brad Exp $
--- configure.orig	Thu Aug 14 17:18:56 2008
+++ configure	Thu Aug 14 19:04:37 2008
@@ -24654,6 +24654,9 @@ _ACEOF
 fi
 done
 
+LIBICONV=$LTLIBICONV
+LIBINTL=$LTLIBINTL
+INTLLIBS=$LTLIBINTL
 
 
 { echo "$as_me:$LINENO: checking whether byte ordering is bigendian" >&5
@@ -31009,13 +31012,13 @@ t q
 b
 :q
 q"
-x_lib_location="`ls -1 "${x_libraries:-/usr/local/lib}/libX11.so"* "${x_libraries:-/usr/lib}/libX11.so"* 2>/dev/null | sed -e \"${soname_script}\"`"
+x_lib_location="`ls -1 "${x_libraries:-/usr/local/lib}/libX11.so"* "${x_libraries:-/usr/lib}/libX11.so"* 2>/dev/null | sed 1q`"
 
 cat >>confdefs.h <<_ACEOF
 #define LIBX11_SO "${x_lib_location:-libX11.so}"
 _ACEOF
 
-x_lib_location="`ls -1 "${x_libraries:-/usr/local/lib}/libXv.so"*  "${x_libraries:-/usr/lib}/libXv.so"*  2>/dev/null | sed -e \"${soname_script}\"`"
+x_lib_location="`ls -1 "${x_libraries:-/usr/local/lib}/libXv.so"*  "${x_libraries:-/usr/lib}/libXv.so"*  2>/dev/null | sed 1q`"
 
 cat >>confdefs.h <<_ACEOF
 #define LIBXV_SO "${x_lib_location:-libXv.so}"
@@ -37851,7 +37854,7 @@ fi
     LIBFLAC_LIBS="-L$prefix/$XINE_LIBNAME"
   fi
 
-  LIBFLAC_LIBS="$LIBFLAC_LIBS -lFLAC -lm"
+  LIBFLAC_LIBS="$LIBFLAC_LIBS -lFLAC -logg -lm"
 
   if test "x$libFLAC_includes" != "x" ; then
     LIBFLAC_CFLAGS="-I$libFLAC_includes"
@@ -38100,7 +38103,7 @@ elif test "x$external_a52dec" = "xyes"; then
   have_a52="yes"
 
 
-for ac_header in a52dec/a52.h a52dec/a52_internal.h
+for ac_header in a52dec/a52.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 { echo "$as_me:$LINENO: checking for $ac_header" >&5
@@ -38239,7 +38242,7 @@ if test $ac_cv_lib_a52_a52_init = yes; then
 #define HAVE_LIBA52 1
 _ACEOF
 
-  LIBS="-la52 $LIBS"
+  LIBS="-la52 -lm $LIBS"
 
 else
   have_a52="no"
@@ -38805,7 +38808,7 @@ if test "${ac_cv_lib_mng_mng_initialize+set}" = set; t
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lmng  $LIBS"
+LIBS="-lmng -llcms -ljpeg -lz -lm $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -38988,7 +38991,7 @@ echo "${ECHO_T}$ac_cv_header_libmng_h" >&6; }
 fi
 if test $ac_cv_header_libmng_h = yes; then
    have_libmng=yes
-		  MNG_LIBS="-lmng"
+		  MNG_LIBS="-lmng -llcms -ljpeg -lz -lm"
 else
   { echo "$as_me:$LINENO: result: *** All libmng dependent parts will be disabled ***" >&5
 echo "${ECHO_T}*** All libmng dependent parts will be disabled ***" >&6; }
@@ -45513,13 +45516,13 @@ if test "x$enable_faad" = "xno"; then
   { echo "$as_me:$LINENO: result: faad support disabled" >&5
 echo "${ECHO_T}faad support disabled" >&6; }
 elif test "x$with_external_libfaad" != "xno"; then
-  { echo "$as_me:$LINENO: checking for NeAACDecInit in -lfaad" >&5
-echo $ECHO_N "checking for NeAACDecInit in -lfaad... $ECHO_C" >&6; }
-if test "${ac_cv_lib_faad_NeAACDecInit+set}" = set; then
+  { echo "$as_me:$LINENO: checking for faacDecInit in -lfaad" >&5
+echo $ECHO_N "checking for faacDecInit in -lfaad... $ECHO_C" >&6; }
+if test "${ac_cv_lib_faad_faacDecInit+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lfaad  $LIBS"
+LIBS="-lfaad -lm  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -45533,11 +45536,11 @@ cat >>conftest.$ac_ext <<_ACEOF
 #ifdef __cplusplus
 extern "C"
 #endif
-char NeAACDecInit ();
+char faacDecInit ();
 int
 main ()
 {
-return NeAACDecInit ();
+return faacDecInit ();
   ;
   return 0;
 }
@@ -45560,21 +45563,21 @@ eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
 	 test ! -s conftest.err
        } && test -s conftest$ac_exeext &&
        $as_test_x conftest$ac_exeext; then
-  ac_cv_lib_faad_NeAACDecInit=yes
+  ac_cv_lib_faad_faacDecInit=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-	ac_cv_lib_faad_NeAACDecInit=no
+	ac_cv_lib_faad_faacDecInit=no
 fi
 
 rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
       conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_faad_NeAACDecInit" >&5
-echo "${ECHO_T}$ac_cv_lib_faad_NeAACDecInit" >&6; }
-if test $ac_cv_lib_faad_NeAACDecInit = yes; then
+{ echo "$as_me:$LINENO: result: $ac_cv_lib_faad_faacDecInit" >&5
+echo "${ECHO_T}$ac_cv_lib_faad_faacDecInit" >&6; }
+if test $ac_cv_lib_faad_faacDecInit = yes; then
   have_faad=yes
 fi
 
@@ -50533,7 +50536,7 @@ cat >>confdefs.h <<_ACEOF
 _ACEOF
 
         CFLAGS="$CFLAGS -faltivec -maltivec"
-        LIBMPEG2_CFLAGS="$LIBMPEG2_CFLAGS -force_cpusubtype_ALL -faltivec -maltivec"
+        LIBMPEG2_CFLAGS="$LIBMPEG2_CFLAGS -faltivec -maltivec"
     fi
     ;;
   ppc-*-linux* | powerpc-*)
@@ -51046,7 +51049,7 @@ XINE_SCRIPTPATH="\${xinedatadir}/scripts"
 
 XINE_BUILD_CC="`$CC -v 2>&1 | tail -1 2>/dev/null`"
 XINE_BUILD_OS="`uname -s -r -m`"
-XINE_BUILD_DATE="`date \"+%a %d %b %Y %T\"`"
+XINE_BUILD_DATE="`date "+%a %d %b %Y %T"`"
 
 
 
@@ -51927,7 +51930,7 @@ rm -f core conftest.err conftest.$ac_objext conftest_i
     { echo "$as_me:$LINENO: result: $ac_cv_try_ldflags_ok" >&5
 echo "${ECHO_T}$ac_cv_try_ldflags_ok" >&6; }
     if test x"$ac_cv_try_ldflags_ok" = x"yes"; then
-        NOUNDEF="-Wl,-z,defs"
+        : # NOUNDEF="-Wl,-z,defs"
     else
         :
     fi
