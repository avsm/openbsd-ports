$OpenBSD: patch-configure,v 1.3 2004/11/09 20:19:26 sturm Exp $
--- configure.orig	Wed Mar 14 14:23:37 2001
+++ configure	Sat Oct 30 02:44:06 2004
@@ -4306,7 +4306,7 @@ if eval "test \"`echo '$''{'ac_cv_lib_$a
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lintl  $LIBS"
+LIBS="-lintl -liconv $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 4312 "configure"
 #include "confdefs.h"
@@ -4338,7 +4338,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 #define HAVE_STRFTIME 1
 EOF
 
-LIBS="-lintl $LIBS"
+LIBS="-lintl -liconv $LIBS"
 else
   echo "$ac_t""no" 1>&6
 fi
@@ -4693,7 +4693,7 @@ if eval "test \"`echo '$''{'ac_cv_lib_$a
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lintl  $LIBS"
+LIBS="-lintl -liconv  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 4699 "configure"
 #include "confdefs.h"
@@ -4733,7 +4733,7 @@ if eval "test \"`echo '$''{'ac_cv_lib_$a
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lintl  $LIBS"
+LIBS="-lintl -liconv $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 4739 "configure"
 #include "confdefs.h"
@@ -4776,6 +4776,10 @@ fi
 
 	   fi
 
+	   if test "$gt_cv_func_gettext_libintl" = "yes"; then
+	     LIBS="$LIBS -lintl -liconv";
+	   fi
+
 	   if test "$gt_cv_func_gettext_libc" = "yes" \
 	      || test "$gt_cv_func_gettext_libintl" = "yes"; then
 	      cat >> confdefs.h <<\EOF
@@ -4969,7 +4973,7 @@ rm -f conftest*
 	    # Added by Martin Baulig 12/15/98 for libc5 systems
 	    if test "$gt_cv_func_gettext_libc" != "yes" \
 	       && test "$gt_cv_func_gettext_libintl" = "yes"; then
-	       INTLLIBS=-lintl
+	       INTLLIBS="-lintl -liconv"
 	       LIBS=`echo $LIBS | sed -e 's/-lintl//'`
 	    fi
 	
