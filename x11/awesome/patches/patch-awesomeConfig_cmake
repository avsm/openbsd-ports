$OpenBSD: patch-awesomeConfig_cmake,v 1.3 2010/09/14 08:51:24 dcoppa Exp $
--- awesomeConfig.cmake.orig	Wed Aug 25 10:50:48 2010
+++ awesomeConfig.cmake	Fri Sep 10 13:47:47 2010
@@ -18,11 +18,11 @@ option(GENERATE_LUADOC "generate luadoc" ON)
 link_directories(/usr/local/lib)
 
 # {{{ CFLAGS
-add_definitions(-std=gnu99 -ggdb3 -fno-strict-aliasing -Wall -Wextra
-    -Wchar-subscripts -Wundef -Wshadow -Wcast-align -Wwrite-strings
-    -Wsign-compare -Wunused -Wno-unused-parameter -Wuninitialized -Winit-self
-    -Wpointer-arith -Wredundant-decls -Wformat-nonliteral
-    -Wno-format-zero-length -Wmissing-format-attribute -Wmissing-prototypes
+add_definitions(-std=gnu99 -ggdb3 -fno-strict-aliasing -Wall
+    -Wchar-subscripts -Wcast-align -Wwrite-strings
+    -Wsign-compare -Wunused -Wno-unused-parameter -Wuninitialized
+    -Wpointer-arith -Wformat-nonliteral -Wno-format-zero-length
+    -Wmissing-format-attribute -Wmissing-prototypes
     -Wstrict-prototypes)
 # }}}
 
@@ -166,6 +166,9 @@ endmacro()
 # Check for libev
 a_find_library(LIB_EV ev)
 
+# Check for libexecinfo on non Glibc systems
+a_find_library(LIB_EXECINFO execinfo)
+
 # Error check
 if(NOT LUA51_FOUND AND NOT LUA50_FOUND) # This is a workaround to a cmake bug
     message(FATAL_ERROR "lua library not found")
@@ -175,6 +178,7 @@ set(AWESOME_REQUIRED_LIBRARIES
     ${AWESOME_COMMON_REQUIRED_LDFLAGS}
     ${AWESOME_REQUIRED_LIBRARIES}
     ${LIB_EV}
+    ${LIB_EXECINFO}
     ${LUA_LIBRARIES})
 
 set(AWESOME_REQUIRED_INCLUDE_DIRS
@@ -214,7 +218,7 @@ endif()
 if(DEFINED SYSCONFDIR)
     set(SYSCONFDIR ${SYSCONFDIR} CACHE PATH "config directory")
 else()
-    set(SYSCONFDIR ${PREFIX}/etc CACHE PATH "config directory")
+    set(SYSCONFDIR /etc CACHE PATH "config directory")
 endif()
 
 #If an XDG Config Dir is specificed, use it instead
@@ -243,7 +247,7 @@ endif()
 if(DEFINED AWESOME_MAN_PATH)
    set(AWESOME_MAN_PATH ${AWESOME_MAN_PATH} CACHE PATH "awesome manpage directory")
 else()
-   set(AWESOME_MAN_PATH ${PREFIX}/share/man CACHE PATH "awesome manpage directory")
+   set(AWESOME_MAN_PATH ${PREFIX}/man CACHE PATH "awesome manpage directory")
 endif()
 
 # Hide to avoid confusion
