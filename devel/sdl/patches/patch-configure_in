$OpenBSD: patch-configure_in,v 1.6 2001/06/23 19:05:36 pvalchev Exp $
--- configure.in.orig	Mon Jun 18 09:21:38 2001
+++ configure.in	Fri Jun 22 15:57:39 2001
@@ -246,7 +246,11 @@ CheckOSS()
         AC_MSG_CHECKING(for OSS audio support)
         have_oss=no
         AC_TRY_COMPILE([
+          #ifdef __OpenBSD__
+          #include <soundcard.h>
+          #else
           #include <sys/soundcard.h>
+          #endif
         ],[
           int arg = SNDCTL_DSP_SETFRAGMENT;
         ],[
@@ -1385,8 +1389,14 @@ case "$target" in
         if test x$enable_timers = xyes; then
             COPY_ARCH_SRC(src/timer, linux, SDL_systimer.c)
         fi
+	if test x$enable_openbsdaudio = xyes; then
         # OpenBSD does not define "unix"
-        CFLAGS="$CFLAGS -Dunix"
+	    CFLAGS="$CFLAGS -Dunix"
+	fi
+	# OpenBSD needs linking with ossaudio emulation library
+	if test x$enable_oss = xyes; then
+	    LIBS="$LIBS -lossaudio"
+	fi
         ;;
     *-*-sysv5*)
         ARCH=sysv5
@@ -1958,9 +1968,9 @@ if test $ARCH = solaris; then
   SDL_RLD_FLAGS="-R\${exec_prefix}/lib"
 fi
 
-if test $ARCH = openbsd; then
-  SDL_RLD_FLAGS="-L${X11BASE}/lib -Wl,-rpath,\${exec_prefix}/lib -Wl,-rpath,${X11BASE}/lib"
-fi
+#if test $ARCH = openbsd; then
+#  SDL_RLD_FLAGS="-L${X11BASE}/lib -Wl,-rpath,\${exec_prefix}/lib -Wl,-rpath,${X11BASE}/lib"
+#fi
 
 dnl Output the video drivers we use
 if test x$enable_video = xtrue; then
