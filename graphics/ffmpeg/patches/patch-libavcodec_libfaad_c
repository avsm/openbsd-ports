$OpenBSD: patch-libavcodec_libfaad_c,v 1.4 2008/09/15 22:06:11 jakemsr Exp $
--- libavcodec/libfaad.c.orig	Wed Jul 16 00:28:58 2008
+++ libavcodec/libfaad.c	Wed Jul 16 00:37:44 2008
@@ -75,14 +75,14 @@ typedef struct {
 #else
     unsigned char FAADAPI (*faacDecSetConfiguration)(faacDecHandle hDecoder,
                                                      faacDecConfigurationPtr config);
-    long FAADAPI (*faacDecInit)(faacDecHandle hDecoder,
+    int FAADAPI (*faacDecInit)(faacDecHandle hDecoder,
                                 unsigned char *buffer,
-                                unsigned long buffer_size,
-                                unsigned long *samplerate,
+                                unsigned int buffer_size,
+                                unsigned int *samplerate,
                                 unsigned char *channels);
     char FAADAPI (*faacDecInit2)(faacDecHandle hDecoder, unsigned char *pBuffer,
                                  unsigned long SizeOfDecoderSpecificInfo,
-                                 unsigned long *samplerate, unsigned char *channels);
+                                 unsigned int *samplerate, unsigned char *channels);
     void *FAADAPI (*faacDecDecode)(faacDecHandle hDecoder,
                                    faacDecFrameInfo *hInfo,
                                    unsigned char *buffer,
@@ -119,7 +119,7 @@ static void channel_setup(AVCodecContext *avctx)
 static int faac_init_mp4(AVCodecContext *avctx)
 {
     FAACContext *s = avctx->priv_data;
-    unsigned long samplerate;
+    unsigned int samplerate;
 #ifndef FAAD2_VERSION
     unsigned long channels;
 #else
@@ -133,7 +133,7 @@ static int faac_init_mp4(AVCodecContext *avctx)
                             &samplerate, &channels);
         if (r < 0){
             av_log(avctx, AV_LOG_ERROR,
-                   "faacDecInit2 failed r:%d   sr:%ld  ch:%ld  s:%d\n",
+                   "faacDecInit2 failed r:%d   sr:%d  ch:%ld  s:%d\n",
                    r, samplerate, (long)channels, avctx->extradata_size);
         } else {
             avctx->sample_rate = samplerate;
@@ -176,7 +176,7 @@ static int faac_decode_frame(AVCodecContext *avctx,
 #else
 
     if(!s->init){
-        unsigned long srate;
+        unsigned int srate;
         unsigned char channels;
         int r = s->faacDecInit(s->faac_handle, buf, buf_size, &srate, &channels);
         if(r < 0){
