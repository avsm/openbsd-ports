*** termcap.c.orig	Mon Jan 23 15:07:10 1995
--- termcap.c	Thu Oct 15 11:56:55 1998
***************
*** 17,22 ****
--- 17,23 ----
  675 Mass Ave, Cambridge, MA 02139, USA.  */ 
  
  #include <stdio.h>
+ #include <stdlib.h>
  #include <sys/types.h>
  #include <sys/stat.h>
  #include "config.h"
***************
*** 27,40 ****
  #include "queue.h"
  #include "termcap.h"
  
- int dopadding=0;
- char *joeterm=0;
- 
  #ifdef TERMINFO
! extern char *tgoto();
! extern char *tgetstr();
  #endif
  
  /* Default termcap entry */
  
  char defentry[]=
--- 28,41 ----
  #include "queue.h"
  #include "termcap.h"
  
  #ifdef TERMINFO
! #include <curses.h>
! #include <term.h>
  #endif
  
+ int dopadding=0;
+ char *joeterm=0;
+ 
  /* Default termcap entry */
  
  char defentry[]=
***************
*** 275,281 ****
   *pp++=0;
   loop1:
   if(pp[0]==' ' || pp[0]=='\t') goto loop;
!  for(q=0;pp[q] && pp[q]!='#' && pp[q]!='=' && pp[q]!='@' && pp[q]!=':';++q);
   qq=pp;
   c=pp[q]; pp[q]=0;
   if(c) pp+=q+1;
--- 276,283 ----
   *pp++=0;
   loop1:
   if(pp[0]==' ' || pp[0]=='\t') goto loop;
!  q=0; if (pp[q]=='@') q++;
!  for(;pp[q] && pp[q]!='#' && pp[q]!='=' && pp[q]!='@' && pp[q]!=':';++q);
   qq=pp;
   c=pp[q]; pp[q]=0;
   if(c) pp+=q+1;
