$OpenBSD: patch-configure,v 1.3 2002/05/19 00:27:06 espie Exp $
--- configure.orig	Fri Dec  7 18:45:21 2001
+++ configure	Sun May 19 01:18:35 2002
@@ -2419,7 +2419,7 @@ CCDEPMODE="depmode=$am_cv_CC_dependencie
 
 # By default we simply use the C compiler to build assembly code.
 
-: ${AS='$(CC)'}
+: ${AS='$CC'}
 # Set ASFLAGS if not already set.
 : ${ASFLAGS='$(CFLAGS)'}
 
@@ -15547,6 +15547,7 @@ cat >conftest.$ac_ext <<_ACEOF
 #line 15547 "configure"
 #include "confdefs.h"
 $ac_includes_default
+#include <X11/Xlib.h>
 #include <X11/extensions/XShm.h>
 _ACEOF
 rm -f conftest.$ac_objext
@@ -17296,7 +17297,7 @@ if test "${enable_sunaudio+set}" = set; 
 fi;
 if test x"$enable_sunaudio" != x"no"; then
     case "$host" in
-    *-sun-solaris*|*-netbsd*)
+    *-sun-solaris*|*-netbsd*|*-openbsd*)
 
 cat >>confdefs.h <<\_ACEOF
 #define LIBAO_SUNAUDIO
@@ -17622,6 +17623,7 @@ cat >conftest.$ac_ext <<_ACEOF
 #line 17622 "configure"
 #include "confdefs.h"
 $ac_includes_default
+#include <X11/Xlib.h>
 #include <X11/extensions/xf86vmode.h>
 _ACEOF
 rm -f conftest.$ac_objext
@@ -17873,8 +17875,11 @@ _ACEOF
 powerpc|ppc)
 	if test x"$GCC" = x"yes"; then
 	  CFLAGS="$CFLAGS -fomit-frame-pointer -funroll-loops"
-	  XCFLAGS="-Wa,-m7400"
-	  USE_ALTIVEC=yes
+	  echo | as -m7400 >/dev/null
+	  if test $? -eq 0; then
+	  	XCFLAGS="-Wa,-m7400"
+		USE_ALTIVEC=yes
+	  fi
 	fi
 esac
 
