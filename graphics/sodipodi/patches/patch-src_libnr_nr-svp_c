$OpenBSD: patch-src_libnr_nr-svp_c,v 1.1 2005/01/24 16:30:54 alek Exp $
--- src/libnr/nr-svp.c.orig	Mon Jan 24 16:31:35 2005
+++ src/libnr/nr-svp.c	Mon Jan 24 16:31:45 2005
@@ -71,6 +71,8 @@ nr_svp_from_svl (NRSVL *svl, NRFlat *fla
 	}
 
 	svp = malloc (sizeof (NRSVP) + (nsegs - 1) * sizeof (NRSVPSegment));
+	if (!svp)
+		return NULL;
 	svp->length = nsegs;
 	if (nsegs > 0) {
 		unsigned int sidx, pidx;
