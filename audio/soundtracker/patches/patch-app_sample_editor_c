$OpenBSD: patch-app_sample_editor_c,v 1.2 2002/05/30 09:08:28 wcobb Exp $
--- app/sample-editor.c.orig	Thu May 16 11:55:24 2002
+++ app/sample-editor.c	Tue May 21 18:21:30 2002
@@ -186,7 +186,7 @@ static void sample_editor_reverse_clicke
 static void
 sample_editor_lock_sample (void)
 {
-    g_mutex_lock(current_sample->sample.lock);
+    pthread_mutex_lock(current_sample->sample.lock);
 }
 
 static void
@@ -195,7 +195,7 @@ sample_editor_unlock_sample (void)
     if(gui_playing_mode) {
 	mixer->updatesample(&current_sample->sample);
     }
-    g_mutex_unlock(current_sample->sample.lock);
+    pthread_mutex_unlock(current_sample->sample.lock);
 }
 
 void
@@ -465,7 +465,7 @@ sample_editor_page_create (GtkNotebook *
 #if !defined(NO_AUDIOFILE) && HAVE_DLFCN_H
     { // hack, hack
 	void *handle, *function;
-	handle = dlopen(NULL, RTLD_NOW);
+	handle = dlopen(NULL, DL_LAZY);
 	function = dlsym(handle, "afSetVirtualPCMMapping");
 	if(function == NULL) {
 	    libaf2 = FALSE;
