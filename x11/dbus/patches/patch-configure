$OpenBSD: patch-configure,v 1.3 2009/10/10 14:30:47 ajacoutot Exp $
--- configure.orig	Sat Oct 10 14:32:20 2009
+++ configure	Sat Oct 10 14:32:14 2009
@@ -22148,13 +22148,13 @@ fi
 { $as_echo "$as_me:$LINENO: result: $ac_cv_func_pthread_cond_timedwait" >&5
 $as_echo "$ac_cv_func_pthread_cond_timedwait" >&6; }
 if test "x$ac_cv_func_pthread_cond_timedwait" = x""yes; then
-  { $as_echo "$as_me:$LINENO: checking for pthread_cond_timedwait in -lpthread" >&5
-$as_echo_n "checking for pthread_cond_timedwait in -lpthread... " >&6; }
+  { $as_echo "$as_me:$LINENO: checking for pthread_cond_timedwait in -pthread" >&5
+$as_echo_n "checking for pthread_cond_timedwait in -pthread... " >&6; }
 if test "${ac_cv_lib_pthread_pthread_cond_timedwait+set}" = set; then
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -22214,7 +22214,7 @@ fi
 { $as_echo "$as_me:$LINENO: result: $ac_cv_lib_pthread_pthread_cond_timedwait" >&5
 $as_echo "$ac_cv_lib_pthread_pthread_cond_timedwait" >&6; }
 if test "x$ac_cv_lib_pthread_pthread_cond_timedwait" = x""yes; then
-  THREAD_LIBS="-lpthread"
+  THREAD_LIBS="-pthread"
 fi
 
 fi
@@ -25213,7 +25213,9 @@ if test "x$GCC" = "xyes"; then
      ;;
   esac
 
-  case " $CFLAGS " in
+  case $host in
+  arm-*-openbsd*) ;;
+  *) case " $CFLAGS " in
   *[\ \	]-fPIE[\ \	]*) ;;
   *) if cc_supports_flag -fPIE; then
         PIE_CFLAGS="-fPIE"
@@ -25225,6 +25227,7 @@ if test "x$GCC" = "xyes"; then
      fi
      ;;
   esac
+  esac
 
   ### Disabled warnings, and compiler flag overrides
 
@@ -25241,13 +25244,6 @@ if test "x$GCC" = "xyes"; then
   case " $CFLAGS " in
   *[\ \	]-Wno-sign-compare[\ \	]*) ;;
   *) CFLAGS="$CFLAGS -Wno-sign-compare" ;;
-  esac
-  case " $CFLAGS " in
-  *[\ \	]-Wno-pointer-sign[\ \	]*) ;;
-  *) if cc_supports_flag -Wno-pointer-sign; then
-        CFLAGS="$CFLAGS -Wno-pointer-sign"
-     fi
-     ;;
   esac
 
   # http://bugs.freedesktop.org/show_bug.cgi?id=19195
