$OpenBSD: patch-sys_sunaudio_gstsunaudiosink_c,v 1.2 2007/09/16 18:15:23 naddy Exp $
--- sys/sunaudio/gstsunaudiosink.c.orig	Sat Dec 16 14:51:48 2006
+++ sys/sunaudio/gstsunaudiosink.c	Sun Sep 16 20:09:41 2007
@@ -42,7 +42,6 @@
 
 #include <fcntl.h>
 #include <string.h>
-#include <stropts.h>
 #include <unistd.h>
 #include <sys/mman.h>
 
@@ -623,7 +622,7 @@ gst_sunaudiosink_reset (GstAudioSink * asink)
   }
 
   /* Flush the audio */
-  ret = ioctl (sunaudiosink->fd, I_FLUSH, FLUSHW);
+  ret = ioctl (sunaudiosink->fd, AUDIO_FLUSH);
   if (ret == -1) {
     GST_ELEMENT_ERROR (sunaudiosink, RESOURCE, SETTINGS, (NULL), ("%s",
             strerror (errno)));
@@ -638,7 +637,7 @@ gst_sunaudiosink_reset (GstAudioSink * asink)
 
   g_cond_signal (sunaudiosink->sleep_cond);
 
-  ret = ioctl (sunaudiosink->fd, I_FLUSH, FLUSHW);
+  ret = ioctl (sunaudiosink->fd, AUDIO_FLUSH);
   if (ret == -1) {
     GST_ELEMENT_ERROR (sunaudiosink, RESOURCE, SETTINGS, (NULL), ("%s",
             strerror (errno)));
