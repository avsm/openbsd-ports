$OpenBSD: patch-Cache-FastMmap-CImpl_mmap_cache_c,v 1.1 2008/09/24 17:45:42 jasper Exp $
--- Cache-FastMmap-CImpl/mmap_cache.c.orig	Wed Sep 24 19:45:10 2008
+++ Cache-FastMmap-CImpl/mmap_cache.c	Wed Sep 24 19:46:50 2008
@@ -649,6 +649,7 @@ int mmc_write(
 ) {
   int did_store = 0;
   MU32 kvlen = KV_SlotLen(key_len, val_len);
+  MU32 expire_time;
 
   /* Search for slot with given key */
   MU32 * slot_ptr = _mmc_find_slot(cache, hash_slot, key_ptr, key_len, 1);
@@ -676,7 +677,7 @@ int mmc_write(
 
     /* Calculate expiry time */
     if (expire_seconds == (MU32)-1) expire_seconds = cache->expire_time;
-    MU32 expire_time = expire_seconds ? now + expire_seconds : 0;
+    expire_time = expire_seconds ? now + expire_seconds : 0;
 
     /* Store info into slot */
     S_LastAccess(base_det) = now;
