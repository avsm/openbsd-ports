$OpenBSD: patch-erts_emulator_Makefile_in,v 1.6 2007/12/19 22:51:29 sthen Exp $
--- erts/emulator/Makefile.in.orig	Mon Nov 26 19:55:14 2007
+++ erts/emulator/Makefile.in	Thu Dec  6 09:46:12 2007
@@ -135,7 +135,7 @@ darwinCFLAGS=-DDARWIN
 noopsysCFLAGS=
 OPSYSCFLAGS=$($(OPSYS)CFLAGS)
 ARCH=@ARCH@
-ultrasparcCFLAGS=-Wa,-xarch=v8plusa
+ultrasparcCFLAGS=
 ARCHCFLAGS=$($(ARCH)CFLAGS)
 
 ifdef HIPE_ENABLED
@@ -184,12 +184,12 @@ endif
 
 ifeq ($(CC), gcc)
 ifeq ($(NO_INLINE_FUNCTIONS),true)
-GEN_OPT_FLGS = -O3 -fno-inline-functions
+GEN_OPT_FLGS = -O2 -fno-inline-functions
 else
 ifeq ($(OMIT_OMIT_FP),yes)
-GEN_OPT_FLGS = -O3
+GEN_OPT_FLGS = -O2
 else
-GEN_OPT_FLGS = -O3 -fomit-frame-pointer
+GEN_OPT_FLGS = -O2 -fomit-frame-pointer
 endif
 endif
 UNROLL_FLG = -funroll-loops
@@ -814,7 +814,7 @@ $(OBJDIR)/%.o: hipe/%.S
 	$(CC) $(CFLAGS) $(INCLUDES) -c $< -o $@
 
 $(OBJDIR)/%.o: hipe/%.c
-	$(CC) $(subst O2,O3, $(CFLAGS)) $(INCLUDES) -c $< -o $@
+	$(CC) $(CFLAGS) $(INCLUDES) -c $< -o $@
 
 $(BINDIR)/hipe_mkliterals$(TF_MARKER):	$(OBJDIR)/hipe_mkliterals.o
 	$(CC) $(CFLAGS) $(INCLUDES) -o $@ $<
