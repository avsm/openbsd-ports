$OpenBSD: patch-src_libreal_audio_decoder_c,v 1.2 2006/10/12 04:48:14 brad Exp $
--- src/libreal/audio_decoder.c.orig	Sun Jul  9 10:39:11 2006
+++ src/libreal/audio_decoder.c	Fri Sep 15 17:53:21 2006
@@ -32,8 +32,10 @@
 #include <fcntl.h>
 #include <unistd.h>
 #include <dlfcn.h>
-#ifdef __x86_64__
-  #include <elf.h>
+#ifdef __linux__
+  #ifdef __x86_64__
+    #include <elf.h>
+  #endif
 #endif
 
 #define LOG_MODULE "real_audio_decoder"
@@ -121,7 +123,8 @@ void __builtin_delete (void *foo) {
   free (foo);
 }
 
-#ifdef __x86_64__
+#ifdef __linux__
+  #ifdef __x86_64__
 /* (gb) quick-n-dirty check to be run natively */
 static int is_x86_64_object_(FILE *f)
 {
@@ -162,6 +165,7 @@ static inline int is_x86_64_object(const
   fclose(f);
   return ret;
 }
+  #endif
 #endif
 
 static int load_syms_linux (realdec_decoder_t *this, char *codec_name,
