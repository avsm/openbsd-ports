$OpenBSD: patch-configure,v 1.12 2005/04/20 16:46:54 naddy Exp $
--- configure.orig	Sat Apr  9 08:32:58 2005
+++ configure	Wed Apr 13 00:18:10 2005
@@ -111,8 +111,8 @@ case "$cpu" in
   i386|i486|i586|i686|i86pc|BePC)
     cpu="x86"
   ;;
-  x86_64)
-    if [ "`$cc -dumpmachine | grep x86_64 | cut -d- -f1`" = "x86_64" -a \
+  amd64|x86_64)
+    if [ "`$cc -dumpmachine | grep amd64 | cut -d- -f1`" = "amd64" -a \
          -z "`echo $CFLAGS | grep -- -m32`"  ]; then
       cpu="x86_64"
     else
@@ -266,6 +266,12 @@ make="gmake"
 CFLAGS="-pthread"
 LDFLAGS="$LDFLAGS -export-dynamic -pthread"
 ;;
+OpenBSD)
+strip="echo"
+extralibs="$extralibs -lossaudio -pthread"
+source_path="`echo $0 | sed -e 's#/configure##'`"
+SLIBSUF=".so.$SV"
+;;
 BSD/OS)
 v4l="no"
 audio_oss="yes"
@@ -832,10 +838,10 @@ EOF
 $cc -o $TMPE $TMPC 2> /dev/null || _memalign=no
 fi
 
-if test "$_memalign" = "no" -a "$mmx" = "yes" -a "$memalignhack" != "yes"; then
-    echo "error, no memalign() but sse enabled, either disable it or use --enable-memalign-hack"
-    exit 1
-fi
+#if test "$_memalign" = "no" -a "$mmx" = "yes" -a "$memalignhack" != "yes"; then
+#    echo "error, no memalign() but sse enabled, either disable it or use --enable-memalign-hack"
+#    exit 1
+#fi
 
 cat > $TMPC << EOF
 #include <time.h>
@@ -1274,9 +1280,6 @@ if test "$pthreads" = "yes" ; then
   echo "HAVE_PTHREADS=yes" >> config.mak
   echo "#define HAVE_PTHREADS 1" >> $TMPH
   echo "#define HAVE_THREADS 1" >> $TMPH
-  if test $targetos != FreeBSD; then
-     extralibs="$extralibs -lpthread"
-  fi
 fi
 if test "$sdl" = "yes" ; then
   echo "CONFIG_SDL=yes" >> config.mak
