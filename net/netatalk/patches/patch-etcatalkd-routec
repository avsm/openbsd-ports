--- etc/atalkd/route.c.orig	Sun Aug 17 09:20:18 1997
+++ etc/atalkd/route.c	Tue Nov 30 14:18:52 1999
@@ -3,6 +3,8 @@
  * All Rights Reserved. See COPYRIGHT.
  */
 
+#include <string.h>
+#include <unistd.h>
 #include <sys/param.h>
 #include <sys/types.h>
 #include <sys/socket.h>
@@ -12,7 +14,7 @@
 
 #include "rtmp.h"
 
-#if !defined (BSD4_4) 
+#ifndef BSD4_4 
 route( message, dst, gate, flags )
     int			message;
     struct sockaddr	*dst, *gate;
@@ -20,7 +22,7 @@
 {
     struct rtentry	rtent;
 
-    bzero( &rtent, sizeof( struct rtentry ));
+    memset( &rtent, 0, sizeof( struct rtentry ));
     rtent.rt_dst = *dst;
     rtent.rt_gateway = *gate;
     rtent.rt_flags = flags;
@@ -30,10 +32,10 @@
 #else BSD4_4
 
 struct sockaddr_m {
-    u_char	sam_len;
-    u_char	sam_family;
-    u_short	sam_pad;
-    u_short	sam_mask;
+    u_int8_t	sam_len;
+    u_int8_t	sam_family;
+    u_int16_t	sam_pad;
+    u_int16_t	sam_mask;
 } mask = { sizeof( struct sockaddr_m ), 0, 0, 0xffff };
 
 struct rt_msg_at {
@@ -43,6 +45,7 @@
     struct sockaddr_m	rtma_mask;
 } rtma;
 
+int
 route( message, dst, gate, flags )
     int			message;
     struct sockaddr_at	*dst, *gate;
@@ -50,7 +53,7 @@
 {
     int			rc;
 
-    bzero( &rtma, sizeof( struct rt_msg_at ));
+    memset( &rtma, 0, sizeof( struct rt_msg_at ));
     rtma.rtma_rtm.rtm_msglen = sizeof( struct rt_msg_at );
     rtma.rtma_rtm.rtm_version = RTM_VERSION;
     rtma.rtma_rtm.rtm_type = message;
