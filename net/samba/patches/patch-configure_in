$OpenBSD: patch-configure_in,v 1.3 2001/08/23 09:12:13 dhartmei Exp $
--- configure.in.orig	Tue Apr 17 08:44:30 2001
+++ configure.in	Mon Aug 13 10:49:39 2001
@@ -18,7 +18,7 @@ AC_ARG_WITH(fhs, [  --with-fhs          
     codepagedir="\$(LIBDIR)/codepages"
     configdir="\$(LIBDIR)"
     lockdir="\$(VARDIR)/locks"
-    logfilebase="\$(VARDIR)"
+    logfilebase="\$(VARDIR)/log"
     privatedir="\${prefix}/private"
     swatdir="\${prefix}/swat")
 
@@ -123,9 +123,6 @@ AC_SUBST(WRAP32)
 AC_SUBST(PICFLAG)
 AC_SUBST(SHLIBEXT)
 
-# compile with optimization and without debugging by default
-CFLAGS="-O ${CFLAGS}"
-
 AC_ARG_ENABLE(debug, [  --enable-debug        turn on debugging [default=no]],
     [if eval "test x$enable_debug = xyes"; then
 	CFLAGS="${CFLAGS} -g"
@@ -1707,45 +1704,47 @@ AC_MSG_CHECKING(whether to use SSL)
 AC_ARG_WITH(ssl,
 [  --with-ssl     Include SSL support
   --without-ssl  Don't include SSL support (default)
-  --with-sslinc=DIR Where the SSL includes are (defaults to /usr/local/ssl)],
+  --with-sslinc=DIR Where the SSL headers are (defaults to /usr/local/ssl/include)
+  --with-ssllib=DIR Where the SSL libraries are (defaults to /usr/local/ssl/lib)],
 [ case "$withval" in
   yes)
     AC_MSG_RESULT(yes)
     AC_DEFINE(WITH_SSL)
-    withval="/usr/local/ssl"     # default
+    sslinc="/usr/local/ssl/include"	#default
+    ssllib="/usr/local/ssl/lib"		#default
 
     if test "${with_sslinc+set}" = set; then
-
 	withval="$with_sslinc"
 	case "$withval" in
 	yes|no)
-	  echo "configure: warning: --with-sslinc called without argument - will use default" 1>&w
-	  CFLAGS="-I/usr/local/ssl/include $CFLAGS"
-	  LIBS="-lssl -lcrypto $LIBS"
-	  LDFLAGS="=L/usr/local/ssl/lib $LDFLAGS"
+	  AC_MSG_WARN(--with-sslinc called without argument - will use default)
 	;;
         * )
-          CFLAGS="-I${withval}/include $CFLAGS"
-	  LIBS="-lssl -lcrypto $LIBS"
-  	  LDFLAGS="-L${withval}/lib $LDFLAGS"
+	  sslinc="${withval}"
 	;;
 	esac
+    fi
 
-    else
-
-	CFLAGS="-I/usr/local/ssl/include $CFLAGS"   
-	LIBS="-lssl -lcrypto $LIBS"
-	LDFLAGS="-L/usr/local/ssl/lib $LDFLAGS"
-
+    if test "${with_ssllib+set}" = set; then
+	withval="$with_ssllib"
+	case "$withval" in
+	yes|no)
+	  AC_MSG_WARN(--with-ssllib called without argument - will use default)
+	;;
+	* )
+	  ssllib="${withval}"
+	;;
+	esac
     fi
 
-    if test ! -d ${withval}; then
-      echo "configure: error: called with --with-ssl, but ssl base directory ${withval} does not exist or is not a directory. Aborting config" 1>&2
-      exit 1
-    fi 
+    CFLAGS="-I${sslinc} $CFLAGS"
+    LIBS="-lssl -lcrypto $LIBS"
+    LDFLAGS="-L${ssllib} $LDFLAGS"
 
     CFLAGS="-DHAVE_CRYPT_DECL $CFLAGS"  # Damn, SSLeay defines its own
 
+    echo "OpenSSL headers path: ${sslinc}"
+    echo "OpenSSL libraries path: ${ssllib}"
     ;;
   *)
     AC_MSG_RESULT(no)
