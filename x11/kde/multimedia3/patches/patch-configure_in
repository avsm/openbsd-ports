$OpenBSD: patch-configure_in,v 1.10 2004/01/27 00:55:24 naddy Exp $
--- configure.in.orig	2003-09-11 13:13:32.000000000 -0600
+++ configure.in	2004-01-26 16:51:44.000000000 -0700
@@ -183,11 +183,11 @@ AC_CHECK_HEADER(vorbis/vorbisfile.h,
 
 AC_CHECK_LIB(vorbisfile, ov_open,
 	[USELESS_VAR=1],
-	[HAVE_VORBIS=""], -lvorbis -logg)
+	[HAVE_VORBIS=""], -lvorbis -lm -logg)
 
 AC_CHECK_LIB(vorbis, vorbis_info_init,
 	[USELESS_VAR=1],
-	[HAVE_VORBIS=""])
+	[HAVE_VORBIS=""], -lm -logg)
 
 AC_CHECK_LIB(ogg, ogg_page_version,
 	[USELESS_VAR=1],
@@ -813,7 +813,7 @@ if test "x$with_vorbis" = "xCHECK" ; the
           VORBIS_LIBS="-L$vorbis_libdir "
           test "$USE_RPATH" = yes && VORBIS_RPATH="-R $vorbis_libdir"
         fi
-        VORBIS_LIBS="${VORBIS_LIBS}-lvorbis -lm"
+        VORBIS_LIBS="${VORBIS_LIBS}-lvorbis -lm -logg"
         with_vorbis=FOUND
         break
       fi
@@ -835,7 +835,7 @@ NOTFOUND) AC_MSG_RESULT(searched but not
       VORBIS_LIBS="-L${VORBIS_ROOT}/lib "
       test "$USE_RPATH" = yes && VORBIS_RPATH="-R ${VORBIS_ROOT}/lib"
     fi
-    VORBIS_LIBS="${VORBIS_LIBS}-lvorbis -lm"
+    VORBIS_LIBS="${VORBIS_LIBS}-lvorbis -lm -logg"
     codec_h="$VORBIS_ROOT/include/vorbis/codec.h"
     # Hmm.  May be we should even disallow vorbis completely if there
     # is no codec.h in the directory provided by the user
@@ -1580,7 +1580,7 @@ dnl    else
 dnl      lib_xaw_opt=-lXaw
 dnl    fi
     EXTRATDEFS="$EXTRATDEFS -DIA_XAW"
-    EXTRATLIBS="$EXTRATLIBS $all_libraries -lXaw -lXt -lX11"
+    EXTRATLIBS="$EXTRATLIBS $all_libraries -lXaw -lXmu -lXt -lX11"
 dnl    if test "x$have_xext" = xyes; then
 dnl      a_so_libs="-lXext -lX11"
 dnl    else
@@ -1927,6 +1927,9 @@ case "$OS_TYPE" in
   NetBSD)
     kde_mpeglib_compiles=yes
     ;;
+  OpenBSD)
+    kde_mpeglib_compiles=yes
+    ;;
   Linux)
     kde_mpeglib_compiles=yes
     ;;
@@ -1956,6 +1959,12 @@ case "$OS_TYPE" in
     AC_DEFINE(OS_Linux,1,[Define if you have linux pthread])
     ;;
 
+  OpenBSD)
+    OS_TYPE="BSD"
+    AC_CHECK_LIB(c_r, pthread_create, [LIBPTHREAD="-pthread"])
+    AC_DEFINE(OS_BSD,1,[Define if you have BSD pthread])
+    ;;
+
   FreeBSD)
     OS_TYPE="BSD"
     AC_CHECK_LIB(c_r, pthread_create, [LIBPTHREAD="-lc_r"]) dnl name of pthread lib in FreeBSD
@@ -2002,7 +2011,7 @@ KDE_MPEGLIB_COMPILES
 
 THIS_LIB_LIBS="-lX11 -lXext -lm -lstdc++ ${XVLIBS} ${DGALIBS} "
 THIS_LIB_LIBS="${THIS_LIB_LIBS} ${XVIDMODELIBS} ${SDLLIB} ${CDDALIBS} "
-THIS_LIB_LIBS="${THIS_LIB_LIBS} ${OGG_VORBISLIBS} ${LIBPTHREAD}"
+THIS_LIB_LIBS="${THIS_LIB_LIBS} ${OGG_VORBISLIBS} ${LIBPTHREAD} ${LIBOSSAUDIO}"
 AC_SUBST(THIS_LIB_LIBS)
 
 
