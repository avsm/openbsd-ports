$OpenBSD: patch-libavcodec_Makefile,v 1.7 2004/10/07 06:12:11 jolan Exp $
--- libavcodec/Makefile.orig	Fri Jun 18 08:11:15 2004
+++ libavcodec/Makefile	Thu Oct  7 00:28:00 2004
@@ -177,6 +177,7 @@ OBJS := $(OBJS) $(ASM_OBJS)
 LIB= $(LIBPREF)avcodec$(LIBSUF)
 ifeq ($(BUILD_SHARED),yes)
 SLIB= $(SLIBPREF)avcodec$(SLIBSUF)
+CFLAGS += ${PIC} -DPIC
 endif
 TESTS= imgresample-test dct-test motion-test fft-test
 
@@ -197,7 +198,7 @@ ifeq ($(CONFIG_WIN32),yes)
 	$(CC) $(SHFLAGS) -Wl,--output-def,$(@:.dll=.def) -o $@ $(OBJS) $(EXTRALIBS) $(AMREXTRALIBS)
 	-lib /machine:i386 /def:$(@:.dll=.def)
 else
-	$(CC) $(SHFLAGS) -o $@ $(OBJS) $(EXTRALIBS) $(AMREXTRALIBS) $(LDFLAGS)
+	$(CC) $(LDFLAGS) $(SHFLAGS) -o $@ $(OBJS) $(EXTRALIBS) $(AMREXTRALIBS) $(LDFLAGS)
 endif
 
 dsputil.o: dsputil.c dsputil.h
