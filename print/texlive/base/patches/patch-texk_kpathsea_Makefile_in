$OpenBSD: patch-texk_kpathsea_Makefile_in,v 1.2 2008/10/21 20:57:57 steven Exp $
--- texk/kpathsea/Makefile.in.orig	Sun Aug 24 20:26:34 2008
+++ texk/kpathsea/Makefile.in	Sun Aug 24 21:25:06 2008
@@ -129,35 +129,40 @@ install: install-exec install-data
 uninstall: uninstall-exec uninstall-data
 
 install-exec: kpsewhich
-	$(SHELL) $(top_srcdir)/../mkinstalldirs $(bindir) $(scriptdir) \
-	  $(libdir) $(web2cdir)
+	$(SHELL) $(top_srcdir)/../mkinstalldirs $(DESTDIR)/$(bindir) \
+	  $(DESTDIR)/$(scriptdir) $(DESTDIR)/$(libdir) $(DESTDIR)/$(web2cdir)
 	if grep 'original mktexpk --' $(scriptdir)/mktexpk >/dev/null 2>&1\
 	   || test ! -r $(scriptdir)/mktexpk; then \
-	  $(INSTALL_SCRIPT) $(srcdir)/mktexpk $(scriptdir)/mktexpk; \
+	  $(INSTALL_SCRIPT) $(srcdir)/mktexpk $(DESTDIR)/$(scriptdir)/mktexpk; \
 	else true; fi
 	if grep 'original mktexmf --' $(scriptdir)/mktexmf >/dev/null 2>&1\
 	   || test ! -r $(scriptdir)/mktexmf; then \
-	  $(INSTALL_SCRIPT) $(srcdir)/mktexmf $(scriptdir)/mktexmf; \
+	  $(INSTALL_SCRIPT) $(srcdir)/mktexmf $(DESTDIR)/$(scriptdir)/mktexmf; \
 	else true; fi
 	if grep 'original mktextfm --' $(scriptdir)/mktextfm >/dev/null 2>&1\
 	   || test ! -r $(scriptdir)/mktextfm; then \
-	  $(INSTALL_SCRIPT) $(srcdir)/mktextfm $(scriptdir)/mktextfm; \
+	  $(INSTALL_SCRIPT) $(srcdir)/mktextfm \
+	  $(DESTDIR)/$(scriptdir)/mktextfm; \
 	else true; fi
 	if grep 'original mktexlsr --' $(scriptdir)/mktexlsr >/dev/null 2>&1\
 	   || test ! -r $(scriptdir)/mktexlsr; then \
-	  $(INSTALL_SCRIPT) $(srcdir)/mktexlsr $(scriptdir)/mktexlsr; \
+	  $(INSTALL_SCRIPT) $(srcdir)/mktexlsr \
+	  $(DESTDIR)/$(scriptdir)/mktexlsr; \
 	else true; fi
-	$(INSTALL_DATA) $(srcdir)/mktex.opt $(web2cdir)/mktex.opt
-	$(INSTALL_SCRIPT) $(srcdir)/mktexdir $(web2cdir)/mktexdir
-	$(INSTALL_DATA) $(srcdir)/mktexdir.opt $(web2cdir)/mktexdir.opt
-	$(INSTALL_SCRIPT) $(srcdir)/mktexnam $(web2cdir)/mktexnam
-	$(INSTALL_DATA) $(srcdir)/mktexnam.opt $(web2cdir)/mktexnam.opt
-	$(INSTALL_SCRIPT) $(srcdir)/mktexupd $(web2cdir)/mktexupd
-	$(INSTALL_LIBTOOL_LIBS) lib$(library).la $(libdir)
-	$(INSTALL_LIBTOOL_PROG) kpsewhich $(bindir)
-	$(INSTALL_PROGRAM) kpsestat $(bindir)
-	$(INSTALL_PROGRAM) kpseaccess $(bindir)
-	$(INSTALL_PROGRAM) kpsereadlink $(bindir)
+	$(INSTALL_DATA) $(srcdir)/mktex.opt $(DESTDIR)/$(web2cdir)/mktex.opt
+	$(INSTALL_SCRIPT) $(srcdir)/mktexdir $(DESTDIR)/$(web2cdir)/mktexdir
+	$(INSTALL_DATA) $(srcdir)/mktexdir.opt \
+	  $(DESTDIR)/$(web2cdir)/mktexdir.opt
+	$(INSTALL_SCRIPT) $(srcdir)/mktexnam \
+	  $(DESTDIR)/$(web2cdir)/mktexnam
+	$(INSTALL_DATA) $(srcdir)/mktexnam.opt \
+	  $(DESTDIR)/$(web2cdir)/mktexnam.opt
+	$(INSTALL_SCRIPT) $(srcdir)/mktexupd $(DESTDIR)/$(web2cdir)/mktexupd
+	$(INSTALL_LIBTOOL_LIBS) lib$(library).la $(DESTDIR)/$(libdir)
+	$(INSTALL_LIBTOOL_PROG) kpsewhich $(DESTDIR)/$(bindir)
+	$(INSTALL_PROGRAM) kpsestat $(DESTDIR)/$(bindir)
+	$(INSTALL_PROGRAM) kpseaccess $(DESTDIR)/$(bindir)
+	$(INSTALL_PROGRAM) kpsereadlink $(DESTDIR)/$(bindir)
 uninstall-exec:
 	$(UNINSTALL_LIBTOOL_LIBS) $(libdir)/lib$(library).la
 	$(UNINSTALL_LIBTOOL_PROG) $(bindir)/kpsewhich
@@ -166,29 +171,33 @@ uninstall-exec:
 	$(UNINSTALL_PROGRAM) $(bindir)/kpsereadlink
 
 install-data: $(srcdir)/texmf.cnf kpathsea.info install-man
-	$(SHELL) $(top_srcdir)/../mkinstalldirs $(texmf) $(infodir) $(web2cdir)
+	$(SHELL) $(top_srcdir)/../mkinstalldirs $(DESTDIR)/$(texmf) \
+	  $(DESTDIR)/$(infodir) $(DESTDIR)/$(web2cdir)
 	if grep 'original texmf.cnf --' $(web2cdir)/texmf.cnf >/dev/null 2>&1 \
 	   || test ! -r $(web2cdir)/texmf.cnf; then \
-	  $(INSTALL_DATA) $(srcdir)/texmf.cnf $(web2cdir)/texmf.cnf; \
+	  $(INSTALL_DATA) $(srcdir)/texmf.cnf \
+	  $(DESTDIR)/$(web2cdir)/texmf.cnf; \
 	else true; fi
 # Info files.
-	$(INSTALL_DATA) $(srcdir)/kpathsea.i* $(infodir)/
+	$(INSTALL_DATA) $(srcdir)/kpathsea.i* $(DESTDIR)/$(infodir)/
 # Should we install the headers?  They are not just system-dependent,
 # which is bad enough, but even compiler-dependent.
-	$(SHELL) $(top_srcdir)/../mkinstalldirs $(includedir)/kpathsea
+	$(SHELL) $(top_srcdir)/../mkinstalldirs \
+	  $(DESTDIR)/$(includedir)/kpathsea
 	for f in $(install_headers); do \
-	  $(INSTALL_DATA) $$f $(includedir)/kpathsea/; done
+	  $(INSTALL_DATA) $$f $(DESTDIR)/$(includedir)/kpathsea/; done
 	rm -f $(includedir)/kpathsea/acconfig.h
 # Post.
 	$(POST_INSTALL)
 	if $(SHELL) -c 'install-info --version' >/dev/null 2>&1; then \
-	  install-info --info-dir=$(infodir) $(infodir)/kpathsea.info; \
+	  install-info --info-dir=$(DESTDIR)/$(infodir) \
+	  $(DESTDIR)/$(infodir)/kpathsea.info; \
 	else true; fi
 
 uninstall-data:
 	$(PRE_UNINSTALL)
 	if $(SHELL) -c 'install-info --version' >/dev/null 2>&1; then \
-	  install-info --delete --info-dir=$(infodir) $(infodir)/kpathsea.info; \
+	  install-info --delete --info-dir=$(DESTDIR)/$(infodir) $(infodir)/kpathsea.info; \
 	else true; fi
 	$(NORMAL_UNINSTALL)
 	rm -f $(infodir)/kpathsea.i*
