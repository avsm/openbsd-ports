$OpenBSD: patch-Makefile,v 1.1.1.1 2006/01/25 23:32:13 jolan Exp $
--- Makefile.orig	Sun Jun 29 21:44:09 2003
+++ Makefile	Wed Jan 25 00:56:36 2006
@@ -7,24 +7,22 @@ LUALIB= $(LUA)/lib
 LUABIN= $(LUA)/bin
 
 # no need to change anything below here
-CFLAGS= $(INCS) $(WARN) -O2 $G
-WARN= -ansi -pedantic -Wall
-INCS= -I$(LUAINC)
+CFLAGS+= -I$(LOCALBASE)/include -fPIC -DPIC
 
 MYNAME= alarm
-MYLIB= l$(MYNAME)
+MYLIB= lua$(MYNAME)
 
-OBJS= $(MYLIB).o
+OBJS= lalarm.o
 
 T= $(MYLIB).so
 
-all:	test
+all:	$T
 
 test:	$T
 	$(LUABIN)/lua -l$(MYNAME) test.lua
 
 $T:	$(OBJS)
-	$(CC) -o $@ -shared $(OBJS)
+	$(CC) -o $@ -shared -fPIC $(OBJS)
 
 clean:
 	rm -f $(OBJS) $T core core.* a.out
