$OpenBSD: patch-configure,v 1.1 2011/06/02 12:45:43 ajacoutot Exp $
--- configure.orig	Mon Dec 13 10:26:08 2010
+++ configure	Thu Feb  3 16:56:09 2011
@@ -16701,13 +16701,13 @@ $as_echo "no" >&6; }
 #		])
 #	fi
 	ost_cv_thread_library=none
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_self in -lpthread" >&5
-$as_echo_n "checking for pthread_self in -lpthread... " >&6; }
+	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_self in -pthread" >&5
+$as_echo_n "checking for pthread_self in -pthread... " >&6; }
 if test "${ac_cv_lib_pthread_pthread_self+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -16779,13 +16779,13 @@ $as_echo "$ac_cv_lib_c_r_pthread_self" >&6; }
 if test "x$ac_cv_lib_c_r_pthread_self" = x""yes; then :
   ost_cv_thread_library=c_r
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -lpthread" >&5
-$as_echo_n "checking for pthread_kill in -lpthread... " >&6; }
+  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -pthread" >&5
+$as_echo_n "checking for pthread_kill in -pthread... " >&6; }
 if test "${ac_cv_lib_pthread_pthread_kill+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -17090,13 +17090,13 @@ fi
     fi
 
 	as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_mach_thread_np" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_mach_thread_np in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_mach_thread_np in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_mach_thread_np in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_mach_thread_np in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -17137,13 +17137,13 @@ fi
 
 
 	as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_nanosleep" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for nanosleep in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for nanosleep in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for nanosleep in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for nanosleep in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -17645,13 +17645,13 @@ $as_echo "#define PTHREAD_MUTEXTYPE_RECURSIVE PTHREAD_
 	esac
 
 	as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_mutexattr_settype" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_mutexattr_settype in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_mutexattr_settype in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_mutexattr_settype in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_mutexattr_settype in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -17690,13 +17690,13 @@ $as_echo "#define HAVE_PTHREAD_MUTEXATTR_SETTYPE 1" >>
 else
 
 		as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_mutexattr_settype_np" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_mutexattr_settype_np in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_mutexattr_settype_np in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_mutexattr_settype_np in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_mutexattr_settype_np in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -17735,13 +17735,13 @@ $as_echo "#define HAVE_PTHREAD_MUTEXATTR_SETTYPE_NP 1"
 fi
 
 		as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_mutexattr_setkind_np" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_mutexattr_setkind_np in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_mutexattr_setkind_np in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_mutexattr_setkind_np in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_mutexattr_setkind_np in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -17786,13 +17786,13 @@ fi
 
 	ost_cv_thread_rwlock=false
 	as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_rwlock_init" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_rwlock_init in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_rwlock_init in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_rwlock_init in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_rwlock_init in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -17877,13 +17877,13 @@ $as_echo "#define HAVE_PREAD_PWRITE 1" >>confdefs.h
 else
 
 		as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pread" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pread in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pread in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pread in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pread in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -17970,13 +17970,13 @@ fi
 
 
 	as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_suspend" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_suspend in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_suspend in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_suspend in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_suspend in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -18016,13 +18016,13 @@ fi
 
 
 	as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_attr_setstacksize" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_attr_setstacksize in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_attr_setstacksize in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_attr_setstacksize in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_attr_setstacksize in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -18062,13 +18062,13 @@ fi
 
 
 	as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_yield_np" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_yield_np in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_yield_np in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_yield_np in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_yield_np in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -18107,13 +18107,13 @@ $as_echo "#define HAVE_PTHREAD_YIELD_NP 1" >>confdefs.
 else
 
 		as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_yield" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_yield in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_yield in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_yield in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_yield in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -18152,13 +18152,13 @@ $as_echo "#define HAVE_PTHREAD_YIELD 1" >>confdefs.h
 else
 
 			as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_sched_yield" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for sched_yield in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for sched_yield in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for sched_yield in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for sched_yield in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -18204,13 +18204,13 @@ fi
 
 
 	as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_cancel" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_cancel in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_cancel in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_cancel in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_cancel in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -18248,13 +18248,13 @@ eval as_val=\$$as_ac_Lib
 $as_echo "#define HAVE_PTHREAD_CANCEL 1" >>confdefs.h
 
 	  	as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_setcanceltype" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_setcanceltype in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_setcanceltype in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_setcanceltype in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_setcanceltype in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -18342,13 +18342,13 @@ fi
 else
 
 		as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_setcanceltype" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_setcanceltype in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_setcanceltype in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_setcanceltype in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_setcanceltype in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -18394,13 +18394,13 @@ fi
 
 
 	as_ac_Lib=`$as_echo "ac_cv_lib_${ost_cv_thread_library}''_pthread_delay_np" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_delay_np in -l${ost_cv_thread_library}" >&5
-$as_echo_n "checking for pthread_delay_np in -l${ost_cv_thread_library}... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_delay_np in -${ost_cv_thread_library}" >&5
+$as_echo_n "checking for pthread_delay_np in -${ost_cv_thread_library}... " >&6; }
 if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-l${ost_cv_thread_library}  $LIBS"
+LIBS="-${ost_cv_thread_library}  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -21276,7 +21276,7 @@ rm -f core conftest.err conftest.$ac_objext conftest.$
 else
 	# -O2
 	OLD_CXXFLAGS="$CXXFLAGS"
-	CXXFLAGS="$CXXFLAGS -O2"
+	CXXFLAGS="$CXXFLAGS"
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether cc accepts -O2" >&5
 $as_echo_n "checking whether cc accepts -O2... " >&6; }
 	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
