$OpenBSD: patch-j2se_src_solaris_native_com_sun_security_auth_module_Unix_c,v 1.1 2006/01/22 22:46:31 kurt Exp $
--- j2se/src/solaris/native/com/sun/security/auth/module/Unix.c.orig	Sat Jan 21 12:10:19 2006
+++ j2se/src/solaris/native/com/sun/security/auth/module/Unix.c	Sat Jan 21 22:26:46 2006
@@ -18,6 +18,12 @@
 #include <stdlib.h>
 #include <string.h>
 
+// hack in the non-thread safe version and fix later.
+#ifdef __OpenBSD__
+#define getpwuid_r(uid, res_buf,  pwd_buf, bufsize, result) \
+    (*result = getpwuid(uid))
+#endif
+
 JNIEXPORT void JNICALL 
 Java_com_sun_security_auth_module_UnixSystem_getUnixInfo
 						(JNIEnv *env, jobject obj) {
