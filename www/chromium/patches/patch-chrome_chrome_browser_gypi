--- chrome/chrome_browser.gypi.orig	Mon Feb  7 10:43:57 2011
+++ chrome/chrome_browser.gypi	Wed Feb 23 22:55:38 2011
@@ -3496,7 +3496,7 @@
             ['exclude', '^browser/views/tab_contents/tab_contents_view_gtk.h'],
           ],
         }],
-        ['OS=="linux"', {
+        ['OS=="linux" or OS=="openbsd"', {
           'dependencies': [
             '../build/linux/system.gyp:dbus-glib',
             '../build/linux/system.gyp:gconf',
@@ -3508,13 +3508,14 @@
           ],
           'link_settings': {
             'libraries': [
+              '-lkvm',
               # For dlsym() in 'browser/zygote_main_linux.cc'
-              '-ldl',
             ],
           },
           'sources!': [
             'browser/ui/views/extensions/extension_view.cc',
             'browser/ui/views/extensions/extension_view.h',
+            'browser/file_path_watcher_inotify.cc',
           ],
           'sources': [
             'browser/crash_handler_host_linux.h',
@@ -3569,7 +3570,6 @@
             'browser/certificate_manager_model.h',
             'browser/dom_ui/options/certificate_manager_handler.cc',
             'browser/dom_ui/options/certificate_manager_handler.h',
-            'browser/file_path_watcher_inotify.cc',
           ],
         }],
         ['OS=="freebsd" or OS=="openbsd"', {
@@ -3581,7 +3581,18 @@
           ],
           'sources': [
             'browser/file_path_watcher_stub.cc',
+             #'browser/geolocation/gateway_data_provider_bsd.cc',
+             #'browser/geolocation/gateway_data_provider_bsd.h',
           ],
+          'sources!': [
+            #'browser/geolocation/empty_device_data_provider.cc',
+            #'browser/geolocation/empty_device_data_provider.h',
+             'browser/geolocation/gateway_data_provider_linux.cc',
+             'browser/geolocation/gateway_data_provider_linux.h',
+             'browser/geolocation/wifi_data_provider_linux.h',
+             'browser/geolocation/wifi_data_provider_linux.cc',
+            'browser/file_path_watcher_inotify.cc',
+          ],
         }],
         # Use system SSL settings on Mac and Windows.  Use preferences
         # for SSL settings on other platforms.
@@ -4161,7 +4172,7 @@
               ],
             }],
             # GTK build only
-            ['OS=="linux" and toolkit_views==0', {
+            ['(OS=="linux" or OS=="openbsd") and toolkit_views==0', {
               'sources/': [
                 ['include', '^browser/printing/print_dialog_gtk.cc'],
                 ['include', '^browser/printing/print_dialog_gtk.h'],
