$OpenBSD: patch-src_lib-storage_index_maildir_maildir-storage_c,v 1.1 2003/07/23 06:03:01 jolan Exp $
--- src/lib-storage/index/maildir/maildir-storage.c.orig	Sat Jun 14 22:43:05 2003
+++ src/lib-storage/index/maildir/maildir-storage.c	Tue Jul 15 15:18:07 2003
@@ -291,7 +291,7 @@ static int verify_inbox(struct mail_stor
 
 static struct mailbox *
 maildir_open(struct mail_storage *storage, const char *name,
-	     int readonly, int fast)
+	     enum mailbox_open_flags flags)
 {
 	struct index_mailbox *ibox;
 	struct mail_index *index;
@@ -307,8 +307,8 @@ maildir_open(struct mail_storage *storag
 		index_storage_add(index);
 	}
 
-	ibox = index_storage_init(storage, &maildir_mailbox, index, name,
-				  readonly, fast);
+	ibox = index_storage_init(storage, &maildir_mailbox,
+				  index, name, flags);
 	if (ibox != NULL)
 		ibox->expunge_locked = maildir_expunge_locked;
 	return (struct mailbox *) ibox;
@@ -329,7 +329,7 @@ static const char *inbox_fix_case(struct
 
 static struct mailbox *
 maildir_open_mailbox(struct mail_storage *storage,
-		     const char *name, int readonly, int fast)
+		     const char *name, enum mailbox_open_flags flags)
 {
 	const char *path;
 	struct stat st;
@@ -340,7 +340,7 @@ maildir_open_mailbox(struct mail_storage
 	if (strcmp(name, "INBOX") == 0) {
 		if (!verify_inbox(storage))
 			return NULL;
-		return maildir_open(storage, "INBOX", readonly, fast);
+		return maildir_open(storage, "INBOX", flags);
 	}
 
 	if (!maildir_is_valid_existing_name(name)) {
@@ -356,7 +356,7 @@ maildir_open_mailbox(struct mail_storage
 		    !create_control_dir(storage, name))
 			return FALSE;
 
-		return maildir_open(storage, name, readonly, fast);
+		return maildir_open(storage, name, flags);
 	} else if (errno == ENOENT) {
 		mail_storage_set_error(storage, "Mailbox doesn't exist: %s",
 				       name);
