$OpenBSD: patch-Makefile_in,v 1.1 2002/04/01 23:41:24 pvalchev Exp $
--- Makefile.in.orig	Tue Sep  7 19:31:58 1999
+++ Makefile.in	Mon Apr  1 16:31:57 2002
@@ -12,7 +12,7 @@ DEFINES += -DGUNZIP="\"gunzip\""
 # 2) Otherwise, if your system supports standard Unix "uncompress",
 #    then uncomment the following line to support on-the-fly
 #    decompression of ".Z" files...
-#DEFINES += -DUNCOMPRESS="\"uncompress\""
+DEFINES += -DUNCOMPRESS="\"uncompress\""
 # - we'll do path search on the string you specify.  If the program
 #    isn't in your path, you'll need to give the absolute path name.
 # - if you want other formats, see the "compress.h" file.
@@ -30,8 +30,8 @@ DEFINES += -DGUNZIP="\"gunzip\""
 # 
 ################################################################## 
 PCAP_LDLIBS = -lpcap
-PCAP_INCS    = -I/usr/local/include -I. -I../pcap -I/usr/include/pcap
-PCAP_LDFLAGS = -L/usr/local/lib -Llib -Lpcap -L../pcap
+PCAP_INCS    = 
+PCAP_LDFLAGS = 
 
 
 
@@ -125,7 +125,7 @@ INCLS = -I. @V_INCLS@ ${PCAP_INCS}
 # Probably want full optimization
 # FreeBSD needs	-Ae
 # HP needs	-Ae
-CFLAGS = $(CCOPT) $(DEFINES) @DEFS@ @V_DEFINES@ $(INCLS)
+CFLAGS += $(DEFINES) @DEFS@ @V_DEFINES@ $(INCLS)
 
 # Standard LIBS
 LDLIBS = @LIBS@ ${PCAP_LDLIBS}
@@ -170,21 +170,13 @@ version.o: ${CFILES} Makefile
 	${CC} ${CFLAGS} -o version.o -c version.c \
 	-DBUILT_USER="\"`whoami`\"" -DBUILT_HOST="\"`hostname`\"" -DBUILT_DATE="\"`date`\""
 
-#
-# special rules for scanner/parser
-#
-# Note that I'm using the GNU bison/flex to get around the problems
-# caused by the fact that that pcap library ALSO uses YACC, which can
-# cause naming conflicts.  The Gnu versions let you get around that
-# easily.
-#
 filt_parser.c: filt_parser.y filter.h
-	bison -vd -p filtyy filt_parser.y -o filt_parser.c
-	cp filt_parser.c flex_bison
-	cp filt_parser.h flex_bison
+	yacc -dv -p filtyy -bfilt_parser filt_parser.y
+	mv filt_parser.tab.c filt_parser.c
+	mv filt_parser.tab.h filt_parser.h
 filt_scanner.c: filt_scanner.l filter.h filt_parser.h
 	flex -t -Pfiltyy filt_scanner.l > filt_scanner.c
-	cp filt_scanner.c flex_bison
+
 # filt_parser.h created as a side effect of running yacc...
 filt_parser.h: filt_parser.c
 
