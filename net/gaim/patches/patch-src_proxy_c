$OpenBSD: patch-src_proxy_c,v 1.7 2004/09/17 02:07:35 brad Exp $
--- src/proxy.c.orig	Tue Aug  3 21:51:22 2004
+++ src/proxy.c	Fri Aug 20 23:57:04 2004
@@ -318,7 +318,7 @@ static void host_resolved(gpointer data,
 	int rc, err;
 	GSList *hosts = NULL;
 	struct sockaddr *addr = NULL;
-	size_t addrlen;
+	socklen_t addrlen;
 
 	gaim_debug(GAIM_DEBUG_INFO, "dns", "Host '%s' resolved\n", req->host);
 	gaim_input_remove(req->inpa);
@@ -386,7 +386,7 @@ static void trap_gdb_bug()
 	fputs("\n* * *\n",stderr);
 	fputs(message,stderr);
 	fputs("* * *\n\n",stderr);
-	execlp("xmessage","xmessage","-center", message, NULL);
+	execlp("xmessage","xmessage","-center", message, (void *)NULL);
 	_exit(1);
 }
 
@@ -427,7 +427,7 @@ gaim_dns_childthread(int child_out, int 
 	char servname[20];
 #else
 	struct sockaddr_in sin;
-	const size_t addrlen = sizeof(sin);
+	const socklen_t addrlen = sizeof(sin);
 #endif
 
 #ifdef HAVE_SIGNAL_H
@@ -493,8 +493,7 @@ gaim_dns_childthread(int child_out, int 
 		write(child_out, &zero, sizeof(zero));
 		tmp = res;
 		while(res) {
-			size_t ai_addrlen = res->ai_addrlen;
-			write(child_out, &ai_addrlen, sizeof(ai_addrlen));
+			write(child_out, &(res->ai_addrlen), sizeof(res->ai_addrlen));
 			write(child_out, res->ai_addr, res->ai_addrlen);
 			res = res->ai_next;
 		}
