$OpenBSD: patch-libavcodec_Makefile,v 1.15 2007/09/24 07:51:24 jakemsr Exp $
--- libavcodec/Makefile.orig	Mon Sep 10 19:17:57 2007
+++ libavcodec/Makefile	Mon Sep 10 19:52:11 2007
@@ -380,7 +380,7 @@ ASM_OBJS-$(HAVE_ARMV6)                 += armv4l/simpl
 OBJS-$(ARCH_SPARC)                     += sparc/dsputil_vis.o \
                                           sparc/simple_idct_vis.o \
 
-sparc/dsputil_vis.o: CFLAGS += -mcpu=ultrasparc -mtune=ultrasparc
+# sparc/dsputil_vis.o: CFLAGS += -mcpu=ultrasparc -mtune=ultrasparc
 
 OBJS-$(HAVE_MLIB)                      += mlib/dsputil_mlib.o \
 
@@ -426,10 +426,11 @@ ASM_OBJS-$(ARCH_BFIN)                  += bfin/pixels_
                                           bfin/fdct_bfin.o   \
                                           bfin/idct_bfin.o   \
 
-EXTRALIBS := -L$(BUILD_ROOT)/libavutil -lavutil$(BUILDSUF) $(EXTRALIBS)
+#EXTRALIBS := -L$(BUILD_ROOT)/libavutil -lavutil$(BUILDSUF) $(EXTRALIBS)
+EXTRALIBS=${LIBavcodec_EXTRALIBS}
 
 NAME=avcodec
-LIBVERSION=$(LAVCVERSION)
+LIBVERSION=$(LIBavcodec_VERSION)
 LIBMAJOR=$(LAVCMAJOR)
 
 include ../common.mak
@@ -464,7 +465,7 @@ dct-test: dct-test.o fdctref.o $(LIB)
 fft-test: fft-test.o $(LIB)
 
 imgresample-test: imgresample.c $(LIB)
-	$(CC) $(CFLAGS) -DTEST -o $@ $^ $(EXTRALIBS)
+	$(CC) $(CFLAGS) -DTEST -o $@ $^ $(LIBavcodec_EXTRALIBS)
 
 motion-test: motion-test.o $(LIB)
 
