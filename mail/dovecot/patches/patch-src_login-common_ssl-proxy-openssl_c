$OpenBSD: patch-src_login-common_ssl-proxy-openssl_c,v 1.1 2008/05/22 07:55:08 sthen Exp $
--- src/login-common/ssl-proxy-openssl.c.orig	Sun May 18 22:42:50 2008
+++ src/login-common/ssl-proxy-openssl.c	Sun May 18 22:43:22 2008
@@ -307,8 +307,11 @@ static const char *ssl_last_error(void)
 	size_t err_size = 256;
 
 	err = ERR_get_error();
-	if (err == 0)
-		return strerror(errno);
+	if (err == 0) {
+		if (errno != 0)
+			return strerror(errno);
+		return "Unknown error";
+	}
 
 	buf = t_malloc(err_size);
 	buf[err_size-1] = '\0';
