$OpenBSD: patch-configure,v 1.3 2007/04/01 19:43:56 steven Exp $
--- configure.orig	Tue May 30 01:07:42 2006
+++ configure	Sun Apr  1 21:36:50 2007
@@ -468,7 +468,7 @@ ac_includes_default="\
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='CONFTEST SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS RELEASE_DATE INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar SOVERSION CPP_SOVERSION F77_SOVERSION F95_SOVERSION CSIRO_SOVERSION PLPLOTGNOME_SOVERSION PLPLOT_TCL_VERSION CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE cc_is_gcc_TRUE cc_is_gcc_FALSE LIB_TAG with_double_TRUE with_double_FALSE RPATH RPATHCMD with_rpath_TRUE with_rpath_FALSE DATA_DIR LIB_DIR INCLUDE_DIR TCL_DIR DRV_DIR DOC_DIR BUILD_DIR LIB_DIR_CMD INCLUDE_DIR_CMD LIB_HARDDIR DRV_HARDDIR found_kcc CXX CXXFLAGS ac_ct_CXX CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE enable_cxx enable_cxx_TRUE enable_cxx_FALSE F77 FFLAGS ac_ct_F77 HAVE_F77PARSE_CL_TRUE HAVE_F77PARSE_CL_FALSE enable_f77 enable_f77_TRUE enable_f77_FALSE FC FCFLAGS ac_ct_FC MODULESINCCMD enable_f95 enable_f95_TRUE enable_f95_FALSE has_file_cmd subdirs INCLTDL LIBLTDL build build_cpu build_vendor build_os host host_cpu host_vendor host_os EGREP LN_S ECHO AR ac_ct_AR RANLIB ac_ct_RANLIB DLLTOOL ac_ct_DLLTOOL AS ac_ct_AS OBJDUMP ac_ct_OBJDUMP CPP CXXCPP LIBTOOL with_ltdlsystem_TRUE with_ltdlsystem_FALSE PYTHON PYTHON_VERSION PYTHON_PREFIX PYTHON_EXEC_PREFIX PYTHON_PLATFORM pythondir pkgpythondir pyexecdir pkgpyexecdir PYTHON_CPPFLAGS PYTHON_LDFLAGS PYTHON_SITE_PKG PYTHON_EXTRA_LIBS PYTHON_EXTRA_LDFLAGS PYTHON_INSTDIR enable_python PYTHONINCCMD NUMERICINCCMD enable_python_TRUE enable_python_FALSE darwin_os_TRUE darwin_os_FALSE JAVAC JAR JAVAINCCMD enable_java JAVAWRAPPER_DIR JAVAWRAPPER_HARDDIR JAVADATA_HARDDIR PLPLOTJAVAC_WRAP_DLL enable_java_TRUE enable_java_FALSE SWIG SWIG_LIB has_matwrap has_mkoctfile has_octave OCTAVE MATWRAP MKOCTFILE OCTAVE_VERSION OCTAVE_OCT_DIR OCTAVE_M_DIR PLPLOT_OCTAVE_DIR enable_octave enable_octave_TRUE enable_octave_FALSE DEFINE_PL_DOUBLE MKOCTFILE_VARS MKINDEX ITCLINCCMD ITCLLIBCMD TCLINCCMD TCLLIBCMD enable_tcl DLNAME_LIBPLPLOT DLNAME_LIBPLPLOTD DLNAME_LIBPLPLOTTCLTK DLNAME_LIBPLPLOTTCLTKD enable_itcl_TRUE enable_itcl_FALSE enable_tcl_TRUE enable_tcl_FALSE PERL enable_pdl enable_pdl_TRUE enable_pdl_FALSE PTHREADLIBS FREETYPEINCCMD FREETYPELIBCMD UNICODE_CONFIG UNICODEINCS UNICODELIBS QHULLLIBS NNLIBS CSALIBS with_csa_TRUE with_csa_FALSE with_qhull_TRUE with_qhull_FALSE PKG_CONFIG_CHECK pkg_config_true pkg_config_false PKG_CONFIG_DIR PKG_CONFIG_ENV with_pkg_config_TRUE with_pkg_config_FALSE STATIC_DRIVERS DYNAMIC_DRIVERS CDINCCMD CDLIBCMD PKG_CONFIG GCW_CFLAGS GCW_LIBS GCWTHREAD_CFLAGS GCWTHREAD_LIBS PYGCW_CFLAGS PYGCW_LIBS GNOME_PYTHON_CFLAGS GNOME_PYTHON_LIBS gcw_true gcw_false enable_gcw enable_gcw_TRUE enable_gcw_FALSE enable_pygcw_TRUE enable_pygcw_FALSE GDINCCMD GDLIBCMD GTK_CONFIG GNOME_LIBS GNOMEUI_LIBS GNOME_LIBDIR GNOME_INCLUDEDIR GNOME_CONFIG GNOME_APPLETS_LIBS GNOME_CAPPLET_LIBS GTK_CFLAGS GTK_LIBS GNOMELIBS enable_gnome_TRUE enable_gnome_FALSE LINUXVGALIBS X_CFLAGS X_PRE_LIBS X_LIBS X_EXTRA_LIBS enable_xwin_TRUE enable_xwin_FALSE ITKLIBCMD TKINCCMD TKLIBCMD enable_tk_TRUE enable_tk_FALSE enable_tkwin_TRUE enable_tkwin_FALSE PSTTF_CFLAGS PSTTF_LIBS GDI32INCCMD GDI32LIBCMD AQTINCCMD AQTLIBCMD WXWIDGETSINCCMD WXWIDGETSLIBCMD enable_dyndrivers_TRUE enable_dyndrivers_FALSE DIRNAME EXAMPLES_DIRECTORIES WWW_USER WWW_GROUP WWW_HOST WWW_DIR RSH RCP PLPLOT_WEBSITE XML_DECL JADELOG DSSSL_DTD_PUBID DB_SS_HTML_PUBID DB_SS_PRINT_PUBID DOCBOOK_DTD_PUBID SGML_CATALOGS HTML_EXT DOCBOOK2X_INC TARGETS has_perl has_onsgmls ONSGMLS ifGNUmake has_db2x_texixml DB2X_TEXIXML has_db2x_xsltproc DB2X_XSLTPROC has_openjade OPENJADE has_jadetex JADETEX has_pdfjadetex PDFJADETEX has_dvips DVIPS has_makeinfo BASE HTML_MANIFEST BASE_HTML INFO_MANIFEST BASE_INFO MAN_MANIFEST BASE_MAN MANVOL docbook_build_TRUE docbook_build_FALSE enable_docbook_TRUE enable_docbook_FALSE has_onsgmls_TRUE has_onsgmls_FALSE has_xml_pm_TRUE has_xml_pm_FALSE LIBOBJS LTLIBOBJS'
+ac_subst_vars='CONFTEST SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS RELEASE_DATE INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar SOVERSION CPP_SOVERSION F77_SOVERSION F95_SOVERSION CSIRO_SOVERSION PLPLOTGNOME_SOVERSION PLPLOT_TCL_VERSION CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE cc_is_gcc_TRUE cc_is_gcc_FALSE LIB_TAG with_double_TRUE with_double_FALSE RPATH RPATHCMD with_rpath_TRUE with_rpath_FALSE DATA_DIR EXAMPLE_DIR LIB_DIR INCLUDE_DIR TCL_DIR DRV_DIR DOC_DIR BUILD_DIR LIB_DIR_CMD INCLUDE_DIR_CMD LIB_HARDDIR DRV_HARDDIR found_kcc CXX CXXFLAGS ac_ct_CXX CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE enable_cxx enable_cxx_TRUE enable_cxx_FALSE F77 FFLAGS ac_ct_F77 HAVE_F77PARSE_CL_TRUE HAVE_F77PARSE_CL_FALSE enable_f77 enable_f77_TRUE enable_f77_FALSE FC FCFLAGS ac_ct_FC MODULESINCCMD enable_f95 enable_f95_TRUE enable_f95_FALSE has_file_cmd subdirs INCLTDL LIBLTDL build build_cpu build_vendor build_os host host_cpu host_vendor host_os EGREP LN_S ECHO AR ac_ct_AR RANLIB ac_ct_RANLIB DLLTOOL ac_ct_DLLTOOL AS ac_ct_AS OBJDUMP ac_ct_OBJDUMP CPP CXXCPP LIBTOOL with_ltdlsystem_TRUE with_ltdlsystem_FALSE PYTHON PYTHON_VERSION PYTHON_PREFIX PYTHON_EXEC_PREFIX PYTHON_PLATFORM pythondir pkgpythondir pyexecdir pkgpyexecdir PYTHON_CPPFLAGS PYTHON_LDFLAGS PYTHON_SITE_PKG PYTHON_EXTRA_LIBS PYTHON_EXTRA_LDFLAGS PYTHON_INSTDIR enable_python PYTHONINCCMD NUMERICINCCMD enable_python_TRUE enable_python_FALSE darwin_os_TRUE darwin_os_FALSE JAVAC JAR JAVAINCCMD enable_java JAVAWRAPPER_DIR JAVAWRAPPER_HARDDIR JAVADATA_HARDDIR PLPLOTJAVAC_WRAP_DLL enable_java_TRUE enable_java_FALSE SWIG SWIG_LIB has_matwrap has_mkoctfile has_octave OCTAVE MATWRAP MKOCTFILE OCTAVE_VERSION OCTAVE_OCT_DIR OCTAVE_M_DIR PLPLOT_OCTAVE_DIR enable_octave enable_octave_TRUE enable_octave_FALSE DEFINE_PL_DOUBLE MKOCTFILE_VARS MKINDEX ITCLINCCMD ITCLLIBCMD TCLINCCMD TCLLIBCMD enable_tcl DLNAME_LIBPLPLOT DLNAME_LIBPLPLOTD DLNAME_LIBPLPLOTTCLTK DLNAME_LIBPLPLOTTCLTKD enable_itcl_TRUE enable_itcl_FALSE enable_tcl_TRUE enable_tcl_FALSE PERL enable_pdl enable_pdl_TRUE enable_pdl_FALSE PTHREADLIBS FREETYPEINCCMD FREETYPELIBCMD UNICODE_CONFIG UNICODEINCS UNICODELIBS QHULLLIBS NNLIBS CSALIBS with_csa_TRUE with_csa_FALSE with_qhull_TRUE with_qhull_FALSE PKG_CONFIG_CHECK pkg_config_true pkg_config_false PKG_CONFIG_DIR PKG_CONFIG_ENV with_pkg_config_TRUE with_pkg_config_FALSE STATIC_DRIVERS DYNAMIC_DRIVERS CDINCCMD CDLIBCMD PKG_CONFIG GCW_CFLAGS GCW_LIBS GCWTHREAD_CFLAGS GCWTHREAD_LIBS PYGCW_CFLAGS PYGCW_LIBS GNOME_PYTHON_CFLAGS GNOME_PYTHON_LIBS gcw_true gcw_false enable_gcw enable_gcw_TRUE enable_gcw_FALSE enable_pygcw_TRUE enable_pygcw_FALSE GDINCCMD GDLIBCMD GTK_CONFIG GNOME_LIBS GNOMEUI_LIBS GNOME_LIBDIR GNOME_INCLUDEDIR GNOME_CONFIG GNOME_APPLETS_LIBS GNOME_CAPPLET_LIBS GTK_CFLAGS GTK_LIBS GNOMELIBS enable_gnome_TRUE enable_gnome_FALSE LINUXVGALIBS X_CFLAGS X_PRE_LIBS X_LIBS X_EXTRA_LIBS enable_xwin_TRUE enable_xwin_FALSE ITKLIBCMD TKINCCMD TKLIBCMD enable_tk_TRUE enable_tk_FALSE enable_tkwin_TRUE enable_tkwin_FALSE PSTTF_CFLAGS PSTTF_LIBS GDI32INCCMD GDI32LIBCMD AQTINCCMD AQTLIBCMD WXWIDGETSINCCMD WXWIDGETSLIBCMD enable_dyndrivers_TRUE enable_dyndrivers_FALSE DIRNAME EXAMPLES_DIRECTORIES WWW_USER WWW_GROUP WWW_HOST WWW_DIR RSH RCP PLPLOT_WEBSITE XML_DECL JADELOG DSSSL_DTD_PUBID DB_SS_HTML_PUBID DB_SS_PRINT_PUBID DOCBOOK_DTD_PUBID SGML_CATALOGS HTML_EXT DOCBOOK2X_INC TARGETS has_perl has_onsgmls ONSGMLS ifGNUmake has_db2x_texixml DB2X_TEXIXML has_db2x_xsltproc DB2X_XSLTPROC has_openjade OPENJADE has_jadetex JADETEX has_pdfjadetex PDFJADETEX has_dvips DVIPS has_makeinfo BASE HTML_MANIFEST BASE_HTML INFO_MANIFEST BASE_INFO MAN_MANIFEST BASE_MAN MANVOL docbook_build_TRUE docbook_build_FALSE enable_docbook_TRUE enable_docbook_FALSE has_onsgmls_TRUE has_onsgmls_FALSE has_xml_pm_TRUE has_xml_pm_FALSE LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -3564,8 +3564,9 @@ fi
 
 
 
-test -z "$DATA_DIR" && DATA_DIR='${datadir}/${PACKAGE}${VERSION}'
+test -z "$DATA_DIR" && DATA_DIR='${datadir}/${PACKAGE}'
 
+test -z "$EXAMPLE_DIR" && EXAMPLE_DIR='${datadir}/examples/${PACKAGE}'
 
 test -z "$LIB_DIR" && LIB_DIR='${libdir}'
 
@@ -3578,7 +3579,7 @@ test -z "$BIN_DIR" && BIN_DIR='${bindir}'
 test -z "$TCL_DIR" && TCL_DIR="$DATA_DIR/tcl"
 
 
-test -z "$DRV_DIR" && DRV_DIR="$LIB_DIR/${PACKAGE}${VERSION}/drivers${LIB_TAG}"
+test -z "$DRV_DIR" && DRV_DIR="$LIB_DIR/${PACKAGE}/drivers${LIB_TAG}"
 
 
 ### Documentation directory
@@ -12753,6 +12754,14 @@ if test -z "$aix_libpath"; then aix_libpath="/usr/lib:
     fi
     output_verbose_link_cmd='echo'
     ;;
+  openbsd*)
+    archive_cmds_CXX='$CC -shared -o $lib $predep_objects $libobjs $deplibs $postdep_objects $linker_flags'
+    wlarc=
+    hardcode_libdir_flag_spec_CXX='-R$libdir'
+    hardcode_direct_CXX=yes
+    hardcode_shlibpath_var_CXX=no
+    output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep conftest.$objext | $SED -e "s:-lgcc -lc -lgcc::"'
+    ;;
   osf3*)
     case $cc_basename in
       KCC*)
@@ -22166,7 +22175,7 @@ fi;
 ITKLIBSTR=-litk
 TKLIBSTR=-ltk
 ITCLLIBSTR=-litcl
-TCLLIBSTR=-ltcl
+#TCLLIBSTR=-ltcl
 
 # ----------------------------------------------------------------------------
 # Make some guesses where the Tcl/Tk include files and libraries are.
@@ -23211,7 +23220,7 @@ echo "$as_me: \"User-specified path to libfreetype2 is
     if test "$with_freetype2_libdir" = "/usr/lib"; then
         with_freetype2_libdir=default
     fi
-    FREETYPELIBSTR=-lfreetype
+    FREETYPELIBSTR="-lfreetype -lz"
     FREETYPELIBCMD=""
     FREETYPELIBPATH=""
 
@@ -23563,36 +23572,36 @@ with_freetype_symbol_bold_italic_font=timesbi.ttf
 ;;
  *)
 
-with_freetype_sans_font=FreeSans.ttf
-with_freetype_sans_bold_font=FreeSansBold.ttf
-with_freetype_sans_oblique_font=FreeSansOblique.ttf
-with_freetype_sans_italic_font=FreeSansOblique.ttf
-with_freetype_sans_bold_oblique_font=FreeSansBoldOblique.ttf
-with_freetype_sans_bold_italic_font=FreeSansBoldOblique.ttf
-with_freetype_serif_font=FreeSerif.ttf
-with_freetype_serif_bold_font=FreeSerifBold.ttf
-with_freetype_serif_italic_font=FreeSerifItalic.ttf
-with_freetype_serif_oblique_font=FreeSerifItalic.ttf
-with_freetype_serif_bold_italic_font=FreeSerifBoldItalic.ttf
-with_freetype_serif_bold_oblique_font=FreeSerifBoldItalic.ttf
-with_freetype_mono_font=FreeMono.ttf
-with_freetype_mono_bold_font=FreeMonoBold.ttf
-with_freetype_mono_oblique_font=FreeMonoOblique.ttf
-with_freetype_mono_italic_font=FreeMonoOblique.ttf
-with_freetype_mono_bold_oblique_font=FreeMonoBoldOblique.ttf
-with_freetype_mono_bold_italic_font=FreeMonoBoldOblique.ttf
-with_freetype_script_font=FreeSerif.ttf
-with_freetype_script_bold_font=FreeSerifBold.ttf
-with_freetype_script_oblique_font=FreeSerifItalic.ttf
-with_freetype_script_italic_font=FreeSerifItalic.ttf
-with_freetype_script_bold_oblique_font=FreeSerifBoldItalic.ttf
-with_freetype_script_bold_italic_font=FreeSerifBoldItalic.ttf
-with_freetype_symbol_font=FreeSerif.ttf
-with_freetype_symbol_bold_font=FreeSerifBold.ttf
-with_freetype_symbol_oblique_font=FreeSerifItalic.ttf
-with_freetype_symbol_italic_font=FreeSerifItalic.ttf
-with_freetype_symbol_bold_oblique_font=FreeSerifBoldItalic.ttf
-with_freetype_symbol_bold_italic_font=FreeSerifBoldItalic.ttf
+#with_freetype_sans_font=FreeSans.ttf
+#with_freetype_sans_bold_font=FreeSansBold.ttf
+#with_freetype_sans_oblique_font=FreeSansOblique.ttf
+#with_freetype_sans_italic_font=FreeSansOblique.ttf
+#with_freetype_sans_bold_oblique_font=FreeSansBoldOblique.ttf
+#with_freetype_sans_bold_italic_font=FreeSansBoldOblique.ttf
+#with_freetype_serif_font=FreeSerif.ttf
+#with_freetype_serif_bold_font=FreeSerifBold.ttf
+#with_freetype_serif_italic_font=FreeSerifItalic.ttf
+#with_freetype_serif_oblique_font=FreeSerifItalic.ttf
+#with_freetype_serif_bold_italic_font=FreeSerifBoldItalic.ttf
+#with_freetype_serif_bold_oblique_font=FreeSerifBoldItalic.ttf
+#with_freetype_mono_font=FreeMono.ttf
+#with_freetype_mono_bold_font=FreeMonoBold.ttf
+#with_freetype_mono_oblique_font=FreeMonoOblique.ttf
+#with_freetype_mono_italic_font=FreeMonoOblique.ttf
+#with_freetype_mono_bold_oblique_font=FreeMonoBoldOblique.ttf
+#with_freetype_mono_bold_italic_font=FreeMonoBoldOblique.ttf
+#with_freetype_script_font=FreeSerif.ttf
+#with_freetype_script_bold_font=FreeSerifBold.ttf
+#with_freetype_script_oblique_font=FreeSerifItalic.ttf
+#with_freetype_script_italic_font=FreeSerifItalic.ttf
+#with_freetype_script_bold_oblique_font=FreeSerifBoldItalic.ttf
+#with_freetype_script_bold_italic_font=FreeSerifBoldItalic.ttf
+#with_freetype_symbol_font=FreeSerif.ttf
+#with_freetype_symbol_bold_font=FreeSerifBold.ttf
+#with_freetype_symbol_oblique_font=FreeSerifItalic.ttf
+#with_freetype_symbol_italic_font=FreeSerifItalic.ttf
+#with_freetype_symbol_bold_oblique_font=FreeSerifBoldItalic.ttf
+#with_freetype_symbol_bold_italic_font=FreeSerifBoldItalic.ttf
 
 ;;
 esac
@@ -36881,6 +36890,7 @@ s,@RPATHCMD@,$RPATHCMD,;t t
 s,@with_rpath_TRUE@,$with_rpath_TRUE,;t t
 s,@with_rpath_FALSE@,$with_rpath_FALSE,;t t
 s,@DATA_DIR@,$DATA_DIR,;t t
+s,@EXAMPLE_DIR@,$EXAMPLE_DIR,;t t
 s,@LIB_DIR@,$LIB_DIR,;t t
 s,@INCLUDE_DIR@,$INCLUDE_DIR,;t t
 s,@TCL_DIR@,$TCL_DIR,;t t
