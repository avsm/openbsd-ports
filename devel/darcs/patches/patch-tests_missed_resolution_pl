--- tests/missed_resolution.pl.orig	Mon Jun  4 13:39:21 2007
+++ tests/missed_resolution.pl	Tue Jun  5 14:56:20 2007
@@ -46,8 +46,14 @@ darcs "pull --all ../tmp2";
 # we should have a marked conflict now.
 # we resolve it simply by removing conflict markers.
 
-# I'm too lazy to translate this to Perl right now. 
-`grep -v '\(\^ \^\|\*\*\|v v\)' A > tmp`;
+open(A, "A") || die;                                                                                  
+open(TMP, ">tmp") || die;                                                                             
+while (<A>) {                                                                                         
+       (/\^ \^|\*\*|v v/) or print TMP;                                                               
+}                                                                                                     
+close(A);                                                                                             
+close(TMP);                                                                                           
+
 mv('tmp','A');
 
 darcs "record -A x -m 'resolve' --all";
