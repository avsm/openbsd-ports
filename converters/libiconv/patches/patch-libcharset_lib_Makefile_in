$OpenBSD: patch-libcharset_lib_Makefile_in,v 1.7 2007/08/25 13:51:08 naddy Exp $
--- libcharset/lib/Makefile.in.orig	Mon Apr 14 15:51:06 2003
+++ libcharset/lib/Makefile.in	Wed Aug  1 18:35:06 2007
@@ -26,6 +26,7 @@ LIBTOOL_COMPILE = $(LIBTOOL) --mode=compile
 LIBTOOL_LINK = $(LIBTOOL) --mode=link
 LIBTOOL_INSTALL = $(LIBTOOL) --mode=install
 LIBTOOL_UNINSTALL = $(LIBTOOL) --mode=uninstall
+CP = cp
 RM = rm -f
 
 # Programs used by "make install":
@@ -53,8 +54,10 @@ OBJECTS = localcharset.lo relocatable.lo
 
 all : libcharset.la charset.alias ref-add.sed ref-del.sed
 
+libcharset_la_LDFLAGS=-version-info $(LIBCHARSET_VERSION_INFO) -no-undefined
+
 libcharset.la : $(OBJECTS)
-	$(LIBTOOL_LINK) $(CC) $(LDFLAGS) -o libcharset.la -rpath $(libdir) -version-info $(LIBCHARSET_VERSION_INFO) -no-undefined $(OBJECTS)
+	$(LIBTOOL_LINK) $(CC) $(LDFLAGS) -o libcharset.la -rpath $(libdir) $(libcharset_la_LDFLAGS) $(OBJECTS)
 
 localcharset.lo : $(srcdir)/localcharset.c
 	$(LIBTOOL_COMPILE) $(CC) $(INCLUDES) $(CFLAGS) $(CPPFLAGS) $(DEFS) -c $(srcdir)/localcharset.c
@@ -78,11 +81,11 @@ ref-del.sed : $(srcdir)/ref-del.sin
 # $(libdir) and $(includedir) - don't use $(prefix) and $(exec_prefix) here.
 install-lib : all force
 	$(mkinstalldirs) $(libdir)
-	$(LIBTOOL_INSTALL) $(INSTALL_DATA) libcharset.la $(libdir)/libcharset.la
+	$(LIBTOOL_INSTALL) $(CP) libcharset.la $(libdir)/libcharset.la
 	test -f $(libdir)/charset.alias && orig=$(libdir)/charset.alias \
 	                                || orig=charset.alias; \
 	sed -f ref-add.sed $$orig > $(libdir)/t-charset.alias; \
-	$(INSTALL_DATA) $(libdir)/t-charset.alias $(libdir)/charset.alias; \
+	$(CP) $(libdir)/t-charset.alias $(libdir)/charset.alias; \
 	rm -f $(libdir)/t-charset.alias
 
 # The following is needed in order to install a simple file in $(libdir)
