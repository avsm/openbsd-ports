$OpenBSD: patch-util_c,v 1.6 2011/03/06 09:11:57 jakob Exp $
--- util.c.orig	Mon Jan 24 15:24:36 2011
+++ util.c	Sun Mar  6 10:09:43 2011
@@ -275,10 +275,10 @@ ldns_init_random(FILE *fd, unsigned int size)
         }
 
 	if (!fd) {
-		if ((rand_f = fopen("/dev/urandom", "r")) == NULL) {
-			/* no readable /dev/urandom, try /dev/random */
-			if ((rand_f = fopen("/dev/random", "r")) == NULL) {
-				/* no readable /dev/random either, and no entropy
+		if ((rand_f = fopen("/dev/arandom", "r")) == NULL) {
+			/* no readable /dev/arandom, try /dev/urandom */
+			if ((rand_f = fopen("/dev/urandom", "r")) == NULL) {
+				/* no readable /dev/urandom either, and no entropy
 				   source given. we'll have to improvise */
 				for (read = 0; read < size; read++) {
 					gettimeofday(&tv, NULL);
