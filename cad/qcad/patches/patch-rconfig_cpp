$OpenBSD: patch-rconfig_cpp,v 1.2 2002/05/17 18:39:46 naddy Exp $
--- rconfig.cpp.orig	Sun Mar 25 03:17:10 2001
+++ rconfig.cpp	Wed May 15 00:34:59 2002
@@ -29,6 +29,8 @@
 #include "rinitialdialog.h"
 #include "rlog.h"
 
+QString instPrefix = PREFIX;
+
 /**
  * \class RConfig
  * Class RConfig provides access to global settings.
@@ -176,7 +178,7 @@ RConfig::ini()
   addSetting( "Print:PrintAdjustmentFactor", "1.0");
 
   addSetting( "Paths:BrowserPath", (RUNNING_WINDOWS ? "C:\\Progra~1\\Intern~1\\Iexplore.exe" : "netscape"));
-  addSetting( "Paths:LibraryPath1", "/usr/share/qcad/libraries" );
+  addSetting( "Paths:LibraryPath1", instPrefix+"/share/qcad/libraries" );
 
   verbose=false;
 }
@@ -404,7 +406,7 @@ RConfig::createLanguageList()
     newLanguage = new languageStruct;
     newLanguage->name = "English";
     newLanguage->sign = "en";
-    newLanguage->charset = QFont::Latin1;
+    //    newLanguage->charset = QFont::Latin1;
     languageList.append(newLanguage);
     
     if (langFile.open(IO_ReadOnly)) {
@@ -421,7 +423,7 @@ RConfig::createLanguageList()
             newLanguage = new languageStruct;
             newLanguage->name = name;
             newLanguage->sign = sign;
-            newLanguage->charset = mtStringToCharset(charset);
+	    //      newLanguage->charset = mtStringToCharset(charset);
 
             languageList.append(newLanguage);
         }
@@ -457,34 +459,33 @@ RConfig::readQmFile()
     }
 
     // Add charset for this language to the settings
+   /*
+    * CharSet is obsolete because Qt now does this for us
+    *
     if (getSetting("Application:Charset").isEmpty()) {
         addSetting("Application:Charset",
                    mtCharsetToString(getLanguageCharset(getLanguageName(getSetting("Language:Language")))));
     }
+    */
 
     // Ini fonts:
     //
     font0 = new QFont( getSetting("Application:FontName"),
                        getSettingInt("Application:FontSize0"),
                        QFont::Normal,
-                       false,
-                       mtStringToCharset(getSetting("Application:Charset")) );
+                       false );
     font1 = new QFont( getSetting("Application:FontName"),
                        getSettingInt("Application:FontSize1"),
                        QFont::Normal,
-                       false,
-                       mtStringToCharset(getSetting("Application:Charset")) );
+                       false );
     font2 = new QFont( getSetting("Application:FontName"),
                        getSettingInt("Application:FontSize2"),
                        QFont::Normal,
-                       false,
-                       mtStringToCharset(getSetting("Application:Charset")) );
+                       false );
     font3 = new QFont( getSetting("Application:FontName"),
                        getSettingInt("Application:FontSize3"),
                        QFont::Normal,
-                       false,
-                       mtStringToCharset(getSetting("Application:Charset")) );
-
+                       false );
     return true;
 }
 
@@ -514,7 +515,7 @@ const
 
   // Search in /usr/share/qcad/... dir:
   if(!QFileInfo(path).exists()) {
-    path = QString("/usr/share/")+DEF_APPNAME_L+"/"+_relPath;
+    path = instPrefix+"/share/"+DEF_APPNAME_L+"/"+_relPath;
   }
 #endif
 
@@ -559,7 +560,9 @@ RConfig::getLanguageName( QString _langu
 }
 
 
-
+/*
+ * Now handeled my Qt internally
+ *
 QFont::CharSet
 RConfig::getLanguageCharset( QString _languageName )
 {
@@ -572,7 +575,7 @@ RConfig::getLanguageCharset( QString _la
 
   return QFont::Latin1;
 }
-
+*/
 
 
 
