$OpenBSD: patch-kdesu_kdesu_sudlg_cpp,v 1.4 2006/02/18 12:06:50 espie Exp $
--- kdesu/kdesu/sudlg.cpp.orig	Sat Sep 10 10:26:14 2005
+++ kdesu/kdesu/sudlg.cpp	Fri Feb 17 12:22:58 2006
@@ -12,10 +12,11 @@
 #include "sudlg.h"
 
 
-KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep, const QString& icon)
+KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep, const QString& icon, bool useSudo)
     : KPasswordDialog(Password, enableKeep, User1, icon)
 {
     m_User = auth_user;
+    m_Sudo = useSudo;
     setCaption(i18n("Run as %1").arg(user));
 
     QString prompt;
@@ -27,6 +28,8 @@ KDEsuDialog::KDEsuDialog(QCString user, 
 	prompt = i18n("The action you requested needs additional privileges. "
 		"Please enter the password for \"%1\" below or click "
 		"Ignore to continue with your current privileges.").arg(m_User);
+    if (m_Sudo)
+	prompt += " (sudo)";
     setPrompt(prompt);
 
     setButtonText(User1, i18n("&Ignore"));
@@ -41,6 +44,7 @@ bool KDEsuDialog::checkPassword(const ch
 {
     SuProcess proc;
     proc.setUser(m_User);
+    proc.setUseSudo(m_Sudo);
     int status = proc.checkInstall(password);
     switch (status)
     {
