#!/bin/sh

# $OpenBSD: cdiff,v 1.1 2001/09/16 20:37:05 espie Exp $

# Public domain
# Written 2001, Marc Espie

# This small script can be used to check two configure script,
# to verify that our home-made autoconf is working properly, for instance.

a=`mktemp /tmp/$1.XXXXXXXXXX`
b=`mktemp /tmp/$2.XXXXXXXXXX`
trap 'rm $a $b; exit 0' 0 1 2 3 13 15
sed -e 's,configure:[0-9]*:,configure:####:,' 	\
	-e 's,^#line [0-9]*,#line ####,'	\
	<$1 >$a
sed -e 's,configure:[0-9]*:,configure:####:,' 	\
	-e 's,^#line [0-9]*,#line ####,'	\
	<$2 >$b
diff -u $a $b|sed -e s,$a,$1, -e s,$b,$2,

rm -f $a $b
