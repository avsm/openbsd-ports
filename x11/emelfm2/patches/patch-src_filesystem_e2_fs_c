$OpenBSD: patch-src_filesystem_e2_fs_c,v 1.2 2009/04/06 17:19:02 giovanni Exp $
--- src/filesystem/e2_fs.c.orig	Tue Feb 10 23:11:01 2009
+++ src/filesystem/e2_fs.c	Thu Mar 19 19:40:14 2009
@@ -54,7 +54,7 @@ Not implemented yet.
 #ifdef E2_VFS
 #include "e2_plugins.h"
 #endif
-#if defined(__linux__) || defined(__FreeBSD__)
+#if defined(__linux__) || defined(__FreeBSD__) || defined(__OpenBSD__)
 #include "e2_complete.h"
 #endif
 
@@ -1044,8 +1044,8 @@ retry:
 	}
 	if (!(fstatus.f_flags & MNT_LOCAL))
 	{
-//		if (errno == EINTR)
-//			goto retry;
+		if (errno == EINTR)
+			goto retry;
 		else if (errno == ENOENT && descend && e2_utils_get_parent_path (localpath, TRUE))
 			goto retry;
 		g_free (localpath);
@@ -2538,7 +2538,7 @@ gboolean e2_fs_copy_file (VPATH *src, const struct sta
 	//		blksize_t buf_size = 1048576;
 		//find a buffer up to 16 times dest block
 		//(compromise between accesses and multi-tasking latency)
-		blksize_t buf_size = dest_sb.st_blksize * 16;
+		size_t buf_size = dest_sb.st_blksize * 16;
 		size_t src_size = src_sb->st_size * 2;
 		while (buf_size > src_size && buf_size > dest_sb.st_blksize)
 			buf_size /= 2;
