$OpenBSD: patch-Makefile,v 1.6 2009/09/06 19:25:22 jolan Exp $
--- Makefile.orig	Sun Sep  6 14:20:05 2009
+++ Makefile	Sun Sep  6 14:21:27 2009
@@ -12,7 +12,10 @@ OBJS= src/$T.o
 lib: src/lfs.so
 
 src/lfs.so: $(OBJS)
-	MACOS_DEPLOYMENT_TARGET="10.3"; export MACOSX_DEPLOYMENT_TARGET; $(CC) $(CFLAGS) $(LIB_OPTION) -o src/lfs.so $(OBJS)
+	MACOS_DEPLOYMENT_TARGET="10.3"; export MACOSX_DEPLOYMENT_TARGET; $(CC) $(CFLAGS) $(LIB_OPTION) lfs.o -o $(LIBNAME)
+
+$(OBJS): $(SRCS)
+	$(CC) $(CFLAGS) $(INCS) -c src/lfs.c
 
 install:
 	mkdir -p $(LUA_LIBDIR)
