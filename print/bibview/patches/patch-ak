*** bib_file.c.orig	Sun May 17 01:18:11 1998
--- bib_file.c	Sun May 17 01:19:53 1998
***************
*** 467,475 ****
    strcpy(bp->macrofile,tempName);
  #else
    bp->tempfile = (char *)tempnam(NULL, NULL);
!   bp->macrofile = (char *)tempnam(NULL, NULL);
  #endif
!   tempDatei = fopen(bp->macrofile, "w" );
  
    if ((erg = SetInputFile(bp->filepath)) == BIF_ENOTEXISTS){
       glbbp = bp;
--- 467,475 ----
    strcpy(bp->macrofile,tempName);
  #else
    bp->tempfile = (char *)tempnam(NULL, NULL);
!   bp->macrofile = strdup("/tmp/ww.XXXXXXXX");
  #endif
!   tempDatei = fdopen(mkstemp(bp->macrofile), "w" );
  
    if ((erg = SetInputFile(bp->filepath)) == BIF_ENOTEXISTS){
       glbbp = bp;
