$OpenBSD: patch-makefile,v 1.4 2011/06/21 06:09:34 jasper Exp $
--- makefile.orig	Wed Feb 16 16:03:25 2011
+++ makefile	Mon Jun 20 23:42:11 2011
@@ -1,7 +1,7 @@
 LIBNAME = lpeg
 LUADIR = /usr/include/lua5.1/
 
-COPT = -O2 -DNDEBUG
+COPT = -O2 -DNDEBUG -fPIC -shared
 
 CWARNS = -Wall -Wextra -pedantic \
         -Waggregate-return \
@@ -21,8 +21,7 @@ CWARNS = -Wall -Wextra -pedantic \
 	#  -Wunreachable-code \
 
 
-CFLAGS = $(CWARNS) $(COPT) -ansi -I$(LUADIR)
-CC = gcc
+CFLAGS += $(CWARNS) $(COPT) -ansi -I$(LUADIR)
 
 # For Linux
 DLLFLAGS = -shared -fpic
