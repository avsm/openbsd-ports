$OpenBSD: patch-erts_emulator_Makefile_in,v 1.3 2006/11/21 08:59:44 steven Exp $
--- erts/emulator/Makefile.in.orig	Mon Nov  6 14:51:17 2006
+++ erts/emulator/Makefile.in	Thu Nov 16 15:11:29 2006
@@ -137,7 +137,7 @@ darwinCFLAGS=-DDARWIN
 noopsysCFLAGS=
 OPSYSCFLAGS=$($(OPSYS)CFLAGS)
 ARCH=@ARCH@
-ultrasparcCFLAGS=-Wa,-xarch=v8plusa
+ultrasparcCFLAGS=
 ARCHCFLAGS=$($(ARCH)CFLAGS)
 
 ifdef HIPE_ENABLED
@@ -186,12 +186,12 @@ endif
 
 ifeq ($(CC), gcc)
 ifeq ($(NO_INLINE_FUNCTIONS),true)
-GEN_OPT_FLGS = -O3 -fno-inline-functions
+GEN_OPT_FLGS = -O2 -fno-inline-functions
 else
 ifeq ($(OMIT_OMIT_FP),yes)
-GEN_OPT_FLGS = -O3
+GEN_OPT_FLGS = -O2
 else
-GEN_OPT_FLGS = -O3 -fomit-frame-pointer
+GEN_OPT_FLGS = -O2 -fomit-frame-pointer
 endif
 endif
 UNROLL_FLG = -funroll-loops
@@ -817,7 +817,7 @@ $(OBJDIR)/%.o: hipe/%.S
 	$(CC) $(CFLAGS) $(INCLUDES) -c $< -o $@
 
 $(OBJDIR)/%.o: hipe/%.c
-	$(CC) $(subst O2,O3, $(CFLAGS)) $(INCLUDES) -c $< -o $@
+	$(CC) $(CFLAGS) $(INCLUDES) -c $< -o $@
 
 $(BINDIR)/hipe_mkliterals$(TF_MARKER):	$(OBJDIR)/hipe_mkliterals.o
 	$(CC) $(CFLAGS) $(INCLUDES) -o $@ $<
