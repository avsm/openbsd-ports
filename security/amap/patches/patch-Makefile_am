$OpenBSD: patch-Makefile_am,v 1.1.1.1 2005/05/09 20:35:41 alek Exp $
--- Makefile.am.orig	Fri Feb 18 19:01:26 2005
+++ Makefile.am	Sun May  8 11:00:18 2005
@@ -1,13 +1,12 @@
-CC=gcc
-LIB=-lpcre -L./pcre-3.9/ -I./pcre-3.9/
+LIB=-lpcre -L$(LOCALBASE)/lib
 OPT=-O2
 OPT_DEBUG=-ggdb -Wall -lefence
 BINDIR=/bin
-DATADIR=/etc
+DATADIR=/share/amap
 MANDIR=/man/man1
 SCRIPTS=appdefs.trig appdefs.resp appdefs.rpc
 MANPAGE=amap.1
-all:	pcre strip
+all:	amap amapcrap
 
 pcre:
 	cd pcre-3.9 && make
@@ -35,12 +34,11 @@ debug:	amap.c
 
 install:	all
 	@echo Installing to $(PREFIX), change this by running ./configure --prefix=path
-	-mkdir -vp $(PREFIX)$(BINDIR) 2> /dev/null
-	-mkdir -vp $(PREFIX)$(DATADIR) 2> /dev/null
-	-test -e amap && cp -f amap amap6 amapcrap $(PREFIX)$(BINDIR) || echo
-	-test -e amap.exe && cp -f amap.exe amap6.lnk amapcrap.exe $(PREFIX)$(BINDIR) || echo
-	-cp -f $(SCRIPTS) $(PREFIX)$(DATADIR)
-	-cp -f $(MANPAGE) $(PREFIX)$(MANDIR)
+	@test -e amap && $(BSD_INSTALL_PROGRAM) amap amap6 amapcrap $(PREFIX)$(BINDIR)
+	@test -d $(DESTDIR)$(MANDIR) || mkdir -p $(PREFIX)$(MANDIR)
+	$(BSD_INSTALL_MAN) $(MANPAGE) $(PREFIX)$(MANDIR)
+	@test -d $(DESTDIR)$(DATADIR) || mkdir -p $(PREFIX)$(DATADIR)
+	$(BSD_INSTALL_SCRIPT) $(SCRIPTS) $(PREFIX)$(DATADIR)
 
 clean:	
 	cd pcre-3.9 && make clean
