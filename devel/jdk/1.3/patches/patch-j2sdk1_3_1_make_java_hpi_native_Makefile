$OpenBSD: patch-j2sdk1_3_1_make_java_hpi_native_Makefile,v 1.1 2005/06/03 17:27:54 kurt Exp $
--- j2sdk1.3.1/make/java/hpi/native/Makefile.orig	Wed Apr 20 13:15:59 2005
+++ j2sdk1.3.1/make/java/hpi/native/Makefile	Wed Apr 20 13:16:04 2005
@@ -65,7 +65,13 @@ OTHER_CFLAGS    = -pthread
 # When debugging with libc_r and it's internals, use the following line.
 #OTHER_CFLAGS    = -pthread -DDEBUG_BSD_NATIVE_THREADS -I/usr/src/lib/libc_r/uthread -I/usr/src/lib/libc/include
 else
+ifeq ($(TRUE_PLATFORM), OpenBSD)
+OTHER_CPPFLAGS += -DUSE_MUTEX_HANDSHAKE
+OTHER_CFLAGS    = -pthread
+LIBPTHREAD      = -pthread
+else
 LIBPTHREAD      = -lpthread
+endif
 endif
 OTHER_LDLIBS   += $(LIBPTHREAD) $(LIBPOSIX4)
 endif
