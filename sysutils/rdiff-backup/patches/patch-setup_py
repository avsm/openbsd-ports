$OpenBSD: patch-setup_py,v 1.2 2007/08/31 13:14:39 jsg Exp $
--- setup.py.orig	Sun Nov 12 18:32:01 2006
+++ setup.py	Fri Aug 31 22:59:39 2007
@@ -41,6 +41,10 @@ if os.name == 'posix':
 		if '-lrsync' in LIBS:
 			libname = []
 
+LOCALBASE = os.getenv("LOCALBASE", "/usr/local")
+include_dirs = ["%s/include" % LOCALBASE]
+library_dirs = ["%s/lib" % LOCALBASE]
+
 setup(name="rdiff-backup",
 	  version=version_string,
 	  description="Local/remote mirroring+incremental backup",
@@ -51,12 +55,11 @@ setup(name="rdiff-backup",
 	  ext_modules = [Extension("rdiff_backup.C", ["cmodule.c"]),
 					 Extension("rdiff_backup._librsync",
 							   ["_librsyncmodule.c"],
-							   include_dirs=incdir_list,
-							   library_dirs=libdir_list,
-							   libraries=libname,
-							   extra_link_args=lflags_arg)],
+							   libraries=["rsync"],
+							   include_dirs=include_dirs,
+							   library_dirs=library_dirs)],
 	  scripts = ['rdiff-backup'],
-	  data_files = [('share/man/man1', ['rdiff-backup.1']),
-					('share/doc/rdiff-backup-%s' % (version_string,),
-					 ['CHANGELOG', 'COPYING', 'README', 'FAQ.html'])])
+	  data_files = [('man/man1', ['rdiff-backup.1']),
+					('share/doc/rdiff-backup',
+					 ['CHANGELOG', 'FAQ.html'])])
 
