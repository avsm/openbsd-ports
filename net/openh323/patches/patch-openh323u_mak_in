$OpenBSD: patch-openh323u_mak_in,v 1.2 2007/08/02 14:37:31 ajacoutot Exp $
--- openh323u.mak.in.orig	Mon Jan  3 06:25:51 2005
+++ openh323u.mak.in	Wed Aug  1 18:40:01 2007
@@ -163,8 +163,12 @@
 #
 
 PWLIBDIR	= @PWLIBDIR@
+ifdef BUILDSELF
 OPENH323DIR	= @OPENH323DIR@
 STDCCFLAGS	+= @STDCCFLAGS@
+else
+OPENH323DIR	= !!PREFIX!!/share/openh323
+endif
 LDFLAGS		+= @LDFLAGS@
 LDLIBS		+= @LDLIBS@
 ENDLDLIBS	:= @ENDLDLIBS@ $(ENDLDLIBS)
@@ -197,15 +201,13 @@ LIBDIRS += $(OPENH323DIR)
 #OH323_SUPPRESS_H235	= 1
 
 OH323_SRCDIR = $(OPENH323DIR)/src
-ifdef PREFIX
-OH323_INCDIR = $(PREFIX)/include/openh323
+ifndef BUILDSELF
+OH323_INCDIR = !!PREFIX!!/include/openh323
+OH323_LIBDIR = !!PREFIX!!/lib
 else
 OH323_INCDIR = $(OPENH323DIR)/include
-endif # PREFIX
-
-ifndef OH323_LIBDIR
 OH323_LIBDIR = $(OPENH323DIR)/lib
-endif # OH323_LIBDIR
+endif
 
 ifeq ($(NOTRACE), 1)
 STDCCFLAGS += -DPASN_NOPRINTON -DPASN_LEANANDMEAN
@@ -216,8 +218,12 @@ RCFLAGS	   += -DPTRACING
 OH323_SUFFIX = $(OBJ_SUFFIX)
 endif # NOTRACE
 
-OH323_BASE  = h323_$(PLATFORM_TYPE)_$(OH323_SUFFIX)$(LIB_TYPE)
+OH323_BASE  = h323$(LIB_TYPE)
+ifdef BUILDSELF
 OH323_FILE  = lib$(OH323_BASE).$(LIB_SUFFIX)
+else
+OH323_FILE  = lib$(OH323_BASE).!!SOSUFX!!
+endif
 
 LDFLAGS	    += -L$(OH323_LIBDIR)
 LDLIBS	    := -l$(OH323_BASE) $(LDLIBS)
