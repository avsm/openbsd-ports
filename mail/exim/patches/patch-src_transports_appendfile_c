$OpenBSD: patch-src_transports_appendfile_c,v 1.2 2000/08/12 23:57:45 naddy Exp $
--- src/transports/appendfile.c.orig	Thu Jul 20 13:08:51 2000
+++ src/transports/appendfile.c	Wed Aug  9 02:11:10 2000
@@ -2343,9 +2343,16 @@ opened, so that it goes away on closure.
 #ifdef SUPPORT_MBX
 if (yield == OK && ob->mbx_format)
   {
+#if OpenBSD
+  char tempbuf[] = "/tmp/exim.XXXXXXXXXX";
+
+  tempname = tempbuf;
+  if ((temp_fd = mkstemp(tempname)) == -1 || unlink(tempname) < 0)
+#else
   tempname = tmpnam(NULL);
   if ((temp_fd = open(tempname, (O_RDWR|O_CREAT|O_TRUNC), 0600)) < 0 ||
       unlink(tempname) < 0)
+#endif
     {
     addr->basic_errno = errno;
     addr->message = string_sprintf("while setting up temporary file %s",
