$OpenBSD: patch-src_gui_kernel_qapplication_x11_cpp,v 1.7 2006/12/06 08:32:44 espie Exp $
--- src/gui/kernel/qapplication_x11.cpp.orig	Mon Nov 27 18:26:13 2006
+++ src/gui/kernel/qapplication_x11.cpp	Wed Dec  6 01:16:14 2006
@@ -4712,7 +4712,7 @@ static void sm_performSaveYourself(QSess
     sm_setProperty(QString::fromLatin1(SmProgram), argument0);
     // tell the session manager about our user as well.
     struct passwd *entryPtr = 0;
-#if !defined(QT_NO_THREAD) && defined(_POSIX_THREAD_SAFE_FUNCTIONS)
+#if !defined(QT_NO_THREAD) && defined(_POSIX_THREAD_SAFE_FUNCTIONS) && !defined(Q_OS_OPENBSD)
     QVarLengthArray<char, 1024> buf(sysconf(_SC_GETPW_R_SIZE_MAX));
     struct passwd entry;
     getpwuid_r(geteuid(), &entry, buf.data(), buf.size(), &entryPtr);
