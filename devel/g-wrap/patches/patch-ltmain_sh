$OpenBSD: patch-ltmain_sh,v 1.1.1.1 2005/02/24 01:42:47 todd Exp $
--- ltmain.sh.orig	Thu Nov  7 22:40:36 2002
+++ ltmain.sh	Sat Jul 19 09:12:10 2003
@@ -915,7 +915,8 @@ compiler."
 	  [\\/]* | [A-Za-z]:[\\/]*) ;;
 	  *)
 	    $echo "$modename: only absolute run-paths are allowed" 1>&2
-	    exit 1
+	    $echo "$modename: '$arg' is bad?" 1>&2
+	    #exit 1
 	    ;;
 	  esac
 	  if test "$prev" = rpath; then
@@ -1082,8 +1083,16 @@ compiler."
 	continue
 	;;
 
+      -pthread)
+	compile_command="$compile_command -pthread"
+	finalize_command="$finalize_command -pthread"
+	compiler_flags="$compiler_flags -pthread"
+	continue
+	;;
+
       -module)
 	module=yes
+	build_old_libs=no
 	continue
 	;;
 
@@ -1767,10 +1776,7 @@ compiler."
 	    continue
 	  fi
 
-	  if test "$installed" = no; then
-	    notinst_deplibs="$notinst_deplibs $lib"
-	    need_relink=yes
-	  fi
+	  need_relink=no
 
 	  if test -n "$old_archive_from_expsyms_cmds"; then
 	    # figure out the soname
@@ -2724,6 +2730,7 @@ EOF
 	    echo "*** All declared inter-library dependencies are being dropped."
 	    droppeddeps=yes
 	  fi
+	  droppeddeps=no
 	  ;;
 	esac
 	versuffix=$versuffix_save
