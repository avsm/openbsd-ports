*** doctype/usmarc.cxx.orig	Mon Apr 27 21:02:09 1998
--- doctype/usmarc.cxx	Mon Apr 27 21:04:23 1998
***************
*** 453,463 ****
     // "Sutrs" is the Z39.50-compliant way to say "ASCII".
     
  
!    CHR *TempFile = tmpnam(NULL);
     if((fp = fopen(TempFile, "w")) == NULL) {
  	perror(TempFile);
  	exit(1);
  	}
  
     MARC *m;
     m = new MARC(myBuff);
--- 453,471 ----
     // "Sutrs" is the Z39.50-compliant way to say "ASCII".
     
  
!    CHR TempFile[30];
!    sprintf(TempFile, "%s/usm.XXXXXXXXXX", P_tmpdir);
! 
!    if ((fp = fdopen(mkstemp(TempFile), "w")) == NULL) {
! 	perror(TempFile);
!         exit(1);
!    }
! #if 0
     if((fp = fopen(TempFile, "w")) == NULL) {
  	perror(TempFile);
  	exit(1);
  	}
+ #endif
  
     MARC *m;
     m = new MARC(myBuff);
