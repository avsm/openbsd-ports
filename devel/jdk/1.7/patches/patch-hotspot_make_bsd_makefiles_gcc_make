$OpenBSD: patch-hotspot_make_bsd_makefiles_gcc_make,v 1.1 2009/01/04 23:25:16 kurt Exp $
--- hotspot/make/bsd/makefiles/gcc.make.orig	Mon Dec 22 21:13:31 2008
+++ hotspot/make/bsd/makefiles/gcc.make	Mon Dec 22 23:13:24 2008
@@ -25,9 +25,10 @@
 #------------------------------------------------------------------------
 # CC, CPP & AS
 
-CPP = g++
-CC  = gcc
-AS  = $(CC) -c
+CXX ?= g++
+CPP  = $(CXX)
+CC  ?= gcc
+AS   = $(CC) -c
 
 # -dumpversion in gcc-2.91 shows "egcs-2.91.66". In later version, it only
 # prints the numbers (e.g. "2.95", "3.2.1")
@@ -55,7 +56,7 @@ VM_PICFLAG        = $(VM_PICFLAG/$(LINK_INTO))
 CFLAGS += $(VM_PICFLAG)
 CFLAGS += -fno-rtti
 CFLAGS += -fno-exceptions
-CFLAGS += -D_REENTRANT
+CFLAGS += -pthread
 CFLAGS += -fcheck-new
 
 ARCHFLAG = $(ARCHFLAG/$(BUILDARCH))
@@ -83,7 +84,7 @@ else
 endif
 
 # Compiler warnings are treated as errors
-WARNINGS_ARE_ERRORS = -Werror
+#WARNINGS_ARE_ERRORS = -Werror
 
 # Except for a few acceptable ones
 # Since GCC 4.3, -Wconversion has changed its meanings to warn these implicit
@@ -138,7 +139,7 @@ MAPFLAG = -Xlinker --version-script=FILENAME
 SONAMEFLAG = -Xlinker -soname=SONAME
 
 # Build shared library
-SHARED_FLAG = -shared
+SHARED_FLAG = -shared $(VM_PICFLAG)
 
 # Keep symbols even they are not used
 AOUT_FLAGS += -export-dynamic
