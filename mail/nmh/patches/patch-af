--- uip/spost.c.~1~	Thu Jan 22 14:49:45 1998
+++ uip/spost.c	Wed Apr 29 11:44:30 1998
@@ -334,8 +334,9 @@
 	out = stdout;
     }
     else {
-	    mktemp (tmpfil);
-	    if ((out = fopen (tmpfil, "w")) == NULL)
+	    int fd = mkstemp( tmpfil );
+	    if (( fd == -1 ) ||
+		((out = fdopen( fd, "w" )) == NULL))
 		adios (tmpfil, "unable to create");
 	    chmod (tmpfil, 0600);
 	}
@@ -695,8 +696,9 @@
     char *vec[6];
     FILE * in, *out;
 
-    mktemp (bccfil);
-    if ((out = fopen (bccfil, "w")) == NULL)
+    fd = mkstemp( bccfil );
+    if (( fd == -1 ) ||
+	((out = fdopen( fd, "w" )) == NULL))
 	adios (bccfil, "unable to create");
     chmod (bccfil, 0600);
 
