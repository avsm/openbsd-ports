LIB=sp
NOPIC= nopic			# currently broken
NOPROFILE=  noprofile
CPLUSPLUSLIB= 1         # include c++rt0.o for constructors

MSGGENFLAGS=-l
COMMON_SRCS=Allocator.cxx Link.cxx IListBase.cxx TypeId.cxx assert.cxx
ENTMGR_SRCS=CharsetInfo.cxx EntityCatalog.cxx EntityDecl.cxx EntityManager.cxx \
 Hash.cxx InputSource.cxx Location.cxx Message.cxx MessageArg.cxx \
 UnivCharsetDesc.cxx entmgr_inst.cxx
XENTMGR_SRCS=LiteralStorage.cxx URLStorage.cxx RewindStorageObject.cxx \
  ErrnoMessageArg.cxx OffsetOrderedList.cxx DescriptorManager.cxx \
  ExtendEntityManager.cxx PosixStorage.cxx StdioStorage.cxx \
  StorageManager.cxx CodingSystem.cxx IdentityCodingSystem.cxx \
  UTF8CodingSystem.cxx Fixed2CodingSystem.cxx UnicodeCodingSystem.cxx \
  EUCJPCodingSystem.cxx SJISCodingSystem.cxx TranslateCodingSystem.cxx \
  Big5CodingSystem.cxx SearchResultMessageArg.cxx SOEntityCatalog.cxx \
  CodingSystemKit.cxx OutputByteStream.cxx xentmgr_inst.cxx \
  XMLCodingSystem.cxx
PARSER_SRCS=ContentState.cxx ParserState.cxx parser_inst.cxx parseSd.cxx Parser.cxx \
  parseInstance.cxx parseMode.cxx parseAttribute.cxx \
  LinkProcess.cxx Lpd.cxx parseDecl.cxx ShortReferenceMap.cxx \
  parseParam.cxx parseCommon.cxx SgmlParser.cxx \
  Entity.cxx Attribute.cxx OpenElement.cxx Notation.cxx NotationStorage.cxx ParserOptions.cxx Dtd.cxx \
  Undo.cxx Param.cxx TokenMessageArg.cxx Group.cxx \
  CharsetDecl.cxx CharsetRegistry.cxx ExternalId.cxx \
  TrieBuilder.cxx Sd.cxx Syntax.cxx Partition.cxx ModeInfo.cxx Recognizer.cxx \
  Markup.cxx Text.cxx ContentToken.cxx ElementType.cxx Event.cxx \
  InternalInputSource.cxx OutputState.cxx ParserMessages.cxx \
  SdText.cxx NumericCharRefOrigin.cxx Id.cxx StringVectorMessageArg.cxx
APP_SRCS=ErrorCountEventHandler.cxx MessageEventHandler.cxx MessageFormatter.cxx \
  MessageReporter.cxx MessageTable.cxx OutputCharStream.cxx ConsoleOutput.cxx \
  CmdLineApp.cxx EntityApp.cxx ParserApp.cxx app_inst.cxx \
  ArcEngine.cxx arc_inst.cxx
GENERIC_SRCS=ParserEventGeneratorKit.cxx SGMLApplication.cxx EventGenerator.cxx \
 GenericEventHandler.cxx

DPSRCS=version.h entmgr_inst.cxx \
  xentmgr_inst.cxx EntityManagerMessages.h CatalogMessages.h \
  PosixStorageMessages.h URLStorageMessages.h StdioStorageMessages.h \
  ParserMessages.h parser_inst.cxx app_inst.cxx \
  ParserAppMessages.h CmdLineAppMessages.h \
  ArcEngineMessages.h arc_inst.cxx MessageReporterMessages.h \
  MessageFormatterMessages.h

SRCS=$(COMMON_SRCS) $(ENTMGR_SRCS) $(XENTMGR_SRCS) $(PARSER_SRCS) $(APP_SRCS) \
 $(GENERIC_SRCS)

${.CURDIR}/version.h: ${.CURDIR}/../VERSION ${.CURDIR}/mkversion.pl
	rm -f $@
	${PERL} -w ${.CURDIR}/mkversion.pl ${.CURDIR}/../VERSION >$@
	chmod -w $@

.include <bsd.lib.mk>
