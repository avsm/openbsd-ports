--- ppm/Makefile.orig	Mon Jan 31 11:44:34 1994
+++ ppm/Makefile	Mon Jan  8 16:32:47 2001
@@ -15,17 +15,19 @@
 #CFLAGS =	-O
 CFLAGS =	-g
 #CFLAGS =	-g -O
-#LDFLAGS =	-s
-LDFLAGS =	
-INSTALLBINARIES =	/usr/new/pbm
+LDFLAGS =	-s
+#LDFLAGS =	
+INSTALLBINARIES =	$(PREFIX)/bin
 INSTALLSCRIPTS =	$(INSTALLBINARIES)
-INSTALLMANUALS1 =	/usr/man/mann
+INSTALLMANUALS1 =	$(PREFIX)/man/man1
 SUFFIXMANUALS1 =	1
-INSTALLMANUALS3 =	/usr/man/mann
+INSTALLMANUALS3 =	$(PREFIX)/man/man3
 SUFFIXMANUALS3 =	3
-INSTALLMANUALS5 =	/usr/man/mann
+INSTALLMANUALS5 =	$(PREFIX)/man/man5
 SUFFIXMANUALS5 =	5
-MANCP =			cp
+MANCP =			install -c -m 0644
+INSTALLLIBS =		$(PREFIX)/lib
+INSTALLDEFS =		$(PREFIX)/include
 
 PGMDIR =	../pgm
 INCLUDEPGM =	-I$(PGMDIR)
@@ -85,20 +87,21 @@
 MANUALS5 =	ppm
 
 
-#all:		binaries
-all:		merge
-#install:	install.bin
-install:	install.merge
+all:		binaries
+#all:		merge
+install:	install.bin
+#install:	install.merge
 
 
 binaries:	$(BINARIES)
 
 install.bin:	binaries $(SCRIPTS)
 	cd $(INSTALLBINARIES) ; rm -f $(BINARIES)
-	cp $(BINARIES) $(INSTALLBINARIES)
+	install -c -s -m 0755 $(BINARIES) $(INSTALLBINARIES)
 	cd $(INSTALLSCRIPTS) ; rm -f $(SCRIPTS)
-	cp $(SCRIPTS) $(INSTALLSCRIPTS)
-	cd $(INSTALLSCRIPTS) ; chmod +x $(SCRIPTS)
+	install -c -m 0755 $(SCRIPTS) $(INSTALLSCRIPTS)
+	install -c -m 0644 $(LIBPPM) $(INSTALLLIBS)
+	install -c -m 0644 ppm.h $(INSTALLDEFS)
 
 
 merge:		ppmmerge
@@ -235,4 +238,4 @@
 yuvsplittoppm yuvsplittoppm.o:	yuvsplittoppm.c
 
 clean:
-	-rm -f *.o *.a *.cat *~ core $(BINARIES) ppmmerge
+	-rm -f *.o *.a *.cat *~ core *.core $(BINARIES) ppmmerge
