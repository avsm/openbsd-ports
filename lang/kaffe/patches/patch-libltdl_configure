$OpenBSD: patch-libltdl_configure,v 1.1 2011/09/22 21:15:31 jasper Exp $
--- libltdl/configure.orig	Wed Sep 21 00:45:21 2011
+++ libltdl/configure	Wed Sep 21 01:19:29 2011
@@ -7231,6 +7231,7 @@ echo $ECHO_N "checking whether the $compiler linker ($
   hardcode_libdir_flag_spec_ld=
   hardcode_libdir_separator=
   hardcode_direct=no
+  hardcode_direct_absolute=no
   hardcode_minus_L=no
   hardcode_shlibpath_var=unsupported
   link_all_deplibs=unknown
@@ -7978,6 +7979,7 @@ if test -z "$aix_libpath"; then aix_libpath="/usr/lib:
     openbsd*)
       hardcode_direct=yes
       hardcode_shlibpath_var=no
+      hardcode_direct_absolute=yes
       if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
 	archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
 	archive_expsym_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-retain-symbols-file,$export_symbols'
@@ -10147,6 +10149,12 @@ hardcode_libdir_separator=$lt_hardcode_libdir_separato
 # resulting binary.
 hardcode_direct=$hardcode_direct
 
+# Set to yes if using DIR/libNAME${shared_ext} during linking hardcodes
+# DIR into the resulting binary and the resulting library dependency is
+# absolute, i.e impossible to change by setting ${shlibpath_var} if the
+# library is relocated.
+hardcode_direct_absolute=$hardcode_direct_absolute
+
 # Set to yes if using the -LDIR flag during linking hardcodes DIR into the
 # resulting binary.
 hardcode_minus_L=$hardcode_minus_L
@@ -10313,6 +10321,7 @@ always_export_symbols_CXX=no
 archive_expsym_cmds_CXX=
 export_dynamic_flag_spec_CXX=
 hardcode_direct_CXX=no
+hardcode_direct_absolute_CXX=no
 hardcode_libdir_flag_spec_CXX=
 hardcode_libdir_flag_spec_ld_CXX=
 hardcode_libdir_separator_CXX=
@@ -11203,6 +11212,7 @@ if test -z "$aix_libpath"; then aix_libpath="/usr/lib:
   openbsd*)
     hardcode_direct_CXX=yes
     hardcode_shlibpath_var_CXX=no
+    hardcode_direct_absolute_CXX=yes
     archive_cmds_CXX='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $lib'
     hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
     if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
@@ -13183,6 +13193,12 @@ hardcode_libdir_separator=$lt_hardcode_libdir_separato
 # resulting binary.
 hardcode_direct=$hardcode_direct_CXX
 
+# Set to yes if using DIR/libNAME${shared_ext} during linking hardcodes
+# DIR into the resulting binary and the resulting library dependency is
+# absolute, i.e impossible to change by setting ${shlibpath_var} if the
+# library is relocated.
+hardcode_direct_absolute=$hardcode_direct_absolute_CXX
+
 # Set to yes if using the -LDIR flag during linking hardcodes DIR into the
 # resulting binary.
 hardcode_minus_L=$hardcode_minus_L_CXX
@@ -13279,6 +13295,7 @@ always_export_symbols_F77=no
 archive_expsym_cmds_F77=
 export_dynamic_flag_spec_F77=
 hardcode_direct_F77=no
+hardcode_direct_absolute_F77=no
 hardcode_libdir_flag_spec_F77=
 hardcode_libdir_flag_spec_ld_F77=
 hardcode_libdir_separator_F77=
@@ -13798,6 +13815,7 @@ echo $ECHO_N "checking whether the $compiler linker ($
   hardcode_libdir_flag_spec_ld_F77=
   hardcode_libdir_separator_F77=
   hardcode_direct_F77=no
+  hardcode_direct_absolute_F77=no
   hardcode_minus_L_F77=no
   hardcode_shlibpath_var_F77=unsupported
   link_all_deplibs_F77=unknown
