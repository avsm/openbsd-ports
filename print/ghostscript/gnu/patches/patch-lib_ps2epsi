$OpenBSD: patch-lib_ps2epsi,v 1.5 2006/10/19 13:12:37 kili Exp $
--- lib/ps2epsi.orig	Fri Jan 27 22:58:27 2006
+++ lib/ps2epsi	Sat Sep 30 22:49:46 2006
@@ -6,13 +6,7 @@
 GS_EXECUTABLE=gs
 
 # try to create a temporary file securely
-tmpdir=/tmp/ps2epsi.$$
-(umask 077 && mkdir $tmpdir)
-if ! test -d $tmpdir; then
-	echo "failed: could not create temporary file"
-	exit 1
-fi
-tmpfile=$tmpdir/ps2epsi$$
+tmpfile=`mktemp -t ps2epsiXXXXXXXXXX` || exit 1
 
 export outfile
 
@@ -64,7 +58,6 @@ awk 'F==1	{
 
 $GS_EXECUTABLE -q -dNOPAUSE -dSAFER -dDELAYSAFER -r72 -sDEVICE=bit -sOutputFile=/dev/null $tmpfile ps2epsi.ps $tmpfile <"${infile}" 1>&2
 rm -f $tmpfile
-rm -rf $tmpdir
 
 (
 cat << BEGINEPS
