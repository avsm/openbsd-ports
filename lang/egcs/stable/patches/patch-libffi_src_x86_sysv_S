$OpenBSD: patch-libffi_src_x86_sysv_S,v 1.1 2001/07/09 10:26:20 espie Exp $
--- libffi/src/x86/sysv.S.orig	Mon Jul  9 09:45:23 2001
+++ libffi/src/x86/sysv.S	Mon Jul  9 09:57:25 2001
@@ -33,7 +33,11 @@
 .globl ffi_prep_args
 
 	# This assumes we are using gas.
+#ifdef __OpenBSD__
+	.align 4
+#else
         .balign 16
+#endif
 .globl ffi_call_SYSV
         .type    ffi_call_SYSV,@function
 
@@ -130,39 +134,45 @@ epilogue:
 .ffi_call_SYSV_end:
         .size    ffi_call_SYSV,.ffi_call_SYSV_end-ffi_call_SYSV
 
+#ifdef __OpenBSD__
+.data
+#define FOURBYTE long
+#else
 .section	.eh_frame,"aw",@progbits
+#define FOURBYTE 4byte
+#endif
 __FRAME_BEGIN__:
-	.4byte	.LLCIE1
+	.FOURBYTE	.LLCIE1
 .LSCIE1:
-	.4byte	0x0
-	.byte	0x1
-	.byte	0x0
-	.byte	0x1
-	.byte	0x7c
-	.byte	0x8
-	.byte	0xc
-	.byte	0x4
-	.byte	0x4
-	.byte	0x88
-	.byte	0x1
+	.FOURBYTE	0x0
+	.byte		0x1
+	.byte		0x0
+	.byte		0x1
+	.byte		0x7c
+	.byte		0x8
+	.byte		0xc
+	.byte		0x4
+	.byte		0x4
+	.byte		0x88
+	.byte		0x1
 	.align 4
 .LECIE1:
 	.set	.LLCIE1,.LECIE1-.LSCIE1
-	.4byte	.LLFDE1
+	.FOURBYTE	.LLFDE1
 .LSFDE1:
-	.4byte	.LSFDE1-__FRAME_BEGIN__
-	.4byte	.LFB1
-	.4byte	.LFE1-.LFB1
-	.byte	0x4
-	.4byte	.LCFI0-.LFB1
-	.byte	0xe
-	.byte	0x8
-	.byte	0x85
-	.byte	0x2
-	.byte	0x4
-	.4byte	.LCFI1-.LCFI0
-	.byte	0xd
-	.byte	0x5
+	.FOURBYTE	.LSFDE1-__FRAME_BEGIN__
+	.FOURBYTE	.LFB1
+	.FOURBYTE	.LFE1-.LFB1
+	.byte		0x4
+	.FOURBYTE	.LCFI0-.LFB1
+	.byte		0xe
+	.byte		0x8
+	.byte		0x85
+	.byte		0x2
+	.byte		0x4
+	.FOURBYTE	.LCFI1-.LCFI0
+	.byte		0xd
+	.byte		0x5
 	.align 4
 .LEFDE1:
 	.set	.LLFDE1,.LEFDE1-.LSFDE1
