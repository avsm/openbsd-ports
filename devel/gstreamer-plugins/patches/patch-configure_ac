$OpenBSD: patch-configure_ac,v 1.2 2007/09/18 18:33:25 naddy Exp $
--- configure.ac.orig	Sun Sep  4 14:14:17 2005
+++ configure.ac	Sun Sep 16 22:49:40 2007
@@ -106,7 +106,7 @@ DEFAULT_AUDIOSRC="osssrc"
 DEFAULT_VIDEOSRC="v4lsrc"
 DEFAULT_VISUALIZER="goom"
 case "$host" in 
-  *-sun-* | *pc-solaris* )
+  *-sun-* | *pc-solaris* | *-*-openbsd* )
     DEFAULT_AUDIOSINK="sunaudiosink"
     DEFAULT_VIDEOSINK="ximagesink"
     DEFAULT_AUDIOSRC="sunaudiosrc"
@@ -671,9 +671,9 @@ translit(dnm, m, l) AM_CONDITIONAL(USE_XVIDEO, true)
 GST_CHECK_FEATURE(XVIDEO, [X11 XVideo extensions],
                   [xvimagesink], [
   if test x$HAVE_X = xyes; then
-    AC_CHECK_LIB(Xv_pic, XvQueryExtension,
-		 HAVE_XVIDEO="yes", HAVE_XVIDEO="no",
-		 $X_LIBS -lXext)
+dnl    AC_CHECK_LIB(Xv_pic, XvQueryExtension,
+dnl		 HAVE_XVIDEO="yes", HAVE_XVIDEO="no",
+dnl		 $X_LIBS -lXext)
 
     if test x$HAVE_XVIDEO = xyes; then
       XVIDEO_LIBS="-lXv_pic -lXext"
@@ -840,7 +840,7 @@ fi
 
 translit(dnm, m, l) AM_CONDITIONAL(USE_ARTS, true)
 GST_CHECK_FEATURE(ARTS, [arts plug-ins], arts, [
-  AM_PATH_ARTS(, HAVE_ARTS=yes, HAVE_ARTS=no)
+  AM_PATH_ARTS(, ARTS_LIBS="-lstdc++" HAVE_ARTS=yes, HAVE_ARTS=no)
 ])
 
 dnl *** artsc ***
@@ -1125,14 +1125,7 @@ dnl])
 dnl *** FLAC ***
 translit(dnm, m, l) AM_CONDITIONAL(USE_FLAC, true)
 GST_CHECK_FEATURE(FLAC, [FLAC lossless audio], flacenc flacdec, [
-  GST_CHECK_LIBHEADER(FLAC, FLAC, FLAC__seekable_stream_encoder_new, -lm, FLAC/all.h, FLAC_LIBS="-lFLAC")
-  dnl API change in FLAC 1.1.1, so require that...
-  if test x$HAVE_FLAC = xyes; then
-    AC_CHECK_DECL(FLAC__SEEKABLE_STREAM_ENCODER_TELL_ERROR,
-                  HAVE_FLAC="yes", HAVE_FLAC="no", [
-#include <FLAC/seekable_stream_encoder.h>
-                  ])
-  fi
+  GST_CHECK_LIBHEADER(FLAC, FLAC, FLAC__stream_encoder_new, -logg -lm, FLAC/all.h, FLAC_LIBS="-lFLAC -logg")
   AC_SUBST(FLAC_LIBS)
 ])
 
