$OpenBSD: patch-configure,v 1.2 2003/10/16 15:00:17 naddy Exp $
--- configure.orig	2003-10-15 13:46:42.000000000 +0200
+++ configure	2003-10-15 16:26:58.000000000 +0200
@@ -97,22 +97,23 @@ cat<<EOF>config.h
 EOF
 
 if [ "$debug" = "1" ]; then
-	echo 'CFLAGS=-g' >> Makefile.settings
+	echo 'CFLAGS+=-g' >> Makefile.settings
 	echo 'DEBUG=1' >> Makefile.settings
 else
-	echo 'CFLAGS=-O3' >> Makefile.settings;
+echo
+#	echo 'CFLAGS+=-O3' >> Makefile.settings;
 fi
 
 echo CFLAGS+=-I`pwd` -I`pwd`/protocols -I. >> Makefile.settings
 
-if type gcc > /dev/null 2> /dev/null; then
-	echo "CC=gcc" >> Makefile.settings;
-elif type cc > /dev/null 2> /dev/null; then
-	echo "CC=cc" >> Makefile.settings;
-else
-	echo 'Cannot find a C compiler, aborting.'
-	exit 1;
-fi
+#if type gcc > /dev/null 2> /dev/null; then
+#	echo "CC=gcc" >> Makefile.settings;
+#elif type cc > /dev/null 2> /dev/null; then
+#	echo "CC=cc" >> Makefile.settings;
+#else
+#	echo 'Cannot find a C compiler, aborting.'
+#	exit 1;
+#fi
 
 if type ld > /dev/null 2> /dev/null; then
 	echo "LD=ld" >> Makefile.settings;
@@ -160,7 +161,7 @@ if [ -e /usr/include/iconv.h -a "$iconv"
 	## no-op
 elif [ -e /usr/local/include/iconv.h -a "$iconv" = "1" ]; then
 	cat<<EOF>>Makefile.settings
-LFLAGS+=-L/usr/local/lib
+LFLAGS+=-L/usr/local/lib -liconv
 CFLAGS+=-I/usr/local/include
 EOF
 else
