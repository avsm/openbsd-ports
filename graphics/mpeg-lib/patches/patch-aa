--- Makefile.in.orig	Mon Feb 26 10:12:54 1996
+++ Makefile.in	Tue Jun 30 15:13:40 1998
@@ -16,6 +16,7 @@
 RANLIB        = @RANLIB@
 SHELL         = /bin/sh
 
+.SUFFIXES: .so
 
 # Source for the library itself -- note that we define LIBSRC and
 # LIBOBJ this way (instead of just LIBOBJ=$(LIBSRC:.c=.o) because
@@ -27,23 +28,33 @@
 		mono.c ordered.c ordered2.c mb_ordered.c
 LIBSRC        = @libsrc@
 LIBOBJ        = @libobj@
+SHLIBOBJ      = @shlibobj@
 
 
 # Other files of interest
 
 LIBRARY       = libmpeg.a
+SHLIBRARY	  = libmpeg.so.1.2
 MPEGTEST      = mpegtest
 
 # Targets for all platforms
 
-all:		$(LIBRARY) @extras@
+all:		$(LIBRARY) ${SHLIBRARY} @extras@
 
 $(LIBRARY):	$(LIBOBJ)
 		$(AR) $(ARFLAGS) $(LIBRARY) $(LIBOBJ)
 		$(RANLIB) $(LIBRARY)
 
+$(SHLIBRARY):	$(SHLIBOBJ)
+		ld -Bshareable -Bforcearchive -o $(SHLIBRARY) $(SHLIBOBJ)
+
 $(LIBOBJ):	Makefile
 
+install:
+	install -c -m 444 ${LIBRARY} ${PREFIX}/lib
+	install -c -m 444 ${SHLIBRARY} ${PREFIX}/lib
+	install -c -m 444 mpeg.h ${PREFIX}/include
+
 @Makefile_extras@
 
 clean:
@@ -53,6 +64,9 @@
 distclean: clean
 		rm -f config.cache config.log config.status Makefile config.h
 		cd extras && $(MAKE) distclean
+
+.c.so:
+	${CC} ${CFLAGS} -fpic -DPIC -c $< -o $@
 
 # Include a system-specific Makefile fragment, if any
 
