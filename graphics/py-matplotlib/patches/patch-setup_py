$OpenBSD: patch-setup_py,v 1.3 2005/03/12 21:59:48 alek Exp $
--- setup.py.orig	Fri Jan 21 19:42:00 2005
+++ setup.py	Sat Mar 12 22:34:56 2005
@@ -33,8 +33,8 @@ BUILD_GTKAGG       = 'auto'
 # build TK GUI with Agg renderer ; requires Tkinter Python extension
 # and Tk includes
 # Use False or 0 if you don't want to build
-#BUILD_TKAGG        = 0
-BUILD_TKAGG        = 'auto'
+BUILD_TKAGG        = 0
+#BUILD_TKAGG        = 'auto'
 
 # build a small extension to manage the focus on win32 platforms.
 #BUILD_WINDOWING        = 0
@@ -77,7 +77,7 @@ data.extend(glob.glob('images/*.png'))
 data.extend(glob.glob('images/*.ppm'))
 data.append('.matplotlibrc')
 
-data_files=[('share/matplotlib', data),]
+data_files=[('share/py-matplotlib', data),]
 
 # Figure out which array packages to provide binary support for
 # and define the NUMERIX value: Numeric, numarray, or both.
@@ -148,14 +148,16 @@ if havedate: # dates require python23 da
 
 build_transforms(ext_modules, packages, NUMERIX)
 
-if BUILD_GTKAGG:
-    try:
-        import gtk
-    except ImportError:
-        print 'GTKAgg requires pygtk'
-        BUILD_GTKAGG=0
-    except RuntimeError:
-        print 'pygtk present but import failed'
+# Dependencies ensure that py-gtk2 exists, so this isn't necessary. Also, 
+# the "import gtk" tries to access $DISPLAY at build time!
+#if BUILD_GTKAGG:
+#    try:
+#        import gtk
+#    except ImportError:
+#        print 'GTKAgg requires pygtk'
+#        BUILD_GTKAGG=0
+#    except RuntimeError:
+#        print 'pygtk present but import failed'
 if BUILD_GTKAGG:
     BUILD_AGG = 1
     build_gtkagg(ext_modules, packages)
