$OpenBSD: patch-configure_in,v 1.6 2002/09/16 13:35:52 lebel Exp $
--- configure.in.orig	Sun Mar 26 09:33:22 2000
+++ configure.in	Mon Sep 16 14:44:52 2002
@@ -1,34 +1,32 @@
 AC_INIT(interface/interface.c)
 
-cp $srcdir/configure.guess $srcdir/config.guess
-cp $srcdir/configure.sub $srcdir/config.sub
-
 AC_CANONICAL_HOST
 
-if test -z "$CC"; then
-	AC_PROG_CC	
-fi
+AC_PROG_CC	
 AC_PROG_RANLIB
 AC_CHECK_PROG(AR,ar,ar)
 AC_CHECK_PROG(INSTALL,install,install)
 
 if test -z "$GCC"; then
 	DEBUG="-g"
-	OPT="-O"
+	OPT="${CFLAGS}"
 else
 	case $host in 
-	i?86-*-linux*)
+	i?86-*-*)
 		DEBUG="-g -Wall -fsigned-char"
-		OPT="-O20 -ffast-math -fsigned-char -finline-functions";;
+		OPT="${CFLAGS} -ffast-math -fsigned-char -finline-functions";;
 	*)
 		DEBUG="-g -Wall -fsigned-char"
-		OPT="-O20 -fsigned-char";;
+		OPT="${CFLAGS} -fsigned-char";;
         esac
 fi
 
 AC_HEADER_STDC
 
-CFLAGS=""
+dnl Uncomment the following if you don't want to honor CFLAGS passed in from
+dnl the environment.
+dnl
+dnl CFLAGS=""
 
 TYPESIZES="" 
 
@@ -48,10 +46,10 @@ case 4 in
 	$ac_cv_sizeof_long) SIZE32="long";;
 esac
 
-AC_CHECK_TYPE(int16_t,$SIZE16)
-AC_CHECK_TYPE(int32_t,$SIZE32)
-AC_CHECK_TYPE(u_int16_t,$SIZE16)
-AC_CHECK_TYPE(u_int32_t,$SIZE32)
+#AC_CHECK_TYPE(int16_t,$SIZE16)
+#AC_CHECK_TYPE(int32_t,$SIZE32)
+#AC_CHECK_TYPE(u_int16_t,$SIZE16)
+#AC_CHECK_TYPE(u_int32_t,$SIZE32)
 
 if test -z "$SIZE16"; then
 	AC_MSG_ERROR(No 16 bit tupe found on this platform!)
@@ -63,11 +61,14 @@ fi
 AC_CHECK_HEADERS(linux/sbpcd.h, SBPCD_H="-DSBPCD_H='1' ")
 AC_CHECK_HEADERS(linux/ucdrom.h, UCDROM_H="-DUCDROM_H='1' ")
 
+AC_CHECK_FUNCS(getopt_long, GETOPT_LONG="-DGETOPT_LONG='1' ")
+
 AC_PROG_MAKE_SET
 AC_C_CONST
 
 AC_SUBST(SBPCD_H)
 AC_SUBST(UCDROM_H)
+AC_SUBST(GETOPT_LONG)
 AC_SUBST(TYPESIZES)
 AC_SUBST(OPT)
 AC_SUBST(DEBUG)
