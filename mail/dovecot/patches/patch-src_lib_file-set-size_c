$OpenBSD: patch-src_lib_file-set-size_c,v 1.1 2009/10/30 11:43:48 sthen Exp $
--- src/lib/file-set-size.c.orig	Thu Oct 29 23:11:02 2009
+++ src/lib/file-set-size.c	Thu Oct 29 23:11:37 2009
@@ -72,7 +72,7 @@ int file_set_size(int fd, off_t size)
 				i_error("pwrite() failed: %m");
 			return -1;
 		}
-		offset += size;
+		offset += ret;
 	}
 	return 0;
 }
