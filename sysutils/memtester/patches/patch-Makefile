$OpenBSD: patch-Makefile,v 1.1.1.1 2007/03/15 15:49:06 ckuethe Exp $
--- Makefile.orig	Thu Mar 15 08:57:19 2007
+++ Makefile	Thu Mar 15 09:07:33 2007
@@ -7,13 +7,9 @@
 # COPYING for details.
 #
 
-CC			= $(shell head -n 1 conf-cc)
-LD			= $(shell head -n 1 conf-ld)
-
 SOURCES		= memtester.c tests.c
 OBJECTS		= $(SOURCES:.c=.o)
 HEADERS		= memtester.h
-TARGETS     = *.o compile load auto-ccld.sh find-systype make-compile make-load systype extra-libs
 INSTALLPATH	= /usr/local
 
 #
@@ -21,61 +17,13 @@ INSTALLPATH	= /usr/local
 #
 all: memtester
 
+memtester: $(OBJECTS)
+	$(CC) $(CFLAGS) -o memtester $(OBJECTS)
+
 install: all
 	mkdir -m 755 -p $(INSTALLPATH)/{bin,man/man8}
 	install -m 755 memtester $(INSTALLPATH)/bin/
 	gzip -c memtester.8 >memtester.8.gz ; install -m 644 memtester.8.gz $(INSTALLPATH)/man/man8/
 
-auto-ccld.sh: \
-conf-cc conf-ld warn-auto.sh
-	( cat warn-auto.sh; \
-	echo CC=\'`head -1 conf-cc`\'; \
-	echo LD=\'`head -1 conf-ld`\' \
-	) > auto-ccld.sh
-
-compile: \
-make-compile warn-auto.sh systype
-	( cat warn-auto.sh; ./make-compile "`cat systype`" ) > \
-	compile
-	chmod 755 compile
-
-find-systype: \
-find-systype.sh auto-ccld.sh
-	cat auto-ccld.sh find-systype.sh > find-systype
-	chmod 755 find-systype
-
-make-compile: \
-make-compile.sh auto-ccld.sh
-	cat auto-ccld.sh make-compile.sh > make-compile
-	chmod 755 make-compile
-
-make-load: \
-make-load.sh auto-ccld.sh
-	cat auto-ccld.sh make-load.sh > make-load
-	chmod 755 make-load
-
-systype: \
-find-systype trycpp.c
-	./find-systype > systype
-
-extra-libs: \
-extra-libs.sh systype
-	./extra-libs.sh "`cat systype`" >extra-libs
-
-load: \
-make-load warn-auto.sh systype
-	( cat warn-auto.sh; ./make-load "`cat systype`" ) > load
-	chmod 755 load
-
 clean:
 	rm -f memtester $(TARGETS) $(OBJECTS) core
-
-memtester: \
-$(OBJECTS) memtester.c tests.h tests.c tests.h conf-cc Makefile load extra-libs
-	./load memtester tests.o `cat extra-libs`
-
-memtester.o: memtester.c tests.h conf-cc Makefile compile
-	./compile memtester.c
-
-tests.o: tests.c tests.h conf-cc Makefile compile
-	./compile tests.c
