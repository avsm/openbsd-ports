$OpenBSD: patch-wmtheme,v 1.2 2001/09/09 01:12:21 lebel Exp $
--- wmtheme.orig	Thu Sep  6 19:40:05 2001
+++ wmtheme	Sat Sep  8 21:04:15 2001
@@ -1396,7 +1396,7 @@ sub screensize {
   my ($rows, $cols);
 
   $rows = ($sttyout =~ /\brows (\d+)/ and $1 > 4) ? $1 : 24;
-  $cols = ($sttyout =~ /\bcolumns (\d+)/ and $1 > 49) ? $1 : 50;
+  $cols = ($sttyout =~ /\bcolumns (\d+)/ and $1 > 79) ? $1 : 80;
   ($rows, $cols);
 }
 
@@ -1585,7 +1585,7 @@ sub getfiletypes {
   $cleanups{getfiletypes} = $file_input;
 
   stowfile($file_input, join("\n", @files) . "\n");
-  my @types = split(/\n/, forktick("file -b -f \Q$file_input\E"));
+  my @types = split(/\n/, forktick("file -f \Q$file_input\E | sed -e \Qs;^[^:]*: *;;g\E"));
   unlink $file_input or choke("can't remove temporary file $file_input: $!");
 
   delete $cleanups{getfiletypes};
