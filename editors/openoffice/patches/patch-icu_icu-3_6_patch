$OpenBSD: patch-icu_icu-3_6_patch,v 1.2 2007/11/13 09:46:28 robert Exp $
--- icu/icu-3.6.patch.orig.port	Tue Jun  5 12:28:49 2007
+++ icu/icu-3.6.patch	Mon Nov  5 16:59:57 2007
@@ -1,5 +1,5 @@
 *** misc/icu/source/common/putil.c	Mon Jul 31 20:14:28 2006
---- misc/build/icu/source/common/putil.c	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/common/putil.c	Mon Nov  5 16:58:53 2007
 ***************
 *** 48,54 ****
   #endif
@@ -19,7 +19,7 @@
   #endif
   
 *** misc/icu/source/common/unicode/pwin32.h	Tue Aug 29 23:34:38 2006
---- misc/build/icu/source/common/unicode/pwin32.h	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/common/unicode/pwin32.h	Mon Nov  5 16:58:53 2007
 ***************
 *** 266,273 ****
 --- 266,278 ----
@@ -37,7 +37,7 @@
   /*===========================================================================*/
   /* Code alignment and C function inlining                                    */
 *** misc/icu/source/common/unicode/umachine.h	Tue Feb  7 02:54:16 2006
---- misc/build/icu/source/common/unicode/umachine.h	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/common/unicode/umachine.h	Mon Nov  5 16:58:53 2007
 ***************
 *** 322,328 ****
    */
@@ -55,8 +55,112 @@
       typedef wchar_t UChar;
   #else
       typedef uint16_t UChar;
+*** misc/icu/source/common/unicode/unistr.h	Tue Aug 29 23:52:50 2006
+--- misc/build/icu/source/common/unicode/unistr.h	Mon Nov  5 16:58:53 2007
+***************
+*** 3280,3286 ****
+  //========================================
+  inline int8_t
+  UnicodeString::doCompare(int32_t start,
+!               int32_t length,
+                const UnicodeString& srcText,
+                int32_t srcStart,
+                int32_t srcLength) const
+--- 3280,3286 ----
+  //========================================
+  inline int8_t
+  UnicodeString::doCompare(int32_t start,
+!               int32_t _length,
+                const UnicodeString& srcText,
+                int32_t srcStart,
+                int32_t srcLength) const
+***************
+*** 3289,3295 ****
+      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
+    } else {
+      srcText.pinIndices(srcStart, srcLength);
+!     return doCompare(start, length, srcText.fArray, srcStart, srcLength);
+    }
+  }
+  
+--- 3289,3295 ----
+      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
+    } else {
+      srcText.pinIndices(srcStart, srcLength);
+!     return doCompare(start, _length, srcText.fArray, srcStart, srcLength);
+    }
+  }
+  
+***************
+*** 3374,3380 ****
+  
+  inline int8_t
+  UnicodeString::doCompareCodePointOrder(int32_t start,
+!                                        int32_t length,
+                                         const UnicodeString& srcText,
+                                         int32_t srcStart,
+                                         int32_t srcLength) const
+--- 3374,3380 ----
+  
+  inline int8_t
+  UnicodeString::doCompareCodePointOrder(int32_t start,
+!                                        int32_t _length,
+                                         const UnicodeString& srcText,
+                                         int32_t srcStart,
+                                         int32_t srcLength) const
+***************
+*** 3383,3389 ****
+      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
+    } else {
+      srcText.pinIndices(srcStart, srcLength);
+!     return doCompareCodePointOrder(start, length, srcText.fArray, srcStart, srcLength);
+    }
+  }
+  
+--- 3383,3389 ----
+      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
+    } else {
+      srcText.pinIndices(srcStart, srcLength);
+!     return doCompareCodePointOrder(start, _length, srcText.fArray, srcStart, srcLength);
+    }
+  }
+  
+***************
+*** 3435,3441 ****
+  
+  inline int8_t
+  UnicodeString::doCaseCompare(int32_t start,
+!                              int32_t length,
+                               const UnicodeString &srcText,
+                               int32_t srcStart,
+                               int32_t srcLength,
+--- 3435,3441 ----
+  
+  inline int8_t
+  UnicodeString::doCaseCompare(int32_t start,
+!                              int32_t _length,
+                               const UnicodeString &srcText,
+                               int32_t srcStart,
+                               int32_t srcLength,
+***************
+*** 3445,3451 ****
+      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
+    } else {
+      srcText.pinIndices(srcStart, srcLength);
+!     return doCaseCompare(start, length, srcText.fArray, srcStart, srcLength, options);
+    }
+  }
+  
+--- 3445,3451 ----
+      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
+    } else {
+      srcText.pinIndices(srcStart, srcLength);
+!     return doCaseCompare(start, _length, srcText.fArray, srcStart, srcLength, options);
+    }
+  }
+  
 *** misc/icu/source/common/unicode/ustring.h	Tue Aug 29 23:52:50 2006
---- misc/build/icu/source/common/unicode/ustring.h	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/common/unicode/ustring.h	Mon Nov  5 16:58:53 2007
 ***************
 *** 918,924 ****
    * </pre>
@@ -75,7 +179,7 @@
       /**@stable ICU 2.0 */
   #   define U_STRING_INIT(var, cs, length)
 *** misc/icu/source/config/mh-darwin	Wed Feb  1 08:52:42 2006
---- misc/build/icu/source/config/mh-darwin	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/config/mh-darwin	Mon Nov  5 16:58:53 2007
 ***************
 *** 25,31 ****
   SHLIB.cc=	$(CXX) -dynamiclib -dynamic $(CXXFLAGS) $(LDFLAGS)
@@ -94,7 +198,7 @@
   ## Compiler switch to embed a runtime search path
   LD_RPATH=
 *** misc/icu/source/config/mh-irix	Thu Mar 23 19:51:52 2006
---- misc/build/icu/source/config/mh-irix	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/config/mh-irix	Mon Nov  5 16:58:53 2007
 ***************
 *** 23,28 ****
 --- 23,31 ----
@@ -108,7 +212,7 @@
   THREADSCPPFLAGS = -D_REENTRANT -D_PTHREADS
   LIBCPPFLAGS =
 *** misc/icu/source/config/mh-linux	Thu Mar 23 19:51:52 2006
---- misc/build/icu/source/config/mh-linux	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/config/mh-linux	Mon Nov  5 16:58:53 2007
 ***************
 *** 20,25 ****
 --- 20,32 ----
@@ -126,7 +230,7 @@
   LDFLAGSICUDT=-nodefaultlibs -nostdlib
   
 *** misc/icu/source/config/mh-mingw	Tue Aug 15 10:24:14 2006
---- misc/build/icu/source/config/mh-mingw	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/config/mh-mingw	Mon Nov  5 16:58:53 2007
 ***************
 *** 54,59 ****
 --- 54,62 ----
@@ -157,7 +261,7 @@
   CURR_SRCCODE_FULL_DIR=$(subst /,\\\\,$(shell pwd -W))#M#
   
 *** misc/icu/source/config/mh-solaris	Fri Feb 24 20:31:14 2006
---- misc/build/icu/source/config/mh-solaris	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/config/mh-solaris	Mon Nov  5 16:58:53 2007
 ***************
 *** 18,33 ****
   
@@ -201,8 +305,27 @@
   
   #LIBRARY_PATH_PREFIX=/usr/lib/lwp:
   
+*** misc/icu/source/configure	Tue Aug 15 10:24:14 2006
+--- misc/build/icu/source/configure	Mon Nov  5 16:58:53 2007
+***************
+*** 4400,4406 ****
+  
+  GENCCODE_ASSEMBLY=
+  case "${host}" in
+! i*86-*-linux*|x86_64-*-linux*|powerpc*-*-linux*|i*86-*-*bsd*|i*86-*-solaris*)
+      if test "$GCC" = yes; then
+                  GENCCODE_ASSEMBLY="-a gcc"
+      fi ;;
+--- 4400,4406 ----
+  
+  GENCCODE_ASSEMBLY=
+  case "${host}" in
+! i*86-*-linux*|x86_64-*-linux*|powerpc*-*-linux*|i*86-*-solaris*)
+      if test "$GCC" = yes; then
+                  GENCCODE_ASSEMBLY="-a gcc"
+      fi ;;
 *** misc/icu/source/data/Makefile.in	Sat Aug 12 00:22:24 2006
---- misc/build/icu/source/data/Makefile.in	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/data/Makefile.in	Mon Nov  5 16:58:53 2007
 ***************
 *** 344,350 ****
   ifneq ($(ICUDATA_SOURCE_IS_NATIVE_TARGET),YES)
@@ -221,7 +344,7 @@
   	@echo "$@" > $@
   endif
 *** misc/icu/source/i18n/windtfmt.cpp	Tue Aug 15 08:48:02 2006
---- misc/build/icu/source/i18n/windtfmt.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/i18n/windtfmt.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 232,249 ****
       UChar stackBuffer[STACK_BUFFER_SIZE];
@@ -301,7 +424,7 @@
       if (buffer != stackBuffer) {
           DELETE_ARRAY(buffer);
 *** misc/icu/source/i18n/winnmfmt.cpp	Thu Aug 17 07:21:06 2006
---- misc/build/icu/source/i18n/winnmfmt.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/i18n/winnmfmt.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 86,95 ****
       GetLocaleInfoA(lcid, LOCALE_SGROUPING, buf, 10);
@@ -439,7 +562,7 @@
       if (buffer != stackBuffer) {
           DELETE_ARRAY(buffer);
 *** misc/icu/source/layout/CoverageTables.cpp	Sat May  8 01:28:42 2004
---- misc/build/icu/source/layout/CoverageTables.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/layout/CoverageTables.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 44,49 ****
 --- 44,53 ----
@@ -454,7 +577,7 @@
       le_uint16 probe = power;
       le_uint16 index = 0;
 *** misc/icu/source/layout/DeviceTables.cpp	Fri Jan 14 18:25:12 2005
---- misc/build/icu/source/layout/DeviceTables.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/layout/DeviceTables.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 22,28 ****
       le_uint16 format = SWAPW(deltaFormat) - 1;
@@ -474,7 +597,7 @@
           le_uint16 bits = fieldBits[format];
           le_uint16 count = 16 / bits;
 *** misc/icu/source/layout/GXLayoutEngine.cpp	Fri Sep  2 20:22:10 2005
---- misc/build/icu/source/layout/GXLayoutEngine.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/layout/GXLayoutEngine.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 39,45 ****
           return 0;
@@ -493,7 +616,7 @@
       if (LE_FAILURE(success)) {
           return 0;
 *** misc/icu/source/layout/IndicClassTables.cpp	Wed Aug 23 02:12:40 2006
---- misc/build/icu/source/layout/IndicClassTables.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/layout/IndicClassTables.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 94,100 ****
       _dr, _db, _db, _db, _db, _xx, _xx, _l1, _dl, _xx, _xx, _s1, _s2, _vr, _xx, _xx, // 09C0 - 09CF
@@ -512,14 +635,14 @@
   
   static const IndicClassTable::CharClass punjCharClasses[] =
 ***************
-*** 120,125 ****
---- 120,138 ----
+*** 120,127 ****
+--- 120,140 ----
       _iv, _xx, _xx, _xx, _xx, _xx, _xx, _xx, _xx, _xx, _xx, _xx, _xx, _xx, _xx, _xx  // 0AE0 - 0AEF
   };
   
 + #if 1
-+ static const IndicClassTable::CharClass oryaCharClasses[] =
-+ {
+  static const IndicClassTable::CharClass oryaCharClasses[] =
+  {
 +     _xx, _ma, _mp, _mp, _xx, _iv, _iv, _iv, _iv, _iv, _iv, _iv, _iv, _xx, _xx, _iv, /* 0B00 - 0B0F */
 +     _iv, _xx, _xx, _iv, _iv, _bb, _bb, _bb, _bb, _bb, _bb, _bb, _bb, _bb, _ct, _bb, /* 0B10 - 0B1F */
 +     _bb, _bb, _bb, _bb, _bb, _bb, _bb, _bb, _bb, _xx, _bb, _bb, _bb, _bb, _bb, _pb, /* 0B20 - 0B2F */
@@ -530,9 +653,11 @@
 +     _xx, _bb                                                                        /* 0B70 - 0B71 */
 + };
 + #else
-  static const IndicClassTable::CharClass oryaCharClasses[] =
-  {
++ static const IndicClassTable::CharClass oryaCharClasses[] =
++ {
       _xx, _ma, _mp, _mp, _xx, _iv, _iv, _iv, _iv, _iv, _iv, _iv, _iv, _xx, _xx, _iv, // 0B00 - 0B0F
+      _iv, _xx, _xx, _iv, _iv, _ct, _ct, _ct, _ct, _ct, _ct, _ct, _ct, _ct, _ct, _ct, // 0B10 - 0B1F
+      _ct, _ct, _ct, _ct, _bb, _ct, _ct, _ct, _bb, _xx, _ct, _ct, _bb, _bb, _bb, _pb, // 0B20 - 0B2F
 ***************
 *** 131,136 ****
 --- 144,150 ----
@@ -627,7 +752,7 @@
   //
   // IndicClassTable addresses
 *** misc/icu/source/layout/IndicReordering.cpp	Tue Apr 25 21:08:12 2006
---- misc/build/icu/source/layout/IndicReordering.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/layout/IndicReordering.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 50,55 ****
 --- 50,63 ----
@@ -732,7 +857,7 @@
   
               if ((classTable->scriptFlags & SF_MATRAS_AFTER_BASE) != 0) {
 *** misc/icu/source/layout/LESwaps.h	Thu Jun 23 00:39:36 2005
---- misc/build/icu/source/layout/LESwaps.h	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/layout/LESwaps.h	Mon Nov  5 16:58:53 2007
 ***************
 *** 2,7 ****
 --- 2,8 ----
@@ -808,7 +933,7 @@
   /**
    * This class is used to access data which stored in big endian order
 *** misc/icu/source/layout/MPreFixups.cpp	Sat May  8 01:28:44 2004
---- misc/build/icu/source/layout/MPreFixups.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/layout/MPreFixups.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 40,45 ****
 --- 40,51 ----
@@ -825,7 +950,7 @@
   {
       for (le_int32 fixup = 0; fixup < fFixupCount; fixup += 1) {
 *** misc/icu/source/layout/MPreFixups.h	Mon Apr 12 20:51:32 2004
---- misc/build/icu/source/layout/MPreFixups.h	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/layout/MPreFixups.h	Mon Nov  5 16:58:53 2007
 ***************
 *** 31,36 ****
 --- 31,38 ----
@@ -838,7 +963,7 @@
       FixupData *fFixupData;
       le_int32   fFixupCount;
 *** misc/icu/source/stubdata/Makefile.in	Fri Dec  2 11:21:34 2005
---- misc/build/icu/source/stubdata/Makefile.in	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/stubdata/Makefile.in	Mon Nov  5 16:58:53 2007
 ***************
 *** 25,30 ****
 --- 25,36 ----
@@ -854,8 +979,60 @@
   
   ifneq ($(ENABLE_STATIC),)
   TARGET = $(STUBDATA_LIBDIR)$(LIBSICU)$(TARGET_STUBNAME)$(ICULIBSUFFIX).$(A)
+*** misc/icu/source/stubdata/stubdata.c	Wed Nov 21 03:28:14 2001
+--- misc/build/icu/source/stubdata/stubdata.c	Mon Nov  5 16:59:05 2007
+***************
+*** 28,41 ****
+      UDataInfo info;
+      char padding[8];
+      uint32_t count, reserved;
+-     /*
+      const struct {
+      const char *const name; 
+      const void *const data;
+!     } toc[1];
+!     */
+!    int   fakeNameAndData[4];       /* TODO:  Change this header type from */
+!                                    /*        pointerTOC to OffsetTOC.     */
+  } ICU_Data_Header;
+  
+  U_EXPORT const ICU_Data_Header U_ICUDATA_ENTRY_POINT = {
+--- 28,37 ----
+      UDataInfo info;
+      char padding[8];
+      uint32_t count, reserved;
+      const struct {
+      const char *const name; 
+      const void *const data;
+!     } toc[537];                    /* set to real toc size to avoid symbol size mismatch runtime link errors */
+  } ICU_Data_Header;
+  
+  U_EXPORT const ICU_Data_Header U_ICUDATA_ENTRY_POINT = {
+***************
+*** 64,73 ****
+      0,                  /* count        */
+      0,                  /* Reserved     */
+      {                   /*  TOC structure */
+! /*        {    */
+!           0 , 0 , 0, 0  /* name and data entries.  Count says there are none,  */
+                          /*  but put one in just in case.                       */
+! /*        }  */
+      }
+  };
+  
+--- 60,69 ----
+      0,                  /* count        */
+      0,                  /* Reserved     */
+      {                   /*  TOC structure */
+!         {    
+!           {0, 0} /* name and data entries.  Count says there are none,  */
+                          /*  but put one in just in case.                       */
+!         }  
+      }
+  };
+  
 *** misc/icu/source/test/intltest/loctest.cpp	Thu Jul  6 03:50:04 2006
---- misc/build/icu/source/test/intltest/loctest.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/test/intltest/loctest.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 4,9 ****
 --- 4,10 ----
@@ -867,7 +1044,7 @@
   #include "unicode/decimfmt.h"
   #include "unicode/ucurr.h"
 *** misc/icu/source/test/intltest/tsputil.cpp	Wed Jul 19 00:18:10 2006
---- misc/build/icu/source/test/intltest/tsputil.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/test/intltest/tsputil.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 4,9 ****
 --- 4,10 ----
@@ -879,7 +1056,7 @@
   
   #include <float.h> // DBL_MAX, DBL_MIN
 *** misc/icu/source/test/intltest/uobjtest.cpp	Thu Mar 23 01:54:12 2006
---- misc/build/icu/source/test/intltest/uobjtest.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/test/intltest/uobjtest.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 4,9 ****
 --- 4,10 ----
@@ -891,7 +1068,7 @@
   #include "cmemory.h" // UAlignedMemory
   #include <string.h>
 *** misc/icu/source/test/intltest/ustrtest.cpp	Tue Dec 28 22:13:54 2004
---- misc/build/icu/source/test/intltest/ustrtest.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/test/intltest/ustrtest.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 4,9 ****
 --- 4,10 ----
@@ -903,7 +1080,7 @@
   #include "unicode/unistr.h"
   #include "unicode/uchar.h"
 *** misc/icu/source/tools/icupkg/icupkg.cpp	Fri Jul 21 23:17:52 2006
---- misc/build/icu/source/tools/icupkg/icupkg.cpp	Mon Apr 30 17:32:58 2007
+--- misc/build/icu/source/tools/icupkg/icupkg.cpp	Mon Nov  5 16:58:53 2007
 ***************
 *** 332,337 ****
 --- 332,341 ----
@@ -917,107 +1094,3 @@
   extern int
   main(int argc, char *argv[]) {
       const char *pname, *sourcePath, *destPath, *inFilename, *outFilename, *outComment;
-*** misc/icu/source/common/unicode/unistr.h	2007-05-20 08:40:31.000000000 -0400
---- misc/build/icu/source/common/unicode/unistr.h	2007-05-20 08:42:01.000000000 -0400
-***************
-*** 3280,3286 ****
-  //========================================
-  inline int8_t
-  UnicodeString::doCompare(int32_t start,
-!               int32_t length,
-                const UnicodeString& srcText,
-                int32_t srcStart,
-                int32_t srcLength) const
---- 3280,3286 ----
-  //========================================
-  inline int8_t
-  UnicodeString::doCompare(int32_t start,
-!               int32_t _length,
-                const UnicodeString& srcText,
-                int32_t srcStart,
-                int32_t srcLength) const
-***************
-*** 3289,3295 ****
-      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
-    } else {
-      srcText.pinIndices(srcStart, srcLength);
-!     return doCompare(start, length, srcText.fArray, srcStart, srcLength);
-    }
-  }
-  
---- 3289,3295 ----
-      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
-    } else {
-      srcText.pinIndices(srcStart, srcLength);
-!     return doCompare(start, _length, srcText.fArray, srcStart, srcLength);
-    }
-  }
-  
-***************
-*** 3374,3380 ****
-  
-  inline int8_t
-  UnicodeString::doCompareCodePointOrder(int32_t start,
-!                                        int32_t length,
-                                         const UnicodeString& srcText,
-                                         int32_t srcStart,
-                                         int32_t srcLength) const
---- 3374,3380 ----
-  
-  inline int8_t
-  UnicodeString::doCompareCodePointOrder(int32_t start,
-!                                        int32_t _length,
-                                         const UnicodeString& srcText,
-                                         int32_t srcStart,
-                                         int32_t srcLength) const
-***************
-*** 3383,3389 ****
-      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
-    } else {
-      srcText.pinIndices(srcStart, srcLength);
-!     return doCompareCodePointOrder(start, length, srcText.fArray, srcStart, srcLength);
-    }
-  }
-  
---- 3383,3389 ----
-      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
-    } else {
-      srcText.pinIndices(srcStart, srcLength);
-!     return doCompareCodePointOrder(start, _length, srcText.fArray, srcStart, srcLength);
-    }
-  }
-  
-***************
-*** 3435,3441 ****
-  
-  inline int8_t
-  UnicodeString::doCaseCompare(int32_t start,
-!                              int32_t length,
-                               const UnicodeString &srcText,
-                               int32_t srcStart,
-                               int32_t srcLength,
---- 3435,3441 ----
-  
-  inline int8_t
-  UnicodeString::doCaseCompare(int32_t start,
-!                              int32_t _length,
-                               const UnicodeString &srcText,
-                               int32_t srcStart,
-                               int32_t srcLength,
-***************
-*** 3445,3451 ****
-      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
-    } else {
-      srcText.pinIndices(srcStart, srcLength);
-!     return doCaseCompare(start, length, srcText.fArray, srcStart, srcLength, options);
-    }
-  }
-  
---- 3445,3451 ----
-      return (int8_t)!isBogus(); // 0 if both are bogus, 1 otherwise
-    } else {
-      srcText.pinIndices(srcStart, srcLength);
-!     return doCaseCompare(start, _length, srcText.fArray, srcStart, srcLength, options);
-    }
-  }
-  
