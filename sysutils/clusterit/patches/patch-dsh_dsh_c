$OpenBSD: patch-dsh_dsh_c,v 1.1.1.1 2006/06/13 19:39:07 steven Exp $
--- dsh/dsh.c.orig	Sun Jun 11 17:06:15 2006
+++ dsh/dsh.c	Sun Jun 11 17:08:58 2006
@@ -226,9 +226,9 @@ main(int argc, char *argv[])
     /* we need to find or guess the port number */
     if (testflag && rshport == 0) {
 	if (!getenv("RCMD_CMD"))
-	    rshport = 514;
-	else if (strcmp("ssh", getenv("RCMD_CMD")) == 0)
 	    rshport = 22;
+	else if (strcmp("rsh", getenv("RCMD_CMD")) == 0)
+	    rshport = 514;
 	else {
 	    (void)fprintf(stderr, "-t argument given, but port number to test "
 			  "could not be guessed.  Please set RSHPORT "
@@ -352,7 +352,7 @@ do_command(char **argv, int fanout, char
     /* gather the rsh data */
     rsh = getenv("RCMD_CMD");
     if (rsh == NULL)
-	rsh = strdup("rsh");
+	rsh = strdup("ssh");
     if (rsh == NULL)
 	bailout();
 
