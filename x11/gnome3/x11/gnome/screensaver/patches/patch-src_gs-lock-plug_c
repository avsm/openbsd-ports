$OpenBSD: patch-src_gs-lock-plug_c,v 1.1 2011/08/29 15:18:31 ajacoutot Exp $

From 3f2d6598e9896520b745fe16e10a6485b904b3fa Mon Sep 17 00:00:00 2001
From: Victor Antonovich <v.antonovich@gmail.com>
Date: Thu, 11 Aug 2011 23:28:12 +0000
Subject: Return layout indicator to the screensaver unlock dialog

--- src/gs-lock-plug.c.orig	Fri Mar  4 02:22:47 2011
+++ src/gs-lock-plug.c	Mon Aug 29 17:14:43 2011
@@ -1398,6 +1398,10 @@ create_page_one (GSLockPlug *plug)
         gtk_box_pack_start (GTK_BOX (hbox), vbox2, TRUE, TRUE, 0);
         gtk_container_set_border_width (GTK_CONTAINER (vbox2), 10);
 
+#ifdef WITH_KBD_LAYOUT_INDICATOR
+        gtk_box_pack_start (GTK_BOX (hbox), plug->priv->auth_prompt_kbd_layout_indicator, FALSE, FALSE, 0);
+#endif
+
         plug->priv->auth_prompt_label = gtk_label_new_with_mnemonic (_("_Password:"));
         gtk_misc_set_alignment (GTK_MISC (plug->priv->auth_prompt_label), 0, 0.5);
         gtk_box_pack_start (GTK_BOX (vbox2), plug->priv->auth_prompt_label, FALSE, FALSE, 0);
@@ -1481,6 +1485,8 @@ gs_lock_plug_init (GSLockPlug *plug)
 
         plug->priv->vbox = gtk_vbox_new (FALSE, 0);
         gtk_container_add (GTK_CONTAINER (plug->priv->frame), plug->priv->vbox);
+
+        plug->priv->auth_prompt_kbd_layout_indicator = gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 0);
 
         /* Notebook */
         plug->priv->notebook = gtk_notebook_new ();
