$OpenBSD: patch-vdcomp_c,v 1.1 2004/09/21 18:46:04 sturm Exp $
--- vdcomp.c.orig	Thu Dec 22 23:34:47 1994
+++ vdcomp.c	Tue Sep 21 06:50:27 2004
@@ -108,7 +108,9 @@
      !defined(bsd43)                     && \
      !defined(aux)                       && \
      !defined(__bsdi__)                  && \
-     !defined(sequent)
+     !defined(sequent)                   && \
+     !defined(__FreeBSD__)		 && \
+     !defined(__OpenBSD__)
 
 #  if defined(hp300) || defined(hp800) || defined(NeXT)
 #   include <sys/malloc.h>                /* it's in 'sys' on HPs and NeXT */
@@ -429,10 +431,13 @@ int host;
 {
   short   shortint;
   typedef long    off_t;
+  char *s;
 
   if (inname[0] == ' ') {
     printf("\nEnter name of file to be decompressed: ");
-    gets (inname);
+    fgets (inname, sizeof(inname), stdin);
+    if ((s = strchr(inname, '\n')) != NULL)
+	*s = '\0';
   }
 
   if (host == 1 | host == 2) {
@@ -474,13 +479,17 @@ int host;
       printf("\n  3.  VICAR format.");
       printf("\n  4.  Unlabelled binary array.\n");
       printf("\n  Enter format number:");
-      gets(inname);
+      fgets (inname, sizeof(inname), stdin);
+      if ((s = strchr(inname, '\n')) != NULL)
+	  *s = '\0';
       output_format = atoi(inname);
     } while (output_format < 1 || output_format > 4);
 
   if (outname[0] == ' ') {
     printf("\nEnter name of uncompressed output file: ");
-    gets (outname);
+    fgets (outname, sizeof(outname), stdin);
+    if ((s = strchr(outname, '\n')) != NULL)
+	*s = '\0';
   }
 
   return(host);
