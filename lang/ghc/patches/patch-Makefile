$OpenBSD: patch-Makefile,v 1.5 2005/02/14 01:26:56 dons Exp $
Add a "check" target to make regress work nicely.

--- Makefile.orig	Wed Sep 22 03:34:41 2004
+++ Makefile	Wed Feb  2 10:55:40 2005
@@ -422,3 +422,17 @@ include $(TOP)/mk/target.mk
 
 # -----------------------------------------------------------------------------
 
+check::
+	( cd testsuite/tests/ghc-regress ; $(MAKE) $(MFLAGS) )
+	@(sed 's/ started at .*$$//' actual.result > actual.result_)
+	@(if cmp -s `uname -m`.expected.result actual.result_ ; then \
+                echo "All is good!" ; \
+          else \
+                echo ;\
+                echo "@@@@@@@@@@@@@@@@@@@@@@@@@@@@";\
+                echo "Unexpected regress results!" ;\
+                echo "@@@@@@@@@@@@@@@@@@@@@@@@@@@@";\
+                echo ;\
+                echo "here is a diff:" ;\
+                diff -u `uname -m`.expected.result actual.result_ ;\
+          fi ; exit 0 )
