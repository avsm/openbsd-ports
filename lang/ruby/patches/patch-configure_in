$OpenBSD: patch-configure_in,v 1.2 2002/02/23 14:10:48 krw Exp $
--- configure.in.orig	Tue Dec  4 05:51:50 2001
+++ configure.in	Thu Feb 21 16:42:03 2002
@@ -556,7 +556,7 @@ if test "$with_dln_a_out" != yes; then
 			    LDFLAGS="-Wl,-export-dynamic"
 			fi
 			rb_cv_dlopen=yes ;;
-	openbsd*) 	LDSHARED="ld -Bforcearchive -Bshareable"
+	openbsd*) 	LDSHARED='$(CC) -shared -fPIC'
 			rb_cv_dlopen=yes ;;
 	bsdi3*) 	case "$CC" in
 			*shlicc*)	LDSHARED="$CC -r"
@@ -832,7 +832,8 @@ if test "$enable_shared" = 'yes'; then
  	;;
     openbsd*)
 	SOLIBS='$(LIBS)'
- 	;;
+        LIBRUBY_SO='lib$(RUBY_INSTALL_NAME).so.$(MAJOR).'`expr ${MINOR} \* 10 + ${TEENY}`
+	;;
     solaris*)
 	XLDFLAGS='-R${prefix}/lib'
  	;;
