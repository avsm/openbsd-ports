$OpenBSD: patch-configure_ac,v 1.2 2008/04/22 09:34:58 jakemsr Exp $
--- configure.ac.orig	Sun Apr 13 00:12:24 2008
+++ configure.ac	Sun Apr 13 00:55:01 2008
@@ -88,12 +88,15 @@ case "${host_os}" in
     # current FreeBSD header files conflict with the OSS driver's
     # barrier code, this may be fixed in 5.3, stay tuned.
     USE_BARRIER="no"
+    JACK_HOST_HAS_BSD_POLL="yes"
     ;;
   openbsd*)
     # pthread_barrier* not implemented
     USE_BARRIER="no"
     # need small realtime stack
     JACK_THREAD_STACK_TOUCH=10000
+    JACK_HOST_HAS_BSD_POLL="yes"
+    HOST_DEFAULT_TMP_DIR=/tmp
     ;;
   darwin*)
     JACK_THREAD_STACK_TOUCH=10000	# need small realtime stack
@@ -103,11 +106,16 @@ case "${host_os}" in
     OS_LDFLAGS="-framework CoreAudio -framework CoreServices -framework AudioUnit"
     TRY_POSIX_SHM=yes			# POSIX shm works better
     HOST_DEFAULT_TMP_DIR=/tmp
+    JACK_HOST_HAS_BSD_POLL="yes"
     ;;
 esac
 
 AC_SUBST(OS_LDFLAGS)
 
+if test x"$JACK_HOST_HAS_BSD_POLL" = x"yes"; then
+    AC_DEFINE(JACK_HOST_HAS_BSD_POLL, 1, [must use read() to signal eof])
+fi
+
 #
 # We need to establish suitable defaults for a 64-bit OS
 libnn=lib
@@ -370,7 +378,7 @@ AC_ARG_ENABLE(dynsimd,
 if test "x$enable_dynsimd" = xyes; then
 	AC_DEFINE(USE_DYNSIMD, 1, [Define to 1 to use dynamic SIMD selection.])
 	dnl This needs update once there's more than x86/x86-64 supported
-	SIMD_CFLAGS="-msse -msse2 -m3dnow"
+	SIMD_CFLAGS="" # "-msse -msse2 -m3dnow"
 	AC_SUBST(SIMD_CFLAGS)
 fi
 
