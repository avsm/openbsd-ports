*** musicout.c.orig	Tue Jan  4 23:39:27 1994
--- musicout.c	Wed May 20 02:41:53 1998
***************
*** 58,63 ****
--- 58,65 ----
  #include        "common.h"
  #include        "decoder.h"
  
+ #include <stdlib.h>
+ 
  /********************************************************************
  /*
  /*        This part contains the MPEG I decoder for Layers I & II.
***************
*** 139,145 ****
      if(argc==1) {        /* no command line args -> interact */
         do {
            printf ("Enter encoded file name <required>: ");
!           gets (encoded_file_name);
            if (encoded_file_name[0] == NULL_CHAR)
               printf ("Encoded file name is required. \n");
         } while (encoded_file_name[0] == NULL_CHAR);
--- 141,147 ----
      if(argc==1) {        /* no command line args -> interact */
         do {
            printf ("Enter encoded file name <required>: ");
!           fgets (encoded_file_name, MAX_NAME_SIZE-1, stdin);
            if (encoded_file_name[0] == NULL_CHAR)
               printf ("Encoded file name is required. \n");
         } while (encoded_file_name[0] == NULL_CHAR);
***************
*** 151,157 ****
         printf ("Enter MPEG decoded file name <%s%s>: ", encoded_file_name,
                 DFLT_OPEXT);
  #endif
!        gets (decoded_file_name);
         if (decoded_file_name[0] == NULL_CHAR) {
  #ifdef  MS_DOS
             /* replace old extension with new one, 92-08-19 shn */
--- 153,159 ----
         printf ("Enter MPEG decoded file name <%s%s>: ", encoded_file_name,
                 DFLT_OPEXT);
  #endif
!        fgets (decoded_file_name, MAX_NAME_SIZE-1,stdin);
         if (decoded_file_name[0] == NULL_CHAR) {
  #ifdef  MS_DOS
             /* replace old extension with new one, 92-08-19 shn */
***************
*** 164,170 ****
  
         printf(
            "Do you wish to write an AIFF compatible sound file ? (y/<n>) : ");
!        gets(t);
         if (*t == 'y' || *t == 'Y') need_aiff = TRUE;
         else                        need_aiff = FALSE;
         if (need_aiff)
--- 166,172 ----
  
         printf(
            "Do you wish to write an AIFF compatible sound file ? (y/<n>) : ");
!        fgets(t, 49, stdin);
         if (*t == 'y' || *t == 'Y') need_aiff = TRUE;
         else                        need_aiff = FALSE;
         if (need_aiff)
***************
*** 173,179 ****
  
         printf(
            "Do you wish to exit (last chance before decoding) ? (y/<n>) : ");
!        gets(t);
         if (*t == 'y' || *t == 'Y') exit(0);
      }
      else {        /* interpret CL Args */
--- 175,181 ----
  
         printf(
            "Do you wish to exit (last chance before decoding) ? (y/<n>) : ");
!        fgets(t, 49, stdin);
         if (*t == 'y' || *t == 'Y') exit(0);
      }
      else {        /* interpret CL Args */
