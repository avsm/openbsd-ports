$OpenBSD: patch-lib_gibber_gibber-resolver_c,v 1.2 2009/06/02 17:10:42 jasper Exp $

Use GETSHORT instead of NS_GET16 which comes with libresolv.

--- lib/gibber/gibber-resolver.c.orig	Mon Apr 20 15:18:10 2009
+++ lib/gibber/gibber-resolver.c	Tue Jun  2 11:05:23 2009
@@ -686,8 +686,8 @@ gibber_resolver_res_query_to_list (guchar *answer, int
 
        /* Ignore the initial string, which has the query in it */
        pos += len;
-       NS_GET16 (type, pos);
-       NS_GET16 (class, pos);
+       GETSHORT (type, pos);
+       GETSHORT (class, pos);
 
        if (type != T_SRV || class != C_IN)
          goto failed;
@@ -695,9 +695,9 @@ gibber_resolver_res_query_to_list (guchar *answer, int
        /* skip ttl and dlen */
        pos += 6;
 
-       NS_GET16 (pref, pos);
-       NS_GET16 (weight, pos);
-       NS_GET16 (port, pos);
+       GETSHORT (pref, pos);
+       GETSHORT (weight, pos);
+       GETSHORT (port, pos);
        len = dn_expand (answer, end, pos, name, 255);
 
        list = g_list_prepend (list,
