Fix to work with perl-5.10, from mod_perl SVN repository at
http://svn.apache.org/viewvc?view=rev&revision=555908  

Log message:
Don't call av_undef() on a NULL AV*.

This fixes some horrible nastiness when using perl-5.9.5, which no longer
returns early from av_undef() in the case that the AV* is NULL, as of perl
change #26513.

$OpenBSD: patch-src_modules_perl_mod_perl_h,v 1.1 2008/10/11 10:58:59 simon Exp $
--- src/modules/perl/mod_perl.h.orig	Sat Oct 11 11:03:21 2008
+++ src/modules/perl/mod_perl.h	Sat Oct 11 11:03:58 2008
@@ -301,6 +301,13 @@ if(arg) \
 
 #define av_copy_array(av) av_make(av_len(av)+1, AvARRAY(av))  
 
+#define MP_safe_av_undef(av) \
+if (av != Nullav) { \
+    av_undef(av); \
+    SvREFCNT_dec((SV*)av); \
+    av = Nullav; \
+}
+
 #ifndef newRV_noinc
 #define newRV_noinc(sv)	((Sv = newRV(sv)), --SvREFCNT(SvRV(Sv)), Sv)
 #endif
