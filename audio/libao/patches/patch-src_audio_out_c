$OpenBSD: patch-src_audio_out_c,v 1.3 2001/07/22 00:12:55 naddy Exp $
--- src/audio_out.c.orig	Sun May 13 05:30:40 2001
+++ src/audio_out.c	Sat Jun 30 13:16:26 2001
@@ -65,7 +65,7 @@ driver_tree_t *_get_plugin(char *plugin_
 	driver_tree_t *dt;
 	void *handle;
 	
-	handle = dlopen(plugin_file, RTLD_NOW);
+	handle = dlopen(plugin_file, RTLD_LAZY);
 	if (handle) {
 		dt = (driver_tree_t *)malloc(sizeof(driver_tree_t));
 		if (!dt) return NULL;
@@ -78,6 +78,9 @@ driver_tree_t *_get_plugin(char *plugin_
 			return NULL;
 		}
 
+#ifndef __ELF__
+#define dlsym(h,s) dlsym(h, "_" s)
+#endif
 		dt->functions->get_driver_info = dlsym(dt->handle, "plugin_get_driver_info");
 		if (dlerror()) { free(dt->functions); free(dt); return NULL; }
 		dt->functions->open = dlsym(dt->handle, "plugin_open");
