# $OpenBSD: Makefile,v 1.96 2010/07/09 16:55:59 landry Exp $

COMMENT =	Mozilla e-mail, rss and usenet client

# Don't forget to bump mail/thunderbird-i18n after updates.

MOZILLA_VERSION =	3.0.5
MOZILLA_BRANCH =		1.9.1
MOZILLA_PROJECT =	mozilla-thunderbird
MOZILLA_CODENAME =	mail

PKGNAME =	${MOZILLA_PROJECT}-${MOZILLA_VERSION}p0

# need to be in synch with SO_VERSION in www/seamonkey
# for productivity/sunbird,-lighting and mail/enigmail to work ine
SO_VERSION =	16.0
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues. Whenever PKGNAME gets
# bumped and/or SO_VERSION changes, remember to update enigmail's
# and sunbird SO_VERSION and LIB_DEPENDS to match.

MOZILLA_LIBS =	accessibility appcomps auth autoconfig caps chardet chrome commandlines \
	composer cookie docshell embedcomponents fileview \
	gkgfxthebes gklayout gkplugin htmlpars i18n imgicon imglib2 import \
	intlapp jar50 jsd mail mailcomps mork mozfind mozldap msgsmime necko \
	nsappshell permissions pipboot pipnss pippki pref rdf remoteservice \
	satchel spellchecker storagecomps system-pref tkautocomplete \
	toolkitcomps txmgr uconv ucvmath universalchardet unixproxy webbrwsr \
	widget_gtk2 windowds xpautocomplete xpconnect xpinstall zipwriter \
	gfxpsshar gkgfx gtkxtbin ldap60 ldif60 mozjs prldap60 sqlite3 ssldap60 \
	thebes xpcom xpcom_core xul nullplugin unixprintplugin

CATEGORIES=	mail news

# MPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MODULES =	www/mozilla devel/gettext lang/python

USE_X11 =	Yes
# Regression tests are too hard to adapt to run here
NO_REGRESS =	Yes

MODGNU_CONFIG_GUESS_DIRS +=	${WRKSRC}/directory/c-sdk/config/autoconf

CONFIGURE_STYLE =	autoconf no-autoheader
CONFIGURE_ARGS +=	--enable-official-branding

#http://groups.google.com/group/mozilla.support.thunderbird/browse_thread/thread/c2b667c871db035a?pli=1
#system sqlite must be built with FTS3 enabled
#		--enable-system-sqlite

ALL_TARGET =	default

MOZILLA_DATADIRS =	chrome components defaults dictionaries extensions \
			greprefs isp modules plugins res

MOZILLA_AUTOCONF_DIRS =	directory/c-sdk mozilla mozilla/js/src

.include <bsd.port.mk>
