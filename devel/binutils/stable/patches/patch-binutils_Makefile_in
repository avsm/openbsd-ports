$OpenBSD: patch-binutils_Makefile_in,v 1.6 2003/12/26 01:03:02 brad Exp $
--- binutils/Makefile.in.orig	2003-03-24 05:28:35.000000000 -0600
+++ binutils/Makefile.in	2003-11-27 20:21:08.000000000 -0600
@@ -225,7 +225,7 @@ BFDLIB = ../bfd/libbfd.la
 
 OPCODES = ../opcodes/libopcodes.la
 
-LIBIBERTY = ../libiberty/libiberty.a
+LIBIBERTY = -liberty
 
 POTFILES = $(CFILES) $(DEBUG_SRCS) $(HFILES)
 
@@ -337,95 +337,94 @@ LIBS = @LIBS@
 nlmconv_OBJECTS =  nlmconv.$(OBJEXT) nlmheader.$(OBJEXT) \
 bucomm.$(OBJEXT) version.$(OBJEXT) filemode.$(OBJEXT)
 nlmconv_LDADD = $(LDADD)
-nlmconv_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+nlmconv_DEPENDENCIES =  ../bfd/libbfd.la
 nlmconv_LDFLAGS = 
 srconv_OBJECTS =  srconv.$(OBJEXT) coffgrok.$(OBJEXT) bucomm.$(OBJEXT) \
 version.$(OBJEXT) filemode.$(OBJEXT)
 srconv_LDADD = $(LDADD)
-srconv_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+srconv_DEPENDENCIES =  ../bfd/libbfd.la
 srconv_LDFLAGS = 
 sysdump_OBJECTS =  sysdump.$(OBJEXT) bucomm.$(OBJEXT) version.$(OBJEXT) \
 filemode.$(OBJEXT)
 sysdump_LDADD = $(LDADD)
-sysdump_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+sysdump_DEPENDENCIES =  ../bfd/libbfd.la
 sysdump_LDFLAGS = 
 coffdump_OBJECTS =  coffdump.$(OBJEXT) coffgrok.$(OBJEXT) \
 bucomm.$(OBJEXT) version.$(OBJEXT) filemode.$(OBJEXT)
 coffdump_LDADD = $(LDADD)
-coffdump_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+coffdump_DEPENDENCIES =  ../bfd/libbfd.la
 coffdump_LDFLAGS = 
 dlltool_OBJECTS =  dlltool.$(OBJEXT) defparse.$(OBJEXT) deflex.$(OBJEXT) \
 bucomm.$(OBJEXT) version.$(OBJEXT) filemode.$(OBJEXT)
-dlltool_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+dlltool_DEPENDENCIES =  ../bfd/libbfd.la
 dlltool_LDFLAGS = 
 windres_OBJECTS =  windres.$(OBJEXT) resrc.$(OBJEXT) rescoff.$(OBJEXT) \
 resbin.$(OBJEXT) rcparse.$(OBJEXT) rclex.$(OBJEXT) winduni.$(OBJEXT) \
 resres.$(OBJEXT) bucomm.$(OBJEXT) version.$(OBJEXT) filemode.$(OBJEXT)
-windres_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+windres_DEPENDENCIES =  ../bfd/libbfd.la
 windres_LDFLAGS = 
 dllwrap_OBJECTS =  dllwrap.$(OBJEXT) version.$(OBJEXT)
-dllwrap_DEPENDENCIES =  ../libiberty/libiberty.a
+dllwrap_DEPENDENCIES = 
 dllwrap_LDFLAGS = 
 size_OBJECTS =  size.$(OBJEXT) bucomm.$(OBJEXT) version.$(OBJEXT) \
 filemode.$(OBJEXT)
 size_LDADD = $(LDADD)
-size_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+size_DEPENDENCIES =  ../bfd/libbfd.la
 size_LDFLAGS = 
 objdump_OBJECTS =  objdump.$(OBJEXT) budemang.$(OBJEXT) prdbg.$(OBJEXT) \
 rddbg.$(OBJEXT) debug.$(OBJEXT) stabs.$(OBJEXT) ieee.$(OBJEXT) \
 rdcoff.$(OBJEXT) bucomm.$(OBJEXT) version.$(OBJEXT) filemode.$(OBJEXT)
-objdump_DEPENDENCIES =  ../opcodes/libopcodes.la ../bfd/libbfd.la \
-../libiberty/libiberty.a
+objdump_DEPENDENCIES =  ../opcodes/libopcodes.la ../bfd/libbfd.la
 objdump_LDFLAGS = 
 ar_OBJECTS =  arparse.$(OBJEXT) arlex.$(OBJEXT) ar.$(OBJEXT) \
 not-ranlib.$(OBJEXT) arsup.$(OBJEXT) rename.$(OBJEXT) binemul.$(OBJEXT) \
 emul_$(EMULATION).$(OBJEXT) bucomm.$(OBJEXT) version.$(OBJEXT) \
 filemode.$(OBJEXT)
-ar_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+ar_DEPENDENCIES =  ../bfd/libbfd.la
 ar_LDFLAGS = 
 strings_OBJECTS =  strings.$(OBJEXT) bucomm.$(OBJEXT) version.$(OBJEXT) \
 filemode.$(OBJEXT)
 strings_LDADD = $(LDADD)
-strings_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+strings_DEPENDENCIES =  ../bfd/libbfd.la
 strings_LDFLAGS = 
 ranlib_OBJECTS =  ar.$(OBJEXT) is-ranlib.$(OBJEXT) arparse.$(OBJEXT) \
 arlex.$(OBJEXT) arsup.$(OBJEXT) rename.$(OBJEXT) binemul.$(OBJEXT) \
 emul_$(EMULATION).$(OBJEXT) bucomm.$(OBJEXT) version.$(OBJEXT) \
 filemode.$(OBJEXT)
-ranlib_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+ranlib_DEPENDENCIES =  ../bfd/libbfd.la
 ranlib_LDFLAGS = 
 objcopy_OBJECTS =  objcopy.$(OBJEXT) not-strip.$(OBJEXT) \
 rename.$(OBJEXT) rddbg.$(OBJEXT) debug.$(OBJEXT) stabs.$(OBJEXT) \
 ieee.$(OBJEXT) rdcoff.$(OBJEXT) wrstabs.$(OBJEXT) bucomm.$(OBJEXT) \
 version.$(OBJEXT) filemode.$(OBJEXT)
 objcopy_LDADD = $(LDADD)
-objcopy_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+objcopy_DEPENDENCIES =  ../bfd/libbfd.la
 objcopy_LDFLAGS = 
 addr2line_OBJECTS =  addr2line.$(OBJEXT) budemang.$(OBJEXT) \
 bucomm.$(OBJEXT) version.$(OBJEXT) filemode.$(OBJEXT)
 addr2line_LDADD = $(LDADD)
-addr2line_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+addr2line_DEPENDENCIES =  ../bfd/libbfd.la
 addr2line_LDFLAGS = 
 readelf_OBJECTS =  readelf.$(OBJEXT) version.$(OBJEXT) \
 unwind-ia64.$(OBJEXT)
-readelf_DEPENDENCIES =  ../libiberty/libiberty.a
+readelf_DEPENDENCIES = 
 readelf_LDFLAGS = 
 nm_new_OBJECTS =  nm.$(OBJEXT) budemang.$(OBJEXT) bucomm.$(OBJEXT) \
 version.$(OBJEXT) filemode.$(OBJEXT)
 nm_new_LDADD = $(LDADD)
-nm_new_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+nm_new_DEPENDENCIES =  ../bfd/libbfd.la
 nm_new_LDFLAGS = 
 strip_new_OBJECTS =  objcopy.$(OBJEXT) is-strip.$(OBJEXT) \
 rename.$(OBJEXT) rddbg.$(OBJEXT) debug.$(OBJEXT) stabs.$(OBJEXT) \
 ieee.$(OBJEXT) rdcoff.$(OBJEXT) wrstabs.$(OBJEXT) bucomm.$(OBJEXT) \
 version.$(OBJEXT) filemode.$(OBJEXT)
 strip_new_LDADD = $(LDADD)
-strip_new_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+strip_new_DEPENDENCIES =  ../bfd/libbfd.la
 strip_new_LDFLAGS = 
 cxxfilt_OBJECTS =  cxxfilt.$(OBJEXT) bucomm.$(OBJEXT) version.$(OBJEXT) \
 filemode.$(OBJEXT)
 cxxfilt_LDADD = $(LDADD)
-cxxfilt_DEPENDENCIES =  ../bfd/libbfd.la ../libiberty/libiberty.a
+cxxfilt_DEPENDENCIES =  ../bfd/libbfd.la
 cxxfilt_LDFLAGS = 
 LEX_OUTPUT_ROOT = @LEX_OUTPUT_ROOT@
 LEXLIB = @LEXLIB@
@@ -1069,7 +1068,7 @@ mostlyclean-local:
 install-exec-local: install-binPROGRAMS $(bin_PROGRAMS) $(noinst_PROGRAMS)
 	@list='$(noinst_PROGRAMS)'; for p in $$list; do \
 	  if test -f $$p; then \
-	    echo " $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//' -e 's/cxxfilt/$(DEMANGLER_NAME)/'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`"; \
+	    echo " $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//' -e 's/cxxfilt/$(DEMANGLER_NAME)/'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`"; \
 	    $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//' -e 's/cxxfilt/$(DEMANGLER_NAME)/'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
 	  else :; fi; \
 	done
