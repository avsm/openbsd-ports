$OpenBSD: patch-source_blender_blenkernel_intern_blender_c,v 1.3 2006/07/26 06:45:27 steven Exp $
--- source/blender/blenkernel/intern/blender.c.orig	Tue Jul  4 12:19:26 2006
+++ source/blender/blenkernel/intern/blender.c	Fri Jul 21 16:51:10 2006
@@ -681,9 +681,10 @@ void BKE_undo_save_quit(void)
 	/* no undo state to save */
 	if(undobase.first==undobase.last) return;
 		
+	strlcpy(U.tempdir, BLI_gethome(), sizeof(U.tempdir));
 	BLI_make_file_string("/", str, U.tempdir, "quit.blend");
 
-	file = open(str,O_BINARY+O_WRONLY+O_CREAT+O_TRUNC, 0666);
+	file = open(str,O_WRONLY|O_CREAT|O_TRUNC, 0666);
 	if(file == -1) {
 		printf("Unable to save %s\n", str);
 		return;
