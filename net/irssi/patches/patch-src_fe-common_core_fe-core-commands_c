$OpenBSD: patch-src_fe-common_core_fe-core-commands_c,v 1.1 2009/06/23 09:26:02 sthen Exp $

Don't assume the size of time_t.

--- src/fe-common/core/fe-core-commands.c.orig	Mon Jun 22 22:12:56 2009
+++ src/fe-common/core/fe-core-commands.c	Mon Jun 22 22:13:36 2009
@@ -172,12 +172,12 @@ static void cmd_nick(const char *data, SERVER_REC *ser
 /* SYNTAX: UPTIME */
 static void cmd_uptime(char *data)
 {
-	time_t uptime;
+	long uptime;
 
 	g_return_if_fail(data != NULL);
 
 	if (*data == '\0') {
-		uptime = time(NULL) - client_start_time;
+		uptime = (long)difftime(time(NULL), client_start_time);
 		printtext(NULL, NULL, MSGLEVEL_CLIENTNOTICE,
 			  "Uptime: %ldd %ldh %ldm %lds",
 			  uptime/3600/24, uptime/3600%24,
