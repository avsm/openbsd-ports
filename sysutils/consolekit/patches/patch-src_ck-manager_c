$OpenBSD: patch-src_ck-manager_c,v 1.2 2010/06/27 22:15:38 ajacoutot Exp $

Don't segfault if the seats file is invalid.
http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=561106

--- src/ck-manager.c.orig	Thu Sep 24 07:10:07 2009
+++ src/ck-manager.c	Sun Jun 27 23:11:30 2010
@@ -2434,6 +2434,10 @@ add_seat_for_file (CkManager  *manager,
 
         seat = ck_seat_new_from_file (sid, filename);
 
+        if (seat == NULL) {
+                return;
+        }
+
         connect_seat_signals (manager, seat);
         if (!ck_seat_register (seat)) {
                 /* returns false if connection to bus fails */
