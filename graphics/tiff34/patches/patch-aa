--- libtiff/Makefile.in.orig	Wed Jun  9 14:47:11 1999
+++ libtiff/Makefile.in	Wed Jun  9 14:53:32 1999
@@ -62,7 +62,7 @@
 #
 CONF_LIBRARY=@CONF_JPEG@ @CONF_ZIP@
 COPTS	= @GCOPTS@
-OPTIMIZER=-O
+OPTIMIZER=-O2
 CFLAGS	= @ENVOPTS@ @LIBCOPTS@ ${COPTS} ${OPTIMIZER} ${IPATH} ${CONF_LIBRARY}
 #
 SRCS	= \
@@ -210,6 +210,10 @@
 OSFdso: ${OBJS}
 	${LD} -o libtiff.@DSOSUF@ -shared -error_unresolved ${OBJS} @LIBJPEG@ @LIBGZ@ -lc -lm
 
+OPENBSDdso: ${OBJS}
+	${LD} -Bshareable -Bforcearchive -x /usr/lib/c++rt0.o -o libtiff.@DSOSUF_VERSION@ \
+		${OBJS} @LIBJPEG@ @LIBGZ@
+	touch $@
 
 ${OBJS}: ${SRCDIR}/tiffio.h ${SRCDIR}/tiff.h ${SRCDIR}/tif_dir.h
 ${OBJS}: ${SRCDIR}/tiffcomp.h ${SRCDIR}/tiffiop.h ${SRCDIR}/tiffconf.h
@@ -318,10 +322,10 @@
 	done
 installDSO: @DSO@dso
 	if [ @DSOSUF_VERSION@ != @DSOSUF@ ]; then			\
-	    ${INSTALL} -idb tiff.sw.tools -m 555 -F @DIR_LIB@		\
+	    ${INSTALL} -idb tiff.sw.tools.nostrip -m 555 -F @DIR_LIB@	\
 		-O libtiff.@DSOSUF_VERSION@;				\
 	    ${INSTALL} -idb tiff.sw.tools -F @DIR_LIB@			\
-		-ln libtiff.@DSOSUF_VERSION@ -O libtiff.@DSOSUF@;	\
+		-lns libtiff.@DSOSUF_VERSION@ -O libtiff.@DSOSUF@;	\
 	else								\
 	    ${INSTALL} -idb tiff.sw.tools -m 555 -F @DIR_LIB@		\
 		-O libtiff.@DSOSUF@;					\
