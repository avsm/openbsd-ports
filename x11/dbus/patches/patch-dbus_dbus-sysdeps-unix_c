$OpenBSD: patch-dbus_dbus-sysdeps-unix_c,v 1.6 2010/12/13 10:41:22 ajacoutot Exp $
--- dbus/dbus-sysdeps-unix.c.orig	Mon Sep  6 19:30:26 2010
+++ dbus/dbus-sysdeps-unix.c	Mon Dec 13 10:44:38 2010
@@ -1650,7 +1650,11 @@ _dbus_read_credentials_socket  (int              clien
 
   {
 #ifdef SO_PEERCRED
+#ifndef __OpenBSD__
     struct ucred cr;
+#else
+    struct sockpeercred cr;
+#endif
     int cr_len = sizeof (cr);
 
     if (getsockopt (client_fd, SOL_SOCKET, SO_PEERCRED, &cr, &cr_len) == 0 &&
