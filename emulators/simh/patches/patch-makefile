$OpenBSD: patch-makefile,v 1.11 2007/07/24 20:45:41 kili Exp $
--- makefile.orig	Tue Feb  6 19:24:54 2007
+++ makefile	Sun Jul 22 20:02:53 2007
@@ -3,32 +3,9 @@
 # Note: -O2 is sometimes broken in GCC when setjump/longjump is being
 # used. Try -O2 only with released simulators.
 #
-ifeq ($(WIN32),)
-#Unix Environments
-ifeq ($(OSTYPE),solaris)
-OS_CCDEFS = -lsocket -lnsl -lpthread -D_GNU_SOURCE
-else
-OS_CCDEFS = -D_GNU_SOURCE
-endif
-ifeq ($(OSTYPE),macos)
-CC = gcc -std=c99 -O2 -U__STRICT_ANSI__ -g -lm -lrt $(OS_CCDEFS) -I .
-else
-CC = gcc -std=c99 -O2 -U__STRICT_ANSI__ -g -lm $(OS_CCDEFS) -I .
-endif
-ifeq ($(USE_NETWORK),)
-else
-NETWORK_OPT = -DUSE_NETWORK -isystem /usr/local/include /usr/local/lib/libpcap.a
-endif
-else
-#Win32 Environments
-LDFLAGS = -lm -lwsock32 -lwinmm
-CC = gcc -std=c99 -U__STRICT_ANSI__ -O0 -I.
-EXE = .exe
-ifeq ($(USE_NETWORK),)
-else
-NETWORK_OPT = -DUSE_NETWORK -lwpcap -lpacket
-endif
-endif
+OS_CCDEFS = -D_GNU_SOURCE $(CFLAGS)
+CC = gcc -std=c99 -O2 -U__STRICT_ANSI__ -g -lm  $(OS_CCDEFS) -I .
+NETWORK_OPT = -DUSE_NETWORK -isystem /usr/local/include -lpcap
 
 #
 # Common Libraries
@@ -248,11 +225,7 @@ ALL = pdp1 pdp4 pdp7 pdp8 pdp9 pdp15 pdp11 pdp10 \
 all : ${ALL}
 
 clean :
-ifeq ($(WIN32),)
 	${RM} ${BIN}*
-else
-	if exist BIN\*.exe del /q BIN\*.exe
-endif
 
 #
 # Individual builds
