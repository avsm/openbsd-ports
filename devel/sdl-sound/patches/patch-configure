$OpenBSD: patch-configure,v 1.3 2007/09/18 18:29:14 naddy Exp $
--- configure.orig	Sun Oct 12 20:54:57 2003
+++ configure	Sat Sep 15 20:53:00 2007
@@ -7089,7 +7089,7 @@ EOF
 
 fi
 
-x="C__seekable_stream_decoder_process_single"
+x="C__stream_decoder_process_single"
 flcsym="FLA$x"
 # Check whether --enable-flac or --disable-flac was given.
 if test "${enable_flac+set}" = set; then
@@ -7147,7 +7147,7 @@ if eval "test \"\${$as_ac_Lib+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lFLAC  $LIBS"
+LIBS="-lFLAC -logg $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 #line 7152 "configure"
 #include "confdefs.h"
@@ -7195,7 +7195,7 @@ if test `eval echo '${'$as_ac_Lib'}'` = yes; then
 fi
 
   if test x$have_flac_hdr = xyes -a x$have_flac_lib = xyes; then
-    LIBS="$LIBS -lFLAC"
+    LIBS="$LIBS -lFLAC -logg"
     cat >>confdefs.h <<\EOF
 #define SOUND_SUPPORTS_FLAC 1
 EOF
@@ -7363,16 +7363,11 @@ int main (int argc, char *argv[])
     }
   else
     {
-      printf("\n*** 'smpeg-config --version' returned %d.%d.%d, but the
-minimum version\n", $smpeg_major_version, $smpeg_minor_version,
-$smpeg_micro_version);
-      printf("*** of SMPEG required is %d.%d.%d. If smpeg-config is
-correct, then it is\n", major, minor, micro);
+      printf("\n*** 'smpeg-config --version' returned %d.%d.%d, but the minimum version\n", $smpeg_major_version, $smpeg_minor_version, $smpeg_micro_version);
+      printf("*** of SMPEG required is %d.%d.%d. If smpeg-config is correct, then it is\n", major, minor, micro);
       printf("*** best to upgrade to the required version.\n");
-      printf("*** If smpeg-config was wrong, set the environment variable
-SMPEG_CONFIG\n");
-      printf("*** to point to the correct copy of smpeg-config, and remove
-the file\n");
+      printf("*** If smpeg-config was wrong, set the environment variable SMPEG_CONFIG\n");
+      printf("*** to point to the correct copy of smpeg-config, and remove the file\n");
       printf("*** config.cache before re-running configure\n");
       return 1;
     }
@@ -7995,7 +7990,7 @@ fi;
     VORBIS_LIBDIR="-L$vorbis_prefix/lib"
   fi
 
-  VORBIS_LIBS="$VORBIS_LIBDIR -lvorbis -lm"
+  VORBIS_LIBS="$VORBIS_LIBDIR -lvorbis -lm -logg"
   VORBISFILE_LIBS="-lvorbisfile"
   VORBISENC_LIBS="-lvorbisenc"
 
@@ -8241,7 +8236,7 @@ else
   cat >conftest.$ac_ext <<_ACEOF
 #line 8242 "configure"
 #include "confdefs.h"
-#include <speex.h>
+#include <speex/speex.h>
 _ACEOF
 if { (eval echo "$as_me:8246: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
@@ -8328,7 +8323,7 @@ if test $ac_cv_lib_speex_speex_bits_init = yes; then
 fi
 
   if test "x$have_ogg_hdr" = "xyes" -a "x$have_ogg_lib" = "xyes" -a "x$have_speex_hdr" = "xyes" -a "x$have_speex_lib" = "xyes"; then
-    LIBS="$LIBS -logg -lspeex"
+    LIBS="$LIBS -lspeex -logg"
     cat >>confdefs.h <<\EOF
 #define SOUND_SUPPORTS_SPEEX 1
 EOF
