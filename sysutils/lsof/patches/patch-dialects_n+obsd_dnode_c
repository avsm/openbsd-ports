$OpenBSD: patch-dialects_n+obsd_dnode_c,v 1.2 2003/06/19 06:30:42 pvalchev Exp $
--- dialects/n+obsd/dnode.c.orig	Thu Jun 19 00:20:32 2003
+++ dialects/n+obsd/dnode.c	Thu Jun 19 00:21:22 2003
@@ -68,8 +68,8 @@ getmemsz(pid)
 		if (!p->P_VMSPACE
 		||  kread((KA_T)p->P_VMSPACE, (char *)&vm, sizeof(vm)))
 		    return;
-		Lf->sz = (SZOFFTYPE)ctob(vm.vm_tsize + vm.vm_dsize
-						     + vm.vm_ssize);
+		Lf->sz = (SZOFFTYPE)((vm.vm_tsize + vm.vm_dsize
+		    + vm.vm_ssize) * sysconf(_SC_PAGESIZE));
 		Lf->sz_def = 1;
 		return;
 	    }
