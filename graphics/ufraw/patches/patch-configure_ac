$OpenBSD: patch-configure_ac,v 1.1 2008/06/07 05:31:41 phessler Exp $
--- configure.ac.orig	Sat Nov 10 16:24:32 2007
+++ configure.ac	Fri Jun  6 21:46:05 2008
@@ -161,9 +161,11 @@ AC_CHECK_HEADER(jpeglib.h,
 have_jpeg=${ac_cv_lib_jpeg_jpeg_CreateCompress:-no}
 
 # Check for png headers and library.
-AC_CHECK_HEADER(png.h,
-  AC_CHECK_LIB(png, png_create_info_struct))
-have_png=${ac_cv_lib_png_png_create_info_struct:-no}
+PKG_CHECK_MODULES(PNG, libpng,
+  [ have_png=yes
+    AC_DEFINE(HAVE_PNG, 1, have png) ],
+  [ have_png=no
+    AC_MSG_RESULT($PNG_PKG_ERRORS) ] )
 
 # Check for tiff headers and library.
 AC_CHECK_HEADER(tiffio.h,
