$OpenBSD: patch-configure,v 1.4 2006/01/10 19:08:21 steven Exp $
--- configure.orig	Thu Jun 30 04:45:09 2005
+++ configure	Mon Jan  9 23:42:41 2006
@@ -7452,6 +7452,7 @@ openbsd*)
   need_lib_prefix=no
   need_version=no
   if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
+    deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB shared object'
     case "$host_os" in
     openbsd2.[89] | openbsd2.[89].*)
       shlibpath_overrides_runpath=no
@@ -7464,7 +7465,7 @@ openbsd*)
     shlibpath_overrides_runpath=yes
   fi
   library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
+  finish_cmds=''
   shlibpath_var=LD_LIBRARY_PATH
   ;;
 
@@ -9807,34 +9808,6 @@ fi
 echo "$as_me:$LINENO: result: $EXTRACPPFLAGS" >&5
 echo "${ECHO_T}$EXTRACPPFLAGS" >&6
 
-# Prefixes must begin with "/" or [A-Z] followed by colon.
-
-if test "x$prefix" = "xNONE"; then
-  prefix=/usr/local
-fi
-
-fch=`echo $prefix | sed 's/\(.\).*/\1/'`
-if test $fch != "/" ; then
-   sch=`echo $prefix | sed 's/.\(.\).*/\1/'`
-   if test $sch != ":" ; then
-      prefix=`pwd`/$prefix
-      echo "adjusting prefix to $prefix"
-   fi
-fi
-
-if test "x$exec_prefix" = "xNONE"; then
-  exec_prefix=$prefix
-fi
-
-fch=`echo $exec_prefix | sed 's/\(.\).*/\1/'`
-if test $fch != "/" ; then
-   sch=`echo $exec_prefix | sed 's/.\(.\).*/\1/'`
-   if test $sch != ":" ; then
-      exec_prefix=`pwd`/$exec_prefix
-      echo "adjusting exec_prefix to $exec_prefix"
-   fi
-fi
-
 # Set SNMPLIBPATH & SNMPSHAREPATH
 
 SNMPLIBPATH=""
@@ -14282,6 +14255,7 @@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 $ac_includes_default
+#include <sys/types.h>
 #include <tcpd.h>
 _ACEOF
 rm -f conftest.$ac_objext
@@ -14326,6 +14300,7 @@ _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#include <sys/types.h>
 #include <tcpd.h>
 _ACEOF
 if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
@@ -17818,7 +17793,7 @@ done
 
 
 
-for ac_header in malloc.h sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
+for ac_header in sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 echo "$as_me:$LINENO: checking for $ac_header" >&5
@@ -20777,7 +20752,6 @@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 
-#include <machine/types.h>
 #include <sys/disklabel.h>
 
 _ACEOF
