$OpenBSD: patch-log_c,v 1.1 2002/01/24 23:25:32 naddy Exp $
--- log.c.orig	Fri Nov 30 01:21:08 2001
+++ log.c	Thu Jan 24 23:35:43 2002
@@ -466,7 +466,7 @@ static void log_formatted(enum logcode c
 
 		l = strlen(n);
 
-		if ((l-1) + ((int)(s - &buf[0])) > sizeof(buf)) {
+		if (l + ((int)(s - &buf[0])) >= sizeof(buf)) {
 			rprintf(FERROR,"buffer overflow expanding %%%c - exiting\n",
 				p[0]);
 			exit_cleanup(RERR_MESSAGEIO);
