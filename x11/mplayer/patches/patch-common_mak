$OpenBSD: patch-common_mak,v 1.2 2008/07/09 02:19:36 jakemsr Exp $
--- common.mak.orig	Sun Oct  7 12:49:33 2007
+++ common.mak	Sat Jun 28 14:11:44 2008
@@ -10,9 +10,17 @@ OBJS     += $(OBJS-yes)
 ASM_OBJS += $(ASM_OBJS-yes)
 CPP_OBJS += $(CPP_OBJS-yes)
 
-CFLAGS += -DHAVE_AV_CONFIG_H -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE \
+CFLAGS := -DHAVE_AV_CONFIG_H \
           -D_ISOC9X_SOURCE -I$(BUILD_ROOT) -I$(SRC_PATH) \
-          -I$(SRC_PATH)/libavutil $(OPTFLAGS)
+          -I$(SRC_PATH)/libavutil $(CFLAGS)
+
+ifeq ($(ARCH_X86),yes)
+CFLAGS += -fomit-frame-pointer
+endif
+
+#CFLAGS := $(subst -O3,-O,$(CFLAGS))
+#CFLAGS := $(subst -O2,-O,$(CFLAGS))
+#CFLAGS := $(subst -O1,-O,$(CFLAGS))
 
 SRCS := $(OBJS:.o=.c) $(ASM_OBJS:.o=.S) $(CPPOBJS:.o=.cpp)
 OBJS := $(OBJS) $(ASM_OBJS) $(CPPOBJS)
