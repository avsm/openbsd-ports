$OpenBSD: patch-kstars_kstars_indi_lx200driver_c,v 1.1 2005/02/27 09:09:14 brad Exp $
--- kstars/kstars/indi/lx200driver.c.orig	Fri Jun 25 05:10:04 2004
+++ kstars/kstars/indi/lx200driver.c	Sun Feb 27 03:48:43 2005
@@ -584,7 +584,7 @@ int setCommandInt(int data, const char *
 
   char tempString[16];
 
-  sprintf(tempString, "%s%d#", cmd, data);
+  snprintf(tempString, sizeof( tempString ), "%s%d#", cmd, data);
 
   if (portWrite(tempString) < 0)
     return -1;
@@ -596,7 +596,7 @@ int setMinElevationLimit(int min)
 {
  char tempString[16];
 
- sprintf(tempString, "#:Sh%02d#", min);
+ snprintf(tempString, sizeof( tempString ), "#:Sh%02d#", min);
 
  return (setStandardProcedure(tempString));
 }
@@ -605,7 +605,7 @@ int setMaxElevationLimit(int max)
 {
  char tempString[16];
 
- sprintf(tempString, "#:So%02d*#", max);
+ snprintf(tempString, sizeof( tempString ), "#:So%02d*#", max);
 
  return (setStandardProcedure(tempString));
 
@@ -619,7 +619,7 @@ int setMaxSlewRate(int slewRate)
    if (slewRate < 2 || slewRate > 8)
     return -1;
 
-   sprintf(tempString, "#:Sw%d#", slewRate);
+   snprintf(tempString, sizeof( tempString ), "#:Sw%d#", slewRate);
 
    return (setStandardProcedure(tempString));
 
@@ -634,7 +634,7 @@ int setObjectRA(double ra)
 
  getSexComponents(ra, &h, &m, &s);
 
- sprintf(tempString, "#:Sr %02d:%02d:%02d#", h, m, s);
+ snprintf(tempString, sizeof( tempString ), "#:Sr %02d:%02d:%02d#", h, m, s);
  IDLog("Set Object RA String %s\n", tempString);
   return (setStandardProcedure(tempString));
 }
@@ -649,9 +649,9 @@ int setObjectDEC(double dec)
 
   /* case with negative zero */
   if (!d && dec < 0)
-   sprintf(tempString, "#:Sd -%02d:%02d:%02d#", d, m, s);
+    snprintf(tempString, sizeof( tempString ), "#:Sd -%02d:%02d:%02d#", d, m, s);
   else
-  sprintf(tempString, "#:Sd %+03d:%02d:%02d#", d, m, s);
+    snprintf(tempString, sizeof( tempString ), "#:Sd %+03d:%02d:%02d#", d, m, s);
 
   IDLog("Set Object DEC String %s\n", tempString);
   
@@ -663,7 +663,7 @@ int setCommandXYZ(int x, int y, int z, c
 {
   char tempString[16];
 
-  sprintf(tempString, "%s %02d:%02d:%02d#", cmd, x, y, z);
+  snprintf(tempString, sizeof( tempString ), "%s %02d:%02d:%02d#", cmd, x, y, z);
 
   return (setStandardProcedure(tempString));
 }
@@ -698,7 +698,7 @@ int setCalenderDate(int dd, int mm, int 
    char boolRet[2];
    yy = yy % 100;
 
-   sprintf(tempString, "#:SC %02d/%02d/%02d#", mm, dd, yy);
+   snprintf(tempString, sizeof( tempString ), "#:SC %02d/%02d/%02d#", mm, dd, yy);
 
    if (portWrite(tempString) < 0)
     return -1;
@@ -725,7 +725,7 @@ int setUTCOffset(double hours)
    char tempString[16];
 
    /*TODO add fractions*/
-   sprintf(tempString, "#:SG %+03d#", (int) hours);
+   snprintf(tempString, sizeof( tempString ), "#:SG %+03d#", (int) hours);
 
    fprintf(stderr, "UTC string is %s\n", tempString);
 
@@ -740,7 +740,7 @@ int setSiteLongitude(double Long)
 
    getSexComponents(Long, &d, &m, &s);
 
-   sprintf(tempString, "#:Sg%03d:%02d#", d, m);
+   snprintf(tempString, sizeof( tempString ), "#:Sg%03d:%02d#", d, m);
 
    return (setStandardProcedure(tempString));
 }
@@ -752,7 +752,7 @@ int setSiteLatitude(double Lat)
 
    getSexComponents(Lat, &d, &m, &s);
 
-   sprintf(tempString, "#:St%+03d:%02d:%02d#", d, m, s);
+   snprintf(tempString, sizeof( tempString ), "#:St%+03d:%02d:%02d#", d, m, s);
 
    return (setStandardProcedure(tempString));
 }
@@ -764,7 +764,7 @@ int setObjAz(double az)
 
    getSexComponents(az, &d, &m, &s);
 
-   sprintf(tempString, "#:Sz%03d:%02d#", d, m);
+   snprintf(tempString, sizeof( tempString ), "#:Sz%03d:%02d#", d, m);
 
    return (setStandardProcedure(tempString));
 
@@ -777,7 +777,7 @@ int setObjAlt(double alt)
 
    getSexComponents(alt, &d, &m, &s);
 
-   sprintf(tempString, "#:Sa%+02d*%02d#", d, m);
+   snprintf(tempString, sizeof( tempString ), "#:Sa%+02d*%02d#", d, m);
 
    return (setStandardProcedure(tempString));
 }
@@ -791,16 +791,16 @@ int setSiteName(char * siteName, int sit
    switch (siteNum)
    {
      case 1:
-      sprintf(tempString, "#:SM %s#", siteName);
+      snprintf(tempString, sizeof( tempString ), "#:SM %s#", siteName);
       break;
      case 2:
-      sprintf(tempString, "#:SN %s#", siteName);
+      snprintf(tempString, sizeof( tempString ), "#:SN %s#", siteName);
       break;
      case 3:
-      sprintf(tempString, "#:SO %s#", siteName);
+      snprintf(tempString, sizeof( tempString ), "#:SO %s#", siteName);
       break;
     case 4:
-      sprintf(tempString, "#:SP %s#", siteName);
+      snprintf(tempString, sizeof( tempString ), "#:SP %s#", siteName);
       break;
     default:
       return -1;
@@ -883,7 +883,7 @@ int setTrackFreq(double trackF)
 {
   char tempString[16];
 
-  sprintf(tempString, "#:ST %04.1f#", trackF);
+  snprintf(tempString, sizeof( tempString ), "#:ST %04.1f#", trackF);
 
   return (setStandardProcedure(tempString));
 
@@ -1044,13 +1044,13 @@ int selectCatalogObject(int catalog, int
  switch (catalog)
  {
    case LX200_STAR_C:
-    sprintf(tempString, "#:LS%d#", NNNN);
+    snprintf(tempString, sizeof( tempString ), "#:LS%d#", NNNN);
     break;
    case LX200_DEEPSKY_C:
-    sprintf(tempString, "#:LC%d#", NNNN);
+    snprintf(tempString, sizeof( tempString ), "#:LC%d#", NNNN);
     break;
    case LX200_MESSIER_C:
-    sprintf(tempString, "#:LM%d#", NNNN);
+    snprintf(tempString, sizeof( tempString ), "#:LM%d#", NNNN);
     break;
    default:
     return -1;
@@ -1068,10 +1068,10 @@ int selectSubCatalog(int catalog, int su
   switch (catalog)
   {
     case LX200_STAR_C:
-    sprintf(tempString, "#:LsD%d#", subCatalog);
+    snprintf(tempString, sizeof( tempString ), "#:LsD%d#", subCatalog);
     break;
     case LX200_DEEPSKY_C:
-    sprintf(tempString, "#:LoD%d#", subCatalog);
+    snprintf(tempString, sizeof( tempString ), "#:LoD%d#", subCatalog);
     break;
     case LX200_MESSIER_C:
      return 1;
