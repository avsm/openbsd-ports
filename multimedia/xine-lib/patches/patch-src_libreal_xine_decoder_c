$OpenBSD: patch-src_libreal_xine_decoder_c,v 1.2 2006/10/12 04:48:14 brad Exp $
--- src/libreal/xine_decoder.c.orig	Sun Jul  9 10:39:11 2006
+++ src/libreal/xine_decoder.c	Fri Sep 15 17:53:21 2006
@@ -32,8 +32,10 @@
 #include <fcntl.h>
 #include <unistd.h>
 #include <dlfcn.h>
-#ifdef __x86_64__
-  #include <elf.h>
+#ifdef __linux__
+  #ifdef __x86_64__
+    #include <elf.h>
+  #endif
 #endif
 
 #define LOG_MODULE "real_decoder"
@@ -106,7 +108,8 @@ void *__builtin_vec_new(uint32_t size);
 void __builtin_vec_delete(void *mem);
 void __pure_virtual(void);
 
-#ifdef __x86_64__
+#ifdef __linux__
+  #ifdef __x86_64__
 /* (gb) quick-n-dirty check to be run natively */
 static int is_x86_64_object_(FILE *f)
 {
@@ -147,6 +150,7 @@ static inline int is_x86_64_object(const
   fclose(f);
   return ret;
 }
+  #endif
 #endif
 
 /*
@@ -165,10 +169,12 @@ static int load_syms_linux (realdec_deco
   if (stat(path, &sb))
     snprintf (path, sizeof(path), "%s/%s", entry->str_value, alt_codec_name);
 
-#ifdef __x86_64__
+#ifdef __linux__
+  #ifdef __x86_64__
   /* check whether it's a real x86-64 library */
   if (!is_x86_64_object(path))
 	return 0;
+  #endif
 #endif
 
   lprintf ("opening shared obj '%s'\n", path);
