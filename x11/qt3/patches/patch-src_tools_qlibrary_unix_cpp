$OpenBSD: patch-src_tools_qlibrary_unix_cpp,v 1.1 2002/04/09 17:51:17 espie Exp $
--- src/tools/qlibrary_unix.cpp.orig	Tue Apr  9 18:38:48 2002
+++ src/tools/qlibrary_unix.cpp	Tue Apr  9 19:42:49 2002
@@ -35,6 +35,8 @@
 **
 **********************************************************************/
 
+#include <stdlib.h>
+#include <string.h>
 #include "private/qlibrary_p.h"
 
 /*
@@ -134,7 +136,14 @@ void* QLibraryPrivate::resolveSymbol( co
     if ( !pHnd )
 	return 0;
 
+#if defined(__OpenBSD__) && !defined(__ELF__)
+    char *symbol2 = (char *)malloc(strlen(symbol)+2);
+    *symbol2 = '_';
+    strcpy(symbol2+1, symbol);
+    void *address = dlsym( pHnd, symbol2 );
+#else
     void* address = dlsym( pHnd, symbol );
+#endif
 #if defined(QT_DEBUG) || defined(QT_DEBUG_COMPONENT)
     const char* error = dlerror();
     if ( error )
