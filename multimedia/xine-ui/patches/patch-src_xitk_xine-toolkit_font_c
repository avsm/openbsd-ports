$OpenBSD: patch-src_xitk_xine-toolkit_font_c,v 1.2 2007/05/22 08:11:08 steven Exp $
--- src/xitk/xine-toolkit/font.c.orig	Mon Mar 26 00:53:06 2007
+++ src/xitk/xine-toolkit/font.c	Wed May 16 17:38:59 2007
@@ -38,6 +38,7 @@
 
 #ifdef HAVE_ICONV
 #include <iconv.h>
+#include <localcharset.h>
 #endif
 
 #ifdef HAVE_LANGINFO_CODESET
@@ -419,7 +420,7 @@ static int xitk_font_load_one(Display *display, char *
 #endif
   {
     XLOCK(display);
-#ifdef WITH_XFT
+#ifdef WITH_XMB
     xtfs->font = XftFontOpenName( display, DefaultScreen(display), xitk_font_core_string_to_xft(font));
 #else
     xtfs->font = XLoadQueryFont(display, font);
@@ -1285,7 +1286,7 @@ char *xitk_get_system_encoding(void) {
   char *lang, *codeset = NULL;
   
 #ifdef HAVE_LANGINFO_CODESET
-  codeset = nl_langinfo(CODESET);
+  codeset = locale_charset();
 #endif
   /*
    * guess locale codeset according to shell variables
