# OpenBSD makefile for:  aub
# Version required:     	  v2.0.5
# Date created:			  December 1, 1997
# Whom:				  Angelos D. Keromytis
#
# $OpenBSD: Makefile,v 1.6 2000/02/10 23:14:33 espie Exp $
#

NEED_VERSION=	1.191
DISTNAME=	aub
PKGNAME=	aub-2.0.5
CATEGORIES=	news
MASTER_SITES=	ftp://ftp.cdrom.com/pub/perl/CPAN/scripts/news/nntpstuff/aub/ \
		ftp://ftp.digital.com/pub/plan/perl/CPAN/scripts/news/nntpstuff/aub/ \
		ftp://ftp.perl.org/pub/CPAN/scripts/news/nntpstuff/aub/
DISTFILES=	aub aub.1 BUG_FIXES

MAINTAINER=	angelos@openbsd.org

DIST_SUBDIR=	aub
WRKDIST=	${WRKDIR}
NO_BUILD=	yes
MAN1=		aub.1

do-extract:
	@mkdir -p ${WRKDIR}

pre-configure:
	@sed -e '1,1s:/usr/local/bin/perl:!/usr/bin/perl:' \
		-e 's:$SUM = "/bin/sum":$SUM = "/usr/bin/sum":' \
		-e 's:/usr/tmp:/var/tmp:' \
		${FULLDISTDIR}/aub > ${WRKDIR}/aub

do-install:
	cd ${WRKDIR}; ${PATCH} < ../files/aub-perl5.diff
	${INSTALL_SCRIPT} ${WRKDIR}/aub ${PREFIX}/bin
	${INSTALL_MAN} ${FULLDISTDIR}/aub.1 ${PREFIX}/man/man1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/aub
	${INSTALL_MAN} ${FULLDISTDIR}/BUG_FIXES ${PREFIX}/share/doc/aub

#
# There is a patch to aub to run with perl5.
# You may find it in the files/ dir.
#

.include <bsd.port.mk>
