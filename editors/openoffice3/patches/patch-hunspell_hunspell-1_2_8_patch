$OpenBSD: patch-hunspell_hunspell-1_2_8_patch,v 1.1 2009/05/08 15:43:50 robert Exp $
--- hunspell/hunspell-1.2.8.patch.orig.port	Fri Apr 10 10:52:25 2009
+++ hunspell/hunspell-1.2.8.patch	Fri Apr 10 10:53:13 2009
@@ -56,8 +56,8 @@
  #ifdef HUNSPELL_WARNING_ON
  #define HUNSPELL_WARNING fprintf
 --- misc/hunspell-1.2.8/src/hunspell/csutil.cxx	Wed Oct 22 12:15:28 2008
-+++ misc/build/hunspell-1.2.8/src/hunspell/csutil.cxx	Thu Feb 19 18:13:34 2009
-@@ -18,13 +18,13 @@
++++ misc/build/hunspell-1.2.8/src/hunspell/csutil.cxx	Fri Apr 10 10:52:48 2009
+@@ -18,12 +18,12 @@
  #include "langnum.hxx"
  
  #ifdef OPENOFFICEORG
@@ -71,11 +71,10 @@
 +#ifndef MOZILLA_CLIENT
 +#include "utf_info.cxx"
 +#define UTF_LST_LEN (sizeof(utf_lst) / (sizeof(unicode_info)))
- #endif
 +#endif
+ #endif
  
  #ifdef MOZILLA_CLIENT
- #include "nsCOMPtr.h"
 --- misc/hunspell-1.2.8/src/hunspell/filemgr.cxx	Sat Nov  1 15:09:41 2008
 +++ misc/build/hunspell-1.2.8/src/hunspell/filemgr.cxx	Thu Feb 19 17:28:35 2009
 @@ -11,6 +11,7 @@
@@ -165,7 +164,7 @@
  #include <stdio.h>
  #endif
 --- misc/hunspell-1.2.8/src/hunspell/hunspell.cxx	Thu Oct 30 20:15:53 2008
-+++ misc/build/hunspell-1.2.8/src/hunspell/hunspell.cxx	Thu Feb 19 18:13:35 2009
++++ misc/build/hunspell-1.2.8/src/hunspell/hunspell.cxx	Fri Apr 10 10:52:48 2009
 @@ -1,3 +1,7 @@
 +#ifdef _MSC_VER
 +#pragma setlocale("C")
@@ -174,7 +173,7 @@
  #include "license.hunspell"
  #include "license.myspell"
  
-@@ -11,11 +15,6 @@
+@@ -11,17 +15,15 @@
  #include <stdio.h>
  #endif
  
@@ -186,7 +185,6 @@
  #ifndef MOZILLA_CLIENT
  #ifndef WIN32
  using namespace std;
-@@ -22,6 +21,9 @@
  #endif
  #endif
  
@@ -323,9 +321,9 @@
  #include "hunzip.hxx"
  
  #define CODELEN  65536
---- misc/hunspell-1.2.8/src/hunspell/hunzip.hxx	Thu Feb 19 15:59:42 2009
-+++ misc/build/hunspell-1.2.8/src/hunspell/hunzip.hxx	Thu Feb 19 18:13:35 2009
-@@ -18,6 +18,8 @@
+--- misc/hunspell-1.2.8/src/hunspell/hunzip.hxx	Tue Jun 17 10:57:55 2008
++++ misc/build/hunspell-1.2.8/src/hunspell/hunzip.hxx	Fri Apr 10 10:52:48 2009
+@@ -12,6 +12,8 @@
  #define MSG_MEMORY "error: %s: missing memory\n"
  #define MSG_KEY    "error: %s: missing or bad password\n"
  
@@ -399,8 +397,8 @@
  RepList::RepList(int n) {
      dat = (replentry **) malloc(sizeof(replentry *) * n);
 --- misc/hunspell-1.2.8/src/tools/analyze.cxx	Tue Jun 17 13:44:50 2008
-+++ misc/build/hunspell-1.2.8/src/tools/analyze.cxx	Thu Feb 19 18:13:35 2009
-@@ -3,13 +3,13 @@
++++ misc/build/hunspell-1.2.8/src/tools/analyze.cxx	Fri Apr 10 10:52:48 2009
+@@ -3,11 +3,11 @@
  #include <cstdlib>
  #include <cstdio>
  
@@ -409,16 +407,14 @@
  #ifndef WIN32
  using namespace std;
  #endif
- 
++
 +#include "hunspell.hxx"
  
-+
  
- int main(int argc, char **argv)
- {
+ 
 --- misc/hunspell-1.2.8/src/tools/chmorph.cxx	Tue Jun 17 12:15:34 2008
-+++ misc/build/hunspell-1.2.8/src/tools/chmorph.cxx	Thu Feb 19 17:36:46 2009
-@@ -2,13 +2,13 @@
++++ misc/build/hunspell-1.2.8/src/tools/chmorph.cxx	Fri Apr 10 10:52:48 2009
+@@ -2,12 +2,12 @@
  #include <cstdlib>
  #include <cstdio>
  
@@ -428,16 +424,15 @@
  #ifndef W32
  using namespace std;
  #endif
- 
++
 +#include "hunspell.hxx"
 +#include "textparser.hxx"
-+
+ 
  int 
  main(int argc, char** argv)
- {
 --- misc/hunspell-1.2.8/src/tools/example.cxx	Tue Jun 17 13:07:24 2008
-+++ misc/build/hunspell-1.2.8/src/tools/example.cxx	Thu Feb 19 17:38:12 2009
-@@ -2,12 +2,12 @@
++++ misc/build/hunspell-1.2.8/src/tools/example.cxx	Fri Apr 10 10:52:48 2009
+@@ -2,11 +2,11 @@
  #include <cstdlib>
  #include <cstdio>
  
@@ -446,14 +441,13 @@
  #include "hunspell.hxx"
  
  extern char * mystrdup(const char * s);
- 
--using namespace std;
 -
+-using namespace std;
+ 
  int 
  main(int argc, char** argv)
- {
---- misc/hunspell-1.2.8/src/tools/hunspell.cxx	2008-09-04 15:44:19.000000000 +0200
-+++ misc/build/hunspell-1.2.8/src/tools/hunspell.cxx	2008-11-01 16:31:24.000000000 +0100
+--- misc/hunspell-1.2.8/src/tools/hunspell.cxx	Thu Sep  4 15:44:19 2008
++++ misc/build/hunspell-1.2.8/src/tools/hunspell.cxx	Fri Apr 10 10:52:48 2009
 @@ -7,10 +7,20 @@
  
  #include <cstdlib>
@@ -486,18 +480,16 @@
  
  #ifdef HAVE_LIBINTL_H
  #include <libintl.h>
-@@ -1385,9 +1397,11 @@
+@@ -1385,7 +1397,9 @@
  #ifdef HAVE_LOCALE_H
  	ui_lang = setlocale(LC_ALL, "");
  	textdomain("hunspell");
 +#ifdef HAVE_LANGINFO_CODESET
          ui_enc = nl_langinfo(CODESET);
++#endif
  #endif
  #endif
-+#endif
  
- #ifdef HAVE_READLINE
- 	rl_set_key("", rl_escape, rl_get_keymap());
 --- misc/hunspell-1.2.8/src/tools/hunzip.cxx	Tue Jan 15 11:10:04 2008
 +++ misc/build/hunspell-1.2.8/src/tools/hunzip.cxx	Thu Feb 19 17:38:12 2009
 @@ -2,6 +2,8 @@
@@ -510,7 +502,7 @@
  
  #define DESC "hunzip - decompress a hzip file to the standard output\n" \
 --- misc/hunspell-1.2.8/src/tools/hzip.c	Fri Apr  4 15:20:10 2008
-+++ misc/build/hunspell-1.2.8/src/tools/hzip.c	Thu Feb 19 18:13:35 2009
++++ misc/build/hunspell-1.2.8/src/tools/hzip.c	Fri Apr 10 10:52:48 2009
 @@ -44,7 +44,7 @@
      if (tree->type != code_NODE) {
          int i = tree->word;
@@ -572,7 +564,7 @@
          bits = 0;
          write_bits(f2, bitbuf, &bits, table[i]);
          if (key) {
-@@ -169,11 +169,11 @@
+@@ -169,18 +169,18 @@
                  if (*(++enc) == '\0') enc = key;
                  bitbuf[cl] ^= *enc;
              }
@@ -587,7 +579,6 @@
      bits = 0;
      while((cx[0] = getc(f)) != -1 && (cx[1] = getc(f)) != -1) {
          c[0] = cx[0];
-@@ -180,7 +180,7 @@
          c[1] = cx[1];
          write_bits(f2, bitbuf, &bits, table[*((unsigned short *) c)]);
      }
@@ -619,3 +610,11 @@
              p++;
          }
          if (i > 0 && buf[i - 1] == '\n') {
+--- misc/hunspell-1.2.8/tests/test.sh	Sat Oct 27 16:58:42 2007
++++ misc/build/hunspell-1.2.8/tests/test.sh	Fri Apr 10 10:53:10 2009
+@@ -1,4 +1,4 @@
+-#!/bin/bash
++#!/usr/local/bin/bash
+ export LC_ALL="C"
+ 
+ function check_valgrind_log () {
