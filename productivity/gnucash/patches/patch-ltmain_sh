$OpenBSD: patch-ltmain_sh,v 1.1.1.1 2005/02/24 01:47:15 todd Exp $
--- ltmain.sh.orig	Wed Aug 28 23:12:30 2002
+++ ltmain.sh	Thu Feb 17 07:05:13 2005
@@ -24,7 +24,7 @@
 # configuration script generated by Autoconf, you may include it under
 # the same distribution terms that you use for the rest of that program.
 
-# turn off piecewise linking
+# turn off piecewize linking
 max_cmd_len=-2
 
 # Check that we have a working $echo.
@@ -59,7 +59,7 @@ modename="$progname"
 PROGRAM=ltmain.sh
 PACKAGE=libtool
 VERSION=1.4c
-TIMESTAMP=" (1.1054 2001/09/16 15:48:23)"
+TIMESTAMP=" (1.1066 2001/09/30 10:20:29)"
 
 default_mode=
 help="Try \`$progname --help' for more information."
@@ -499,7 +499,7 @@ if test -z "$show_help"; then
     # Only attempt this if the compiler in the base compile
     # command doesn't match the default compiler.
     if test -n "$available_tags" && test -z "$tagname"; then
-      case $base_compile in
+      case "$base_compile " in
       "$CC "*) ;;
       # Blanks in the command may have been stripped by the calling shell,
       # but not from the CC environment variable when ltconfig was run.
@@ -509,7 +509,7 @@ if test -z "$show_help"; then
 	  if grep "^# ### BEGIN LIBTOOL TAG CONFIG: $z$" < "$0" > /dev/null; then
 	    # Evaluate the configuration.
 	    eval "`sed -n -e '/^# ### BEGIN LIBTOOL TAG CONFIG: '$z'$/,/^# ### END LIBTOOL TAG CONFIG: '$z'$/p' < $0`"
-	    case $base_compile in
+	    case "$base_compile " in
 	    "$CC "*)
 	      # The compiler in the base compile command matches
 	      # the one in the tagged configuration.
@@ -1083,7 +1083,8 @@ EOF
 	  [\\/]* | [A-Za-z]:[\\/]*) ;;
 	  *)
 	    $echo "$modename: only absolute run-paths are allowed" 1>&2
-	    exit 1
+	    $echo "$modename: '$arg' is bad" 1>&2
+	    #exit 1
 	    ;;
 	  esac
 	  if test "$prev" = rpath; then
@@ -1249,8 +1250,16 @@ EOF
 	continue
 	;;
 
+      -pthread)
+       compile_command="$compile_command -pthread"
+       finalize_command="$finalize_command -pthread"
+       compiler_flags="$compiler_flags -pthread"
+       continue
+       ;;
+
       -module)
 	module=yes
+	build_old_libs=no
 	continue
 	;;
 
@@ -1355,6 +1364,7 @@ EOF
 	;;
 
       -Wl,*)
+	if false; then
 	args=`$echo "X$arg" | $Xsed -e "$sed_quote_subst" -e 's/^-Wl,//'`
 	arg=
 	save_ifs="$IFS"; IFS=','
@@ -1371,6 +1381,7 @@ EOF
 	done
 	IFS="$save_ifs"
 	arg=`$echo "X$arg" | $Xsed -e "s/^ //"`
+	fi
 	;;
 
       -Xcompiler)
@@ -2079,10 +2090,7 @@ EOF
 	link_static=no # Whether the deplib will be linked statically
 	if test -n "$library_names" &&
 	   { test "$prefer_static_libs" = no || test -z "$old_library"; }; then
-	  if test "$installed" = no; then
-	    notinst_deplibs="$notinst_deplibs $lib"
-	    need_relink=yes
-	  fi
+	  need_relink=no
 	  # This is a shared library
 	  if test "$linkmode" = lib &&
 	     test "$hardcode_into_libs" = yes; then
