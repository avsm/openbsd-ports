$OpenBSD: patch-os_dep_c,v 1.1 2002/08/27 15:41:30 todd Exp $
--- os_dep.c.orig	Thu Jul 26 20:39:45 2001
+++ os_dep.c	Wed Jul 31 07:29:54 2002
@@ -232,6 +232,19 @@ static void *tiny_sbrk(ptrdiff_t increme
   }
 #endif
 
+#if defined(OPENBSD) && defined(__ELF__)
+  ptr_t GC_data_start;
+
+  void GC_init_openbsd_elf()
+  {
+    extern ptr_t GC_find_limit();
+    extern char **environ;
+	/* This may need to be environ, without the underscore, for	*/
+	/* some versions.						*/
+    GC_data_start = GC_find_limit((ptr_t)&environ, FALSE);
+  }
+#endif
+
 # ifdef OS2
 
 # include <stddef.h>
@@ -630,7 +643,6 @@ ptr_t GC_get_stack_base()
     		/* preserved across the longjmp.  Can safely be 	*/
     		/* static since it's only called once, with the		*/
     		/* allocation lock held.				*/
-
 
 	GC_setup_temporary_fault_handler();
 	if (setjmp(GC_jmp_buf) == 0) {
