$OpenBSD: patch-configure,v 1.2 2010/10/25 09:59:02 sebastia Exp $

do not link against gnustep-gui in case its installed
decouple version of sope from the shared library interface versions
remove unused ssl check that generates a make variable with whitespace in
its name

--- configure.orig	Thu Aug 19 17:13:13 2010
+++ configure	Sun Oct 24 19:22:44 2010
@@ -1,4 +1,4 @@
-#!/bin/bash
+#!/bin/sh
 
 #
 # Note: When adding make options to this script, ensure that the source still
@@ -318,6 +318,7 @@ genConfigMake() {
   cfgwrite "# Note: you can override any option as a 'make' parameter, eg:"
   cfgwrite "#         make debug=yes"
   cfgwrite ""
+  cfgwrite "NEEDS_GUI=no"
   
   #cfgwrite "# print on the cmdline that this file is being used"
   #cfgwrite "all :: "
@@ -357,9 +358,9 @@ genConfigMake() {
     cfgwrite "FHS_INSTALL_ROOT:=$ARG_PREFIX"
     cfgwrite ""
     cfgwrite "SOPE_SYSLIBDIR=\${DESTDIR}\${FHS_INSTALL_ROOT}/\$(CGS_LIBDIR_NAME)"
-    cfgwrite "SOPE_LIBDIR=\${SOPE_SYSLIBDIR}/sope-\${MAJOR_VERSION}.\${MINOR_VERSION}"
+    cfgwrite "SOPE_LIBDIR=\${SOPE_SYSLIBDIR}/sope-\${SOPE_MAJOR_VERSION}.\${SOPE_MINOR_VERSION}"
     cfgwrite "SOPE_SYSSHAREDIR=\${DESTDIR}\${FHS_INSTALL_ROOT}/share"
-    cfgwrite "SOPE_SHAREDIR=\${SOPE_SYSSHAREDIR}/sope-\${MAJOR_VERSION}.\${MINOR_VERSION}"
+    cfgwrite "SOPE_SHAREDIR=\${SOPE_SYSSHAREDIR}/sope-\${SOPE_MAJOR_VERSION}.\${SOPE_MINOR_VERSION}"
     cfgwrite "SOPE_DBADAPTORS=\${SOPE_LIBDIR}/dbadaptors"
     cfgwrite "SOPE_PRODUCTS=\${SOPE_LIBDIR}/products"
     cfgwrite "SOPE_SAXDRIVERS=\${SOPE_LIBDIR}/saxdrivers"
@@ -469,11 +470,7 @@ checkDependencies() {
   cfgwrite "# library dependencies"
   checkLinking "xml2"        optional;
   checkLinking "ldap"        optional;
-  if [ `uname` = "OpenBSD" ];then
-    checkLinking "ssl crypto"  required; # TODO: make optional
-  else
-    checkLinking "ssl"         required; # TODO: make optional
-  fi
+  checkLinking "ssl"         required; # TODO: make optional
   checkLinking "pq"          optional;
 #  checkLinking "sqlite3"     optional;
   cfgwrite "HAS_LIBRARY_sqlite3=no"
