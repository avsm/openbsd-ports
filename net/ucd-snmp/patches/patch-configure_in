$OpenBSD: patch-configure_in,v 1.5 2001/01/05 09:19:46 danh Exp $
--- configure.in.orig	Fri Dec  1 10:56:07 2000
+++ configure.in	Sat Dec 23 14:21:54 2000
@@ -348,6 +348,7 @@ dnl get version number.
 AC_MSG_CHECKING(for ucd-snmp version number)
 VERSION=`cat $srcdir/version.h | sed 's/";//;s/.*"//;s/pre/0./;'`
 AC_SUBST(VERSION)
+AC_SUBST(VERSION_INFO)
 AC_MSG_RESULT($VERSION)
 
 dnl super type checking
@@ -461,22 +462,10 @@ if test "x$prefix" = "xNONE"; then
   prefix=/usr/local
 fi
 
-fch=`echo $prefix | sed 's/\(.\).*/\1/'`
-if test $fch != "/" ; then
-   prefix=`pwd`/$prefix
-   echo "adjusting prefix to $prefix"
-fi
-
 if test "x$exec_prefix" = "xNONE"; then
   exec_prefix=$prefix
 fi
 
-fch=`echo $exec_prefix | sed 's/\(.\).*/\1/'`
-if test $fch != "/" ; then
-   exec_prefix=`pwd`/$exec_prefix
-   echo "adjusting exec_prefix to $exec_prefix"
-fi
-
 dnl Set SNMPLIBPATH & SNMPSHAREPATH
 
 SNMPLIBPATH=""
@@ -932,10 +921,11 @@ AC_ARG_WITH(libwrap,
     AC_CHECK_HEADER(tcpd.h,
 	LIBS="$LIBS -lwrap"
 	AC_MSG_CHECKING(for TCP wrappers library -lwrap)
-	AC_TRY_LINK([#include <tcpd.h>
-  int allow_severity = 0;
-  int deny_severity  = 0;
-  ],[hosts_access((void *)0)],
+	AC_TRY_LINK([#include <sys/types.h>
+#include <tcpd.h>
+int allow_severity = 0;
+int deny_severity  = 0;
+],[hosts_access((void *)0)],
 	    AC_MSG_RESULT(yes)
 	    AC_DEFINE(USE_LIBWRAP)
 	    test "$with_libwrap" != no && WRAPLIBS="-L$with_libwrap/lib"
@@ -945,10 +935,11 @@ AC_ARG_WITH(libwrap,
 	    AC_CHECK_FUNC(yp_get_default_domain, ,
 		AC_CHECK_LIB(nsl, yp_get_default_domain))
 	    AC_MSG_CHECKING(for TCP wrappers library -lwrap linked with -lnsl)
-	    AC_TRY_LINK([#include <tcpd.h>
-  int allow_severity = 0;
-  int deny_severity  = 0;
-  ],[hosts_access((void *)0)],
+	    AC_TRY_LINK([#include <sys/types.h>
+#include <tcpd.h>
+int allow_severity = 0;
+int deny_severity  = 0;
+],[hosts_access((void *)0)],
 		AC_MSG_RESULT(yes)
 		test "$with_libwrap" != no && WRAPLIBS="-L$with_libwrap/lib"
 		WRAPLIBS="$WRAPLIBS -lwrap", AC_MSG_RESULT(no)),
