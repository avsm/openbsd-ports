$OpenBSD: patch-Makefile,v 1.1.1.1 2009/07/23 08:02:37 giovanni Exp $
--- Makefile.orig	Sun Jul 19 16:55:42 2009
+++ Makefile	Wed Jul 22 12:17:35 2009
@@ -1,8 +1,8 @@
-PREFIX ?= $(DESTDIR)/usr/local
+PREFIX = ${TRUEPREFIX}
 LIBINSTALLDIR ?= /lib
-XDGCONFDIR ?= $(DESTDIR)/etc/xdg
+XDGCONFDIR ?= $(DESTDIR)$(PREFIX)/share/exaile/xdg
 
-EXAILELIBDIR = $(DESTDIR)$(PREFIX)$(LIBINSTALLDIR)/exaile
+EXAILELIBDIR = $(DESTDIR)${MODPY_SITEPKG}/exaile
 EXAILESHAREDIR = $(DESTDIR)$(PREFIX)/share/exaile
 
 
@@ -10,8 +10,8 @@ all: compile
 	@echo "Ready to install..."
 
 compile:
-	python -m compileall -q xl xlgui
-	-python -O -m compileall -q xl xlgui
+	${MODPY_BIN} -m compileall xl lib xlgui
+	-${MODPY_BIN} -O -m compileall xl lib xlgui
 	cd plugins && make && cd ..
 
 make-install-dirs:
@@ -78,8 +78,8 @@ install-target:
 	cd $(DESTDIR)$(PREFIX)/bin && \
 	 printf "#!/bin/sh\n\
 	 cd $(PREFIX)/share/exaile\n\
-	 exec python $(PREFIX)$(LIBINSTALLDIR)/exaile/exaile.py \
-	 --datadir=$(PREFIX)/share/exaile/data --startgui \"\$$@\"" \
+	 exec ${MODPY_BIN} ${MODPY_SITEPKG}/exaile/exaile.py \
+	 --datadir=$(PREFIX)/share/exaile/data --no-hal --startgui \"\$$@\"" \
 	 > exaile && \
 	 chmod 755 exaile
 	cd plugins && make install DESTDIR=$(DESTDIR) PREFIX=$(PREFIX) \
@@ -117,10 +117,10 @@ pot:
 	find data/glade/ -name "*.glade" >> po/POTFILES.in
 	find plugins -name "*.py" >> po/POTFILES.in
 	find plugins -name "*.glade" >> po/POTFILES.in
-	python tools/createpot.py
+	${MODPY_BIN} tools/createpot.py
 
 translations:
-	python tools/createpot.py compile
+	${MODPY_BIN} tools/createpot.py compile
 
 potball:
 	tar --bzip2 --format=posix -cf exaile-po.tar.bz2 po/ \
