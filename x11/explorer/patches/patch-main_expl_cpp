$OpenBSD: patch-main_expl_cpp,v 1.2 2008/08/19 22:25:29 jasper Exp $
--- main_expl.cpp.orig	Fri Jul 11 16:32:27 1997
+++ main_expl.cpp	Fri Aug 15 16:41:55 2008
@@ -70,6 +70,10 @@ static const char rcs_id[] = "$Id: main_expl.cpp,v 1.3
 #include <stdlib.h>
 
 
+#if defined(__GNUC__) && __GNUC__ >= 3
+#include <new>
+
+#else
 #ifdef HAVE_NEW_H
 #include <new.h>  
 #else
@@ -79,6 +83,7 @@ extern "C" new_handler set_new_handler (new_handler);
 }
 #endif
 
+#endif
 
 #include <qmsgbox.h>
 
@@ -102,7 +107,11 @@ int     main(int argc, char **argv)
 	int c;
 	char *env=NULL, *bgname=NULL;
 	
+#if defined(__GNUC__) && __GNUC__ >= 3
+	std::set_new_handler(&lowmem_handler);	
+#else
 	set_new_handler(&lowmem_handler);	
+#endif
 	
 	while ((c = getopt(argc,argv,szOpts)) != EOF)
 	{
