$OpenBSD: patch-config_Xsession_in,v 1.3 2004/06/24 23:58:34 marcm Exp $
--- config/Xsession.in.orig	Fri May 28 13:50:17 2004
+++ config/Xsession.in	Thu Jun 24 10:33:42 2004
@@ -216,15 +216,16 @@ if [ "x$command" = "xdefault" ] ; then
   elif [ -x /etc/X11/Xclients ]; then
     command="/etc/X11/Xclients"
   else
-    echo "$0: Cannot find Xclients"
-    # FIXME: kind of an evil failsafe
-    command="xsm"
+    # Load the OpenBSD default Xsession...
+    command="/etc/X11/xdm/Xsession"
+    # hack around running two agents
+    NO_SSH=yes
   fi
 fi
 
 # add ssh-agent if found
 sshagent="`gdmwhich ssh-agent`"
-if [ -n "$sshagent" ] && [ -x "$sshagent" ] && [ -z "$SSH_AUTH_SOCK" ]; then
+if [ -n "$sshagent" ] && [ -x "$sshagent" ] && [ -z "$SSH_AUTH_SOCK" ] && [ -z "$NO_SSH" ]; then
     command="$sshagent -- $command"
 elif [ -z "$sshagent" ] ; then
     echo "$0: ssh-agent not found!"
