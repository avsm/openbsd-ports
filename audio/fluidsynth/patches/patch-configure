$OpenBSD: patch-configure,v 1.1.1.1 2008/04/06 22:42:11 jakemsr Exp $
--- configure.orig	Sat Nov 17 13:32:16 2007
+++ configure	Fri Feb 15 17:45:13 2008
@@ -19986,13 +19986,13 @@ fi
 
 
 
-{ echo "$as_me:$LINENO: checking for pthread_create in -lpthread" >&5
-echo $ECHO_N "checking for pthread_create in -lpthread... $ECHO_C" >&6; }
+{ echo "$as_me:$LINENO: checking for pthread_create in -pthread" >&5
+echo $ECHO_N "checking for pthread_create in -pthread... $ECHO_C" >&6; }
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -20052,7 +20052,7 @@ if test $ac_cv_lib_pthread_pthread_create = yes; then
 #define HAVE_LIBPTHREAD 1
 _ACEOF
 
-  LIBS="-lpthread $LIBS"
+  LIBS="-pthread $LIBS"
 
 fi
 
@@ -20727,7 +20727,7 @@ esac
 
 
 
- if test "$mingw32_support" == "yes"; then
+ if test "$mingw32_support" = "yes"; then
   MINGW32_SUPPORT_TRUE=
   MINGW32_SUPPORT_FALSE='#'
 else
@@ -20899,7 +20899,7 @@ cat >>confdefs.h <<\_ACEOF
 _ACEOF
 
 else
-  CFLAGS="${CFLAGS} ${FCCFLAGS} -O2 -fomit-frame-pointer -funroll-all-loops -finline-functions -Wall -W -Wpointer-arith -Wbad-function-cast -Wcast-qual -Wcast-align -Wstrict-prototypes -Wno-unused -Winline"
+  CFLAGS="${CFLAGS} ${FCCFLAGS} -Wall -W -Wpointer-arith -Wbad-function-cast -Wcast-qual -Wcast-align -Wstrict-prototypes -Wno-unused -Winline"
 
 cat >>confdefs.h <<\_ACEOF
 #define DEBUG 0
@@ -21152,7 +21152,7 @@ fi
 
 
 
-for ac_header in fcntl.h sys/ioctl.h sys/soundcard.h machine/soundcard.h
+for ac_header in fcntl.h sys/ioctl.h sys/soundcard.h machine/soundcard.h soundcard.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
@@ -21294,8 +21294,9 @@ done
     if test "${ac_cv_header_fcntl_h}" = "yes" && \
      test "${ac_cv_header_sys_ioctl_h}" = "yes"; then
       if test "${ac_cv_header_sys_soundcard_h}" = "yes" || \
-       test "${ac_cv_header_machine_soundcard_h}" = "yes"; then
-	OSS_SUPPORT=1
+       test "${ac_cv_header_machine_soundcard_h}" = "yes" || \
+         test "${ac_cv_header_soundcard_h}" = "yes"; then
+	  OSS_SUPPORT=1
 
 cat >>confdefs.h <<\_ACEOF
 #define OSS_SUPPORT 1
