$OpenBSD: patch-wmtheme,v 1.1.1.1 2001/09/07 03:12:57 lebel Exp $
--- wmtheme.orig	Fri Aug 10 17:06:50 2001
+++ wmtheme	Thu Sep  6 13:20:03 2001
@@ -1368,7 +1368,7 @@ sub getuserchoice {
 }
 
 sub screensize {
-  my ($rows, $cols) = (24, 50);
+  my ($rows, $cols) = (24, 80);
   my $sttyout = `stty -a`;
 
   if ($sttyout =~ /\brows (\d+)/) {
@@ -1376,7 +1376,7 @@ sub screensize {
   }
 
   if ($sttyout =~ /\bcolumns (\d+)/) {
-    $cols = $1 < 50 ? 50 : $1;
+    $cols = $1 < 80 ? 80 : $1;
   }
 
   ($rows, $cols);
@@ -1570,7 +1570,7 @@ sub getfiletypes {
   $cleanups{getfiletypes} = $file_input;
 
   stowfile($file_input, join("\n", @files) . "\n");
-  my @types = split(/\n/, forktick("file -b -f \Q$file_input\E"));
+  my @types = split(/\n/, forktick("file -f \Q$file_input\E | sed -e \Qs;^[^:]*: *;;g\E"));
   unlink $file_input or choke("can't remove temporary file $file_input: $!");
 
   delete $cleanups{getfiletypes};
