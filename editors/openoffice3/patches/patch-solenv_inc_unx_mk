# i100395
$OpenBSD: patch-solenv_inc_unx_mk,v 1.3 2010/03/30 11:03:07 robert Exp $
--- solenv/inc/unx.mk.orig.port	Fri Oct  2 10:24:56 2009
+++ solenv/inc/unx.mk	Fri Feb 12 15:57:26 2010
@@ -32,6 +32,9 @@
 # --- Unix-Environment ---------------------------------------
 # Used if "$(GUI)" == "UNX"
 
+.IF "$(COM)$(OS)" == "GCCOPENBSD"
+.INCLUDE : unxobsd.mk
+.ENDIF
 
 # Dieses Define gilt fuer alle  WNT- Plattformen
 # fuer Compiler, wo kein Java unterstuetzt wird, muss dies ge'undeft werden
@@ -220,7 +223,13 @@ SOLARLIB+=-L$(KDE_ROOT)/lib
 AUGMENT_LIBRARY_PATH *= : && \
     LD_LIBRARY_PATH=$${{LD_LIBRARY_PATH+$${{LD_LIBRARY_PATH}}:}}$(SOLARLIBDIR)
 .ELSE
+.IF "$(SOLAR_JAVA)" != ""
 AUGMENT_LIBRARY_PATH *= if ($$?LD_LIBRARY_PATH == 1) \
-    eval 'setenv LD_LIBRARY_PATH "$${{LD_LIBRARY_PATH}}:$(SOLARLIBDIR)"' && \
-    if ($$?LD_LIBRARY_PATH == 0) setenv LD_LIBRARY_PATH "$(SOLARLIBDIR)" &&
+    eval 'setenv LD_LIBRARY_PATH "$${{LD_LIBRARY_PATH}}:$(SOLARLIBDIR):."' && \
+    if ($$?LD_LIBRARY_PATH == 0) setenv LD_LIBRARY_PATH "$(SOLARLIBDIR):." &&
+.ELSE
+AUGMENT_LIBRARY_PATH *= if ($$?LD_LIBRARY_PATH == 1) \
+    eval 'setenv LD_LIBRARY_PATH "$${{LD_LIBRARY_PATH}}:$(SOLARLIBDIR):."' && \
+    if ($$?LD_LIBRARY_PATH == 0) setenv LD_LIBRARY_PATH "$(SOLARLIBDIR):." &&
+.ENDIF
 .ENDIF
