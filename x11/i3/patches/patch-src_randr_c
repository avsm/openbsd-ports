$OpenBSD: patch-src_randr_c,v 1.1 2010/11/18 12:20:54 dcoppa Exp $
--- src/randr.c.orig	Wed Jun  9 09:58:15 2010
+++ src/randr.c	Thu Nov 18 12:16:53 2010
@@ -523,9 +523,13 @@ void initialize_randr(xcb_connection_t *conn, int *eve
         const xcb_query_extension_reply_t *extreply;
 
         extreply = xcb_get_extension_data(conn, &xcb_randr_id);
-        if (!extreply->present)
+        if (!extreply->present) {
                 disable_randr(conn);
-        else randr_query_outputs(conn);
+                init_workspaces();
+                return;
+        }
+
+        randr_query_outputs(conn);
 
         if (event_base != NULL)
                 *event_base = extreply->first_event;
