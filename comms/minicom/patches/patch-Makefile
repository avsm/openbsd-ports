$OpenBSD: patch-Makefile,v 1.2 2001/10/12 03:30:30 brad Exp $
--- Makefile.orig	Tue Apr 25 11:42:32 2000
+++ Makefile	Thu Oct 11 23:07:46 2001
@@ -22,10 +22,13 @@
 # enochw@scn.org Oct 99: flags for UWIN 2.0 (Unix for Windows)
 
 # Where to install things for Linux sites (FSSTND)
-BINDIR	= /usr/bin
-LIBDIR	= /etc
-DOCDIR	= /usr/doc/minicom
-MANDIR	= /usr/man/man1
+R	= $(DESTDIR)
+PREFIX ?= /usr/local
+BINDIR	= $(PREFIX)/bin
+LIBDIR	= /etc/minicom
+DOCDIR	= $(PREFIX)/share/doc/minicom
+MANDIR	= $(PREFIX)/man/man1
+LOCALEDIR = $(PREFIX)/share/locale
 
 # fmg 8/22/97: seems a more logical place for this :-)
 # Select Compile Options you want:
@@ -60,11 +63,11 @@ PO	= po
 # MANDIR	= /usr/local/man/man1
 
 # Take these compilation flags for Linux with libncurses.
-FLAGS	= -Wall -D_POSIX -D_SYSV -D_SELECT -pipe # -I/usr/include/ncurses
-PROGS	= minicom runscript ascii-xfr
-LFLAGS	= -s
-LIBS	= -lncurses #-lintl
-CC	= cc
+#FLAGS	= -Wall -D_POSIX -D_SYSV -D_SELECT -pipe # -I/usr/include/ncurses
+#PROGS	= minicom runscript ascii-xfr
+#LFLAGS	= -s
+#LIBS	= -lncurses #-lintl
+#CC	= cc
 
 # Take these compilation flags for FreeBSD.
 #FLAGS	= -Wall -D_POSIX -D_BSD43 -D_SELECT -D_DCDFLOW
@@ -73,6 +76,13 @@ CC	= cc
 #LIBS	= -ltermcap
 #CC	= cc
 
+# Take these compilation flags for OpenBSD.
+FLAGS	= -Wall -D_POSIX -D_BSD43 -D_SELECT -D_DCDFLOW
+PROGS	= minicom runscript ascii-xfr
+LFLAGS	= -s -L$(LOCALBASE)/lib
+LIBS	= -lcurses -lintl
+#CC	= cc
+
 # Take these flags for SCO unix.
 #FLAGS	= -D_SYSV -D_SCO -D_POSIX -D_SELECT
 #PROGS	= minicom runscript ascii-xfr
@@ -199,7 +209,7 @@ KOBJS	= keyserv.o wkeys.o sysdep2.o
 SOBJS	= script.o sysdep1.o common.o
 
 # fmg 8/22/97: merge in new OPFLAGS...
-CFLAGS	= $(FLAGS) $(OPFLAGS) -DLIBDIR=\"$(LIBDIR)\"
+CFLAGS	+= $(FLAGS) $(OPFLAGS) -DLIBDIR=\"$(LIBDIR)\" -DLOCALEDIR=\"$(LOCALEDIR)\" -I$(LOCALBASE)/include
 
 R	= $(ROOTDIR)
 
@@ -209,7 +219,7 @@ minicom:	$(MOBJS)
 		$(CC) $(LFLAGS) -o minicom $(MOBJS) $(LIBS)
 
 po: dummy
-		$(MAKE) -C po
+		@cd po; $(MAKE)
 
 keyserv:	$(KOBJS)
 		$(CC) -o keyserv $(LFLAGS) $(KOBJS) $(LIBS)
@@ -262,7 +272,7 @@ rwconf.o:	rwconf.c $(HDRS)
 dummy:
 
 install:	$(PROGS)
-		$(MAKE) -C po install R=$(R)
+		@cd po; $(MAKE)  install PREFIX=$(PREFIX)
 		sh install.sh $(R)$(LIBDIR) $(R)$(BINDIR) $(R)$(MANDIR) $(R)$(DOCDIR)
 
 install2:	$(PROGS)
@@ -270,7 +280,7 @@ install2:	$(PROGS)
 
 clobber:
 		rm -f *.o *~ minicom keyserv runscript ascii-xfr
-		$(MAKE) -C po clean
+		@cd po; $(MAKE) clean
 
 clean:		
 		rm -f *.o
