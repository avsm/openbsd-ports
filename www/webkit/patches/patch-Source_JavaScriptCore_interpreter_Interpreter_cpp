$OpenBSD: patch-Source_JavaScriptCore_interpreter_Interpreter_cpp,v 1.1 2011/05/11 06:00:08 ajacoutot Exp $
Fix for mips64el, -1 was wrongly removed in
http://trac.webkit.org/changeset/60392/trunk/JavaScriptCore/interpreter/Interpreter.cpp
https://bugs.webkit.org/show_bug.cgi?id=55957
--- Source/JavaScriptCore/interpreter/Interpreter.cpp.orig	Thu May  5 14:54:18 2011
+++ Source/JavaScriptCore/interpreter/Interpreter.cpp	Thu May  5 14:54:49 2011
@@ -3932,7 +3932,7 @@ skip_id_custom_self:
         JSValue arguments = callFrame->r(argsOffset).jsValue();
         uint32_t argCount = 0;
         if (!arguments) {
-            argCount = (uint32_t)(callFrame->argumentCount());
+            argCount = (uint32_t)(callFrame->argumentCount() - 1);
             argCount = min<uint32_t>(argCount, Arguments::MaxArguments);
             int32_t sizeDelta = argsOffset + argCount + RegisterFile::CallFrameHeaderSize;
             Register* newEnd = callFrame->registers() + sizeDelta;
