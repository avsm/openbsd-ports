$OpenBSD: patch-panels_region_gnome-region-panel-formats_c,v 1.4 2011/10/03 13:49:32 ajacoutot Exp $

From 8a0c2e1b27171968974c51ee449b5d6119eb271a Mon Sep 17 00:00:00 2001
From: Bastien Nocera <hadess@hadess.net>
Date: Mon, 03 Oct 2011 13:32:23 +0000
Subject: region: Align the example dates

From 7b8b773cf33c638af3ccd3ec365c5f84487afa88 Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@openbsd.org>
Date: Mon, 03 Oct 2011 13:15:15 +0000
Subject: region: Fix build on systems without LC_MEASUREMENT

--- panels/region/gnome-region-panel-formats.c.orig	Tue Aug 23 10:23:42 2011
+++ panels/region/gnome-region-panel-formats.c	Mon Oct  3 15:36:20 2011
@@ -38,6 +38,7 @@ display_date (GtkLabel *label, GDateTime *dt, const gc
 	gchar *s;
 
 	s = g_date_time_format (dt, format);
+	s = g_strstrip (s);
 	gtk_label_set_text (label, s);
 	g_free (s);
 }
@@ -132,6 +133,7 @@ update_examples_cb (GtkTreeSelection *selection, gpoin
 	g_free (locale);
 
 	/* Display measurement */
+#ifdef LC_MEASUREMENT
 	locale = g_strdup (setlocale (LC_MEASUREMENT, NULL));
 	setlocale (LC_MEASUREMENT, active_id);
 
@@ -143,6 +145,7 @@ update_examples_cb (GtkTreeSelection *selection, gpoin
 
 	setlocale (LC_MEASUREMENT, locale);
 	g_free (locale);
+#endif
         g_free (active_id);
 }
 
