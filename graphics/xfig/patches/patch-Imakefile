$OpenBSD: patch-Imakefile,v 1.9 2008/08/26 14:32:20 sthen Exp $
--- Imakefile.pat.orig	Wed Oct 11 00:19:22 2006
+++ Imakefile	Wed Aug 20 12:32:32 2008
@@ -30,7 +30,7 @@ XCOMM to the full path of the directory where you want
 XCOMM Also, you may have to uncomment and redefine MKDIRHIER because "make" looks
 XCOMM for it relative to the BINDIR variable.
 XCOMM
-BINDIR = /usr/bin
+XCOMM BINDIR = /usr/bin
 XCOMM MKDIRHIER = /bin/sh /usr/bin/X11/mkdirhier -p
 MKDIRHIER = mkdirhier 
 
@@ -64,16 +64,16 @@ XCOMM #define XAW3D1_5E
     XAW_SRC = w_menuentry.c SmeCascade.c SmeBSB.c SimpleMenu.c
     XAW_OBJ = w_menuentry.o SmeCascade.o SmeBSB.o SimpleMenu.o
 #   ifdef XAW3D
-	DUSEXAW3D = -DXAW3D
-	XAWLIB = -lXaw3d
+    DUSEXAW3D = -DXAW3D
+    XAWLIB = -lXaw3d
 #   endif /* XAW3D */
 #endif /* XAW3D1_5E */
 
 XCOMM Redefine the following if your PNG library, zlib library and/or include file
 XCOMM are in different places
 
-PNGLIBDIR = $(USRLIBDIR)
-PNGINC = -I/usr/local/include
+PNGLIBDIR = ${DEPBASE}/lib
+PNGINC = -I${DEPBASE}/include/libpng
 ZLIBDIR = $(USRLIBDIR)
 
 XCOMM If don't want JPEG support, comment out the #define USEJPEG line
@@ -93,8 +93,8 @@ XCOMM You must have version 5b or newer of the jpeg li
 
 #ifdef USEJPEG
 #ifdef USEINSTALLEDJPEG
-JPEGLIBDIR = /usr/local/lib
-JPEGINC = -I/usr/include/X11
+JPEGLIBDIR = ${DEPBASE}/lib
+JPEGINC = -I${DEPBASE}/include
 #else
 JPEGLIBDIR = ../jpeg
 JPEGINC = -I$(JPEGLIBDIR)
@@ -116,8 +116,8 @@ XCOMM Change XPMINC if necessary to point to the inclu
 #define USEXPM_ICON
 
 #ifdef USEXPM
-XPMLIBDIR = /usr/local/lib
-XPMINC = -I/usr/local/include/X11
+XPMLIBDIR = ${X11BASE}/lib
+XPMINC = -I${X11BASE}/include/X11
 #endif
 
 XCOMM Uncomment the following definiton if you want to use the small icons
@@ -151,14 +151,16 @@ XCOMM #define I18N
 
 XCOMM If using an input tablet uncomment the following
 
+#if BuildInputExt == YES
 TABLIB = $(XILIB)
 USETAB = -DUSE_TAB
+#endif
 
 XCOMM uncomment the following line if your compiler supports
 XCOMM inline functions. With the "INLINE" keyword, you should notice that
 XCOMM the display will be a bit faster in complex figures
 
-XCOMM USEINLINE = -DUSE_INLINE
+USEINLINE = -DUSE_INLINE
 
 XCOMM use (and change) the following if you want the multi-key data base file
 XCOMM somewhere other than the standard X11 library directory
@@ -175,7 +177,7 @@ XFIGDOCDIR = /usr/local/xfig/doc
 XCOMM MANDIR tells where the standard man pages should go (no need to change it
 XCOMM if you want the man pages installed in the standard place on your system
 XCOMM MANDIR = $(MANSOURCEPATH)$(MANSUFFIX)
-MANDIR = /usr/local/xfig/man
+XCOMM MANDIR = /usr/local/xfig/man
 
 XCOMM If your system doesn't have strstr undefine the following definition
 XCOMM HAVE_NO_NOSTRSTR = -DNOSTRSTR
@@ -241,7 +243,7 @@ DEPLIBJPEG = $(JPEGLIBDIR)/libjpeg.a
 #endif /* USEJPEG */
 
 #ifdef I18N
-I18N_DEFS = -DI18N -DSETLOCALE
+I18N_DEFS = -DI18N #-DSETLOCALE
 I18N_SRC = w_i18n.c
 I18N_OBJ = w_i18n.o
 #endif
@@ -440,7 +442,7 @@ install.libs::
 	@if [ -d $(DESTDIR)$(OBJLIBDIR) ]; then set +x; \
 		else (set -x; $(MKDIRHIER) $(DESTDIR)$(OBJLIBDIR) ; set +x; ); fi
 	@if [ -d Libraries ]; then \
-		(cd Libraries ; tar cf - */. ) | ( cd $(DESTDIR)$(OBJLIBDIR) ; tar xf - ) ; \
+		(cd Libraries ; tar cf - [A-Z]* ) | ( cd $(DESTDIR)$(OBJLIBDIR) ; tar xf - ) ; \
 	else echo No Object Libraries to install ; \
 	fi;
 
