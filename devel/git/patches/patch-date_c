$OpenBSD: patch-date_c,v 1.1 2009/04/05 10:05:35 bernd Exp $

Fix problem on 64-bit archs. (at least on sparc64)

--- date.c.orig	Sun Apr  5 03:11:19 2009
+++ date.c	Sun Apr  5 03:13:04 2009
@@ -871,13 +871,15 @@ unsigned long approxidate(const char *date)
 	int number = 0;
 	struct tm tm, now;
 	struct timeval tv;
+	time_t time_sec;
 	char buffer[50];
 
 	if (parse_date(date, buffer, sizeof(buffer)) > 0)
 		return strtoul(buffer, NULL, 10);
 
 	gettimeofday(&tv, NULL);
-	localtime_r(&tv.tv_sec, &tm);
+	time_sec = tv.tv_sec;
+	localtime_r(&time_sec, &tm);
 	now = tm;
 	for (;;) {
 		unsigned char c = *date;
