$ OpenBSD $
--- src/export/ExportFLAC.cpp.orig	Sun Sep 16 11:28:32 2007
+++ src/export/ExportFLAC.cpp	Sun Sep 16 11:33:31 2007
@@ -229,7 +229,6 @@ bool ExportFLAC::Export(AudacityProject *project,
       gPrefs->Read(wxT("/FileFormats/FLACBitDepth"), wxT("16"));
 
    FLAC::Encoder::File *encoder= new FLAC::Encoder::File();
-   encoder->set_filename(OSFILENAME(fName));
    encoder->set_channels(numChannels);
    encoder->set_sample_rate(int(rate + 0.5));
 
@@ -264,7 +263,7 @@ bool ExportFLAC::Export(AudacityProject *project,
    encoder->set_rice_parameter_search_dist(flacLevels[levelPref].rice_parameter_search_dist);
    encoder->set_max_lpc_order(flacLevels[levelPref].max_lpc_order);
 
-   encoder->init();
+   encoder->init(const_cast<const char *>(OSFILENAME(fName)));
 
    int numWaveTracks;
    WaveTrack **waveTracks;
