*** client/flushroute.c.orig	Thu Jun 19 07:27:39 1997
--- client/flushroute.c	Wed Apr 29 15:41:47 1998
***************
*** 34,40 ****
   * SUCH DAMAGE.
   */
  
! #if !defined(__bsdi__) && !defined(__FreeBSD__)
  
  #include <stdio.h>
  #include <nlist.h>
--- 34,40 ----
   * SUCH DAMAGE.
   */
  
! #if !defined(__bsdi__) && !defined(__FreeBSD__) && !defined(__OpenBSD__)
  
  #include <stdio.h>
  #include <nlist.h>
***************
*** 88,108 ****
      nlist("/vmunix", nl);
    }
    if (nl[N_RTHOST].n_value == 0) {
!     syslog(LOG_LOCAL0|LOG_ERR, "\"rthost\", symbol not in namelist");
      exit(1);
    }
    if (nl[N_RTNET].n_value == 0) {
!     syslog(LOG_LOCAL0|LOG_ERR, "\"rtnet\", symbol not in namelist");
      exit(1);
    }
    if (nl[N_RTHASHSIZE].n_value == 0) {
!     syslog(LOG_LOCAL0|LOG_ERR,
  	   "\"rthashsize\", symbol not in namelist");
      exit(1);
    }
    kmem = open("/dev/kmem", 0);
    if (kmem < 0) {
!     syslog(LOG_LOCAL0|LOG_ERR, "/dev/kmem: %m");
      exit(1);
    }
    lseek(kmem, nl[N_RTHASHSIZE].n_value, 0);
--- 88,108 ----
      nlist("/vmunix", nl);
    }
    if (nl[N_RTHOST].n_value == 0) {
!     syslog(LOG_LOCAL1|LOG_ERR, "\"rthost\", symbol not in namelist");
      exit(1);
    }
    if (nl[N_RTNET].n_value == 0) {
!     syslog(LOG_LOCAL1|LOG_ERR, "\"rtnet\", symbol not in namelist");
      exit(1);
    }
    if (nl[N_RTHASHSIZE].n_value == 0) {
!     syslog(LOG_LOCAL1|LOG_ERR,
  	   "\"rthashsize\", symbol not in namelist");
      exit(1);
    }
    kmem = open("/dev/kmem", 0);
    if (kmem < 0) {
!     syslog(LOG_LOCAL1|LOG_ERR, "/dev/kmem: %m");
      exit(1);
    }
    lseek(kmem, nl[N_RTHASHSIZE].n_value, 0);
***************
*** 141,147 ****
  
  #else /* __bsdi__ */
  
! /* It's BSD/OS 2.* or later or FreeBSD */
  
  /*
   * Modified by tomy@sfc.wide.ad.jp
--- 141,147 ----
  
  #else /* __bsdi__ */
  
! /* It's BSD/OS 2.* or later, FreeBSD, or OpenBSD */
  
  /*
   * Modified by tomy@sfc.wide.ad.jp
***************
*** 180,188 ****
   * SUCH DAMAGE.
   */
  
! #ifndef lint
  static char sccsid[] = "@(#)route.c	8.3 (Berkeley) 3/19/94";
! #endif /* not lint */
  
  #include <unistd.h> 
  #include <stdlib.h> 
--- 180,188 ----
   * SUCH DAMAGE.
   */
  
! #if defined(LIBC_SCCS) && !defined(lint)
  static char sccsid[] = "@(#)route.c	8.3 (Berkeley) 3/19/94";
! #endif /* LIBC_SCCS and not lint */
  
  #include <unistd.h> 
  #include <stdlib.h> 
***************
*** 259,265 ****
    return(n);
  }
  
- 
  /*
   * Purge all entries in the routing tables not
   * associated with network interfaces.
--- 259,264 ----
***************
*** 338,341 ****
    close(s);
    return(0);
  }
! #endif /* __bsdi__ or FreeBSD*/
--- 337,340 ----
    close(s);
    return(0);
  }
! #endif /* __bsdi__ or FreeBSD or OpenBSD*/
