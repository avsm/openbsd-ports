$OpenBSD: patch-sysdeps_common_fsusage_c,v 1.2 2011/05/31 18:06:28 jasper Exp $
--- sysdeps/common/fsusage.c.orig	Mon Mar 14 23:08:03 2011
+++ sysdeps/common/fsusage.c	Tue May 31 19:56:53 2011
@@ -149,6 +149,15 @@ _glibtop_freebsd_get_fsusage_read_write(glibtop *serve
 #define _glibtop_get_fsusage_read_write(S, B, P) \
 	_glibtop_freebsd_get_fsusage_read_write(S, B, P)
 
+#elif defined(__OpenBSD__)
+void
+_glibtop_bsd_get_fsusage_read_write(glibtop *server,
+					glibtop_fsusage *buf,
+					const char *path);
+
+#define _glibtop_get_fsusage_read_write(S, B, P) \
+	_glibtop_bsd_get_fsusage_read_write(S, B, P)
+
 #else /* default fallback */
 #warning glibtop_get_fsusage .read .write are not implemented.
 static inline void
@@ -270,7 +279,7 @@ glibtop_get_fsusage_s (glibtop *server, glibtop_fsusag
     return;
 
 #if (defined(sun) || defined(__sun)) && (defined(__SVR4) || defined(__svr4__)) \
-	|| defined(__FreeBSD__)
+	|| defined(__FreeBSD__) || defined(__OpenBSD__)
   /* Solaris but not SunOS and FreeBSD */
   buf->block_size = fsd.f_frsize;
 #else
