$OpenBSD: patch-jdk_src_share_native_java_lang_fdlibm_include_fdlibm_h,v 1.3 2009/10/07 01:53:54 kurt Exp $
--- jdk/src/share/native/java/lang/fdlibm/include/fdlibm.h.orig	Thu Sep 17 03:52:26 2009
+++ jdk/src/share/native/java/lang/fdlibm/include/fdlibm.h	Sun Sep 27 09:59:27 2009
@@ -24,6 +24,15 @@
  * have any questions.
  */
 
+#ifdef __OpenBSD__
+#include <sys/types.h>
+#endif
+#ifdef _ALLBSD_SOURCE
+#include <machine/endian.h>
+#elif __linux__
+#define __USE_BSD 1
+#include <endian.h>
+#endif
 #include "jfdlibm.h"
 
 #ifdef __NEWVALID       /* special setup for Sun test regime */
@@ -34,7 +43,8 @@
 #endif
 #endif
 
-#ifdef _LITTLE_ENDIAN
+#if (defined(__solaris__) && defined(_LITTLE_ENDIAN)) || \
+    BYTE_ORDER == LITTLE_ENDIAN
 #define __HI(x) *(1+(int*)&x)
 #define __LO(x) *(int*)&x
 #define __HIp(x) *(1+(int*)x)
@@ -46,10 +56,12 @@
 #define __LOp(x) *(1+(int*)x)
 #endif
 
+#ifndef __P
 #ifdef __STDC__
 #define __P(p)  p
 #else
 #define __P(p)  ()
+#endif
 #endif
 
 /*
