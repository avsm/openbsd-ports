$OpenBSD: patch-dsh_dsh_c,v 1.2 2007/05/08 16:16:56 steven Exp $
--- dsh/dsh.c.orig	Wed Feb  1 19:07:16 2006
+++ dsh/dsh.c	Tue May  8 18:13:38 2007
@@ -226,9 +226,9 @@ main(int argc, char *argv[])
     /* we need to find or guess the port number */
     if (testflag && rshport == 0) {
 	if (!getenv("RCMD_CMD"))
-	    rshport = 514;
-	else if (strcmp("ssh", getenv("RCMD_CMD")) == 0)
 	    rshport = 22;
+	else if (strcmp("rsh", getenv("RCMD_CMD")) == 0)
+	    rshport = 514;
 	else {
 	    (void)fprintf(stderr, "-t argument given, but port number to test "
 			  "could not be guessed.  Please set RSHPORT "
@@ -352,7 +352,7 @@ do_command(char **argv, int fanout, char *username)
     /* gather the rsh data */
     rsh = getenv("RCMD_CMD");
     if (rsh == NULL)
-	rsh = strdup("rsh");
+	rsh = strdup("ssh");
     if (rsh == NULL)
 	bailout();
 
