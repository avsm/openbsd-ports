$OpenBSD: patch-Makefile_in,v 1.6 2007/04/24 17:07:19 martynas Exp $
--- Makefile.in.orig	Thu Mar  1 12:49:50 2007
+++ Makefile.in	Sun Apr 22 00:11:29 2007
@@ -25,9 +25,9 @@ SOURCES = $(libchicken_la_SOURCES) $(libuchicken_la_SO
 srcdir = @srcdir@
 top_srcdir = @top_srcdir@
 VPATH = @srcdir@
-pkgdatadir = $(datadir)/@PACKAGE@
-pkglibdir = $(libdir)/@PACKAGE@
-pkgincludedir = $(includedir)/@PACKAGE@
+pkgdatadir = $(datadir)
+pkglibdir = $(libdir)
+pkgincludedir = $(includedir)
 top_builddir = .
 am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
 INSTALL = @INSTALL@
@@ -380,7 +380,7 @@ C_INSTALL_CXX = \"$(CXX)\"
 C_INSTALL_CFLAGS = \"-DHAVE_CHICKEN_CONFIG_H $(CFLAGS)\"
 C_INSTALL_SHARE_HOME = \"$(pkgdatadir)\"
 C_INSTALL_BIN_HOME = \"$(bindir)\"
-C_INSTALL_EGG_HOME = \"$(pkglibdir)/$(BINARY_VERSION)\"
+C_INSTALL_EGG_HOME = \"$(pkgdatadir)/@PACKAGE@/$(BINARY_VERSION)\"
 C_INSTALL_LIB_HOME = \"$(libdir)\"
 C_INSTALL_STATIC_LIB_HOME = \"$(libdir)\"
 C_INSTALL_INCLUDE_HOME = \"$(includedir)\"
@@ -535,7 +535,6 @@ $(top_builddir)/config.status: $(top_srcdir)/configure
 	$(SHELL) ./config.status --recheck
 
 $(top_srcdir)/configure:  $(am__configure_deps)
-	cd $(srcdir) && $(AUTOCONF)
 $(ACLOCAL_M4):  $(am__aclocal_m4_deps)
 	cd $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)
 
@@ -549,7 +548,6 @@ stamp-h1: $(srcdir)/chicken-config.h.in $(top_builddir
 	@rm -f stamp-h1
 	cd $(top_builddir) && $(SHELL) ./config.status chicken-config.h
 $(srcdir)/chicken-config.h.in:  $(am__configure_deps) 
-	cd $(top_srcdir) && $(AUTOHEADER)
 	rm -f stamp-h1
 	touch $@
 
@@ -717,13 +715,13 @@ libchicken_la-extras.lo: extras.c
 	$(LIBTOOL) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libchicken_la_CFLAGS) $(CFLAGS) -c -o libchicken_la-extras.lo `test -f 'extras.c' || echo '$(srcdir)/'`extras.c
 
 libchicken_la-library.o: library.c
-	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libchicken_la_CFLAGS) $(CFLAGS) -c -o libchicken_la-library.o `test -f 'library.c' || echo '$(srcdir)/'`library.c
+	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libchicken_la_CFLAGS) $(CFLAGS) $(EXTRA_CFLAGS) -c -o libchicken_la-library.o `test -f 'library.c' || echo '$(srcdir)/'`library.c
 
 libchicken_la-library.obj: library.c
 	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libchicken_la_CFLAGS) $(CFLAGS) -c -o libchicken_la-library.obj `if test -f 'library.c'; then $(CYGPATH_W) 'library.c'; else $(CYGPATH_W) '$(srcdir)/library.c'; fi`
 
 libchicken_la-library.lo: library.c
-	$(LIBTOOL) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libchicken_la_CFLAGS) $(CFLAGS) -c -o libchicken_la-library.lo `test -f 'library.c' || echo '$(srcdir)/'`library.c
+	$(LIBTOOL) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libchicken_la_CFLAGS) $(CFLAGS) $(EXTRA_CFLAGS) -c -o libchicken_la-library.lo `test -f 'library.c' || echo '$(srcdir)/'`library.c
 
 libchicken_la-lolevel.o: lolevel.c
 	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libchicken_la_CFLAGS) $(CFLAGS) -c -o libchicken_la-lolevel.o `test -f 'lolevel.c' || echo '$(srcdir)/'`lolevel.c
@@ -1415,8 +1413,8 @@ install-pkgdataDATA: $(pkgdata_DATA)
 	@list='$(pkgdata_DATA)'; for p in $$list; do \
 	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
 	  f="`echo $$p | sed -e 's|^.*/||'`"; \
-	  echo " $(pkgdataDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(pkgdatadir)/$$f'"; \
-	  $(pkgdataDATA_INSTALL) "$$d$$p" "$(DESTDIR)$(pkgdatadir)/$$f"; \
+	  echo " $(pkgdataDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(pkgdatadir)/@PACKAGE@/$$f'"; \
+	  $(pkgdataDATA_INSTALL) "$$d$$p" "$(DESTDIR)$(pkgdatadir)/@PACKAGE@/$$f"; \
 	done
 
 uninstall-pkgdataDATA:
@@ -1841,11 +1839,11 @@ chicken-defaults.h: chicken-defaults.h.in Makefile
 
 # Install docs and sources.
 install-data-local:
-	$(mkinstalldirs) $(DESTDIR)$(pkgdatadir)/doc
-	$(mkinstalldirs) $(DESTDIR)$(pkgdatadir)/doc/html
-	-for file in $(DOCFILES); do cp $(srcdir)/$$file $(DESTDIR)$(pkgdatadir)/doc; done
-	-cp $(srcdir)/html/* $(DESTDIR)$(pkgdatadir)/doc/html
-	$(mkinstalldirs) $(DESTDIR)$(pkglibdir)/$(BINARY_VERSION)
+	$(mkinstalldirs) $(DESTDIR)$(pkgdatadir)/doc/@PACKAGE@
+	$(mkinstalldirs) $(DESTDIR)$(pkgdatadir)/doc/@PACKAGE@/html
+	-for file in $(DOCFILES); do cp $(srcdir)/$$file $(DESTDIR)$(pkgdatadir)/doc/@PACKAGE@; done
+	-cp $(srcdir)/html/* $(DESTDIR)$(pkgdatadir)/doc/@PACKAGE@/html
+	$(mkinstalldirs) $(DESTDIR)$(pkgdatadir)/@PACKAGE@/$(BINARY_VERSION)
 clean-local:
 	-rm -rf stage2 stage3 stage2-stamp stage3-stamp
 
