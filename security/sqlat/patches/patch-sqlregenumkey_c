$OpenBSD: patch-sqlregenumkey_c,v 1.2 2002/09/24 02:21:44 mark Exp $
--- sqlregenumkey.c.orig	Mon Dec  3 10:08:30 2001
+++ sqlregenumkey.c	Sun Sep 22 23:32:40 2002
@@ -22,7 +22,6 @@
 #include "util.h"
 #include "constants.h"
 #include "sqldumplogins.h"
-#include <getopt.h>
 
 void usage(char **argv) {
 
@@ -63,9 +62,11 @@ TDSLOGIN *set_target_defaults(TDSLOGIN *
 void doRegEnum(TDSLOGIN *pLogin, char *pKey) {
 
   TDSSOCKET *pTds = NULL;
+  TDSCONTEXT *context = NULL;
 
   /* connect to the SQL server */
-  if( (pTds = tds_connect(pLogin)) !=NULL ) {
+  context = tds_alloc_context();
+  if( (pTds = tds_connect(pLogin, context, NULL)) !=NULL ) {
     fprintf(stderr, "SQLRegEnum %s by <patrik.karlsson@ixsecurity.com>\n",
 	    SQLTOOLS_VERSION);
     fprintf(stderr, "----------------------------------------------------" \
