$OpenBSD: patch-addressbook_backends_file_e-book-backend-file_c,v 1.3 2009/02/17 10:56:27 ajacoutot Exp $

Fix time_t==long assumption.

--- addressbook/backends/file/e-book-backend-file.c.orig	Mon Dec 22 10:49:13 2008
+++ addressbook/backends/file/e-book-backend-file.c	Tue Feb 17 11:11:15 2009
@@ -174,10 +174,10 @@ set_revision (EContact *contact)
 {
 	char time_string[100] = {0};
 	const struct tm *tm = NULL;
-	GTimeVal tv;
+	time_t t;
 
-	g_get_current_time (&tv);
-	tm = gmtime (&tv.tv_sec);
+	t = time(0);
+	tm = gmtime (&t);
 	if (tm)
 		strftime (time_string, 100, "%Y-%m-%dT%H:%M:%SZ", tm);
 	e_contact_set (contact, E_CONTACT_REV, time_string);
