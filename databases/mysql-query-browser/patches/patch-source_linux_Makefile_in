$OpenBSD: patch-source_linux_Makefile_in,v 1.4 2007/10/23 13:44:39 wilfried Exp $
--- source/linux/Makefile.in.orig	Wed May  2 15:00:46 2007
+++ source/linux/Makefile.in	Tue Oct 23 15:36:22 2007
@@ -68,10 +68,10 @@ mysql_query_browser_bin_OBJECTS =  \
 	$(am_mysql_query_browser_bin_OBJECTS)
 mysql_query_browser_bin_DEPENDENCIES =  \
 	$(top_builddir)/library/source/libqb.a \
-	$(top_builddir)/../mysql-gui-common/source/linux/libqbcommongui.a \
-	$(top_builddir)/../mysql-gui-common/library/base-library/source/.libs/libmysqlx.a \
-	$(top_builddir)/../mysql-gui-common/library/utilities/source/.libs/libguiutil.a \
-	$(top_builddir)/../mysql-gui-common/library/sql-parser/source/.libs/libsqlparser.a \
+	$(LOCALBASE)/share/mysql-gui/common/source/linux/libqbcommongui.a \
+	$(LOCALBASE)/share/mysql-gui/common/library/base-library/source/.libs/libmysqlx.a \
+	$(LOCALBASE)/share/mysql-gui/common/library/utilities/source/.libs/libguiutil.a \
+	$(LOCALBASE)/share/mysql-gui/common/library/sql-parser/source/.libs/libsqlparser.a \
 	$(top_builddir)/source/linux/gtksourceview/gtksourceview/.libs/libgtksourceview-1.0.a
 binSCRIPT_INSTALL = $(INSTALL_SCRIPT)
 SCRIPTS = $(bin_SCRIPTS)
@@ -237,10 +237,10 @@ mysql_query_browser_bin_SOURCES = \
 	MGCompletionList.cc
 
 INCLUDES = @GNOME_CFLAGS@ @MYSQL_CFLAGS@ @PCRE_CFLAGS@\
-        -I$(top_srcdir)/../mysql-gui-common/source/linux\
-        -I$(top_srcdir)/../mysql-gui-common/library/base-library/include\
-        -I$(top_srcdir)/../mysql-gui-common/library/utilities/shared_include\
-        -I$(top_srcdir)/../mysql-gui-common/library/utilities/include\
+        -I$(LOCALBASE)/share/mysql-gui/common/source/linux\
+        -I$(LOCALBASE)/share/mysql-gui/common/library/base-library/include\
+        -I$(LOCALBASE)/share/mysql-gui/common/library/utilities/shared_include\
+        -I$(LOCALBASE)/share/mysql-gui/common/library/utilities/include\
         -I$(top_srcdir)/library/include\
 	-I$(top_srcdir)/source/linux/gtksourceview\
 	-DPREFIX=\""$(PREFIX)"\"\
@@ -249,10 +249,10 @@ INCLUDES = @GNOME_CFLAGS@ @MYSQL_CFLAGS@ @PCRE_CFLAGS@
 	-DDOCDIR=\""$(DOCDIR)"\"
 
 mysql_query_browser_bin_LDADD = $(top_builddir)/library/source/libqb.a\
-	$(top_builddir)/../mysql-gui-common/source/linux/libqbcommongui.a\
-	$(top_builddir)/../mysql-gui-common/library/base-library/source/.libs/libmysqlx.a\
-	$(top_builddir)/../mysql-gui-common/library/utilities/source/.libs/libguiutil.a\
-	$(top_builddir)/../mysql-gui-common/library/sql-parser/source/.libs/libsqlparser.a\
+	$(LOCALBASE)/share/mysql-gui/common/source/linux/libqbcommongui.a\
+	$(LOCALBASE)/share/mysql-gui/common/library/base-library/source/.libs/libmysqlx.a\
+	$(LOCALBASE)/share/mysql-gui/common/library/utilities/source/.libs/libguiutil.a\
+	$(LOCALBASE)/share/mysql-gui/common/library/sql-parser/source/.libs/libsqlparser.a\
 	$(top_builddir)/source/linux/gtksourceview/gtksourceview/.libs/libgtksourceview-1.0.a\
         @MYSQL_LIBS@ @GNOME_LIBS@ @PCRE_LIBS@ 
 
@@ -568,14 +568,8 @@ uninstall-am: uninstall-binPROGRAMS uninstall-binSCRIP
 	uninstall-am uninstall-binPROGRAMS uninstall-binSCRIPTS \
 	uninstall-info-am
 
-
-#
-# Can't add this as a AC_CONFIG_SUBDIRS in configure.in because
-# toplevel autogen.sh is breaking the configure scripts in gtksourceview
-# If a solution is found, this could be removed.
-#
 $(top_builddir)/source/linux/gtksourceview/gtksourceview/.libs/libgtksourceview-1.0.a:
-	(cd gtksourceview; ./configure --enable-static --disable-shared --disable-build-tests; make CFLAGS="$(CFLAGS) -fno-strict-aliasing")
+	${MAKE} -C gtksourceview CFLAGS="$(CFLAGS) -fno-strict-aliasing"
 
 clean-generic:
 	-make -C gtksourceview distclean
