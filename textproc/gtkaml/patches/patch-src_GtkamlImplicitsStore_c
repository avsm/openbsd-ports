$OpenBSD: patch-src_GtkamlImplicitsStore_c,v 1.13 2010/10/15 11:35:23 ajacoutot Exp $

Fix a gint-gsize-confusion to get rid of a bus error on sparc64.

--- src/GtkamlImplicitsStore.c.orig	Sun Sep 26 22:41:14 2010
+++ src/GtkamlImplicitsStore.c	Fri Oct 15 13:31:35 2010
@@ -133,7 +133,7 @@ enum  {
 	GTKAML_KEY_FILE_WRAPPER_DUMMY_PROPERTY
 };
 gboolean gtkaml_key_file_wrapper_has_key (GtkamlKeyFileWrapper* self, const char* group, const char* key);
-char** gtkaml_key_file_wrapper_get_string_list (GtkamlKeyFileWrapper* self, const char* group, const char* key, int* result_length1);
+char** gtkaml_key_file_wrapper_get_string_list (GtkamlKeyFileWrapper* self, const char* group, const char* key, gsize* result_length1);
 GtkamlKeyFileWrapper* gtkaml_key_file_wrapper_new (void);
 GtkamlKeyFileWrapper* gtkaml_key_file_wrapper_construct (GType object_type);
 static GObject * gtkaml_key_file_wrapper_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
@@ -245,7 +245,7 @@ gboolean gtkaml_key_file_wrapper_has_key (GtkamlKeyFil
 }
 
 
-char** gtkaml_key_file_wrapper_get_string_list (GtkamlKeyFileWrapper* self, const char* group, const char* key, int* result_length1) {
+char** gtkaml_key_file_wrapper_get_string_list (GtkamlKeyFileWrapper* self, const char* group, const char* key, gsize* result_length1) {
 	char** result = NULL;
 	GError * _inner_error_ = NULL;
 	g_return_val_if_fail (self != NULL, NULL);
@@ -460,16 +460,16 @@ ValaList* gtkaml_implicits_store_get_adds (GtkamlImpli
 			}
 			kfw = (GtkamlKeyFileWrapper*) vala_iterator_get (_kfw_it);
 			if (gtkaml_key_file_wrapper_has_key (kfw, class_name, "adds")) {
-				gint kf_adds_length1;
+				gsize kf_adds_length1;
 				gint _kf_adds_size_;
 				char** _tmp1_;
-				gint _tmp0_;
+				gsize _tmp0_;
 				char** kf_adds;
 				kf_adds = (_tmp1_ = gtkaml_key_file_wrapper_get_string_list (kfw, class_name, "adds", &_tmp0_), kf_adds_length1 = _tmp0_, _kf_adds_size_ = kf_adds_length1, _tmp1_);
 				{
 					char** add_collection;
 					int add_collection_length1;
-					int add_it;
+					gsize add_it;
 					add_collection = kf_adds;
 					add_collection_length1 = kf_adds_length1;
 					for (add_it = 0; add_it < kf_adds_length1; add_it = add_it + 1) {
@@ -513,16 +513,16 @@ ValaList* gtkaml_implicits_store_get_method_parameters
 			}
 			kfw = (GtkamlKeyFileWrapper*) vala_iterator_get (_kfw_it);
 			if (gtkaml_key_file_wrapper_has_key (kfw, class_name, method_name)) {
-				gint kf_parameters_length1;
+				gsize kf_parameters_length1;
 				gint _kf_parameters_size_;
 				char** _tmp3_;
-				gint _tmp2_;
+				gsize _tmp2_;
 				char** kf_parameters;
 				kf_parameters = (_tmp3_ = gtkaml_key_file_wrapper_get_string_list (kfw, class_name, method_name, &_tmp2_), kf_parameters_length1 = _tmp2_, _kf_parameters_size_ = kf_parameters_length1, _tmp3_);
 				{
 					char** parameter_collection;
 					int parameter_collection_length1;
-					int parameter_it;
+					gsize parameter_it;
 					parameter_collection = kf_parameters;
 					parameter_collection_length1 = kf_parameters_length1;
 					for (parameter_it = 0; parameter_it < kf_parameters_length1; parameter_it = parameter_it + 1) {
