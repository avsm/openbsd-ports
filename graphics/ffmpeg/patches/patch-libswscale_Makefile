$OpenBSD: patch-libswscale_Makefile,v 1.4 2010/05/26 21:38:52 jakemsr Exp $
--- libswscale/Makefile.orig	Tue May 11 16:21:03 2010
+++ libswscale/Makefile	Mon May 17 17:58:39 2010
@@ -20,3 +20,14 @@ TESTPROGS = colorspace swscale
 DIRS = bfin mlib ppc sparc x86
 
 include $(SUBDIR)../subdir.mak
+
+ifdef ARCH_X86_32
+ifeq (,$(findstring -O,$(CFLAGS)))
+libswscale/rgb2rgb.o: CFLAGS += -O
+libswscale/swscale.o: CFLAGS += -O
+libswscale/x86/yuv2rgb_mmx.o: CFLAGS += -O
+endif
+libswscale/rgb2rgb.o: CFLAGS += -fomit-frame-pointer
+libswscale/swscale.o: CFLAGS += -fomit-frame-pointer
+libswscale/x86/yuv2rgb_mmx.o: CFLAGS += -fomit-frame-pointer
+endif
