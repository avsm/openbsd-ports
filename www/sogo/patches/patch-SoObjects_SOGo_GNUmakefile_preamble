$OpenBSD: patch-SoObjects_SOGo_GNUmakefile_preamble,v 1.3 2011/04/22 05:36:12 sebastia Exp $
--- SoObjects/SOGo/GNUmakefile.preamble.orig	Fri Apr  8 19:44:28 2011
+++ SoObjects/SOGo/GNUmakefile.preamble	Tue Apr 19 11:22:59 2011
@@ -5,7 +5,7 @@ SOGo_INCLUDE_DIRS += -I.. -I../../UI \
 	-DSOGO_MINOR_VERSION="@\"$(MINOR_VERSION)\"" \
 	-DSOGO_SUBMINOR_VERSION="@\"$(SUBMINOR_VERSION)\""
 
-HOSTNAME = $(shell hostname -f)
+HOSTNAME ?= $(shell hostname -f)
 BUILD_DATE = $(shell echo $$USER@$(HOSTNAME); date +"%Y%m%d%H%M")
 
 ADDITIONAL_CPPFLAGS += \
@@ -21,9 +21,15 @@ SOGo_LIBRARIES_DEPEND_UPON += \
 	-lNGCards		\
 	-lNGMime		\
 	-lNGStreams -lNGExtensions -lEOControl \
-	-lXmlRpc -lDOM -lSaxObjC -lcrypt \
+	-lXmlRpc -lDOM -lSaxObjC \
 	-lNGLdap -lSBJson \
         -lGDLContentStore
+
+ifeq ($(findstring openbsd, $(GNUSTEP_HOST_OS)), openbsd)
+SOGo_LIBRARIES_DEPEND_UPON += -lcrypto
+else
+SOGo_LIBRARIES_DEPEND_UPON += -lcrypt
+endif
 
 ADDITIONAL_TOOL_LIBS += \
         -L$(GNUSTEP_OBJ_DIR)/ \
