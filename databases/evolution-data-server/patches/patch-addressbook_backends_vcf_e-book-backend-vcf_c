$OpenBSD: patch-addressbook_backends_vcf_e-book-backend-vcf_c,v 1.1 2009/02/17 10:56:27 ajacoutot Exp $

Fix time_t==long assumption.

--- addressbook/backends/vcf/e-book-backend-vcf.c.orig	Mon Feb  2 16:13:34 2009
+++ addressbook/backends/vcf/e-book-backend-vcf.c	Tue Feb 17 11:11:18 2009
@@ -218,10 +218,10 @@ set_revision (EContact *contact)
 {
 	char time_string[100] = {0};
 	const struct tm *tm = NULL;
-	GTimeVal tv;
+	time_t t;
 
-	g_get_current_time (&tv);
-	tm = gmtime (&tv.tv_sec);
+	t = time(0);
+	tm = gmtime (&t);
 	if (tm)
 		strftime (time_string, 100, "%Y-%m-%dT%H:%M:%SZ", tm);
 	e_contact_set (contact, E_CONTACT_REV, time_string);
