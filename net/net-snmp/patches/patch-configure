$OpenBSD: patch-configure,v 1.6 2007/06/13 15:15:01 ajacoutot Exp $
--- configure.orig	Fri Nov 24 10:56:15 2006
+++ configure	Wed Jun 13 08:10:43 2007
@@ -21042,34 +21042,6 @@ fi
 echo "$as_me:$LINENO: result: $EXTRACPPFLAGS" >&5
 echo "${ECHO_T}$EXTRACPPFLAGS" >&6
 
-# Prefixes must begin with "/" or [A-Z] followed by colon.
-
-if test "x$prefix" = "xNONE"; then
-  prefix=/usr/local
-fi
-
-fch=`echo $prefix | sed 's/\(.\).*/\1/'`
-if test "x$fch" != "x/" ; then
-   sch=`echo $prefix | sed 's/.\(.\).*/\1/'`
-   if test "x$sch" != "x:" ; then
-      prefix=`pwd`/$prefix
-      echo "adjusting prefix to $prefix"
-   fi
-fi
-
-if test "x$exec_prefix" = "xNONE"; then
-  exec_prefix=$prefix
-fi
-
-fch=`echo $exec_prefix | sed 's/\(.\).*/\1/'`
-if test "x$fch" != "x/" ; then
-   sch=`echo $exec_prefix | sed 's/.\(.\).*/\1/'`
-   if test "x$sch" != "x:" ; then
-      exec_prefix=`pwd`/$exec_prefix
-      echo "adjusting exec_prefix to $exec_prefix"
-   fi
-fi
-
 # Set SNMPLIBPATH & SNMPSHAREPATH
 
 SNMPLIBPATH=""
@@ -27070,6 +27042,7 @@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 $ac_includes_default
+#include <sys/types.h>
 #include <tcpd.h>
 _ACEOF
 rm -f conftest.$ac_objext
@@ -27114,6 +27087,7 @@ _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#include <sys/types.h>
 #include <tcpd.h>
 _ACEOF
 if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
@@ -32130,7 +32104,7 @@ done
 
 
 
-for ac_header in malloc.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
+for ac_header in sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 echo "$as_me:$LINENO: checking for $ac_header" >&5
@@ -32536,6 +32510,9 @@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 $ac_includes_default
+#if HAVE_SYS_QUEUE_H
+#include <sys/queue.h>
+#endif
 #include <$ac_header>
 _ACEOF
 rm -f conftest.$ac_objext
@@ -35608,7 +35585,6 @@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 
-#include <machine/types.h>
 #include <sys/disklabel.h>
 
 _ACEOF
