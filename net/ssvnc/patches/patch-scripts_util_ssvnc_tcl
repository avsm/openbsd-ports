$OpenBSD: patch-scripts_util_ssvnc_tcl,v 1.3 2009/12/31 14:49:45 sthen Exp $

type sometimes returns "xx is a tracked alias for /foo/bar" which
isn't handled. whence is sufficient and more reliable.

--- scripts/util/ssvnc.tcl.orig	Sat Dec 26 02:21:51 2009
+++ scripts/util/ssvnc.tcl	Wed Dec 30 22:34:56 2009
@@ -17065,7 +17065,7 @@ proc check_zeroconf_browse {} {
 		return 0;
 	}
 	set p ""
-	set r [catch {set p [exec /bin/sh -c {type avahi-browse}]}]
+	set r [catch {set p [exec /bin/sh -c {whence avahi-browse}]}]
 	if {$r == 0} {
 		regsub {^.* is  *} $p "" p
 		regsub -all {[ \t\n\r]} $p "" p
@@ -17075,7 +17075,7 @@ proc check_zeroconf_browse {} {
 		}
 	}
 	set p ""
-	set r [catch {set p [exec /bin/sh -c {type dns-sd}]}]
+	set r [catch {set p [exec /bin/sh -c {whence dns-sd}]}]
 	if {$r == 0} {
 		regsub {^.* is  *} $p "" p
 		regsub -all {[ \t\n\r]} $p "" p
@@ -17090,7 +17090,7 @@ proc check_zeroconf_browse {} {
 		}
 	}
 	set p ""
-	set r [catch {set p [exec /bin/sh -c {type mDNS}]}]
+	set r [catch {set p [exec /bin/sh -c {whence mDNS}]}]
 	if {$r == 0} {
 		regsub {^.* is  *} $p "" p
 		regsub -all {[ \t\n\r]} $p "" p
