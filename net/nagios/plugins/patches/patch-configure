$OpenBSD: patch-configure,v 1.2 2005/08/07 10:47:00 sturm Exp $
--- configure.orig	Mon Aug  1 23:34:46 2005
+++ configure	Wed Aug  3 13:59:35 2005
@@ -8339,13 +8339,13 @@ if test "${with_pgsql+set}" = set; then
   PGSQL=$withval
 fi;
 
-echo "$as_me:$LINENO: checking for main in -lcrypt" >&5
-echo $ECHO_N "checking for main in -lcrypt... $ECHO_C" >&6
+echo "$as_me:$LINENO: checking for main in -lcrypto" >&5
+echo $ECHO_N "checking for main in -lcrypto... $ECHO_C" >&6
 if test "${ac_cv_lib_crypt_main+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lcrypt  $LIBS"
+LIBS="-lcrypto  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -8402,7 +8402,7 @@ if test $ac_cv_lib_crypt_main = yes; the
 #define HAVE_LIBCRYPT 1
 _ACEOF
 
-  LIBS="-lcrypt $LIBS"
+  LIBS="-lcrypto $LIBS"
 
 fi
 
@@ -8418,7 +8418,7 @@ if test "${ac_cv_lib_pq_PQsetdbLogin+set
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpq -lcrypt $LIBS"
+LIBS="-lpq -lcrypto $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -8937,16 +8937,16 @@ fi
 done
 
     if [ -n "$PGSQL" -a "$ac_cv_header_libpq_fe_h" = "yes" ]; then
-      PGLIBS="-L$PGSQL/lib -lpq -lcrypt"
+      PGLIBS="-L$PGSQL/lib -lpq -lcrypto"
       PGINCLUDE="-I$PGSQL/include"
     elif test  "$ac_cv_header_pgsql_libpq_fe_h" = "yes"; then
-      PGLIBS="-lpq -lcrypt"
-      PGINCLUDE="-I/usr/include/pgsql"
+      PGLIBS="-L$PGSQL/lib -lpq -lcrypto"
+      PGINCLUDE="-I$PGSQL/include/pgsql"
     elif test  "$ac_cv_header_postgresql_libpq_fe_h" = "yes"; then
-      PGLIBS="-L$PGSQL/lib -lpq -lcrypt"
-      PGINCLUDE="-I/usr/include/postgresql"
+      PGLIBS="-L$PGSQL/lib -lpq -lcrypto"
+      PGINCLUDE="-I$PGSQL/include/postgresql"
     elif test  "$ac_cv_header_libpq_fe_h" = "yes"; then
-      PGLIBS="-L$PGSQL/lib -lpq -lcrypt"
+      PGLIBS="-L$PGSQL/lib -lpq -lcrypto"
       PGINCLUDE="-I$PGSQL/include"
     fi
     if test -z "$PGINCLUDE"; then
