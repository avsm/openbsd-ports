--- src/stunnel.c.orig	Thu Mar 27 09:27:07 2008
+++ src/stunnel.c	Mon Mar 31 23:59:14 2008
@@ -171,8 +171,8 @@ static void daemon_loop(void) {
 #if !defined (USE_WIN32) && !defined (__vms) && !defined(USE_OS2)
     if(!(options.option.foreground))
         daemonize();
-    drop_privileges();
     create_pid();
+    drop_privileges();
 #endif /* !defined USE_WIN32 && !defined (__vms) */
     /* create exec+connect services */
     for(opt=local_options.next; opt; opt=opt->next) {
