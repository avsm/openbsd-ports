--- uip/rcvtty.c.~1~	Wed Jan 14 18:16:11 1998
+++ uip/rcvtty.c	Wed Apr 29 11:36:32 1998
@@ -188,8 +188,9 @@
     char tmpfil[BUFSIZ];
     struct stat st;
 
-    unlink (mktemp (strcpy (tmpfil, "/tmp/rcvttyXXXXX")));
-    if ((fd = open (tmpfil, O_RDWR | O_CREAT | O_TRUNC, 0600)) == NOTOK)
+    strcpy (tmpfil, "/tmp/rcvttyXXXXX");
+    fd = mkstemp( tmpfil );
+    if ( fd == -1 )
 	return header_fd ();
     unlink (tmpfil);
 
