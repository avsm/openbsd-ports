$OpenBSD: patch-Makefile,v 1.5 2006/07/08 04:16:18 jsg Exp $
--- Makefile.orig	Thu Jun 22 07:11:51 2006
+++ Makefile	Sat Jul  8 14:01:11 2006
@@ -3,9 +3,10 @@
 
 SRC=.
 
-CC      := gcc
-CXX     := g++
-CFLAGS  += -g -O -Wall -Wuninitialized -Wno-long-long -Wno-multichar
+#CC      := gcc
+#CXX     := g++
+CFLAGS  += -Wall -Wno-long-long -Wno-multichar
+CXXFLAGS  += -Wall -Wno-long-long -Wno-multichar
 # LDFLAGS +=
 
 # Additional warnings
@@ -28,7 +29,7 @@ TARGETS := \
 	dekyra$(EXEEXT) \
 	descumm$(EXEEXT) \
 	desword2$(EXEEXT) \
-	encode_dxa$(EXEEXT) \
+#	encode_dxa$(EXEEXT) \
 	extract_kyra$(EXEEXT) \
 	extract_loom_tg16$(EXEEXT) \
 	extract_mm_c64$(EXEEXT) \
@@ -61,7 +62,7 @@ compress_scumm_bun$(EXEEXT): compress_sc
 	$(CXX) $(LDFLAGS) -o $@ $+
 
 encode_dxa$(EXEEXT): encode_dxa.o compress.o util.o
-	$(CXX) $(LDFLAGS) -o $@ $+ -lpng -lz
+	$(CXX) $(LDFLAGS) `pkg-config --cflags --libs libpng` -o $@ $+
 
 extract_loom_tg16$(EXEEXT): extract_loom_tg16.o util.o
 	$(CC) $(LDFLAGS) -o $@ $+
@@ -129,7 +130,7 @@ clean:
 	rm -f *.o $(TARGETS)
 
 .cpp.o:
-	$(CXX) $(CFLAGS) $(CPPFLAGS) -c $(<) -o $*.o
+	$(CXX) $(CXXFLAGS) $(CPPFLAGS) -c $(<) -o $*.o
 
 .c.o:
 	$(CC) $(CFLAGS) $(CPPFLAGS) -c $(<) -o $*.o
