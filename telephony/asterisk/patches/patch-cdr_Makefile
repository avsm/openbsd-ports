$OpenBSD: patch-cdr_Makefile,v 1.3 2006/06/12 19:04:10 naddy Exp $
--- cdr/Makefile.orig	Sun Apr 30 15:27:56 2006
+++ cdr/Makefile	Thu Jun  1 02:33:19 2006
@@ -30,21 +30,26 @@
 #A ultrasparc cpu is really v9 but the stock debian stable 3.0 gcc doesn.t support it.
 #So we go lowest common available by gcc and go a step down, still a step up from
 #the default as we now have a better instruction set to work with. - Belgarath
+ifneq (${OSARCH},OpenBSD)
 ifeq ($(PROC),sparc64)
  PROC=ultrasparc
   CFLAGS += -mtune=$(PROC) -pipe -fomit-frame-pointer -mcpu=v8
 endif
+endif
 
 #
 # unixODBC stuff...
 #
+ifneq (${OSARCH},OpenBSD)
 ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/odbcinst.h)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/include/odbcinst.h),)
   MODS+=cdr_odbc.so
 endif
+endif
 
 #
 # FreeTDS stuff...
 #
+ifneq (${OSARCH},OpenBSD)
 ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/tds.h)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/include/tds.h)$(wildcard $(CROSS_COMPILE_TARGET)/usr/include/freetds/tds.h),)
   ifeq ($(shell grep -s TDS_VERSION_NO $(CROSS_COMPILE_TARGET)/usr/include/tdsver.h $(CROSS_COMPILE_TARGET)/usr/local/include/tdsver.h $(CROSS_COMPILE_TARGET)/usr/include/freetds/tdsver.h | grep -c 0.63),1)
     CFLAGS += -DFREETDS_0_63
@@ -57,13 +62,16 @@
   endif
   MODS+=cdr_tds.so
 endif
+endif
 
 #
 # PGSQL stuff...  Autoconf anyone??
 #
+ifneq (${OSARCH},OpenBSD)
 ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/postgresql)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/pgsql/include)$(wildcard $(CROSS_COMPILE_TARGET)/usr/include/pgsql)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/include/pgsql)$(wildcard $(CROSS_COMPILE_TARGET)/opt/pgsql/include)$(wildcard $(CROSS_COMPILE_TARGET)/usr/include/libpq-fe.h),)
   MODS+=cdr_pgsql.so
 endif
+endif
 
 MLFLAGS=
 
@@ -103,8 +111,10 @@
 #
 # SQLite stuff...
 #
+ifneq (${OSARCH},OpenBSD)
 ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/sqlite.h),)
   MODS+=cdr_sqlite.so
+endif
 endif
 
 all: depend $(MODS)
