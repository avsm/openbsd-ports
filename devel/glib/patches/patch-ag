--- gmodule/gmodule-dl.c.orig	Tue Feb 29 23:19:47 2000
+++ gmodule/gmodule-dl.c	Wed Jun 21 05:33:39 2000
@@ -140,15 +140,12 @@
 
 static gchar*
 _g_module_build_path (const gchar *directory,
-		      const gchar *module_name)
-{
-  if (directory && *directory) {
-    if (strncmp (module_name, "lib", 3) == 0)
-      return g_strconcat (directory, "/", module_name, NULL);
-    else
-      return g_strconcat (directory, "/lib", module_name, ".so", NULL);
-  } else if (strncmp (module_name, "lib", 3) == 0)
-    return g_strdup (module_name);
-  else
-    return g_strconcat ("lib", module_name, ".so", NULL);
+                      const gchar *module_name)
+{ 
+  if (directory && *directory)
+    { 
+      setenv ("LD_LIBRARY_PATH", directory, TRUE);
+    }
+  return g_strconcat ("lib",
+  module_name, ".so", NULL);
 }
