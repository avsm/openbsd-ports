$OpenBSD: patch-configure_ac,v 1.4 2006/03/20 05:53:18 jakemsr Exp $
--- configure.ac.orig	Sun Dec 11 13:36:29 2005
+++ configure.ac	Sat Feb  4 22:01:44 2006
@@ -565,6 +565,9 @@ if test "${SYS}" != "mingw32" -a "${SYS}
 dnl Check for pthreads - borrowed from XMMS
 THREAD_LIB=error
 if test "${THREAD_LIB}" = "error"; then
+  AC_CHECK_LIB(pthread,main,THREAD_LIB="-pthread")
+fi
+if test "${THREAD_LIB}" = "error"; then
   AC_CHECK_LIB(pthread,main,THREAD_LIB="-lpthread")
 fi
 if test "${THREAD_LIB}" = "error"; then
@@ -2213,7 +2216,7 @@ dnl Those options have to be here becaus
 	fi])
 
 dnl Trying with pkg-config
-   PKG_CHECK_MODULES(FFMPEG,[libavcodec, libavformat],
+   PKG_CHECK_MODULES(FFMPEG,[libavcodec, libavformat, libpostproc],
     [
      AC_CHECK_HEADERS(ffmpeg/avcodec.h)
      AC_CHECK_HEADERS(postproc/postprocess.h)
@@ -2853,13 +2856,13 @@ AC_ARG_ENABLE(png,
   [  --enable-png            PNG support (default enabled)])
 if test "${enable_png}" != "no"; then
 AC_CHECK_HEADERS(png.h, [
-  LDFLAGS="${LDFLAGS_save} -lz"
+  LDFLAGS="${LDFLAGS_save} -lz -lm"
   AC_CHECK_LIB(png, png_set_rows, [
-    VLC_ADD_LDFLAGS([png],[-lpng -lz])
+    VLC_ADD_LDFLAGS([png],[-lpng -lz -lm])
     VLC_ADD_PLUGINS([png])
     VLC_ADD_PLUGINS([osdmenu])
     AC_DEFINE(HAVE_LIBPNG, [], [Define if you have the PNG library: libpng])],
-    [],[-lz])
+    [],[-lz -lm])
   LDFLAGS="${LDFLAGS_save}"
   ])
 fi
