$OpenBSD: patch-j2se_make_common_Defs_gmk,v 1.4 2006/05/15 18:11:23 ian Exp $
--- j2se/make/common/Defs.gmk.orig	Wed May 10 11:56:39 2006
+++ j2se/make/common/Defs.gmk	Wed May 10 13:06:52 2006
@@ -604,9 +604,14 @@ JAVAC_CMD 	   = $(JAVAC) $(JAVAC_VMFLAGS
 # variable in $(BUILDDIR)/java/GNUmakefile.
 #
 JAVA_BOOT      = $(BOOTDIR)/bin/java -Xbootclasspath/p:$(BUILDDIR)/sun/javac/javac/gjc.jar
-JAVAC_BOOT     = $(BOOTDIR)/bin/javac -J-Xbootclasspath/p:$(BUILDDIR)/sun/javac/javac/gjc.jar -Xbootclasspath/p:$(BUILDDIR)/sun/javac/javac/collect.jar -target jsr14
-JAVAC_BOOT_CMD = $(JAVAC_BOOT) $(JAVAC_BOOT_FLAGS) $(JAVACFLAGS) $(LANGUAGE_VERSION)
+ifndef ALT_BOOTSTRAP
+JAVAC_BOOT	= $(BOOTDIR)/bin/javac -J-Xbootclasspath/p:$(BUILDDIR)/sun/javac/javac/gjc.jar -Xbootclasspath/p:$(BUILDDIR)/sun/javac/javac/collect.jar -target jsr14
 JAVAH_BOOT_CMD = $(BOOTDIR)/bin/javah -J-Xbootclasspath/p:$(BUILDDIR)/sun/javac/javac/gjc.jar
+else
+JAVAC_BOOT     = $(BOOTDIR)/bin/javac -classpath $(BUILDDIR)/sun/javac/javac/gjc.jar:$(BUILDDIR)/sun/javac/javac/collect.jar -target 1.4
+JAVAH_BOOT_CMD = $(BOOTDIR)/bin/javah -classpath $(ALT_BOOTDIR2)/jre/lib/glibj.zip:$(BUILDDIR)/sun/javac/javac/gjc.jar
+endif
+JAVAC_BOOT_CMD = $(JAVAC_BOOT) $(JAVAC_BOOT_FLAGS) $(JAVACFLAGS) $(LANGUAGE_VERSION)
 
 # Setting USEBOOTENV in the environment allows using the boot environment
 # for all targets - very useful to allow a merge to proceed while debugging
