$OpenBSD: patch-xmms_main_c,v 1.9 2008/12/26 06:34:45 jakemsr Exp $
--- xmms/main.c.orig	Sun Jul 16 06:40:04 2006
+++ xmms/main.c	Tue Dec 23 23:47:01 2008
@@ -501,7 +501,9 @@ static void read_config(void)
 		cfg.gentitle_format = g_strdup("%p - %t");
 	if (cfg.outputplugin == NULL)
 	{
-#ifdef HAVE_OSS
+#if defined(HAVE_SNDIO)
+		cfg.outputplugin = g_strdup_printf("%s/%s/libsndioout.so", PLUGIN_DIR, plugin_dir_list[0]);
+#elif defined(HAVE_OSS)
 		cfg.outputplugin = g_strdup_printf("%s/%s/libOSS.so", PLUGIN_DIR, plugin_dir_list[0]);
 #elif defined(sun)
 		cfg.outputplugin = g_strdup_printf("%s/%s/libSolaris.so", PLUGIN_DIR, plugin_dir_list[0]);
@@ -4192,11 +4194,12 @@ int main(int argc, char **argv)
 
 	signal(SIGPIPE, SIG_IGN); /* for controlsocket.c */
 	signal(SIGSEGV, segfault_handler);
+#if !defined(OpenBSD)
 	g_thread_init(NULL);
 	gtk_set_locale();
 	if (!g_thread_supported())
 		g_error(_("GLib does not support threads."));
-
+#endif
 	parse_cmd_line(argc, argv, &options);
 
 #ifdef HAVE_SRANDOMDEV
