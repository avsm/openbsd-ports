$OpenBSD: patch-libavcodec_Makefile,v 1.7 2008/02/08 17:32:41 jakemsr Exp $
--- libavcodec/Makefile.orig	Sun Oct  7 12:49:37 2007
+++ libavcodec/Makefile	Mon Jan 21 14:07:36 2008
@@ -420,6 +420,9 @@ ALTIVEC-OBJS-$(CONFIG_WMV3_DECODER)    += ppc/vc1dsp_a
 # -maltivec is needed in order to build AltiVec code.
 $(ALTIVEC-OBJS-yes): CFLAGS += -maltivec -mabi=altivec
 
+# compiler optimizations cause problems
+ppc/mpegvideo_altivec.o: CFLAGS += -O
+
 # check_altivec must be built without -maltivec
 OBJS-$(HAVE_ALTIVEC)                   += $(ALTIVEC-OBJS-yes)       \
                                           ppc/check_altivec.o
