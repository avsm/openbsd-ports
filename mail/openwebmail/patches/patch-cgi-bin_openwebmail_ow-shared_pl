$OpenBSD: patch-cgi-bin_openwebmail_ow-shared_pl,v 1.2 2003/04/14 08:26:20 kevlo Exp $
--- cgi-bin/openwebmail/ow-shared.pl.orig	Mon Mar 24 22:22:32 2003
+++ cgi-bin/openwebmail/ow-shared.pl	Mon Apr 14 13:03:33 2003
@@ -214,10 +214,10 @@
 sub openwebmail_init {
    clearvars();
    if (!defined(%default_config_raw)) {	# read default only once if persistent mode
-      readconf(\%default_config, \%default_config_raw, "$SCRIPT_DIR/etc/openwebmail.conf.default");
+      readconf(\%default_config, \%default_config_raw, "%%SYSCONFDIR%%/openwebmail/openwebmail.conf.default");
    }
    %config=%default_config; %config_raw =%default_config_raw;
-   readconf(\%config, \%config_raw, "$SCRIPT_DIR/etc/openwebmail.conf") if (-f "$SCRIPT_DIR/etc/openwebmail.conf");
+   readconf(\%config, \%config_raw, "%%SYSCONFDIR%%/openwebmail/openwebmail.conf") if (-f "%%SYSCONFDIR%%/openwebmail/openwebmail.conf");
 
    # setuid is required if mailspool is located in system directory
    if ( $>!=0 &&
@@ -243,9 +243,9 @@
    readconf(\%config, \%config_raw, "$config{'ow_sitesconfdir'}/$logindomain") if ( -f "$config{'ow_sitesconfdir'}/$logindomain");
 
    if ($config{'smtpauth'}) {
-      readconf(\%config, \%config_raw, "$SCRIPT_DIR/etc/smtpauth.conf");
+      readconf(\%config, \%config_raw, "%%SYSCONFDIR%%/openwebmail/smtpauth.conf");
       if ($config{'smtpauth_username'} eq "" || $config{'smtpauth_password'} eq "") {
-         openwebmailerror("Invalid username/password in $SCRIPT_DIR/etc/smtpauth.conf");
+         openwebmailerror("Invalid username/password in %%SYSCONFDIR%%/openwebmail/smtpauth.conf");
       }
    }
    loadauth($config{'auth_module'});
