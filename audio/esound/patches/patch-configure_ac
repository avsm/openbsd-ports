$OpenBSD: patch-configure_ac,v 1.3 2008/03/31 01:05:54 jakemsr Exp $
--- configure.ac.orig	Thu May  3 13:47:30 2007
+++ configure.ac	Sun Mar  9 20:03:26 2008
@@ -301,21 +301,16 @@ if test "x$enable_local_sound" = "xyes"; then
      if test "x$HAVE_ARTS" = "xyes"; then
        found_sound=yes
        CFLAGS="$CFLAGS $ARTSC_CFLAGS"
-       LIBS="$LIBS $ARTS_LIBS"
+       LIBS="$LIBS $ARTS_LIBS -lstdc++"
        AC_DEFINE(DRIVER_ARTS, 1, [Defined if Arts backend is enabled])
      fi
    fi
 
-   if test "$found_sound" = "no"; then
-      AC_MSG_ERROR([Could not find a support sound driver])
-   fi
-
    dnl Check for additional audio libs needed
 
    echo "---------------------------------------------------------------------"
    echo "--- Checking to see which audio libraries are required for linking.";
    echo "--- Most of these checks should also fail. Do not be alarmed.";
-   AC_CHECK_FUNC(_oss_ioctl,,[AC_CHECK_LIB(ossaudio,_oss_ioctl)])
    AC_CHECK_FUNC(ALnewconfig,,[AC_CHECK_LIB(audio,ALnewconfig)])
    if test "x$enable_alsa" = "xyes"; then
       AC_CHECK_FUNC(snd_cards,,[AC_CHECK_LIB(sound,snd_cards)])
@@ -393,7 +388,8 @@ if test "x$with_libwrap" = "xyes"; then
 
    wrap_ok=no
    AC_TRY_LINK(
-[#include <tcpd.h>
+[#include <stdio.h>
+#include <tcpd.h>
 #include <syslog.h>
 int allow_severity = LOG_INFO;
 int deny_severity = LOG_WARNING;],
@@ -403,7 +399,8 @@ int deny_severity = LOG_WARNING;],
        wrap_ok=yes],
       [LIBS="$LIBS -lnsl"
        AC_TRY_LINK(
-[#include <tcpd.h>
+[#include <stdio.h>
+#include <tcpd.h>
 #include <syslog.h>
 int allow_severity = LOG_INFO;
 int deny_severity = LOG_WARNING;],
