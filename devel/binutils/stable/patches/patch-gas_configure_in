$OpenBSD: patch-gas_configure_in,v 1.6 2003/06/07 23:35:49 brad Exp $
--- gas/configure.in.orig	Wed Oct 30 12:07:32 2002
+++ gas/configure.in	Fri Jun  6 14:33:12 2003
@@ -260,7 +260,14 @@ changequote([,])dnl
 					;;
 			    esac
 			    ;;
-      i386-*-openbsd*)      fmt=aout em=nbsd bfd_gas=yes;;
+      i386-*-openbsd*)	    em=nbsd bfd_gas=yes
+			       case ${os} in
+				  openbsd[[0-2]].* | openbsd3.[[0-2]])
+				     fmt=aout ;;
+				  *)
+				     fmt=elf ;;
+			       esac
+			    ;;
       i386-*-linux*aout* | i386-*-linux*oldld)   fmt=aout em=linux ;;
       i386-*-linux*coff*)   fmt=coff em=linux ;;
       i386-*-linux-gnu*)    fmt=elf em=linux bfd_gas=yes ;;
@@ -458,12 +465,15 @@ changequote([,])dnl
                                 sparc64) fmt=elf ;;
                             esac
                             ;;
-      sparc-*-openbsd*)     em=nbsd
-                            case ${cpu} in
-                               sparc) fmt=aout ;;
-                               sparc64) fmt=elf ;;
-                            esac
-                            ;;
+      sparc-*-openbsd*)   em=nbsd bfd_gas=yes
+			     case ${os} in
+			        openbsd[[0-2]].* | openbsd3.[[0-1]])
+				   fmt=aout ;;
+			        *)
+				   fmt=elf ;;
+			     esac
+                          ;;
+      sparc64-*-openbsd*) em=nbsd bfd_gas=yes fmt=elf ;;
 
       strongarm-*-coff)     fmt=coff ;;
       strongarm-*-elf)      fmt=elf ;;
