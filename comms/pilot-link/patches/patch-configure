$OpenBSD: patch-configure,v 1.1 2001/06/03 23:58:36 brad Exp $
--- configure.orig	Fri May 14 02:52:43 1999
+++ configure	Sun Jun  3 19:36:17 2001
@@ -1538,7 +1538,7 @@ fi
 
 
 ac_save_LIBS="$LIBS"
-LIBS="$LIBS -lreadline"
+LIBS="$LIBS -lreadline -lcurses"
 cat > conftest.$ac_ext <<EOF
 #line 1544 "configure"
 #include "confdefs.h"
@@ -1549,7 +1549,7 @@ int main() {
 EOF
 if { (eval echo configure:1551: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  RLLIBS="-lreadline"
+  RLLIBS="-lreadline -lcurses"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
@@ -2642,7 +2642,9 @@ fi
 itcl=''
 if test "x$with_tcl" = "xyes" || test "x$with_tcl" = "x" ; then
 	for tcl_path in /usr/local/tcl8.0 /usr/local/tcl7.6 /usr/local/tcl7.5 /usr/local /usr /usr/local/tcl7.4; do
-		if test -f $tcl_path/lib/tclConfig.sh; then
+		if test -f $tcl_path/lib/tcl8.3/tclConfig.sh; then
+			with_tcl=$tcl_path; break
+		elif test -f $tcl_path/lib/tclConfig.sh; then
 			with_tcl=$tcl_path; break
 		elif test -f $tcl_path/lib/itcl/tclConfig.sh; then
 			itcl='/itcl'
@@ -2683,13 +2685,13 @@ if test "x$with_tcl" = "x"; then
 elif test "x$with_tcl" = "xno"; then
 	echo "$ac_t""not used" 1>&6
 else
-	tclConfig="$with_tcl/lib$itcl/tclConfig.sh"
+	tclConfig="$with_tcl/lib/tcl8.3$itcl/tclConfig.sh"
 	if test ! -f $tclConfig; then
 		echo "$ac_t""Unable to find tclConfig.sh" 1>&6
 	else
 		. $tclConfig
 		echo "$ac_t""version $TCL_VERSION from $tclConfig" 1>&6
-		TCL_INC="-I$TCL_PREFIX/include$itcl"
+		TCL_INC="-I$TCL_PREFIX/include/tcl8.3$itcl"
 		TCL_BIN="$TCL_EXEC_PREFIX/bin"
 		TCLLIBS="$TCL_LIB_SPEC $TCL_LIBS"
 		TCLTKLIBS="$TCLLIBS"
@@ -2700,7 +2702,7 @@ else
 		
 		if test "x$with_itcl" = "xyes" || test "x$with_itcl" = "x"; then
 			for itcl_path in $with_tcl; do
-				if test -f $itcl_path/lib$itcl/itclConfig.sh; then
+				if test -f $itcl_path/lib/tcl8.3$itcl/itclConfig.sh; then
 					with_itcl=$itcl_path; break
 				fi
 			done
@@ -2718,13 +2720,13 @@ echo "configure:2716: checking for Itcl"
 		elif test "x$with_itcl" = "xno"; then
 			echo "$ac_t""not used" 1>&6
 		else
-			itclConfig="$with_itcl/lib$itcl/itclConfig.sh"
+			itclConfig="$with_itcl/lib/tcl8.3$itcl/itclConfig.sh"
 			if test ! -f $itclConfig; then
 				echo "$ac_t""Unable to find itclConfig.sh" 1>&6
 			else
 				. $itclConfig
 				echo "$ac_t""version $ITCL_VERSION from $itclConfig" 1>&6
-				ITCL_INC="-I$TK_PREFIX/include$itcl"
+				ITCL_INC="-I$TK_PREFIX/include/tcl8.3$itcl"
 				#TK_BIN="$TK_EXEC_PREFIX/bin"
 				#TKLIBS="$TK_LIB_SPEC $TCL_LIB_SPEC $TK_LIBS"
 				#TCLTK_LIBS="\$(TK_LIB_SPEC) \$(TCL_LIB_SPEC) \$(TK_LIBS)"
@@ -2742,7 +2744,7 @@ echo "configure:2716: checking for Itcl"
 
 		if test "x$with_tk" = "xyes" || test "x$with_tk" = "x"; then
 			for tk_path in $with_tcl; do
-				if test -f $tk_path/lib$itcl/tkConfig.sh; then
+				if test -f $tk_path/lib/tk8.3$itcl/tkConfig.sh; then
 					with_tk=$tk_path; break
 				fi
 			done
@@ -2760,13 +2762,13 @@ echo "configure:2758: checking for Tk" >
 		elif test "x$with_tk" = "xno"; then
 			echo "$ac_t""not used" 1>&6
 		else
-			tkConfig="$with_tk/lib$itcl/tkConfig.sh"
+			tkConfig="$with_tk/lib/tk8.3$itcl/tkConfig.sh"
 			if test ! -f $tkConfig; then
 				echo "$ac_t""Unable to find tkConfig.sh" 1>&6
 			else
 				. $tkConfig
 				echo "$ac_t""version $TK_VERSION from $tkConfig" 1>&6
-				TK_INC="-I$TK_PREFIX/include$itcl"
+				TK_INC="-I$TK_PREFIX/include/tk8.3$itcl"
 				TK_BIN="$TK_EXEC_PREFIX/bin"
 				TKLIBS="$TK_LIB_SPEC $TCL_LIB_SPEC $TK_LIBS"
 				TCLTK_LIBS="\$(TK_LIB_SPEC) \$(TCL_LIB_SPEC) \$(TK_LIBS)"
