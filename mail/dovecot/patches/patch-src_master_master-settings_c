$OpenBSD: patch-src_master_master-settings_c,v 1.8 2009/03/17 09:09:10 sthen Exp $
--- src/master/master-settings.c.orig	Mon Mar 16 14:41:23 2009
+++ src/master/master-settings.c	Mon Mar 16 14:43:01 2009
@@ -908,10 +908,12 @@ static bool login_want_core_dumps(struct settings *set
 {
 	const char *p;
 
-	p = strstr(set->server->pop3->login_executable, " -D");
+	p = set->server->pop3 == NULL ? NULL :
+		strstr(set->server->pop3->login_executable, " -D");
 	if (p != NULL && p[3] == '\0')
 		return TRUE;
-	p = strstr(set->server->imap->login_executable, " -D");
+	p = set->server->imap == NULL ? NULL :
+		strstr(set->server->imap->login_executable, " -D");
 	if (p != NULL && p[3] == '\0')
 		return TRUE;
 	return FALSE;
