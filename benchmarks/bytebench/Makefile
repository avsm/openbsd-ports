# $OpenBSD: Makefile,v 1.7 2000/02/15 05:04:03 turan Exp $

DISTNAME=       bytebench-3.1
CATEGORIES=	benchmarks

MAINTAINER=	angelos@openbsd.org

LICENSE_TYPE=		NONE
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES

MASTER_SITES=   ftp://ftp.inria.fr/system/benchmark/
EXTRACT_SUFX=	.tar.Z

do-install:
		-mkdir -p $(PREFIX)/lib/bytebench
		for f in Makefile README Run doc pgms results testdir; \
			do cp -R $(WRKSRC)/$$f $(PREFIX)/lib/bytebench; done
		echo "#!/bin/sh"		   >  $(PREFIX)/bin/bytebench
		echo "TMPDIR=\$${TMPDIR-/var/tmp}" >> $(PREFIX)/bin/bytebench
		echo "RESULTDIR=/tmp"		   >> $(PREFIX)/bin/bytebench
		echo "export TMPDIR RESULTDIR"	   >> $(PREFIX)/bin/bytebench
		echo "cd $(PREFIX)/lib/bytebench"  >> $(PREFIX)/bin/bytebench
		echo "exec ./Run \"\$$@\""	   >> $(PREFIX)/bin/bytebench
		chmod 755 $(PREFIX)/bin/bytebench
		chmod 644 $(PREFIX)/lib/bytebench/Makefile
		chmod 644 $(PREFIX)/lib/bytebench/README
		chmod 755 $(PREFIX)/lib/bytebench/Run
		chmod 755 $(PREFIX)/lib/bytebench/doc
		chmod 755 $(PREFIX)/lib/bytebench/pgms
		chmod 755 $(PREFIX)/lib/bytebench/pgms/*
		rm -f $(PREFIX)/lib/bytebench/pgms/*.orig
		chmod 755 $(PREFIX)/lib/bytebench/results
		chmod 755 $(PREFIX)/lib/bytebench/testdir

.include <bsd.port.mk>
