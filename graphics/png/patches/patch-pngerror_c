$OpenBSD: patch-pngerror_c,v 1.2 2004/07/06 22:06:17 brad Exp $
--- pngerror.c.orig	Thu Oct  3 07:32:27 2002
+++ pngerror.c	Tue Jul  6 17:36:30 2004
@@ -135,10 +135,13 @@ png_format_buffer(png_structp png_ptr, p
       buffer[iout] = 0;
    else
    {
+      png_size_t len;
+      if ((len = png_strlen(error_message)) > 63)                                                                                        
+          len = 63;
       buffer[iout++] = ':';
       buffer[iout++] = ' ';
-      png_memcpy(buffer+iout, error_message, 64);
-      buffer[iout+63] = 0;
+      png_memcpy(buffer+iout, error_message, len);
+      buffer[iout+len] = 0;
    }
 }
 
