$OpenBSD: patch-apps_silcd_silcd_c,v 1.1 2005/09/05 16:12:50 brad Exp $
--- apps/silcd/silcd.c.orig	Mon Sep  5 10:38:25 2005
+++ apps/silcd/silcd.c	Mon Sep  5 11:07:06 2005
@@ -264,9 +264,9 @@ SILC_TASK_CALLBACK(dump_stats)
   char filename[256];
 
   memset(filename, 0, sizeof(filename));
-  snprintf(filename, sizeof(filename) - 1, "/tmp/silcd.%d.stats", getpid());
-  fdd = fopen(filename, "w+");
-  if (!fdd)
+  snprintf(filename, sizeof(filename) - 1, "/tmp/silcd.%d.stats-XXXXXX", getpid());
+  fdd = mkstemp(filename);
+  if (fdd == -1)
     return;
 
 #define STAT_OUTPUT(fmt, stat) fprintf(fdd, fmt "\n", (int)stat);
