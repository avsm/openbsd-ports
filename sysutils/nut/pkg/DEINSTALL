#!/bin/sh
#
# $OpenBSD: DEINSTALL,v 1.4 2004/02/09 06:48:48 marcm Exp $
#

set -e
PATH=/bin:/usr/bin:/sbin:/usr/sbin

FILES='
ups.conf
upssched.conf
upsmon.conf
upsd.conf
upsd.users
'

do_notice()
{
	echo
	echo "+--------------- $1"
	echo "| To fully remove $1 from your system you should also"
	echo "| remove the configuration files from the ${CONFDIR}/nut directory."
	echo "| Remove the directories in which the files reside as well if empty."
	echo "|"
	echo "| You should also remove the '_ups' user from the system by running:"
	echo "|"
	echo "|     userdel _ups"
	echo "|"
	echo "| If you are planning on installing $1 again in the future"
	echo "| you can leave them as they are."
	echo "|"
	echo "| FYI, the following configuration files belong to this package:"
	echo "|"
	for f in ${FILES}; do
		echo "| ${CONFDIR}/$f"
	done
	echo "+--------------- $1"
	echo
}

# Verify proper execution
#
if [ $# -ne 2 ]; then
    echo "usage: $0 distname DEINSTALL" >&2
    exit 1
fi

# Verify/process the command
#
case $2 in
    DEINSTALL)
	if [ "$PKG_DELETE_EXTRA" != Yes ]; then
	    do_notice "$1"
	fi
	;;
    *)
	echo "usage: $0 distname DEINSTALL" >&2
	exit 1
	;;
esac

exit 0
