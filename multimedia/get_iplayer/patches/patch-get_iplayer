$OpenBSD: patch-get_iplayer,v 1.12 2009/07/27 08:39:14 sthen Exp $
--- get_iplayer.orig	Fri Jul 24 18:12:13 2009
+++ get_iplayer	Sat Jul 25 23:32:11 2009
@@ -288,7 +288,7 @@ mkpath $profile_dir if ! -d $profile_dir;
 
 
 # get list of additional user plugins and load plugin
-my $plugin_dir_system = '/usr/share/get_iplayer/plugins';
+my $plugin_dir_system = '${TRUEPREFIX}/share/get_iplayer/plugins';
 my $plugin_dir_user = "$profile_dir/plugins";
 for my $plugin_dir ( ( $plugin_dir_user, $plugin_dir_system ) ) {
 	if ( opendir( DIR, $plugin_dir ) ) {
@@ -405,6 +405,7 @@ if ( ! keys %plugin_files ) {
 	$opt->{pluginsupdate} = 1;
 }
 # Update this script if required
+$opt->{packagemanager}='pkg_add';
 update_script() if $opt->{update} || $opt->{pluginsupdate};
 
 
@@ -588,7 +589,7 @@ sub find_matches {
 	$binopts->{lame}	.= ' --quiet ' if $opt->{quiet};
 	$bin->{vlc}		= $opt->{vlc} || 'cvlc';
 	$binopts->{vlc}		= '-vv' if $opt->{verbose} || $opt->{debug};
-	$bin->{id3v2}		= $opt->{id3v2} || 'id3v2';
+	$bin->{id3v2}		= $opt->{id3v2} || 'id3tag';
 	$bin->{tee}		= 'tee';
 	$bin->{flvstreamer}	= $opt->{flvstreamer} || $opt->{rtmpdump} || 'flvstreamer';
 	# quote binaries which allows for spaces in the path
@@ -4501,7 +4502,7 @@ sub optional_list_entry_format {
 # Returns the modes to try for this prog type
 sub modelist {
 	my $prog = shift;
-	my $mlist = $opt->{tvmode} || $opt->{modes};
+	my $mlist = $opt->{tvmode} || $opt->{vmode} || $opt->{modes};
 	
 	# Defaults
 	if ( ! $mlist ) {
