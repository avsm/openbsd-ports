$OpenBSD: patch-src_dos_cdrom_image_cpp,v 1.2 2004/11/25 01:40:24 jsg Exp $
--- src/dos/cdrom_image.cpp.orig	Wed Oct  6 05:55:03 2004
+++ src/dos/cdrom_image.cpp	Mon Nov 22 21:13:39 2004
@@ -111,11 +111,11 @@ int CDROM_Interface_Image::AudioFile::ge
 	while (true) {
 		int success = Sound_Seek(sample, (unsigned int)(shift + time));
 		if (!success) {
-			if (time == 1) return lround((double)shift * 176.4f);
+			if (time == 1) return (int)((double)shift * 176.4f) + 0.5;
 			shift += time >> 1;
 			time = 1;
 		} else {
-			if (time > ((numeric_limits<int>::max() - shift) / 2)) return -1;
+			if (time > ((INT_MAX - shift) / 2)) return -1;
 			time = time << 1;
 		}
 	}
