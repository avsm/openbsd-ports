$OpenBSD: patch-src_manage_c,v 1.3 2011/04/07 08:58:10 dcoppa Exp $
--- src/manage.c.orig	Wed Jan 19 21:26:37 2011
+++ src/manage.c	Wed Apr  6 13:44:57 2011
@@ -477,6 +477,7 @@ void reparent_window(xcb_connection_t *conn, xcb_windo
                 redecorate_window(conn, new);
         }
 
+        new->needs_take_focus = client_supports_protocol(conn, new, atoms[WM_TAKE_FOCUS]);
         new->initialized = true;
 
         /* Check if the window already got the fullscreen hint set */
@@ -512,6 +513,8 @@ map:
                         }
                         if (new->container == CUR_CELL || client_is_floating(new)) {
                                 xcb_set_input_focus(conn, XCB_INPUT_FOCUS_POINTER_ROOT, new->child, XCB_CURRENT_TIME);
+                                if (new->needs_take_focus)
+                                        take_focus(conn, new);
                                 ewmh_update_active_window(new->child);
                         }
                 }
