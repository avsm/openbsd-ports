$OpenBSD: patch-jdk_src_solaris_native_java_net_PlainSocketImpl_c,v 1.1 2008/03/19 18:05:46 kurt Exp $
--- jdk/src/solaris/native/java/net/PlainSocketImpl.c.orig	Tue Dec  4 04:05:20 2007
+++ jdk/src/solaris/native/java/net/PlainSocketImpl.c	Thu Dec  6 15:44:09 2007
@@ -528,9 +528,11 @@ Java_java_net_PlainSocketImpl_socketConnect(JNIEnv *en
         if (connect_rv == JVM_IO_INTR) {
             JNU_ThrowByName(env, JNU_JAVAIOPKG "InterruptedIOException",
                             "operation interrupted");
+#if defined(EPROTO)
         } else if (errno == EPROTO) {
             NET_ThrowByNameWithLastError(env, JNU_JAVANETPKG "ProtocolException",
                            "Protocol error");
+#endif
         } else if (errno == ECONNREFUSED) {
             NET_ThrowByNameWithLastError(env, JNU_JAVANETPKG "ConnectException",
                            "Connection refused");
