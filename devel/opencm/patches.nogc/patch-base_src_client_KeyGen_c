$OpenBSD: patch-base_src_client_KeyGen_c,v 1.1 2003/05/23 13:22:14 todd Exp $
--- base/src/client/KeyGen.c.orig	Wed Jan  1 01:53:19 2003
+++ base/src/client/KeyGen.c	Thu May 22 17:46:40 2003
@@ -69,6 +69,7 @@ void Generate_X509_Key(const char* keyfi
                        OC_bool encrypt_key, uint32_t days)
 {
   SubProcess *proc = subprocess_create();
+  char *daystr = xunsigned_str(days);
 
   subprocess_AddArg(proc, "openssl");
   subprocess_AddArg(proc, "req");
@@ -79,7 +80,8 @@ void Generate_X509_Key(const char* keyfi
   subprocess_AddArg(proc, "-newkey");
   subprocess_AddArg(proc, opt_KeyType ? opt_KeyType : "rsa:1024");
   subprocess_AddArg(proc, "-days");
-  subprocess_AddArg(proc, xunsigned_str(days));
+  subprocess_AddArg(proc, daystr);
+  free(daystr);
   subprocess_AddArg(proc, "-x509");
 
   /* -nodes means to not encrypt the secret key. Why -nodes? That option name
