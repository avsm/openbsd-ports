$OpenBSD: patch-common_gkr-unix-credentials_c,v 1.1 2008/05/27 15:30:42 ajacoutot Exp $
--- common/gkr-unix-credentials.c.orig	Tue May 27 16:31:58 2008
+++ common/gkr-unix-credentials.c	Tue May 27 16:31:31 2008
@@ -135,8 +135,8 @@ gkr_unix_credentials_read (int sock, pid_t *pid, uid_t
 		if (getpeereid (sock, &euid, &egid) == 0) {
 			*uid = euid;
 		} else {
-			g_warning ("getpeereid() failed: %s", strerror (errno));
-			return FALSE;
+			fprintf (stderr, "getpeereid() failed: %s", strerror (errno));
+			return -1;
 		}
 #elif defined(HAVE_GETPEERUCRED)
 		ucred_t *uc = NULL;
