$OpenBSD: patch-gas_config_tc-arm_c,v 1.5 2003/10/11 00:52:22 brad Exp $
--- gas/config/tc-arm.c.orig	2003-04-02 18:31:25.000000000 -0500
+++ gas/config/tc-arm.c	2003-09-04 02:03:36.000000000 -0400
@@ -134,6 +134,18 @@
 #endif
 #endif
 
+#ifdef TE_LINUX
+#define FPU_DEFAULT FPU_ARCH_FPA
+#endif
+
+#if defined(TE_NetBSD) || defined(TE_OpenBSD)
+#ifdef OBJ_ELF
+#define FPU_DEFAULT FPU_ARCH_VFP  /* Soft-float, but VFP order. */
+#else
+#define FPU_DEFAULT FPU_ARCH_FPA  /* Soft-float, but FPA order. */
+#endif
+#endif
+
 /* For backwards compatibility we default to the FPA.  */
 #ifndef FPU_DEFAULT
 #define FPU_DEFAULT FPU_ARCH_FPA
@@ -10185,10 +10197,16 @@ md_begin ()
     }
   else if (mfpu_opt == -1)
     {
+#if !(defined (TE_LINUX) || defined(TE_NetBSD) || defined(TE_OpenBSD))
+      /* Some environments specify a default FPU.  If they don't, infer
+	 it from the processor.  */
       if (mcpu_fpu_opt != -1)
 	mfpu_opt = mcpu_fpu_opt;
       else
 	mfpu_opt = march_fpu_opt;
+#else
+      mfpu_opt = FPU_DEFAULT;
+#endif
     }
 
   if (mfpu_opt == -1)
