$OpenBSD: patch-hotspot_src_os_cpu_bsd_x86_vm_threadLS_bsd_x86_hpp,v 1.1 2008/03/19 18:05:43 kurt Exp $
--- hotspot/src/os_cpu/bsd_x86/vm/threadLS_bsd_x86.hpp.orig	Wed Nov  7 14:34:07 2007
+++ hotspot/src/os_cpu/bsd_x86/vm/threadLS_bsd_x86.hpp	Wed Nov  7 14:33:51 2007
@@ -27,8 +27,10 @@
 #ifndef AMD64
   // map stack pointer to thread pointer - see notes in threadLS_bsd_x86.cpp
   #define SP_BITLENGTH  32
+#ifndef _ALLBSD_SOURCE
   #define PAGE_SHIFT    12
   #define PAGE_SIZE     (1UL << PAGE_SHIFT)
+#endif
   static Thread* _sp_map[1UL << (SP_BITLENGTH - PAGE_SHIFT)];
 #endif // !AMD64
 
