# $OpenBSD: dutch-Makefile,v 1.1.1.1 2001/05/23 21:25:43 lebel Exp $

CONFIG=dutch.dat

INSTALL_DATA = ${INSTALL} -m 644

pkgdatadir = `$(WRKSRC)/src/aspell dump config | grep "data-dir current" | grep -v "local-data-dir current" | sed 's/^.*: \(.*\)$$/\1/'`
pkglibdir  = `$(WRKSRC)/src/aspell dump config | grep "dict-dir current" | grep -v "local-data-dir current" | sed 's/^.*: \(.*\)$$/\1/'`
pspell_pkgdatadir=`pspell-config pkgdatadir`

all:	build nl-aspell.pwli

build: 
	@(for i in $(WRKSRC)/data/*.dat; do ln -sf $$i; done)
	$(WRKSRC)/src/aspell --data-dir=. --lang=dutch \
	   create master ./dutch < dutch.words

nl-aspell.pwli:
	@echo $(pkglibdir)/dutch > nl-aspell.pwli

install: dutch
	${INSTALL} -d $(DESTDIR)$(pkgdatadir) $(DESTDIR)$(pkglibdir) $(DESTDIR)$(pspell_pkgdatadir)
	${INSTALL_DATA} $(CONFIG) $(DESTDIR)$(pkgdatadir)
	${INSTALL_DATA} ./dutch  $(DESTDIR)$(pkglibdir)
	${INSTALL_DATA} nl-aspell.pwli $(DESTDIR)$(pspell_pkgdatadir)

# vim:sw=8:tw=72:ts=8:ft=make
