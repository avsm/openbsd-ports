$OpenBSD: patch-libmysql_libmysql_c,v 1.3 2004/10/20 04:47:29 brad Exp $
--- libmysql/libmysql.c.orig	Tue Oct 19 21:50:29 2004
+++ libmysql/libmysql.c	Tue Oct 19 21:52:42 2004
@@ -1855,7 +1855,8 @@ mysql_real_connect(MYSQL *mysql,const ch
 	sprintf(net->last_error, ER(CR_UNKNOWN_HOST), host, tmp_errno);
 	goto error;
       }
-      memcpy(&sock_addr.sin_addr,hp->h_addr, (size_t) hp->h_length);
+      memcpy(&sock_addr.sin_addr, hp->h_addr,
+	    min(sizeof(sock_addr.sin_addr), (size_t) hp->h_length));
       my_gethostbyname_r_free();
     }
     sock_addr.sin_port = (ushort) htons((ushort) port);
