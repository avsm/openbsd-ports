$OpenBSD: patch-configure_ac,v 1.4 2009/05/10 20:16:29 sthen Exp $
--- configure.ac.orig	Wed Apr 23 19:30:21 2008
+++ configure.ac	Fri Apr 10 20:40:32 2009
@@ -979,8 +979,8 @@ AG_GST_CHECK_FEATURE(THEORADEC, [ogg theora codec], th
 dnl *** x264 (MPEG-4 part 10/h.264/AVC encoder) ***
 translit(dnm, m, l) AM_CONDITIONAL(USE_X264, true)
 AG_GST_CHECK_FEATURE(X264, [x264 plug-in], x264, [
-  AG_GST_CHECK_LIBHEADER(X264, x264, x264_nal_encode, -lm, x264.h,
-      X264_LIBS="$LDFLAGS -lx264 -lm"
+  AG_GST_CHECK_LIBHEADER(X264, x264, x264_nal_encode, -lm -pthread, x264.h,
+      X264_LIBS="$LDFLAGS -lx264 -lm -pthread"
       X264_CFLAGS="$CFLAGS"
       AC_SUBST(X264_LIBS)
       AC_SUBST(X264_CFLAGS))
@@ -992,7 +992,7 @@ AG_GST_CHECK_FEATURE(XVID, [xvid plugins], xvid, [
   HAVE_XVID=no
   AC_CHECK_HEADER(xvid.h, [
     OLD_LIBS="$LIBS"
-    LIBS="-lm"
+    LIBS="-lm -pthread"
     AC_CHECK_LIB(xvidcore, xvid_encore, [
       AC_CHECK_LIB(xvidcore, xvid_decore, [
         AC_CHECK_LIB(xvidcore, xvid_global, [
@@ -1002,7 +1002,7 @@ AG_GST_CHECK_FEATURE(XVID, [xvid plugins], xvid, [
               #error "Incompatible XviD API version"
               #endif
           ],[ AC_MSG_RESULT(yes)
-            XVID_LIBS="-lxvidcore -lm"
+            XVID_LIBS="-lxvidcore -lm -pthread"
             AC_SUBST(XVID_LIBS)
             HAVE_XVID=yes
           ], AC_MSG_RESULT(no) )
