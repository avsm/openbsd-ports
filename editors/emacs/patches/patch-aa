--- src/callproc.c.orig	Mon Dec 29 15:22:23 1997
+++ src/callproc.c	Mon Dec 29 15:22:34 1997
@@ -456,7 +456,7 @@
   if (*tempfile == '\0' || tempfile[strlen (tempfile) - 1] != '/') 
     strcat (tempfile, "/");
   strcat (tempfile, "detmp.XXX");
-  mktemp (tempfile);
+  mkstemp (tempfile);
 
   outfilefd = creat (tempfile, S_IREAD | S_IWRITE);
   if (outfilefd < 0)
@@ -811,7 +811,7 @@
 	 XSTRING (Vtemp_file_name_pattern)->size + 1);
 #endif /* not DOS_NT */
 
-  mktemp (tempfile);
+  mkstemp (tempfile);
 
   filename_string = build_string (tempfile);
   GCPRO1 (filename_string);
