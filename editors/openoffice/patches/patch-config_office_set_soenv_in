$OpenBSD: patch-config_office_set_soenv_in,v 1.8 2006/11/09 15:18:01 kurt Exp $
--- config_office/set_soenv.in.orig.port	Thu Nov  9 08:55:33 2006
+++ config_office/set_soenv.in	Thu Nov  9 08:55:34 2006
@@ -368,6 +368,46 @@ elsif ( $platform =~ m/freebsd/ ) 
       $INPATH         = $OUTPATH.$PROEXT;
       $GVERDIR        = $INPATH;
 } 
+elsif ( $platform =~ m/openbsd/ )
+{     print "Setting OpenBSD specific values... ";
+      $outfile        = "OpenBSDEnv.Set";
+      $BIG_SVX        = "TRUE";
+      $COM            = "GCC";
+      $COMPATH        = '@COMPATH@';
+      if ( $platform =~ m/^i386/ )
+      {
+         $CPU            = "I";
+         $CPUNAME        = "INTEL";
+         $JRELIBDIR      = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."i386";
+         $JRETOOLKITDIR  = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."i386".$ds."client";
+         $JRETHREADDIR   = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."i386".$ds."native_threads";
+         $JREEXTRALIBDIR = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."i386".$ds."xawt";
+      }
+      elsif ( $platform =~ m/^x86_64/ )
+      {
+         $CPU            = "X";
+         $CPUNAME        = "X86_64";
+         $JRELIBDIR      = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."amd64";
+         $JRETOOLKITDIR  = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."amd64".$ds."server";
+         $JRETHREADDIR   = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."amd64".$ds."native_threads";
+         $JREEXTRALIBDIR = '$JAVA_HOME'.$ds."jre".$ds."lib".$ds."amd64".$ds."xawt";
+      }
+      $CVER           = "C300";
+      $GUI            = "UNX";
+      $GUIBASE        = "unx";
+      $GUIENV         = "sal";
+      $GVER           = "VCL";
+      $OUTPATH        = "unxobsd";
+      $INPATH         = $OUTPATH.$PROEXT;
+      $GVERDIR        = $INPATH;
+      $OS             = "OPENBSD";
+      $PATH_SEPERATOR = $ps;
+      $XPVERSION      = "3";
+      $OSVERSION      = '@OSVERSION@';
+      if( @GCCVER@ >= 30401 ) {
+         $CVER        = "C341";
+      }
+}
 elsif ( $platform =~ m/linux-gnu/ ) 
 {
 # General Linux settings:
@@ -943,7 +983,7 @@ if ($platform =~ m/solaris/) 
                         $ps.$JRETHREADDIR.
                         $ps.'$SOLARVER'.$ds.'$UPD'.$ds.'$INPATH'.$LIB;
 }
-elsif ($platform =~ m/linux-gnu|netbsd|osf1|freebsd|aix/)
+elsif ($platform =~ m/linux-gnu|netbsd|osf1|openbsd|freebsd|aix/)
 {  $LD_LIBRARY_PATH   = $cur_dir.
                         $ps.'$SOLARENV'.$ds.'$INPATH'.$LIB.
                         $ps.$JRELIBDIR.
@@ -992,7 +1032,7 @@ if ($platform =~ m/solaris/) 
                         $D."SUPD=$UPD".
                         $D."UPDVER=".'""'."'".'"'."'".'"'."SV$UPD".'"'."'".'"'."'".'"'.'"';
 }
-elsif ($platform =~ m/linux-gnu|netbsd|freebsd|osf1|irix|aix/)
+elsif ($platform =~ m/linux-gnu|netbsd|openbsd|freebsd|osf1|irix|aix/)
 {  $SOLARDEF          = $D."UNX".
                         $D.$COM.
                         $D.$CVER.
@@ -1029,7 +1069,7 @@ if ($platform =~ m/solaris/) 
                         $L.$USR_DT.$LIB.
                         $L.$USR_OPENWIN.$LIB;
 }
-elsif ($platform =~ m/linux-gnu|netbsd|osf1|irix|freebsd|aix/)
+elsif ($platform =~ m/linux-gnu|netbsd|osf1|irix|openbsd|freebsd|aix/)
 {
    $SOLAREXTRALIB     = $L.$par_dir.$LIB64;
 }
@@ -1070,7 +1110,7 @@ if ($platform =~ m/cygwin/)
 }
      
 # The general environment path.
-if ($platform =~ m/linux-gnu|netbsd|odf1|irix|freebsd|aix|solaris/)
+if ($platform =~ m/linux-gnu|netbsd|odf1|irix|openbsd|freebsd|aix|solaris/)
 {  $PATH              = $cur_dir.
                         $ps.'$SOLARVER'.$ds.'$UPD'.$ds.'$INPATH'.$BIN.
                         $ps.'$SOLARENV'.$ds.'$OUTPATH'.$BIN.
@@ -1260,6 +1300,19 @@ elsif ($platform =~ m/linux-gnu|netbasd|
                         $L_STLPORT_LIB.
                         $L.$XLIB;
 }
+elsif ($platform =~ m/openbsd/)
+{  $SOLARLIB          = $L.$par_dir.$LIB.
+                        $L.'$SOLARENV'.$ds.'$OUTPATH'.$LIB.
+                        $L.'$SOLARVER'.$ds.'$UPD'.$ds.'$INPATH'.$LIB.
+                        $L.'$SOLARENV'.$ds.'$OUTPATH'.$LIB.
+                        $L_STLPORT_LIB.
+                        $L.$USR_LOCAL.$LIB.
+                        $L.'$JAVA_HOME'.$LIB64.
+                        $L.$JRELIBDIR.
+                        $L.$JRETOOLKITDIR.
+                        $L.$JRETHREADDIR.
+                        $L.$XLIB;
+}
 elsif ($platform =~ m/cygwin/)
 {  $SOLARLIB          = $L.'$SOLARVER'.$ds.'$UPD'.$ds.'$INPATH'.$LIB.
                         $L.$par_dir.$LIB.
@@ -1291,10 +1344,10 @@ $SOLARINC             = $I.$cur_dir.
                         $I.'$SOLARENV'.$INC.
                         $I.'$SRC_ROOT'.$ds."res";
 
-if ($platform =~ m/solaris|linux-gnu|osf1|freebsd|netbsd|irix/)
+if ($platform =~ m/solaris|linux-gnu|osf1|openbsd|freebsd|netbsd|irix/)
 {
 $SOLARINC	     .= $STLPORT_stlport;
-if ($platform =~ m/linux|freebsd|netbsd/)
+if ($platform =~ m/linux|openbsd|freebsd|netbsd/)
 {
 # This simply adds an include path, so even cases that break the FHS work
 $SOLARINC            .= $STLPORT_inc_stlport;
@@ -1315,10 +1368,15 @@ if ($platform =~ m/linux-gnu/)
    $SOLARINC         .= $STLPORT_inc_stlport;
 }
 
+   	$SOLARINC      .= $I.'$SOLARENV'.$INC.$ds."Xp31";
 
-   	$SOLARINC      .= $I.'$SOLARENV'.$INC.$ds."Xp31".
-                     $I.'$JAVA_HOME'.$INCLUDE;
+        # pickup system jpeg over java jpeg
+        if ($platform =~ m/openbsd/)
+        {  $SOLARINC  .= $I.$USR_LOCAL.$INCLUDE;
+        }
 
+        $SOLARINC      .= $I.'$JAVA_HOME'.$INCLUDE;
+
 	#include system dependent Java include directory
 	if (!($JDK eq "gcj"))
 	{
@@ -1334,6 +1392,10 @@ if ($platform =~ m/linux-gnu/)
       		$SOLARINC   .=$I.'$JAVA_HOME'.$INCLUDE.$ds."bsd";
       		$SOLARINC   .=$I.'$JAVA_HOME'.$INCLUDE.$ds."linux";
    		}
+		elsif ($platform =~ m/openbsd/)
+		{
+		$SOLARINC   .=$I.'$JAVA_HOME'.$INCLUDE.$ds."openbsd";
+		}
    		elsif ($platform =~ m/netbsd/)
    		{  $SOLARINC   .=$I.'$JAVA_HOME'.$INCLUDE.$ds."netbsd";
    		}
@@ -1346,7 +1408,7 @@ if ($platform =~ m/linux-gnu/)
    		$SOLARINC .=$I.'$JAVA_HOME'.$INCLUDE.$ds."native_threads".$ds."include";
 	}
     #The tail, if needed
-    if ($platform =~ m/linux-gnu|freebsd|netbsd/)
+    if ($platform =~ m/linux-gnu|freebsd|openbsd|netbsd/)
     {  $SOLARINC  .= $I.$XINC;
     }
     elsif ($platform =~ m/osf1/)
