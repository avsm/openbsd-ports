$OpenBSD: patch-wmbiff_Makefile,v 1.2 2001/03/25 12:40:58 naddy Exp $
--- wmbiff/Makefile.orig	Tue Mar 13 08:08:09 2001
+++ wmbiff/Makefile	Sun Mar 25 14:30:44 2001
@@ -1,11 +1,8 @@
 WMBIFF_VERSION="0.2p"
-prefix=
-BIN=/usr/local/bin
-MAN=/usr/local/man
-CONF=/etc
-LIBDIR = -L/usr/X11R6/lib
+LIBDIR = -L$(X11BASE)/lib
+INCLUDEDIR= -I$(X11BASE)/include
 LIBS   = -lXpm -lXext -lX11
-CFLAGS = -O2 -Wall -DWMBIFF_VERSION='$(WMBIFF_VERSION)'
+CFLAGS+= -DWMBIFF_VERSION='$(WMBIFF_VERSION)'
 #CFLAGS = -g -Wall -pedantic -DWMBIFF_VERSION='$(WMBIFF_VERSION)'
 OBJS =	wmbiff.o socket.o \
 	Pop3Client.o Imap4Client.o LicqClient.o mboxClient.o \
@@ -14,10 +11,8 @@ OBJS =	wmbiff.o socket.o \
 	../wmgeneral/misc.o \
 	../wmgeneral/list.o
 
-INSTALL = /usr/bin/install -p
-
 .c.o:
-	gcc  $(CFLAGS) -c -Wall $< -o $*.o
+	$(CC) $(CFLAGS) -c $< $(INCLUDEDIR) -o $@
 
 all: wmbiff-master.xpm wmbiff
 
@@ -25,7 +20,7 @@ wmbiff-master.xpm:
 	ln -s wmbiff-master-led.xpm wmbiff-master.xpm
 
 wmbiff:	$(OBJS)
-	gcc $(CFLAGS) -o wmbiff -lX11 -lnsl $^ $(LIBDIR) $(LIBS)
+	$(CC) $(CFLAGS) -o wmbiff -lX11 $(OBJS) $(LIBDIR) $(LIBS)
 
 clean: indent
 	for i in $(OBJS) ; do \
@@ -34,9 +29,12 @@ clean: indent
 	rm -f wmbiff *~ tags core
 
 install: wmbiff
-	$(INSTALL) -m 755 wmbiff $(prefix)$(BIN)
-	$(INSTALL) -m 755 wmbiff.1 $(prefix)$(MAN)/man1/
-	$(INSTALL) -m 755 wmbiffrc.5 $(prefix)$(MAN)/man5
+	${BSD_INSTALL_PROGRAM} wmbiff ${PREFIX}/bin/wmbiff
+	${BSD_INSTALL_DATA_DIR} ${PREFIX}/share/examples/wmbiff
+	${BSD_INSTALL_MAN} wmbiff.1 ${PREFIX}/man/man1/wmbiff.1
+	${BSD_INSTALL_MAN} wmbiffrc.5 ${PREFIX}/man/man5/wmbiffrc.5
+	${BSD_INSTALL_DATA} sample.wmbiffrc \
+		${PREFIX}/share/examples/wmbiff/dot.wmbiffrc
 #	strip $(prefix)$(BIN)/wmbiff
 #	chmod 755 $(prefix)$(BIN)/wmbiff
 
