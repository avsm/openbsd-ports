$OpenBSD: patch-lib_dlopen_c,v 1.1 2002/07/07 17:12:48 pvalchev Exp $
--- lib/dlopen.c.orig	Sat Jul  6 13:21:05 2002
+++ lib/dlopen.c	Sat Jul  6 13:22:13 2002
@@ -158,7 +158,7 @@ int _sasl_get_plugin(const char *file,
     int flag;
     void *library;
     void *entry_point;
-#if __OpenBSD__
+#if defined(__OpenBSD__) && !defined(__ELF__)
     char adj_entryname[1024];
 #else
 #define adj_entryname entryname
@@ -179,7 +179,7 @@ int _sasl_get_plugin(const char *file,
 	return SASL_FAIL;
     }
 
-#if __OpenBSD__
+#if defined(__OpenBSD__) && !defined(__ELF__)
     snprintf(adj_entryname, sizeof adj_entryname, "_%s", entryname);
 #endif
 
