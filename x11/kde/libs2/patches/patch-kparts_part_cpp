--- kparts/part.cpp.orig	Wed Sep 27 19:46:32 2000
+++ kparts/part.cpp	Sun Nov 26 16:53:02 2000
@@ -448,7 +448,15 @@ bool ReadWritePart::saveAs( const KURL &
     // We haven't saved yet, or we did but locally - provide a temp file
     if ( m_file.isEmpty() || !m_bTemp )
     {
+#ifdef HAVE_MKSTEMP
+      char mfile[50];
+
+      strcpy(mfile, "/tmp/Save.XXXXXXXXXX");
+      close(open(mkstemp(mfile));
+      m_file = mfile;
+#else
       m_file = tmpnam(0);
+#endif
       m_bTemp = true;
     }
     // otherwise, we already had a temp file
