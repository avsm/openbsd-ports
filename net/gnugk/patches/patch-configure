$OpenBSD: patch-configure,v 1.5 2009/01/17 11:42:03 ajacoutot Exp $
--- configure.orig	Sat Jan 17 11:34:07 2009
+++ configure	Sat Jan 17 11:35:26 2009
@@ -4300,9 +4300,15 @@ echo $ECHO_N "checking for PQconnectdb in -lpq... $ECH
 
 		old_LIBS="$LIBS"
 
+		if test `uname -s` = OpenBSD ; then
+			CRYPTO_LIBS="-lcrypto"
+		else
+			CRYPTO_LIBS="-lcrypt"
+		fi
+
 		for try in /usr/lib /usr/local/lib /usr/local/pgsql/lib $pgsql_lib_dir; do
 			if test -d $try; then
-				LIBS="$old_LIBS -L$try -lpq -lcrypt ${PGSQL_LIBS}"
+				LIBS="$old_LIBS -L$try -lpq ${CRYPTO_LIBS} ${PGSQL_LIBS}"
 				cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -4336,7 +4342,7 @@ eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
 	 test ! -s conftest.err
        } && test -s conftest$ac_exeext &&
        $as_test_x conftest$ac_exeext; then
-   PGSQL_LIBS="-lpq -lcrypt ${PGSQL_LIBS}"
+   PGSQL_LIBS="-lpq ${CRYPTO_LIBS} ${PGSQL_LIBS}"
 					  PGSQL_LDFLAGS="-L$try"
 
 
