# $OpenBSD: patch-po-makefile,v 1.3 2001/06/07 13:40:27 naddy Exp $

--- po/Makefile.orig	Fri Feb 18 18:33:40 2000
+++ po/Makefile	Mon May 14 23:13:45 2001
@@ -1,7 +1,7 @@
 INSTALL= /usr/bin/install -c
 INSTALL_PROGRAM= ${INSTALL}
 INSTALL_DATA= ${INSTALL} -m 644
-INSTALLNLSDIR=/usr/share/locale
+INSTALLNLSDIR= $(PREFIX)/share/locale
 
 MSGMERGE = msgmerge
 
@@ -52,19 +52,20 @@ depend:
 install: $(CATALOGS)
 	for n in $(CATALOGS); do \
 	    l=`basename $$n .mo`; \
-	    $(INSTALL) -m 755 -d $(R)$(INSTALLNLSDIR)/$$l; \
-	    $(INSTALL) -m 755 -d $(R)$(INSTALLNLSDIR)/$$l/LC_MESSAGES; \
-	    $(INSTALL) -m 644 $$n $(R)$(INSTALLNLSDIR)/$$l/LC_MESSAGES/minicom.mo; \
+	    $(INSTALL) -m 755 -d $(INSTALLNLSDIR)/$$l; \
+	    $(INSTALL) -m 755 -d $(INSTALLNLSDIR)/$$l/LC_MESSAGES; \
+	    $(INSTALL) -m 644 $$n $(INSTALLNLSDIR)/$$l/LC_MESSAGES/minicom.mo; \
 	done
 
-%.mo: %.po
+.SUFFIXES:	.po .mo
+.po.mo:
 	msgfmt -o $@ $<
 
 # Automatically make ja_JP.SJIS.po from ja.po
 # ujis2sjis is a converting program.
 
 ja_JP.SJIS.po : ja.po ujis2sjis
-	./ujis2sjis <ja.po >ja_JP.SJIS.po
+	./ujis2sjis <ja.po | sed 's/charset=euc-jp/charset=sjis/' >ja_JP.SJIS.po
 
 ujis2sjis : ujis2sjis.c
 	cc $< -o $@
