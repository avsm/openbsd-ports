*** configs/openbsd-g++-shared.orig	Wed Jul 22 16:58:40 1998
--- configs/openbsd-g++-shared	Wed Jul 22 17:04:20 1998
***************
*** 39,45 ****
  #
  SYSCONF_LINK_SHLIB	= ld
  SYSCONF_LINK_TARGET_SHARED	= lib$(TARGET).so.$(VER_MAJ).$(VER_MIN)
! SYSCONF_LINK_LIB_SHARED	= $(LINK) $(LFLAGS) -o $(TARGETD) `lorder /usr/lib/c++rt0.o $(OBJECTS) $(OBJMOC) | tsort` $(LIBS)
  
  # Linking static libraries
  #   - Build the $(TARGET) library, eg. lib$(TARGET).a
--- 39,52 ----
  #
  SYSCONF_LINK_SHLIB	= ld
  SYSCONF_LINK_TARGET_SHARED	= lib$(TARGET).so.$(VER_MAJ).$(VER_MIN)
! SYSCONF_LINK_LIB_SHARED	= $(SYSCONF_LINK_SHLIB) $(SYSCONF_LFLAGS_SHOBJ) \
! 	$(LFLAGS) -o $(SYSCONF_LINK_TARGET_SHARED) \
! 	`lorder /usr/lib/c++rt0.o $(OBJECTS) $(OBJMOC) | tsort` $(LIBS); \
! 	mv $(SYSCONF_LINK_TARGET_SHARED) $(DESTDIR); \
! 	cd $(DESTDIR); \
! 	rm -f lib$(TARGET).so lib$(TARGET).so.$(VER_MAJ); \
! 	ln -sf $(SYSCONF_LINK_TARGET_SHARED) lib$(TARGET).so; \
! 	ln -sf $(SYSCONF_LINK_TARGET_SHARED) lib$(TARGET).so.$(VER_MAJ)
  
  # Linking static libraries
  #   - Build the $(TARGET) library, eg. lib$(TARGET).a
***************
*** 51,61 ****
  				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC) \
  				 ranlib $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC)
  # Compiling application source
! SYSCONF_CFLAGS		= -O2 -fno-strength-reduce
  # Compiling library source
! SYSCONF_CFLAGS_LIB	= -O2 -fno-strength-reduce -fPIC
  # Compiling shared-object source
! SYSCONF_CFLAGS_SHOBJ	= -O2 -fno-strength-reduce -fPIC
  # Default link type (stati linking is still be used where required)
  SYSCONF_LINK_LIB	= $(SYSCONF_LINK_LIB_SHARED)
  SYSCONF_LINK_TARGET	= $(SYSCONF_LINK_TARGET_SHARED)
--- 58,68 ----
  				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC) \
  				 ranlib $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC)
  # Compiling application source
! SYSCONF_CFLAGS		= -O2 -pipe -fno-strength-reduce
  # Compiling library source
! SYSCONF_CFLAGS_LIB	= -O2 -pipe -fno-strength-reduce -fPIC
  # Compiling shared-object source
! SYSCONF_CFLAGS_SHOBJ	= -O2 -pipe -fno-strength-reduce -fPIC
  # Default link type (stati linking is still be used where required)
  SYSCONF_LINK_LIB	= $(SYSCONF_LINK_LIB_SHARED)
  SYSCONF_LINK_TARGET	= $(SYSCONF_LINK_TARGET_SHARED)
