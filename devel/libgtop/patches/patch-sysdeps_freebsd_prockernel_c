$OpenBSD: patch-sysdeps_freebsd_prockernel_c,v 1.2 2001/11/27 23:07:02 todd Exp $
--- sysdeps/freebsd/prockernel.c.orig	Fri Sep 28 20:14:49 2001
+++ sysdeps/freebsd/prockernel.c	Fri Sep 28 20:38:18 2001
@@ -68,7 +68,9 @@ void
 glibtop_init_proc_kernel_p (glibtop *server)
 {
 	server->sysdeps.proc_kernel = _glibtop_sysdeps_proc_kernel_pstats |
+#if (!defined __OpenBSD__) || (defined __i386__)
 		_glibtop_sysdeps_proc_kernel_pcb |
+#endif			
 		_glibtop_sysdeps_proc_kernel_wchan;
 }
 
@@ -167,14 +169,20 @@ glibtop_get_proc_kernel_p (glibtop *serv
 			/*xxx FreeBSD/Alpha? */
 #endif
 #else
+#if (!defined __OpenBSD__) || (defined __i386__)
 			buf->kstk_esp = (u_int64_t) pcb.pcb_tss.tss_esp0;
+#endif		       
 #ifdef __bsdi__
 			buf->kstk_eip = (u_int64_t) pcb.pcb_tss.tss_eip;
 #else
+#if (!defined __OpenBSD__) || (defined __i386__)
 			buf->kstk_eip = (u_int64_t) pcb.pcb_tss.__tss_eip;
+#endif			
 #endif
 
+#if (!defined __OpenBSD__) || (defined __i386__)
 			buf->flags |= _glibtop_sysdeps_proc_kernel_pcb;
+#endif			
 #endif
 		}
 
