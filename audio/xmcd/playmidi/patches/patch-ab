*** Makefile.orig	Sat Feb 24 17:00:00 1996
--- Makefile	Fri Nov 15 09:38:06 1996
***************
*** 28,34 ****
  
  # ncurses usually /usr/lib, -L/usr/local/lib doesn't hurt
  # unless there's more than one ncurses floating around on your system
! LIBNC	= -L/usr/local/lib -lncurses
  
  ######### NOTE:  X11R6 or newer REQUIRED
  LIBX11	= -L/usr/X11R6/lib -lXaw -lXmu -lXt -lX11 -lXext -lSM -lICE
--- 28,34 ----
  
  # ncurses usually /usr/lib, -L/usr/local/lib doesn't hurt
  # unless there's more than one ncurses floating around on your system
! LIBNC   = -lncurses -lmytinfo
  
  ######### NOTE:  X11R6 or newer REQUIRED
  LIBX11	= -L/usr/X11R6/lib -lXaw -lXmu -lXt -lX11 -lXext -lSM -lICE
***************
*** 36,60 ****
  
  # ncurses is usually in /usr/include/ncurses, but you may need
  # to use /usr/local/include/ncurses depending on your setup.
! INCNC	= -I/usr/include/ncurses
  
  # just in case you keep your X includes in an odd location.
  INCX11	= -I/usr/X11R6/include -DNARROWPROTO
  
  # usually in /usr/include, but -I/usr/local/include doesn't hurt
  # unless there's more than one svgalib floating around your system.
! INCVGA	= -I/usr/local/include
  
  # Directory where application defaults files are stored for X11 version
  XAPPDEFAULTS = /usr/X11R6/lib/X11/app-defaults
  
  INCLUDES= $(INCNC) $(INCX11) $(INCVGA)
! INSTALLDIR = /usr/local/bin
! INSTALL = install -s
  
  # if you are using the GUS Ultra driver module, add -DULTRA_DRIVER
! CFLAGS	= -Wall -pipe -fomit-frame-pointer -O2 -m486
! LDFLAGS =
  
  OBJECTS = playmidi.o readmidi.o playevents.o \
  	  patchload.o emumidi.o io_ncurses.o
--- 36,62 ----
  
  # ncurses is usually in /usr/include/ncurses, but you may need
  # to use /usr/local/include/ncurses depending on your setup.
! INCNC   = #-I/usr/include/ncurses
  
  # just in case you keep your X includes in an odd location.
  INCX11	= -I/usr/X11R6/include -DNARROWPROTO
  
  # usually in /usr/include, but -I/usr/local/include doesn't hurt
  # unless there's more than one svgalib floating around your system.
! INCVGA  = #-I/usr/local/include
  
  # Directory where application defaults files are stored for X11 version
  XAPPDEFAULTS = /usr/X11R6/lib/X11/app-defaults
  
  INCLUDES= $(INCNC) $(INCX11) $(INCVGA)
! INSTALLDIR = ${PREFIX}/bin
  
  # if you are using the GUS Ultra driver module, add -DULTRA_DRIVER
! #CFLAGS  = -Wall -pipe -fomit-frame-pointer -O2 -m486
! CFLAGS += -DPREFIX=\"$(PREFIX)\"
! #LDFLAGS =
! INSTALL_BIN = $(INSTALL) -s -c -o $(BINOWN) -g $(BINGRP) -m 755
! INSTALL_DAT = $(INSTALL) -c -o $(BINOWN) -g $(BINGRP) -m 644
  
  OBJECTS = playmidi.o readmidi.o playevents.o \
  	  patchload.o emumidi.o io_ncurses.o
***************
*** 65,71 ****
  SOBJECTS= playmidi.o readmidi.o playevents.o \
  	  patchload.o emumidi.o io_svgalib.o
  
! all: playmidi splaymidi xplaymidi
  
  config:
  playmidi.h: playmidi.h-dist
--- 67,73 ----
  SOBJECTS= playmidi.o readmidi.o playevents.o \
  	  patchload.o emumidi.o io_svgalib.o
  
! all: playmidi #splaymidi xplaymidi
  
  config:
  playmidi.h: playmidi.h-dist
***************
*** 80,137 ****
  io_svgalib.o: io_svgalib.c
  	$(CC) $(CFLAGS) $(INCVGA) -c io_svgalib.c -o io_svgalib.o
  
! playmidi: .depend $(OBJECTS)
  	$(CC) $(LDFLAGS) -o playmidi $(OBJECTS) $(LIBNC)
  
! xplaymidi: .depend $(XOBJECTS)
  	$(CC) $(LDFLAGS) -o xplaymidi $(XOBJECTS) $(LIBX11)
  
! splaymidi: .depend $(SOBJECTS)
  	$(CC) $(LDFLAGS) -o splaymidi $(SOBJECTS) $(LIBVGA)
  
  $(INSTALLDIR)/playmidi: playmidi
! 	$(INSTALL) playmidi $(INSTALLDIR)
  
  $(INSTALLDIR)/xplaymidi: xplaymidi
! 	$(INSTALL) xplaymidi $(INSTALLDIR)
  
  $(INSTALLDIR)/splaymidi: splaymidi
! 	$(INSTALL) splaymidi $(INSTALLDIR)
  
! /etc/std.o3:
! 	cp -i std.o3 /etc
  
! /etc/drums.o3:
! 	cp -i drums.o3 /etc
  
! /etc/std.sb:
! 	cp -i std.sb /etc
  
! /etc/drums.sb:
! 	cp -i drums.sb /etc
  
  $(XAPPDEFAULTS)/XPlaymidi:
! 	cp -i XPlaymidi.ad $(XAPPDEFAULTS)/XPlaymidi
  
! install: $(INSTALLDIR)/playmidi $(INSTALLDIR)/splaymidi \
! 	 $(INSTALLDIR)/xplaymidi /etc/std.o3 /etc/drums.o3 \
! 	 /etc/std.sb /etc/drums.sb $(XAPPDEFAULTS)/XPlaymidi
  
! install.novga: $(INSTALLDIR)/playmidi \
! 	 $(INSTALLDIR)/xplaymidi /etc/std.o3 /etc/drums.o3 \
! 	 /etc/std.sb /etc/drums.sb $(XAPPDEFAULTS)/XPlaymidi
  
! install.noX11: $(INSTALLDIR)/playmidi $(INSTALLDIR)/splaymidi \
! 	 /etc/std.o3 /etc/drums.o3 /etc/std.sb /etc/drums.sb
  
! install.Xonly: $(INSTALLDIR)/xplaymidi /etc/std.o3 /etc/drums.o3 \
! 	 /etc/std.sb /etc/drums.sb $(XAPPDEFAULTS)/XPlaymidi
  
! install.lame: $(INSTALLDIR)/playmidi \
! 	 /etc/std.o3 /etc/drums.o3 /etc/std.sb /etc/drums.sb
  
  install.man:
! 	 cp playmidi.1 /usr/man/man1/
  
  clean:
  	rm -f *.o playmidi splaymidi xplaymidi a.out
--- 82,143 ----
  io_svgalib.o: io_svgalib.c
  	$(CC) $(CFLAGS) $(INCVGA) -c io_svgalib.c -o io_svgalib.o
  
! playmidi: $(OBJECTS)
  	$(CC) $(LDFLAGS) -o playmidi $(OBJECTS) $(LIBNC)
  
! xplaymidi: $(XOBJECTS)
  	$(CC) $(LDFLAGS) -o xplaymidi $(XOBJECTS) $(LIBX11)
  
! splaymidi: $(SOBJECTS)
  	$(CC) $(LDFLAGS) -o splaymidi $(SOBJECTS) $(LIBVGA)
  
  $(INSTALLDIR)/playmidi: playmidi
! 	$(INSTALL_BIN) playmidi $(INSTALLDIR)
  
  $(INSTALLDIR)/xplaymidi: xplaymidi
! 	$(INSTALL_BIN) xplaymidi $(INSTALLDIR)
  
  $(INSTALLDIR)/splaymidi: splaymidi
! 	$(INSTALL_BIN) splaymidi $(INSTALLDIR)
  
! ${PREFIX}/lib/midi/std.o3:
! 	$(INSTALL_DAT) std.o3 $@
  
! ${PREFIX}/lib/midi/drums.o3:
! 	$(INSTALL_DAT) drums.o3 $@
  
! ${PREFIX}/lib/midi/std.sb:
! 	$(INSTALL_DAT) std.sb $@
  
! ${PREFIX}/lib/midi/drums.sb:
! 	$(INSTALL_DAT) drums.sb $@
  
  $(XAPPDEFAULTS)/XPlaymidi:
! 	$(INSTALL_DAT) XPlaymidi.ad $(XAPPDEFAULTS)/XPlaymidi
  
! dirs:
! 	-@mkdir -p $(PREFIX)/lib/midi
! 	-@mkdir -p $(PREFIX)/lib/Plib
  
! install: dirs $(INSTALLDIR)/playmidi $(INSTALLDIR)/splaymidi \
! 	 $(INSTALLDIR)/xplaymidi ${PREFIX}/lib/midi/std.o3 ${PREFIX}/lib/midi/drums.o3 \
! 	 ${PREFIX}/lib/midi/std.sb ${PREFIX}/lib/midi/drums.sb $(XAPPDEFAULTS)/XPlaymidi
  
! install.novga: dirs $(INSTALLDIR)/playmidi \
! 	 $(INSTALLDIR)/xplaymidi ${PREFIX}/lib/midi/std.o3 ${PREFIX}/lib/midi/drums.o3 \
! 	 ${PREFIX}/lib/midi/std.sb ${PREFIX}/lib/midi/drums.sb $(XAPPDEFAULTS)/XPlaymidi
  
! install.noX11: dirs $(INSTALLDIR)/playmidi $(INSTALLDIR)/splaymidi \
! 	 ${PREFIX}/lib/midi/std.o3 ${PREFIX}/lib/midi/drums.o3 ${PREFIX}/lib/midi/std.sb ${PREFIX}/lib/midi/drums.sb
  
! install.Xonly: dirs $(INSTALLDIR)/xplaymidi ${PREFIX}/lib/midi/std.o3 ${PREFIX}/lib/midi/drums.o3 \
! 	 ${PREFIX}/lib/midi/std.sb ${PREFIX}/lib/midi/drums.sb $(XAPPDEFAULTS)/XPlaymidi
! 
! install.lame: dirs $(INSTALLDIR)/playmidi \
! 	 ${PREFIX}/lib/midi/std.o3 ${PREFIX}/lib/midi/drums.o3 ${PREFIX}/lib/midi/std.sb ${PREFIX}/lib/midi/drums.sb
  
  install.man:
! 	${INSTALL_DAT} playmidi.1 ${PREFIX}/man/man1
  
  clean:
  	rm -f *.o playmidi splaymidi xplaymidi a.out
***************
*** 139,160 ****
  distclean: clean
  	rm -f .depend  *~ *.bak playmidi.h config.sed
  
- 
- ifeq (.depend, $(wildcard .depend))
- .depend depend dep: playmidi.h
- 	for i in *.c; do $(CPP) -M $(CFLAGS) $(INCLUDES) $$i; done >.depend
- 
- include .depend
- else
- depend dep:
- 	for i in *.c; do $(CPP) -M $(CFLAGS) $(INCLUDES) $$i; done >.depend
- 
- .depend: playmidi.h
- 	@echo
- 	@echo "Bad or missing .depend running 'make depend clean'"
- 	@echo
- 	$(MAKE) depend clean
- 	@echo
- 	@echo "Successful.  Trying to make again"
- 	@exit 0
- endif
--- 145,147 ----
