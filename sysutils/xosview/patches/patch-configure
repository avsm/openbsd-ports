$OpenBSD: patch-configure,v 1.3 2002/03/18 06:51:24 form Exp $
--- configure.orig	Fri Mar 15 08:28:14 2002
+++ configure	Fri Mar 15 08:32:59 2002
@@ -1869,20 +1869,63 @@ EOF
 
 			host_dir=bsd
 	host_os=freebsd ;;
+
+##  Check for OpenBSD 2.0-2.5
+openbsd2.[012345]*)
+	EXTRALIBS="-lkvm $XPMLIB"
+	INSTALL_ARGS='-s -g kmem -m 02555'
+	cat >> confdefs.h <<\EOF
+#define XOSVIEW_OPENBSD 1
+EOF
+
+	host_dir=bsd
+	host_os=openbsd ;;
+
+openbsd2.[6-9]*)
+	EXTRALIBS="-lkvm $XPMLIB"
+	INSTALL_ARGS='-s -g kmem -m 02555'
+	NetMeter_Default_Setting=True
+	cat >> confdefs.h <<\EOF
+#define XOSVIEW_OPENBSD 1
+#define HAVE_SWAPCTL 1
+EOF
+	## Also check for the existence of UVM.  This is a nasty,
+	## complicated check.  This could be avoided by having the *BSD
+	## platform-specific Makefiles include <bsd.own.mk> on their own.
+
+	cat > confmkfile <<\EOF
+.include <bsd.own.mk>
+all:
+.if defined(UVM) && ${UVM:U} == YES
+	@echo UVMyes
+.endif
+EOF
+	uvmstring=`make -f confmkfile`
+	rm confmkfile
+	if test x$uvmstring != x ; then
+		cat >> confdefs.h <<\EOF
+#define UVM 1
+EOF
+	fi
+
+	host_dir=bsd
+	host_os=openbsd ;;
+
 openbsd*) 
         EXTRALIBS="-lkvm $XPMLIB"
         INSTALL_ARGS='-s -g kmem -m 02555'
 	NetMeter_Default_Setting=True
 	cat >> confdefs.h <<\EOF
 #define XOSVIEW_OPENBSD 1
+#define HAVE_SWAPCTL 1
+#define UVM 1
 EOF
-
-
 	
 	EXTRA_CXXFLAGS="-Wall -O4 -pipe"
 
-			host_dir=bsd
+	host_dir=bsd
 	host_os=openbsd ;;
+
 bsdi*) 
 	EXTRALIBS="-lkvm $XPMLIB"
 	INSTALL_ARGS='-s -g kmem -m 02555'
