$OpenBSD: patch-src_linux_gl_draw_c,v 1.1.1.1 2002/03/04 00:58:00 naddy Exp $
--- src/linux/gl_draw.c.orig	Sun Mar  3 06:41:43 2002
+++ src/linux/gl_draw.c	Sun Mar  3 06:42:10 2002
@@ -125,7 +125,6 @@ extern unsigned char *WinVidMemStart;
 extern unsigned char MMXSupport;
 extern unsigned char NGNoTransp;
 extern unsigned char newengen;
-extern void copy640x480x16bwin(void);
 extern unsigned char SpecialLine[224];	/* 0 if lo-res, > 0 if hi-res */
 
 void gl_clearwin()
@@ -275,8 +274,13 @@ void gl_drawwin()
 		AddEndBytes = 0;
 		NumBytesPerLine = 1024;
 		WinVidMemStart = (void *) glvidbuffer;
+#if defined(ELF)
 		__asm__ __volatile__("call copy640x480x16bwin"
 			::: "memory", "eax", "ebx", "ecx", "edx", "esi", "edi");
+#else
+		__asm__ __volatile__("call _copy640x480x16bwin"
+			::: "memory", "eax", "ebx", "ecx", "edx", "esi", "edi");
+#endif
 
 		/* Display 4 256x256 quads for the 512x448 buffer */
 		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, glfilters);
