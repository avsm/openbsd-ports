--- main.c.orig	Fri Jan 21 17:18:58 2000
+++ main.c	Fri Jan 28 22:34:23 2000
@@ -73,10 +73,21 @@
 #endif
 int real_main(int,char**,char**);
 
+/* Out-of-memory handler for GC. */
+void *
+die_oom(size_t bytes)
+{
+  fprintf(stderr, "Out of memory: %d bytes unavailable!\n", bytes);
+  exit(1);
+}
+
 int
 main(int argc, char **argv, char **envp)
 {
     int dummy;
+
+    /* Set up to die if we run out of memory. */
+    GC_oom_fn = die_oom;
     GC_stackbottom = (ptr_t)(&dummy);
     return(real_main(argc, argv, envp));
 }
