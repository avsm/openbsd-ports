$OpenBSD: patch-src_tftp_c,v 1.8 2011/01/10 22:08:26 ajacoutot Exp $

gcc2 fixes to struct errmess, struct oackmess, struct datamess from kili

--- src/tftp.c.orig	Sun Jun  6 15:22:30 2010
+++ src/tftp.c	Tue Dec 28 18:55:44 2010
@@ -549,7 +549,7 @@ static ssize_t tftp_err(int err, char *packet, char *m
 {
   struct errmess {
     unsigned short op, err;
-    char message[];
+    char message[0];
   } *mess = (struct errmess *)packet;
   ssize_t ret = 4;
   char *errstr = strerror(errno);
@@ -576,7 +576,7 @@ static ssize_t get_block(char *packet, struct tftp_tra
       char *p;
       struct oackmess {
 	unsigned short op;
-	char data[];
+	char data[0];
       } *mess = (struct oackmess *)packet;
       
       p = mess->data;
@@ -599,7 +599,7 @@ static ssize_t get_block(char *packet, struct tftp_tra
       /* send data packet */
       struct datamess {
 	unsigned short op, block;
-	unsigned char data[];
+	unsigned char data[0];
       } *mess = (struct datamess *)packet;
       
       size_t size = transfer->file->size - transfer->offset; 
