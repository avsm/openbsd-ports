$OpenBSD: patch-configure,v 1.11 2008/05/09 10:51:45 bernd Exp $
--- configure.orig	Tue Nov 27 00:20:34 2007
+++ configure	Wed May  7 16:40:01 2008
@@ -30752,7 +30752,6 @@ if test x$with_tcp_wrappers = xno ; then
 else
   { echo "$as_me:$LINENO: checking whether to use TCP wrappers" >&5
 echo $ECHO_N "checking whether to use TCP wrappers... $ECHO_C" >&6; }
-  LIBWRAP_PATH=""
   case "$host" in
     *-*-solaris*)
 	if test -f /usr/sfw/lib/libwrap.so; then
@@ -30973,7 +30972,6 @@ else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-	LIBWRAP_PATH=""
 fi
 
 rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
@@ -32757,7 +32755,7 @@ fi
 #
 # Define some variables to represent the directories we use.
 #
-authdir=${localstatedir}/gdm
+authdir=${localstatedir}/db/gdm
 
 gdmlocaledir=${gdmconfdir}
 
@@ -33458,11 +33456,11 @@ case "$host" in
 	;;
 *)
 	HOST_GDM_USER_PATH="/bin:/usr/bin"
-	HOST_HALT_COMMAND="/usr/bin/poweroff;/sbin/poweroff;/sbin/shutdown -h now;/usr/sbin/shutdown -h now"
+	HOST_HALT_COMMAND="/sbin/halt -p;/usr/bin/poweroff;/sbin/poweroff;/sbin/shutdown -h now;/usr/sbin/shutdown -h now"
 	HOST_REBOOT_COMMAND="/usr/bin/reboot;/sbin/reboot;/sbin/shutdown -r now;/usr/sbin/shutdown -r now"
-	HOST_SUSPEND_COMMAND=""
+	HOST_SUSPEND_COMMAND="/usr/sbin/zzz"
 	HOST_XSESSION_SHELL=/bin/sh
-	HOST_SOUND_PROGRAM=/usr/bin/play
+	HOST_SOUND_PROGRAM=$(prefix)/bin/play
 	HOST_GDMGNOMESESSIONCMD=gnome-session
 	HOST_UTMP_LINE_ATTACHED="/dev/console"
 	HOST_UTMP_LINE_REMOTE=""
@@ -33565,6 +33563,12 @@ else
    GDM_USER_PATH="$GDM_USER_PATH:/usr/bin/X11:/usr/X11R6/bin:/usr/local/bin:/opt/X11R6/bin"
    X_CONFIG_OPTIONS="-audit 0"
 fi
+
+case $host in
+    i386-*-openbsd*|amd64-*-openbsd*)
+        X_CONFIG_OPTIONS="$X_CONFIG_OPTIONS vt5"
+        ;;
+esac
 
 # Don't add bindir to GDM_USER_PATH if it is already in the PATH.
 # If it is /bin or /usr/bin, for example.
