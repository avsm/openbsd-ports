$OpenBSD: patch-j2se_src_share_native_java_lang_fdlibm_include_fdlibm_h,v 1.1 2007/09/06 15:46:19 kurt Exp $
--- j2se/src/share/native/java/lang/fdlibm/include/fdlibm.h.orig	Thu Jul  5 05:03:00 2007
+++ j2se/src/share/native/java/lang/fdlibm/include/fdlibm.h	Fri Jul 27 18:24:52 2007
@@ -25,17 +25,13 @@
  *
  */
 
+#ifdef __OpenBSD__
+#include <sys/types.h>
+#endif
+#include <machine/endian.h>
 #include "jfdlibm.h"
 
-#ifdef __NEWVALID	/* special setup for Sun test regime */
-#if defined(i386) || defined(i486) || \
-	defined(intel) || defined(x86) || \
-        defined(i86pc) || defined(_M_IA64)
-#define _LITTLE_ENDIAN
-#endif
-#endif
-
-#ifdef _LITTLE_ENDIAN
+#if (BYTE_ORDER == LITTLE_ENDIAN)
 #define __HI(x) *(1+(int*)&x)
 #define __LO(x) *(int*)&x
 #define __HIp(x) *(1+(int*)x)
@@ -47,10 +43,12 @@
 #define __LOp(x) *(1+(int*)x)
 #endif
 
+#ifndef __P
 #ifdef __STDC__
 #define	__P(p)	p
 #else
 #define	__P(p)	()
+#endif
 #endif
 
 /*
