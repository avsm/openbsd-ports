$OpenBSD: patch-jdk_src_solaris_native_java_io_io_util_md_c,v 1.1 2008/03/19 18:05:46 kurt Exp $
--- jdk/src/solaris/native/java/io/io_util_md.c.orig	Tue Dec  4 04:05:20 2007
+++ jdk/src/solaris/native/java/io/io_util_md.c	Wed Dec  5 17:39:42 2007
@@ -36,7 +36,7 @@ fileOpen(JNIEnv *env, jobject this, jstring path, jfie
     WITH_PLATFORM_STRING(env, path, ps) {
         FD fd;
 
-#ifdef __linux__
+#if defined(__linux__) || defined(_ALLBSD_SOURCE)
         /* Remove trailing slashes, since the kernel won't */
         char *p = (char *)ps + strlen(ps) - 1;
         while ((p > ps) && (*p == '/'))
