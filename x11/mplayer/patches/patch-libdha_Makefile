$OpenBSD: patch-libdha_Makefile,v 1.7 2002/08/18 11:26:48 espie Exp $
--- libdha/Makefile.orig	Wed Jul  3 20:59:47 2002
+++ libdha/Makefile	Tue Aug  6 22:51:05 2002
@@ -7,9 +7,13 @@ VERSION = 0.1
 ifeq ($(TARGET_OS),CYGWIN)
 SHORTNAME = libdha.dll
 else
+ifeq ($(TARGET_OS),OpenBSD)
+SHORTNAME = libdha.so.0.1
+else
 SHORTNAME = libdha.so
 endif
-LIBNAME = libdha-$(VERSION).so
+endif
+LIBNAME = $(SHORTNAME)
 
 SRCS=libdha.c mtrr.c pci.c pci_names.c
 OBJS=$(SRCS:.c=.o)
@@ -27,13 +31,12 @@ endif
 # .PHONY: all clean
 
 .c.o:
-	$(CC) -c $(CFLAGS) -o $@ $<
+	PATH=/bin:/usr/bin $(CC) -c $(CFLAGS) -o $@ $<
 
 $(LIBNAME):     $(OBJS)
 	$(CC) -shared -o $(LIBNAME) $(OBJS) $(LIBS)
-	ln -sf $(LIBNAME) $(SHORTNAME)
 
-all:    $(LIBNAME) $(SHORTNAME)
+all:    $(LIBNAME)
 
 pci_names.c:
 	$(AWK) -f pci_db2c.awk oth/pci.db
@@ -56,8 +59,8 @@ depend:
 install:
 	mkdir -p $(prefix)/lib
 	install -m 755 -s -p $(LIBNAME) $(prefix)/lib/$(LIBNAME)
-	rm -f $(prefix)/lib/libdha.so
-	ln -sf $(LIBNAME) $(prefix)/lib/$(SHORTNAME)
+#	rm -f $(prefix)/lib/libdha.so
+#	ln -sf $(LIBNAME) $(prefix)/lib/$(SHORTNAME)
 ifeq ($(TARGET_OS),OpenBSD)
 	ldconfig -R
 else
