$OpenBSD: patch-hotspot_src_os_bsd_vm_os_bsd_cpp,v 1.12 2008/03/17 03:21:25 kurt Exp $
--- hotspot/src/os/bsd/vm/os_bsd.cpp.orig	Tue Feb 26 13:08:40 2008
+++ hotspot/src/os/bsd/vm/os_bsd.cpp	Tue Feb 26 13:11:24 2008
@@ -381,7 +381,11 @@ void os::Bsd::initialize_system_info() {
   int mib[2];
   size_t len;
   int cpu_val;
+#ifdef HW_USERMEM64
+  int64_t mem_val;
+#else
   u_long mem_val;
+#endif
 
   /* get processors count via hw.ncpus sysctl */
   mib[0] = CTL_HW;
@@ -396,7 +400,11 @@ void os::Bsd::initialize_system_info() {
    * instead of hw.physmem because we need size of allocatable memory
    */
   mib[0] = CTL_HW;
+#ifdef HW_USERMEM64
+  mib[1] = HW_USERMEM64;
+#else
   mib[1] = HW_USERMEM;
+#endif
   len = sizeof(mem_val);
   if (sysctl(mib, 2, &mem_val, &len, NULL, 0) != -1)
 	_physical_memory = mem_val;
