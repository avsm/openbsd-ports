$OpenBSD: patch-Makefile,v 1.6 2009/04/02 13:24:30 jasper Exp $
--- Makefile.orig	Mon Dec 29 17:34:19 2008
+++ Makefile	Thu Apr  2 15:23:45 2009
@@ -1,14 +1,24 @@
 objects := $(patsubst %.c,%.o,$(wildcard *.c))
 
-CFLAGS= -Os -s -Wall -DNUTDIR=\".nutdb\" -DFOODDIR=\"/usr/local/lib/nut\" -ansi -pedantic
+CFLAGS+= -Wall -pedantic -ansi -DNUTDIR=\".nutdb\" -DFOODDIR=\"$(PREFIX)/lib/nutdb\"
 
 nut:	$(objects)
-	$(CC) ${CFLAGS} -o nut $(LDFLAGS) $(objects) -lm
+	$(CC) ${CFLAGS} -o nut $(objects) -lm
 
+anameal.o: anameal.c
+	${CC} ${CFLAGS} $(EXTRA_CFLAGS) -c $< -o $@
+
+food.o: food.c
+	${CC} ${CFLAGS} $(EXTRA_CFLAGS) -c $< -o $@
+
 deps:
 	makedepend *.c
 
 clean:
 	rm -f *.o nut preprocess/*.o preprocess/dbjw
 
-# DO NOT DELETE
+install:
+	mkdir $(PREFIX)/lib/nutdb/
+	${BSD_INSTALL_PROGRAM} nut $(PREFIX)/bin/nutdb
+	${BSD_INSTALL_MAN} nut.1 $(PREFIX)/man/man1/nutdb.1
+	${BSD_INSTALL_DATA} raw.data/* $(PREFIX)/lib/nutdb/
