$OpenBSD: patch-j2se_src_solaris_native_com_sun_security_auth_module_Unix_c,v 1.1 2007/09/06 15:46:19 kurt Exp $
--- j2se/src/solaris/native/com/sun/security/auth/module/Unix.c.orig	Thu Jul  5 05:03:37 2007
+++ j2se/src/solaris/native/com/sun/security/auth/module/Unix.c	Fri Jul 27 18:25:14 2007
@@ -36,6 +36,12 @@
 #include <stdlib.h>
 #include <string.h>
 
+// hack in the non-thread safe version and fix later.
+#ifdef __OpenBSD__
+#define getpwuid_r(uid, res_buf,  pwd_buf, bufsize, result) \
+    (*result = getpwuid(uid))
+#endif
+
 JNIEXPORT void JNICALL 
 Java_com_sun_security_auth_module_UnixSystem_getUnixInfo
 						(JNIEnv *env, jobject obj) {
