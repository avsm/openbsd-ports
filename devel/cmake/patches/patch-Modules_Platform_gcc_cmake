$OpenBSD: patch-Modules_Platform_gcc_cmake,v 1.1 2007/06/18 11:52:26 ajacoutot Exp $
--- Modules/Platform/gcc.cmake.orig	Mon Jun 18 13:25:47 2007
+++ Modules/Platform/gcc.cmake	Mon Jun 18 13:27:30 2007
@@ -2,8 +2,8 @@ IF(CMAKE_COMPILER_IS_GNUCC)
   SET (CMAKE_C_FLAGS_INIT "")
   SET (CMAKE_C_FLAGS_DEBUG_INIT "-g")
   SET (CMAKE_C_FLAGS_MINSIZEREL_INIT "-Os -DNDEBUG")
-  SET (CMAKE_C_FLAGS_RELEASE_INIT "-O3 -DNDEBUG")
-  SET (CMAKE_C_FLAGS_RELWITHDEBINFO_INIT "-O2 -g")
+  SET (CMAKE_C_FLAGS_RELEASE_INIT "$ENV{CFLAGS} -DNDEBUG")
+  SET (CMAKE_C_FLAGS_RELWITHDEBINFO_INIT "$ENV{CFLAGS} -g")
   SET (CMAKE_C_CREATE_PREPROCESSED_SOURCE "<CMAKE_C_COMPILER> <FLAGS> -E <SOURCE> > <PREPROCESSED_SOURCE>")
   SET (CMAKE_C_CREATE_ASSEMBLY_SOURCE "<CMAKE_C_COMPILER> <FLAGS> -S <SOURCE> -o <ASSEMBLY_SOURCE>")
   SET (CMAKE_INCLUDE_SYSTEM_FLAG_C "-isystem ")
@@ -13,8 +13,8 @@ IF(CMAKE_COMPILER_IS_GNUCXX)
   SET (CMAKE_CXX_FLAGS_INIT "")
   SET (CMAKE_CXX_FLAGS_DEBUG_INIT "-g")
   SET (CMAKE_CXX_FLAGS_MINSIZEREL_INIT "-Os -DNDEBUG")
-  SET (CMAKE_CXX_FLAGS_RELEASE_INIT "-O3 -DNDEBUG")
-  SET (CMAKE_CXX_FLAGS_RELWITHDEBINFO_INIT "-O2 -g")
+  SET (CMAKE_CXX_FLAGS_RELEASE_INIT "$ENV{CXXFLAGS} -DNDEBUG")
+  SET (CMAKE_CXX_FLAGS_RELWITHDEBINFO_INIT "$ENV{CXXFLAGS} -g")
   SET (CMAKE_CXX_CREATE_PREPROCESSED_SOURCE "<CMAKE_CXX_COMPILER> <FLAGS> -E <SOURCE> > <PREPROCESSED_SOURCE>")
   SET (CMAKE_CXX_CREATE_ASSEMBLY_SOURCE "<CMAKE_CXX_COMPILER> <FLAGS> -S <SOURCE> -o <ASSEMBLY_SOURCE>")
   SET (CMAKE_INCLUDE_SYSTEM_FLAG_CXX "-isystem ")
