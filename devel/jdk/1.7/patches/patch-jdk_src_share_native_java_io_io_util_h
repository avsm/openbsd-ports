$OpenBSD: patch-jdk_src_share_native_java_io_io_util_h,v 1.1 2008/03/19 18:05:46 kurt Exp $
--- jdk/src/share/native/java/io/io_util.h.orig	Tue Oct 30 05:03:37 2007
+++ jdk/src/share/native/java/io/io_util.h	Wed Nov  7 18:16:18 2007
@@ -29,7 +29,15 @@
 extern jfieldID IO_fd_fdID;
 extern jfieldID IO_handle_fdID;
 
-#if !defined(O_DSYNC) || !defined(O_SYNC)
+#ifdef _ALLBSD_SOURCE
+#include <fcntl.h>
+#ifndef O_SYNC
+#define O_SYNC  O_FSYNC
+#endif
+#ifndef O_DSYNC
+#define O_DSYNC O_FSYNC
+#endif
+#elif !defined(O_DSYNC) || !defined(O_SYNC)
 #define O_SYNC  (0x0800)
 #define O_DSYNC (0x2000)
 #endif
