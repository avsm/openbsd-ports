$OpenBSD: patch-binutils_objcopy_c,v 1.5 2003/10/11 00:52:22 brad Exp $
--- binutils/objcopy.c.orig	2003-06-02 16:35:15.000000000 -0400
+++ binutils/objcopy.c	2003-09-04 02:03:35.000000000 -0400
@@ -1364,7 +1364,7 @@ copy_archive (ibfd, obfd, output_target)
     } *list, *l;
   bfd **ptr = &obfd->archive_head;
   bfd *this_element;
-  char *dir = make_tempname (bfd_get_filename (obfd));
+  char *dir = make_tempname (bfd_get_filename (obfd), 1);
 
   /* Make a temp directory to hold the contents.  */
   if (MKDIR (dir, 0700) != 0)
@@ -1396,7 +1396,7 @@ copy_archive (ibfd, obfd, output_target)
       /* If the file already exists, make another temp dir.  */
       if (stat (output_name, &buf) >= 0)
 	{
-	  output_name = make_tempname (output_name);
+	  output_name = make_tempname (output_name, 1);
 	  if (MKDIR (output_name, 0700) != 0)
 	    {
 	      fatal (_("cannot mkdir %s for archive copying (error: %s)"),
@@ -2204,7 +2204,7 @@ strip_main (argc, argv)
       if (output_file != NULL)
 	tmpname = output_file;
       else
-	tmpname = make_tempname (argv[i]);
+	tmpname = make_tempname (argv[i], 0);
       status = 0;
 
       copy_file (argv[i], tmpname, input_target, output_target);
@@ -2738,7 +2738,7 @@ copy_main (argc, argv)
   if ((output_filename == (char *) NULL) ||
       (strcmp (input_filename, output_filename) == 0))
     {
-      char *tmpname = make_tempname (input_filename);
+      char *tmpname = make_tempname (input_filename, 0);
 
       copy_file (input_filename, tmpname, input_target, output_target);
       if (status == 0)
