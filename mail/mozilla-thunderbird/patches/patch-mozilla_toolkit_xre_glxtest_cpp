$OpenBSD: patch-mozilla_toolkit_xre_glxtest_cpp,v 1.1 2011/08/23 20:19:33 landry Exp $
https://bugzilla.mozilla.org/show_bug.cgi?id=681026
--- mozilla/toolkit/xre/glxtest.cpp.orig	Fri Aug 12 16:16:45 2011
+++ mozilla/toolkit/xre/glxtest.cpp	Mon Aug 22 22:12:40 2011
@@ -51,6 +51,8 @@
 // which runs the glxtest() static function. This creates a X connection, a GLX context, calls glGetString, and writes that
 // to the 'write' end of the pipe.
 
+#include <sys/types.h>
+#include <sys/wait.h>
 #include <cstdio>
 #include <cstdlib>
 #include <unistd.h>
@@ -224,6 +226,7 @@ static void glxtest()
 void fire_glxtest_process()
 {
   int pfd[2];
+  int status;
   if (pipe(pfd) == -1) {
       perror("pipe");
       exit(EXIT_FAILURE);
@@ -244,4 +247,5 @@ void fire_glxtest_process()
   close(pfd[1]);
   mozilla::widget::glxtest_pipe = pfd[0];
   mozilla::widget::glxtest_pid = pid;
+  waitpid(pid, &status, 0);
 }
