*** ./config.guess.orig	Wed Feb 18 13:03:20 1998
--- ./config.guess	Thu Jul 15 11:43:42 1999
***************
*** 284,289 ****
--- 284,292 ----
      i[34]86:BSD/386:*:* | *:BSD/OS:*:*)
  	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
  	exit 0 ;;
+     *:OpenBSD:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-openbsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+ 	exit 0 ;;
      *:FreeBSD:*:*)
  	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
  	exit 0 ;;
*** ./config.h.orig	Mon Mar 22 09:44:40 1999
--- ./config.h	Thu Jul 15 11:43:42 1999
***************
*** 36,42 ****
  #ifndef vic_config_h
  #define vic_config_h
  
! #if defined(sgi) || defined(__bsdi__) || defined(__FreeBSD__) 
  # include <sys/types.h>
  #elif defined(sun)
  #include <sys/types.h>
--- 36,42 ----
  #ifndef vic_config_h
  #define vic_config_h
  
! #if defined(sgi) || defined(__bsdi__) || defined(__FreeBSD__) || defined(__FreeBSD__)
  # include <sys/types.h>
  #elif defined(sun)
  #include <sys/types.h>
***************
*** 94,100 ****
  #include <arpa/inet.h>
  int strcasecmp(const char *, const char *);
  clock_t clock(void);
! #if !defined(sco) && !defined(sgi) && !defined(__bsdi__) && !defined(__FreeBSD__) && !defined(sun) && !defined(__linux__)
  int gethostid(void);
  #endif
  time_t time(time_t *);
--- 94,100 ----
  #include <arpa/inet.h>
  int strcasecmp(const char *, const char *);
  clock_t clock(void);
! #if !defined(sco) && !defined(sgi) && !defined(__bsdi__) && !defined(__FreeBSD__) && !defined(sun) && !defined(__linux__) && !defined(__OpenBSD__)
  int gethostid(void);
  #endif
  time_t time(time_t *);
*** ./configure.in.tk.orig	Fri Apr 23 09:42:57 1999
--- ./configure.in.tk	Thu Jul 15 11:43:42 1999
***************
*** 22,29 ****
  		echo "can't find tcl.h in $d/include"
  		exit 1
  	fi
! 	places="$d/lib/libtcl8.0.so \
! 		$d/lib/libtcl8.0.a \
  		$d/lib/libtcl.so \
  		$d/lib/libtcl.a"
  	V_LIB_TCL=FAIL
--- 22,29 ----
  		echo "can't find tcl.h in $d/include"
  		exit 1
  	fi
! 	places="$d/lib/libtcl80.so \
! 		$d/lib/libtcl80.a \
  		$d/lib/libtcl.so \
  		$d/lib/libtcl.a"
  	V_LIB_TCL=FAIL
***************
*** 78,84 ****
  			exit 1
  		fi
  	fi
! 	AC_CHECK_LIB(tcl8.0, main, V_LIB_TCL="-ltcl8.0", V_LIB_TCL="FAIL")
  	if test "$V_LIB_TCL" = FAIL; then
  		echo "checking for libtcl.a"
  		places="$PWD/../tcl8.0/unix \
--- 78,84 ----
  			exit 1
  		fi
  	fi
! 	AC_CHECK_LIB(tcl80, main, V_LIB_TCL="-ltcl80", V_LIB_TCL="FAIL")
  	if test "$V_LIB_TCL" = FAIL; then
  		echo "checking for libtcl.a"
  		places="$PWD/../tcl8.0/unix \
***************
*** 96,103 ****
  			/import/tcl/lib/tcl8.0 \
  			"
  		for dir in $places; do
! 			if test -r $dir/libtcl8.0.so -o -r $dir/libtcl8.0.a; then
! 				V_LIB_TCL="-L$dir -ltcl8.0"
  				break
  			fi
  			if test -r $dir/libtcl.so -o -r $dir/libtcl.a; then
--- 96,103 ----
  			/import/tcl/lib/tcl8.0 \
  			"
  		for dir in $places; do
! 			if test -r $dir/libtcl80.so -o -r $dir/libtcl80.a; then
! 				V_LIB_TCL="-L$dir -ltcl80"
  				break
  			fi
  			if test -r $dir/libtcl.so -o -r $dir/libtcl.a; then
***************
*** 160,167 ****
  		echo "can't find tk.h in $d/include"
  		exit 1
  	fi
! 	places="$d/lib/libtk8.0.so \
! 		$d/lib/libtk8.0.a \
  		$d/lib/libtk.so \
  		$d/lib/libtk.a"
  	V_LIB_TK=FAIL
--- 160,167 ----
  		echo "can't find tk.h in $d/include"
  		exit 1
  	fi
! 	places="$d/lib/libtk80.so \
! 		$d/lib/libtk80.a \
  		$d/lib/libtk.so \
  		$d/lib/libtk.a"
  	V_LIB_TK=FAIL
***************
*** 197,202 ****
--- 197,203 ----
  	                $PWD/../tk-8.0/generic \
         		        $PWD/../tk/generic \
         		        /cs/research/mice/starship/common/$OPSYS/include \
+ 			/usr/local/include/tk8.0 \
  			/usr/local/include \
  			$prefix/include \
  			/usr/contrib/include \
***************
*** 219,225 ****
  			exit 1
  		fi
  	fi
! 	AC_CHECK_LIB(tk8.0, main, V_LIB_TK="-ltk8.0", V_LIB_TK="FAIL")
  	if test "$V_LIB_TK" = FAIL; then
  		echo "checking for libtk.a"
  		places="$PWD/../tk8.0/unix \
--- 220,226 ----
  			exit 1
  		fi
  	fi
! 	AC_CHECK_LIB(tk80, main, V_LIB_TK="-ltk80", V_LIB_TK="FAIL")
  	if test "$V_LIB_TK" = FAIL; then
  		echo "checking for libtk.a"
  		places="$PWD/../tk8.0/unix \
***************
*** 236,243 ****
  			$prefix/lib \
  			$x_libraries"
  		for dir in $places; do
! 			if test -r $dir/libtk8.0.so -o -r $dir/libtk8.0.a; then
! 				V_LIB_TK="-L$dir -ltk8.0"
  				break
  			fi
  			if test -r $dir/libtk.so -o -r $dir/libtk.a; then
--- 237,244 ----
  			$prefix/lib \
  			$x_libraries"
  		for dir in $places; do
! 			if test -r $dir/libtk80.so -o -r $dir/libtk80.a; then
! 				V_LIB_TK="-L$dir -ltk80"
  				break
  			fi
  			if test -r $dir/libtk.so -o -r $dir/libtk.a; then
*** ./net.cc.orig	Thu Jul 15 11:47:17 1999
--- ./net.cc	Thu Jul 15 11:47:41 1999
***************
*** 346,352 ****
  	sockaddr_in sfrom;
  	int fromlen = sizeof(sfrom);
  	int cc = ::recvfrom(fd, (char*)buf, len, 0,
! 			    (sockaddr*)&sfrom, &fromlen);
  	if (cc < 0) {
  		if (errno != EWOULDBLOCK)
  			perror("recvfrom");
--- 346,352 ----
  	sockaddr_in sfrom;
  	int fromlen = sizeof(sfrom);
  	int cc = ::recvfrom(fd, (char*)buf, len, 0,
! 			    (sockaddr*)&sfrom, (socklen_t *)&fromlen);
  	if (cc < 0) {
  		if (errno != EWOULDBLOCK)
  			perror("recvfrom");
*** ./net-ip.cc.orig	Thu Jul 15 11:47:54 1999
--- ./net-ip.cc	Thu Jul 15 11:48:12 1999
***************
*** 248,254 ****
  	p->sin_family = AF_INET;
  	int len = sizeof(*p), result =0;
  
! 	if ((result = getsockname(ssock_, (struct sockaddr *)p, &len)) < 0) {
  		perror("getsockname");
  		p->sin_addr.s_addr = 0;
  		p->sin_port = 0;
--- 248,254 ----
  	p->sin_family = AF_INET;
  	int len = sizeof(*p), result =0;
  
! 	if ((result = getsockname(ssock_, (struct sockaddr *)p, (socklen_t *) &len)) < 0) {
  		perror("getsockname");
  		p->sin_addr.s_addr = 0;
  		p->sin_port = 0;
***************
*** 471,477 ****
  	sockaddr_in sfrom;
  	int fromlen = sizeof(sfrom);
  	int cc = ::recvfrom(fd, (char*)buf, len, 0,
! 			    (sockaddr*)&sfrom, &fromlen);
  	if (cc < 0) {
  		if (errno != EWOULDBLOCK)
  			perror("recvfrom");
--- 471,477 ----
  	sockaddr_in sfrom;
  	int fromlen = sizeof(sfrom);
  	int cc = ::recvfrom(fd, (char*)buf, len, 0,
! 			    (sockaddr*)&sfrom, (socklen_t *) &fromlen);
  	if (cc < 0) {
  		if (errno != EWOULDBLOCK)
  			perror("recvfrom");
*** ./grabber-x11.cc.orig	Thu Jul 15 11:52:06 1999
--- ./grabber-x11.cc	Thu Jul 15 11:53:09 1999
***************
*** 46,51 ****
--- 46,56 ----
  #include <X11/Xutil.h>
  #include <X11/Xatom.h>
  #include <X11/cursorfont.h>
+ 
+ #ifdef USE_SHM
+ #include <X11/extensions/XShm.h>
+ #endif
+ 
  #include <tk.h>
  /*** #include "sized_types.h" ***/
  
*** ./grabber-meteor.cc.orig	Thu Jul 15 11:53:27 1999
--- ./grabber-meteor.cc	Thu Jul 15 11:57:22 1999
***************
*** 192,198 ****
  	return (InputDevice::command(argc, argv));
  }
  
! MeteorGrabber::MeteorGrabber(const char* name, const char* format)
  {
  	count = 0;
  
--- 192,198 ----
  	return (InputDevice::command(argc, argv));
  }
  
! MeteorGrabber::MeteorGrabber(const char* name)
  {
  	count = 0;
  
***************
*** 476,481 ****
--- 476,482 ----
  	}
  	return (Grabber::command(argc, argv));
  }
+ }
  
  #define U 0
  #define Y0 1
***************
*** 503,509 ****
  	if (center < 0) \
  		center = -center;
  
! void MeteorGrabber::suppress(const u_char* devbuf, int is)
  {
  	const u_char* start = frame_ + 16 * vstart_ * outw_ + 16 * hstart_;
  	REPLENISH(devbuf, start, is, 2,
--- 504,510 ----
  	if (center < 0) \
  		center = -center;
  
! void MeteorGrabber::suppress(const unsigned char* devbuf, int is)
  {
  	const u_char* start = frame_ + 16 * vstart_ * outw_ + 16 * hstart_;
  	REPLENISH(devbuf, start, is, 2,
