--- mpeglib/configure.in.in.orig	Sun Feb 17 12:39:29 2002
+++ mpeglib/configure.in.in	Mon Aug  5 16:22:27 2002
@@ -19,7 +19,7 @@ dnl this does not work, but to have no e
 
 dnl Checks for header files.
 AC_CHECK_HEADERS(pthread.h pthread/mit/pthread.h)
-AC_CHECK_HEADERS(sys/soundcard.h machine/soundcard.h linux/soundcard.h)
+AC_CHECK_HEADERS(sys/soundcard.h machine/soundcard.h linux/soundcard.h soundcard.h)
 
 
 AC_C_BIGENDIAN
@@ -197,8 +197,13 @@ AC_MSG_RESULT($OS_TYPE)
 
 case "$ARCH_TYPE" in
   i?86)
-    AC_MSG_RESULT([Found Intel enable MMX support])
-    AC_DEFINE(INTEL,1,[Define if you have an INTEL and may have MMX])
+    case "$OS_TYPE" in
+    OpenBSD) ;;
+    *)
+	AC_MSG_RESULT([Found Intel enable MMX support])
+	AC_DEFINE(INTEL,1,[Define if you have an INTEL and may have MMX])
+	;;
+    esac
     ;; 
 
   *)
@@ -213,6 +218,9 @@ case "$OS_TYPE" in
   FreeBSD)
     kde_mpeglib_compiles=yes
     ;;
+  OpenBSD)
+    kde_mpeglib_compiles=yes
+    ;;
   Linux)
     kde_mpeglib_compiles=yes
     ;;
@@ -242,6 +250,12 @@ case "$OS_TYPE" in
     AC_DEFINE(OS_Linux,1,[Define if you have linux pthread])
     ;;
 
+  OpenBSD)
+    OS_TYPE="BSD"
+    AC_CHECK_LIB(c_r, pthread_create, [LIBPTHREAD="-pthread"])
+    AC_DEFINE(OS_BSD,1,[Define if you have BSD pthread])
+    ;;
+
   FreeBSD)
     OS_TYPE="BSD"
     AC_CHECK_LIB(c_r, pthread_create, [LIBPTHREAD="-lc_r"]) dnl name of pthread lib in FreeBSD
@@ -284,5 +298,5 @@ esac
 
 THIS_LIB_LIBS="-lX11 -lXext -lm -lstdc++ ${XVLIBS} ${DGALIBS} "
 THIS_LIB_LIBS="${THIS_LIB_LIBS} ${XVIDMODELIBS} ${SDLLIB} ${CDDALIBS} "
-THIS_LIB_LIBS="${THIS_LIB_LIBS} ${OGG_VORBISLIBS} ${LIBPTHREAD}"
+THIS_LIB_LIBS="${THIS_LIB_LIBS} ${OGG_VORBISLIBS} ${LIBPTHREAD} ${LIBOSSAUDIO}"
 AC_SUBST(THIS_LIB_LIBS)
