$OpenBSD: patch-src_Unix_configure_in,v 1.1.1.1 2002/05/06 13:41:32 form Exp $
--- src/Unix/configure.in.orig	Fri Mar 15 17:41:29 2002
+++ src/Unix/configure.in	Fri Mar 15 18:00:30 2002
@@ -111,14 +111,23 @@ CXXFLAGS="$CXXFLAGS $X_CFLAGS"
 LIBS="$LIBS $X_PRE_LIBS $X_LIBS -lX11 -lXext $X_EXTRA_LIBS"
 
 dnl We want pthreads. Try libpthread first, then libc_r (FreeBSD), then PTL.
+dnl For OpenBSD we should use -pthread
 HAVE_PTHREADS=yes
-AC_CHECK_LIB(pthread, pthread_create, , [
-  AC_CHECK_LIB(c_r, pthread_create, , [
-    AC_CHECK_LIB(PTL, pthread_create, , [
-      HAVE_PTHREADS=no
+case `uname` in
+  OpenBSD*)
+    LIBS="$LIBS -pthread"
+    ;;
+  *)
+    AC_CHECK_LIB(pthread, pthread_create, , [
+      AC_CHECK_LIB(c_r, pthread_create, , [
+        AC_CHECK_LIB(PTL, pthread_create, , [
+          HAVE_PTHREADS=no
+        ])
+      ])
     ])
-  ])
-])
+    ;;
+esac
+
 if [[ "x$HAVE_PTHREADS" = "xyes" ]]; then
   AC_DEFINE(HAVE_PTHREADS)
 fi
