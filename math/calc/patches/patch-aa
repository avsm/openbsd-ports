--- Makefile.orig	Fri Nov  5 17:05:52 1999
+++ Makefile	Mon Nov  8 12:31:06 1999
@@ -323,9 +323,12 @@
 #ERRNO_DECL= -DERRNO_STD_DECL
 #ERRNO_DECL= -DERRNO_OLD_DECL
 
+# Installation prefix
+PREFIX?= /usr/local
+
 # where to install binary files
 #
-BINDIR= /usr/local/bin
+BINDIR= $(PREFIX)/bin
 #BINDIR= /usr/bin
 #BINDIR= /usr/contrib/bin
 
@@ -339,14 +342,14 @@
 # ${CUSTOMLIBDIR} is where custom lib files are installed.
 # ${CUSTOMHELPDIR} is where custom help files are installed.
 #
-TOPDIR= /usr/local/lib
+TOPDIR= $(PREFIX)/lib
 #TOPDIR= /usr/lib
 #TOPDIR= /usr/libdata
 #TOPDIR= /usr/contrib/lib
 #
 LIBDIR= ${TOPDIR}/calc
 HELPDIR= ${LIBDIR}/help
-INCDIR= /usr/local/include
+INCDIR= $(PREFIX)/include
 INCDIRCALC= ${INCDIR}/calc
 CUSTOMLIBDIR= ${LIBDIR}/custom
 CUSTOMHELPDIR= ${HELPDIR}/custhelp
@@ -355,8 +358,8 @@
 #
 # Use MANDIR= to disable installation of the calc man (source) page.
 #
-MANDIR=
-#MANDIR= /usr/local/man/man1
+#MANDIR=
+MANDIR= $(PREFIX)/man/man1
 #MANDIR= /usr/man/man1
 #MANDIR= /usr/share/man/man1
 #MANDIR= /usr/man/u_man/man1
@@ -453,10 +456,10 @@
 #
 # If in doubt, set USE_READLINE, READLINE_LIB and READLINE_INCLUDE to nothing.
 #
-USE_READLINE=
-#USE_READLINE= -DUSE_READLINE
+#USE_READLINE=
+USE_READLINE= -DUSE_READLINE
 #
-READLINE_LIB=
+READLINE_LIB= -lreadline -lcurses
 #READLINE_LIB= -L/usr/gnu/lib -lreadline -lhistory
 #READLINE_LIB= -lreadline -lhistory
 #READLINE_LIB= -L/usr/local/lib -lreadline -lhistory
@@ -482,7 +485,7 @@
 #DEBUG= -O1 -g3
 #DEBUG= -O2
 #DEBUG= -O2 -g
-DEBUG= -O2 -g3
+#DEBUG= -O2 -g3
 #DEBUG= -O2 -ipa
 #DEBUG= -O2 -g3 -ipa
 #DEBUG= -O3
@@ -656,7 +659,7 @@
 CCOPT= ${DEBUG} ${NO_SHARED}
 CCMISC=
 #
-CFLAGS= ${CCWARN} ${CCOPT} ${CCMISC}
+CFLAGS+= ${CCWARN} ${CCOPT} ${CCMISC}
 ICFLAGS= ${CCWARN} ${CCMISC}
 #
 LCFLAGS=
