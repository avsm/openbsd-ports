$OpenBSD: patch-configure_ac,v 1.3 2007/09/18 18:33:25 naddy Exp $
--- configure.ac.orig	Thu Dec 21 15:20:44 2006
+++ configure.ac	Mon Sep 17 19:44:32 2007
@@ -551,16 +551,7 @@ GST_CHECK_FEATURE(ESD, [ESounD sound daemon], esdsink,
 dnl *** FLAC ***
 translit(dnm, m, l) AM_CONDITIONAL(USE_FLAC, true)
 GST_CHECK_FEATURE(FLAC, [FLAC lossless audio], flac, [
-  GST_CHECK_LIBHEADER(FLAC, FLAC, FLAC__seekable_stream_encoder_new, -lm, FLAC/all.h, FLAC_LIBS="-lFLAC -lm")
-  dnl API change in FLAC 1.1.1, so require that...
-  dnl (this check will also fail with FLAC 1.1.3 which changed API again
-  dnl and with which our plugin does not compile or work yet)
-  if test x$HAVE_FLAC = xyes; then
-    AC_CHECK_DECL(FLAC__SEEKABLE_STREAM_ENCODER_TELL_ERROR,
-                  HAVE_FLAC="yes", HAVE_FLAC="no", [
-#include <FLAC/seekable_stream_encoder.h>
-                  ])
-  fi
+  GST_CHECK_LIBHEADER(FLAC, FLAC, FLAC__stream_encoder_new, -logg -lm, FLAC/all.h, FLAC_LIBS="-lFLAC -logg -lm")
   AC_SUBST(FLAC_LIBS)
 ])
 
@@ -632,7 +623,7 @@ GST_CHECK_FEATURE(LIBDV, [libdv DV demuxer/decoder], d
 dnl *** libpng ***
 translit(dnm, m, l) AM_CONDITIONAL(USE_LIBPNG, true)
 GST_CHECK_FEATURE(LIBPNG, [Portable Network Graphics library], png, [
-  GST_PKG_CHECK_MODULES(LIBPNG, libpng12)
+  GST_PKG_CHECK_MODULES(LIBPNG, libpng)
 ])
 
 dnl *** dv1394 ***
