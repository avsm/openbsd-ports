$OpenBSD: patch-xpcom_reflect_xptcall_src_md_unix_xptc_platforms_unixish_x86_h,v 1.2 2007/04/30 22:40:31 martynas Exp $
--- xpcom/reflect/xptcall/src/md/unix/xptc_platforms_unixish_x86.h.orig	Thu Feb 23 21:37:11 2006
+++ xpcom/reflect/xptcall/src/md/unix/xptc_platforms_unixish_x86.h	Sun Feb 18 11:28:45 2007
@@ -107,12 +107,16 @@
 #define THUNK_BASED_THIS_ADJUST
 
 #elif defined(__OpenBSD__) 
-/* OpenBSD instroduces GCC 2.95.x in late May 1999 */
+#if __GNUC__ >= 3
+#define THUNK_BASED_THIS_ADJUST
+#else
+/* OpenBSD introduces GCC 2.95.x in late May 1999 */
 #include <sys/param.h>
 #if OpenBSD <= 199905
 #define THUNK_BASED_THIS_ADJUST
 #else
 #define CFRONT_STYLE_THIS_ADJUST
+#endif
 #endif
 
 #elif defined(__bsdi__) 
