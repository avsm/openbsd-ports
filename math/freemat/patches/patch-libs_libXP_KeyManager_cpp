$OpenBSD: patch-libs_libXP_KeyManager_cpp,v 1.2 2007/03/24 14:14:50 martynas Exp $
--- libs/libXP/KeyManager.cpp.orig	Tue Jan  9 01:59:38 2007
+++ libs/libXP/KeyManager.cpp	Sat Mar 24 15:46:48 2007
@@ -152,7 +152,7 @@ int KeyManager::DisplayedStringWidth(string s, int nc,
 
 void KeyManager::InsertString(int pos, string s) {
   int len = s.size();
-  for (int i=4096-len;i>pos;i--)
+  for (int i=4096-len;i>pos && i>=len;i--)
     lineData[i] = lineData[i-len];
   const char* sptr = s.c_str();
   for (int i=0;i<len;i++)
