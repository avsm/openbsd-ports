$OpenBSD: patch-src_kernel_qdnd_x11_cpp,v 1.2 2003/02/09 19:16:17 espie Exp $
--- src/kernel/qdnd_x11.cpp.orig	Thu Feb  6 12:26:53 2003
+++ src/kernel/qdnd_x11.cpp	Thu Feb  6 18:59:58 2003
@@ -246,7 +246,6 @@ static const char* const default_pm[] = 
 };
 
 class QShapedPixmapWidget : public QWidget {
-    QPixmap pixmap;
 public:
     QShapedPixmapWidget(int screen = -1) :
 	QWidget(QApplication::desktop()->screen( screen ),
@@ -256,18 +255,13 @@ public:
 
     void setPixmap(QPixmap pm)
     {
-	pixmap = pm;
-	if ( pixmap.mask() ) {
-	    setMask( *pixmap.mask() );
+	if ( pm.mask() ) {
+	    setMask( *pm.mask() );
 	} else {
 	    clearMask();
 	}
 	resize(pm.width(),pm.height());
-    }
-
-    void paintEvent(QPaintEvent*)
-    {
-	bitBlt(this,0,0,&pixmap);
+	setErasePixmap(pm);
     }
 };
 
