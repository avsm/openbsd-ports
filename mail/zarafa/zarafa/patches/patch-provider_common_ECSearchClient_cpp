$OpenBSD: patch-provider_common_ECSearchClient_cpp,v 1.2 2011/03/03 13:16:05 ajacoutot Exp $
--- provider/common/ECSearchClient.cpp.orig	Mon Jan 24 16:55:05 2011
+++ provider/common/ECSearchClient.cpp	Tue Jan 25 12:56:18 2011
@@ -130,7 +130,9 @@ ECRESULT ECSearchClient::Query(std::string &strQuery, 
 	ECRESULT er = erSuccess;
 	ECSearchResultArray *lpResults = NULL;
 	std::vector<std::string> lstResponse;
+#ifndef __OpenBSD__
 	locale_t loc = createlocale(LC_NUMERIC, "C");
+#endif
 
 	if (!lppsResults) {
 		er = ZARAFA_E_INVALID_PARAMETER;
@@ -178,7 +180,11 @@ ECRESULT ECSearchClient::Query(std::string &strQuery, 
 
 		memcpy(lpResults->__ptr[i].sEntryId.__ptr, strEntryId.c_str(), strEntryId.size());
 
+#ifndef __OpenBSD__
 		lpResults->__ptr[i].fScore = strtod_l(tmp[1].c_str(), NULL, loc);
+#else
+		lpResults->__ptr[i].fScore = strtod(tmp[1].c_str(), NULL);
+#endif
 		lpResults->__size++;
 	}
 
@@ -189,7 +195,9 @@ exit:
 	if ((er != erSuccess) && lpResults)
 		FreeSearchResults(lpResults);
 
+#ifndef __OpenBSD__
 	freelocale(loc);
+#endif
 
 	return er;
 }
