--- lib/readline/readline.c.orig	Wed May 24 10:43:28 1995
+++ lib/readline/readline.c	Thu Nov 25 17:18:33 1999
@@ -958,7 +958,7 @@
 static void
 readline_initialize_everything ()
 {
-  char *t;
+  char *t, *t1;
 
   /* Find out if we are running in Emacs. */
   running_in_emacs = getenv ("EMACS") != (char *)0;
@@ -993,8 +993,11 @@
   /* Check for LC_CTYPE and use its value to decide the defaults for
      8-bit character input and output. */
   t = getenv ("LC_CTYPE");
-  if (t && (strcmp (t, "iso-8859-1") == 0 || strcmp (t, "iso_8859_1") == 0 ||
-  	    strcmp (t, "ISO-8859-1") == 0))
+  t1 = getenv ("LANG");
+  if (t && (strstr (t, "8859-1") != NULL || strstr (t, "8859_1") != NULL ||
+	  strstr (t, "KOI8-R") != NULL || strstr (t, "koi8-r") != NULL) ||
+      t1 && (strstr (t1, "8859-1") != NULL || strstr (t1, "8859_1") != NULL ||
+	   strstr (t1, "KOI8-R") != NULL || strstr (t1, "koi8-r") != NULL))
     {
       _rl_meta_flag = 1;
       _rl_convert_meta_chars_to_ascii = 0;
