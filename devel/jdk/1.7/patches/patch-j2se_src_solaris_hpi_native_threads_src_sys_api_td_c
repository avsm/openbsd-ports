$OpenBSD: patch-j2se_src_solaris_hpi_native_threads_src_sys_api_td_c,v 1.1 2007/09/06 15:46:19 kurt Exp $
--- j2se/src/solaris/hpi/native_threads/src/sys_api_td.c.orig	Thu Jul  5 05:03:37 2007
+++ j2se/src/solaris/hpi/native_threads/src/sys_api_td.c	Fri Jul 27 18:25:14 2007
@@ -39,6 +39,10 @@
 #include <sys/ioctl.h>
 #endif
 
+#ifdef __OpenBSD__
+#include <sys/ioctl.h>
+#endif
+
 #include <sys/socket.h>
 #include <setjmp.h>
 #include <signal.h>
@@ -54,6 +58,10 @@
 #include "mutex_md.h"
 
 #if defined(__solaris__) && defined(NO_INTERRUPTIBLE_IO)
+#error If there was no policy change, this could be a makefile error.
+#endif
+
+#if defined(_ALLBSD_SOURCE) && defined(NO_INTERRUPTIBLE_IO)
 #error If there was no policy change, this could be a makefile error.
 #endif
 
