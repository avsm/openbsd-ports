#!/bin/sh
#
# $OpenBSD: x11vnc.rc,v 1.4 2010/12/24 10:40:06 ajacoutot Exp $

. /etc/rc.d/rc.subr

daemon="${TRUEPREFIX}/bin/x11vnc"
daemon_flags="-localhost -logfile /var/log/x11vnc -ncache 0 -display :0 -forever -loop100 -auth /etc/X11/xdm/authdir/authfiles/A:0-*"

rc_conf

rc_reload=NO

rc_start() {
	type rc_pre >/dev/null && rc_pre
	su -l -c ${daemon_class} -s ${daemon_shell} ${daemon_user} \
		-c "${daemon} ${daemon_flags}" >/dev/null 2>&1 &
}

rc_cmd $1
