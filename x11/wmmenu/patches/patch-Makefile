$OpenBSD: patch-Makefile,v 1.2 2001/10/29 10:57:27 wilfried Exp $
--- Makefile.orig	Sun Oct 21 09:19:36 2001
+++ Makefile	Mon Oct 29 11:39:14 2001
@@ -1,27 +1,23 @@
-prefix = /usr/local
+prefix = ${PREFIX}
 BINDIR = $(prefix)/bin
 MANDIR = $(prefix)/man
-ETCDIR = $(prefix)/etc
+ETCDIR = $(prefix)/share/wmmenu
 
 # comment out to get the old, Xpm-only, version
-GDKPIXBUF = 1
 
-XROOT = /usr/X11R6
-DAROOT = /usr/local
+XROOT = ${X11BASE}
+DAROOT = ${LOCALBASE}
 
 # If you want to use gdk-pixbuf, pass GDKPIXBUF=1 to make command
-ifdef GDKPIXBUF
+.if defined(GDKPIXBUF)
 PIXBUF_DEF = -DWITH_GDKPIXBUF
-PIXBUF_INC := $(shell gdk-pixbuf-config --cflags)
-PIXBUF_LIB := -rdynamic -L$(shell gdk-pixbuf-config --prefix)/lib -lgdk_pixbuf_xlib
-endif
-
-CC = gcc #-g
-CFLAGS = -pipe $(CPPFLAGS) -O2
-CPPFLAGS = -MMD -ansi -pedantic -Wall $(INCDIRS) $(DEFINES)
+PIXBUF_INC != gdk-pixbuf-config --cflags
+PIXBUF_LIB = -lgdk_pixbuf_xlib -lgdk -lgmodule -lglib -lintl -ltiff -lpng -ljpeg -lz
+.endif
+
+CFLAGS += $(INCDIRS) $(DEFINES)
 INCDIRS = -I$(DAROOT)/include -I$(XROOT)/include $(PIXBUF_INC)
 DEFINES = -DETCDIR='"$(ETCDIR)"' $(PIXBUF_DEF)
-LDFLAGS = -s
 LIBDIRS = -L$(DAROOT)/lib -L$(XROOT)/lib $(PIXBUF_LIB)
 LDLIBS = -ldockapp -lXpm -lXext -lX11 -lm
 
@@ -58,4 +54,3 @@ clean :
 	$(RM) *.o *.d core tags $(PRGS)
 
 # dependencies -- do not change lines below
--include *.d
