$OpenBSD: patch-gcc_config_gcc,v 1.15 2003/06/26 00:19:50 espie Exp $
--- gcc/config.gcc.orig	Thu Jan 30 09:03:42 2003
+++ gcc/config.gcc	Thu May 22 17:53:28 2003
@@ -582,9 +582,11 @@ alpha*-*-netbsd*)
 	;;
 
 alpha*-*-openbsd*)
+	tm_file="alpha/alpha.h alpha/elf.h alpha/openbsd1.h openbsd.h ${tm_file}"
 	# default x-alpha is only appropriate for dec-osf.
 	target_cpu_default="MASK_GAS"
 	tmake_file="alpha/t-alpha alpha/t-ieee"
+	gas=yes gnu_ld=yes
 	;;
 
 alpha*-dec-osf*)
@@ -1262,11 +1264,26 @@ x86_64-*-netbsd*)
 	tm_file="${tm_file} i386/att.h dbxelf.h elfos.h netbsd.h netbsd-elf.h i386/x86-64.h i386/netbsd64.h"
 	float_format=i386
 	;;
-i[34567]86-*-openbsd*)
+# Change ...[012] to i[34567]86-*-openbsd3.[0123] after we move to 3.4
+i[34567]86-*-openbsd2* | i[34567]86-*-openbsd3.[012])
 	# needed to unconfuse gdb
 	tmake_file="t-libc-ok t-openbsd i386/t-openbsd"
 	# we need collect2 until our bug is fixed...
 	use_collect2=yes
+	tm_file="i386/i386.h i386/att.h svr4.h i386/openbsd.h i386/perform.h"
+	gas=yes
+	gnu_ld=yes
+	stabs=yes
+	;;
+i[34567]86-*-openbsd*)
+	# needed to unconfuse gdb
+	tmake_file="t-libc-ok t-openbsd i386/t-openbsd"
+	tm_file="i386/i386.h i386/att.h dbxelf.h elfos.h i386/i386elf.h"
+	tm_file="${tm_file} exec-stack.h"
+	tm_file="${tm_file} openbsd.h i386/openbsdelf.h"
+	gas=yes
+	gnu_ld=yes
+	stabs=yes
 	;;
 i[34567]86-*-coff*)
 	tm_file=i386/i386-coff.h
@@ -2751,8 +2768,8 @@ romp-*-openbsd*)
 	# Nothing special
 	;;
 powerpc-*-openbsd*)
-	tmake_file="${tmake_file} rs6000/t-rs6000 rs6000/t-openbsd"
-	extra_headers=
+	tm_file="rs6000/rs6000.h rs6000/openbsd1.h dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h openbsd.h ${tm_file}"
+	tmake_file="${tmake_file} rs6000/t-ppcos rs6000/t-openbsd"
 	;;
 powerpc64-*-linux*)
 	tm_file="${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/linux64.h"
@@ -3060,6 +3077,13 @@ sparc-*-openbsd*)
 	tmake_file="t-libc-ok t-openbsd sparc/t-openbsd"
 	# we need collect2 until our bug is fixed...
 	use_collect2=yes
+	;;
+sparc64-*-openbsd*)
+	tm_file="sparc/openbsd1-64.h sparc/sparc.h elfos.h svr4.h sparc/sysv4.h sparc/sp64-elf.h openbsd.h sparc/openbsd64.h"
+	xm_file=sparc/xm-sp64.h
+	gas=yes gnu_ld=yes
+	with_cpu=ultrasparc
+	float_format=i128
 	;;
 sparc64-*-openbsd*)
 	tm_file="sparc/openbsd1-64.h sparc/sparc.h elfos.h svr4.h sparc/sysv4.h sparc/sol2.h sparc/sp64-elf.h openbsd.h sparc/openbsd64.h"
