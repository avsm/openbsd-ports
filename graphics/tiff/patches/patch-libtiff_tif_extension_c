$OpenBSD: patch-libtiff_tif_extension_c,v 1.1 2004/10/20 20:37:48 brad Exp $
--- libtiff/tif_extension.c.orig	Mon Dec 22 03:22:15 2003
+++ libtiff/tif_extension.c	Wed Oct 20 14:38:11 2004
@@ -32,6 +32,7 @@
  */
 
 #include "tiffiop.h"
+#include <assert.h>
 
 int TIFFGetTagListCount( TIFF *tif )
 
@@ -100,8 +101,10 @@ void TIFFSetClientInfo( TIFF *tif, void 
     */
 
     link = (TIFFClientInfoLink *) _TIFFmalloc(sizeof(TIFFClientInfoLink));
+    assert (link != NULL);
     link->next = tif->tif_clientinfo;
     link->name = (char *) _TIFFmalloc(strlen(name)+1);
+    assert (link->name != NULL);
     strcpy(link->name, name);
     link->data = data;
 
