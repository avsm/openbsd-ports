$OpenBSD: patch-get_table_cc,v 1.1.1.1 2001/04/02 15:14:52 wilfried Exp $
--- get_table.cc.orig	Wed Dec 27 13:45:04 2000
+++ get_table.cc	Sat Feb 10 19:20:31 2001
@@ -12,7 +12,7 @@ class Tables {
 	Fl_Window *password;
 	Fl_Menu_Item *korisnici; vector <string> tables;
 	void cb_password(void) {
-		password->hide(); delete password;
+		password->hide(); delete password; password=0;
 	}
 	static void s_cb_password(Fl_Window*, void*s) {
 		Tables *P=(Tables *)s;
@@ -22,7 +22,7 @@ class Tables {
 
 	void cb_b_OK(void) {
 		chosen_table =  (string)korisnici[choice_user->value()].text;
-		password->hide(); delete password;
+		password->hide(); delete password; password=0;
 	}
 
 	static void s_cb_b_OK(Fl_Return_Button*, void*s) {
@@ -31,7 +31,7 @@ class Tables {
 	}
 
 	void cb_b_cancel() {
-		chosen_table=(string)"No string"; password->hide(); delete password;
+		chosen_table=(string)"No string"; password->hide(); delete password; password=0;
 	}
 	static void s_cb_b_cancel(Fl_Button*, void* s) {
 		Tables *P=(Tables *)s;
@@ -89,7 +89,7 @@ public:
       o->box(FL_ROUND_UP_BOX); o->down_box(FL_ROUND_DOWN_BOX); o->shortcut(0xff1b); o->labeltype(FL_ENGRAVED_LABEL);
       o->labelfont(8); o->labelsize(18);  o->labelcolor(177); o->user_data(this); o->callback((Fl_Callback*)s_cb_b_cancel); o->align(FL_ALIGN_CENTER|FL_ALIGN_INSIDE);
     }
-    w->end(); w->show(); while (w->visible()) Fl::wait();
+    w->end(); w->show(); while (password && w->visible()) Fl::wait();
   }
 };
 
