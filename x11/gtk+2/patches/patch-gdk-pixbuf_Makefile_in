$OpenBSD: patch-gdk-pixbuf_Makefile_in,v 1.11 2006/05/22 01:49:07 brad Exp $
--- gdk-pixbuf/Makefile.in.orig	Fri Dec  9 13:28:12 2005
+++ gdk-pixbuf/Makefile.in	Sat May 13 16:59:37 2006
@@ -550,7 +550,7 @@ libgdk_pixbuf_2_0_la_SOURCES = \
 
 libgdk_pixbuf_2_0_la_LDFLAGS = \
 	$(gdk_pixbuf_win32_res_ldflag)		\
-	-version-info $(LT_VERSION_INFO)	\
+	$(LIBgdk_pixbuf-2.0_LTVERSION)		\
 	$(LIBTOOL_EXPORT_OPTIONS)		\
 	$(no_undefined)				\
 	$(gdk_pixbuf_symbols)
@@ -1604,13 +1604,6 @@ install-data-hook: install-ms-lib instal
 	@if $(RUN_QUERY_LOADER_TEST) ; then \
 	  $(mkinstalldirs) $(DESTDIR)$(sysconfdir)/gtk-2.0 ; \
 	  $(top_builddir)/gdk-pixbuf/gdk-pixbuf-query-loaders > $(DESTDIR)$(sysconfdir)/gtk-2.0/gdk-pixbuf.loaders ; \
-	else \
-	  echo "***" ; \
-	  echo "*** Warning: gdk-pixbuf.loaders not built" ; \
-	  echo "***" ; \
-	  echo "*** Generate this file manually on host" ; \
-	  echo "*** system using gdk-pixbuf-query-loaders" ; \
-	  echo "***" ; \
 	fi
 
 uninstall-local: uninstall-ms-lib uninstall-def-file
@@ -1622,7 +1615,7 @@ uninstall-local: uninstall-ms-lib uninst
 @BUILD_DYNAMIC_MODULES_TRUE@	LOADERS=`echo libpixbufloader-*.la` ; \
 @BUILD_DYNAMIC_MODULES_TRUE@	if test "x$$LOADERS" != 'xlibpixbufloader-*.la' ; then \
 @BUILD_DYNAMIC_MODULES_TRUE@          echo "Writing a gdk-pixbuf.loader file to use when running examples before installing gdk-pixbuf."; \
-@BUILD_DYNAMIC_MODULES_TRUE@	  $(top_builddir)/gdk-pixbuf/gdk-pixbuf-query-loaders $$LOADERS > ./gdk-pixbuf.loaders ;\
+@BUILD_DYNAMIC_MODULES_TRUE@	  LD_LIBRARY_PATH=$(top_builddir)/gdk-pixbuf/.libs $(top_builddir)/gdk-pixbuf/gdk-pixbuf-query-loaders $$LOADERS > ./gdk-pixbuf.loaders ;\
 @BUILD_DYNAMIC_MODULES_TRUE@	else \
 @BUILD_DYNAMIC_MODULES_TRUE@          echo "No dynamic modules found; will use only static modules for uninstalled example programs."; \
 @BUILD_DYNAMIC_MODULES_TRUE@	  touch gdk-pixbuf.loaders; \
