$OpenBSD: patch-configure,v 1.4 2005/02/13 14:18:07 alek Exp $
--- configure.orig	Sat Aug  3 13:04:13 2002
+++ configure	Sat Feb 12 18:15:38 2005
@@ -8157,15 +8157,17 @@ cat >>confdefs.h <<_ACEOF
 _ACEOF
 
 
-echo $ac_n "checking for rxvt... "
-if rxvt -help 2>&1 | grep geom >/dev/null ; then
-	XTERM_CMD="rxvt -fn %F -bg Navy -fg White " ;
-	echo "yes" ;
-else
-	XTERM_CMD="xterm" ;
-	echo "no" ;
+if [ -z "$XTERM_CMD" ]; then
+    echo $ac_n "checking for rxvt... "
+    if rxvt -help 2>&1 | grep geom >/dev/null ; then
+	    XTERM_CMD="rxvt -fn %F -bg Navy -fg White " ;
+	    echo "yes" ;
+    else
+	    XTERM_CMD="xterm" ;
+	    echo "no" ;
+    fi
+    rm -f conftestrxvt
 fi
-rm -f conftestrxvt
 
 cat >>confdefs.h <<_ACEOF
 #define XTERM_CMD "${XTERM_CMD}"
@@ -9365,30 +9367,24 @@ LDFLAGS="$LDFLAGS $X_LIBS"
 have_python_config=no
 have_python_include=no
 
+if [ -z "$NOPYTHON" ]; then
 echo "$as_me:$LINENO: checking for python" >&5
 echo $ECHO_N "checking for python... $ECHO_C" >&6
 EPATH=`echo $PATH | sed -e 's+/bin:+ +g' -e 's+:+ +g'`
 
 
-for i in / /opt /usr /usr/local /home $EPATH ; do
-    for j in . gnu local python ; do
-	for k in . gnu local python ; do
-	    for l in lib . ; do
-		pylib=$i/$j/$k/$l/python[0-9].[0-9]/config/libpython[0-9].[0-9].a
+		pylib=!!LOCALBASE!!/lib/python!!PYTHON_VER!!/config/libpython!!PYTHON_VER!!.a
 		if test -f $pylib ; then
 		    PYTHON_LIBDIR=`echo $pylib | sed -e 's,/[^/]*$,,'`
 		    LIBPY=`echo $pylib | sed -e 's,^.*/lib\(python.[.].\)[.]a$,\1,'`
 		    have_python_config=yes
 		fi
-	    done
-	    pyinclude=$i/$j/$k/include/python[0-9].[0-9]/Python.h
+	    pyinclude=!!LOCALBASE!!/include/python!!PYTHON_VER!!/Python.h
 	    if test -f $pyinclude ; then
 		PYTHON_INCLUDEDIR=`echo $pyinclude | sed -e 's,/[^/]*$,,'`
 		have_python_include=yes
 	    fi
-	done
-    done
-done
+fi
 
 
 if test x$have_python_config = xyes && test x$have_python_include = xyes ; then
@@ -9692,13 +9688,13 @@ if test $ac_cv_lib_pthreads_pthread_crea
 
 else
 
-		echo "$as_me:$LINENO: checking for pthread_create in -lpthread" >&5
-echo $ECHO_N "checking for pthread_create in -lpthread... $ECHO_C" >&6
+		echo "$as_me:$LINENO: checking for pthread_create in -pthread" >&5
+echo $ECHO_N "checking for pthread_create in -pthread... $ECHO_C" >&6
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 #include "confdefs.h"
@@ -9749,7 +9745,7 @@ echo "$as_me:$LINENO: result: $ac_cv_lib
 echo "${ECHO_T}$ac_cv_lib_pthread_pthread_create" >&6
 if test $ac_cv_lib_pthread_pthread_create = yes; then
 
-		    PT="-lpthread"
+		    PT="-pthread"
 
 else
 
@@ -14514,7 +14510,7 @@ if test "${ac_cv_lib_intl_tolower+set}" 
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lintl  $LIBS"
+LIBS="-lintl -liconv $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 #include "confdefs.h"
@@ -14568,7 +14564,7 @@ if test $ac_cv_lib_intl_tolower = yes; t
 #define HAVE_LIBINTL 1
 _ACEOF
 
-  LIBS="-lintl $LIBS"
+  LIBS="-lintl -liconv $LIBS"
 
 fi
 
@@ -18526,11 +18522,11 @@ echo "${ECHO_T}$gt_cv_func_gnugettext1_l
 
       if test "$nls_cv_use_gnu_gettext" = "yes"; then
                 INTLOBJS="\$(GETTOBJS)"
-        BUILD_INCLUDED_LIBINTL=yes
-        USE_INCLUDED_LIBINTL=yes
-        LIBINTL="\${top_builddir}/intl/libintl.a $LIBICONV"
-        LTLIBINTL="\${top_builddir}/intl/libintl.a $LTLIBICONV"
-        LIBS=`echo " $LIBS " | sed -e 's/ -lintl / /' -e 's/^ //' -e 's/ $//'`
+        BUILD_INCLUDED_LIBINTL=no
+        USE_INCLUDED_LIBINTL=no
+        LIBINTL="$LIBINTL $LIBICONV"
+        LTLIBINTL="$LTLIBINTL $LTLIBICONV"
+        #LIBS=`echo " $LIBS " | sed -e 's/ -lintl / /' -e 's/^ //' -e 's/ $//'`
       fi
 
       if test "$gt_use_preinstalled_gnugettext" = "yes" \
