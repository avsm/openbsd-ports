$OpenBSD: patch-configure_in,v 1.3 2001/12/31 09:40:44 espie Exp $
--- configure.in.orig	Mon Aug 16 00:29:43 1999
+++ configure.in	Sat Dec 29 22:21:07 2001
@@ -5,24 +5,22 @@ cp $srcdir/configure.sub $srcdir/config.
 
 AC_CANONICAL_HOST
 
-if test -z "$CC"; then
-	AC_PROG_CC	
-fi
+AC_PROG_CC	
 AC_PROG_RANLIB
 AC_CHECK_PROG(AR,ar,ar)
 AC_CHECK_PROG(INSTALL,install,install)
 
 if test -z "$GCC"; then
 	DEBUG="-g"
-	OPT="-O"
+	OPT="-O ${COPTS}"
 else
 	case $host in 
-	i?86-*-linux*)
+	i?86-*-*)
 		DEBUG="-g -Wall -fsigned-char"
-		OPT="-O20 -ffast-math -fsigned-char -finline-functions";;
+		OPT="-O20 -ffast-math -fsigned-char -finline-functions ${COPTS}";;
 	*)
 		DEBUG="-g -Wall -fsigned-char"
-		OPT="-O20 -fsigned-char";;
+		OPT="-O20 -fsigned-char ${COPTS}";;
         esac
 fi
 
@@ -63,11 +61,14 @@ fi
 AC_CHECK_HEADERS(linux/sbpcd.h, SBPCD_H="-DSBPCD_H='1' ")
 AC_CHECK_HEADERS(linux/ucdrom.h, UCDROM_H="-DUCDROM_H='1' ")
 
+AC_CHECK_FUNCS(getopt_long, GETOPT_LONG="-DGETOPT_LONG='1' ")
+
 AC_PROG_MAKE_SET
 AC_C_CONST
 
 AC_SUBST(SBPCD_H)
 AC_SUBST(UCDROM_H)
+AC_SUBST(GETOPT_LONG)
 AC_SUBST(TYPESIZES)
 AC_SUBST(OPT)
 AC_SUBST(DEBUG)
