$OpenBSD: patch-bin_varnishd_varnishd_1,v 1.1.1.1 2009/11/23 00:28:10 fgsch Exp $
--- bin/varnishd/varnishd.1.orig	Mon Nov  9 09:04:55 2009
+++ bin/varnishd/varnishd.1	Mon Nov 23 00:02:47 2009
@@ -36,23 +36,37 @@
 .Nd HTTP accelerator daemon
 .Sh SYNOPSIS
 .Nm
-.Op Fl a Ar address Ns Op : Ns Ar port
-.Op Fl b Ar host Ns Op : Ns Ar port
+.Oo Fl a Ar address Ns
+.Op : Ns Ar port
+.Oc
+.Oo Fl b Ar host Ns
+.Op : Ns Ar port
+.Oc
 .Op Fl d
 .Op Fl F
 .Op Fl f Ar config
 .Op Fl g Ar group
-.Op Fl h Ar type Ns Op , Ns Ar options
+.Oo Fl h Ar type Ns
+.Op , Ns Ar options
+.Oc
 .Op Fl l Ar shmlogsize
 .Op Fl n Ar name
 .Op Fl P Ar file
-.Op Fl p Ar param Ns = Ns Ar value
-.Op Fl s Ar type Ns Op , Ns Ar options
-.Op Fl T Ar address Ns Op : Ns Ar port
+.Oo Fl p Ar param Ns = Ns Ar value
+.Oc
+.Oo Fl s Ar type Ns
+.Op , Ns Ar options
+.Oc
+.Oo Fl T Ar address Ns
+.Op : Ns Ar port
+.Oc
 .Op Fl t Ar ttl
 .Op Fl u Ar user
 .Op Fl V
-.Op Fl w Ar min Ns Op , Ns Ar max Ns Op , Ns Ar timeout
+.Oo Fl w Ar min Ns
+.Oo , Ns Ar max Ns
+.Op , Ns Ar timeout
+.Oc Oc
 .Sh DESCRIPTION
 The
 .Nm
@@ -62,10 +76,12 @@ requests for the same document.
 .Pp
 The following options are available:
 .Bl -tag -width Fl
-.It Xo
-.Fl a Ar address Ns Op : Ns Ar port Ns
-.Op , Ns Ar address Ns Op : Ns Ar port Ns
+.It Fl a Ar address Ns Xo
+.Oo : Ns Ar port Ns
+.Oo , Ns Ar address Ns
+.Oo : Ns Ar port Ns
 .Op ...
+.Oc Oc Oc
 .Xc
 Listen for client requests on the specified
 .Ar address
@@ -91,7 +107,9 @@ is not specified, the default HTTP port as listed in
 is used.
 Multiple listening addresses and ports can be specified as a
 whitespace- or comma-separated list.
-.It Fl b Ar host Ns Op : Ns Ar port
+.It Fl b Ar host Ns Xo
+.Op : Ns Ar port
+.Xc
 Use the specified
 .Ar host
 as backend server.
@@ -133,7 +151,9 @@ should switch before it starts accepting connections.
 This is a shortcut for specifying the
 .Va group
 run-time parameter.
-.It Fl h Ar type Ns Op , Ns Ar options
+.It Fl h Ar type Ns Xo
+.Op , Ns Ar options
+.Xc
 Specifies the hash algorithm.
 See
 .Sx Hash Algorithms
@@ -143,7 +163,7 @@ Specify size of shmlog file.
 Scaling suffixes like 'k', 'm' can be used up to (e)tabytes.
 Default is 80 Megabytes.
 Specifying less than 8 Megabytes is unwise.
-.It Fl n
+.It Fl n Ar name
 Specify a name for this instance.
 Amonst other things, this name is used to construct the name of the
 directory in which
@@ -163,14 +183,18 @@ to the specified
 See
 .Sx Run-Time Parameters
 for a list of parameters.
-.It Fl s Ar type Ns Op , Ns Ar options
+.It Fl s Ar type Ns Xo
+.Op , Ns Ar options
+.Xc
 Use the specified storage backend.
 See
 .Sx Storage Types
 for a list of supported storage types.
 This option can be used multiple times to specify multiple storage
 files.
-.It Fl T Ar address Ns Op : Ns Ar port
+.It Fl T Ar address Ns Xo
+.Op : Ns Ar port
+.Xc
 Offer a management interface on the specified
 .Ar address
 and
@@ -194,7 +218,11 @@ If specifying both a user and a group, the user should
 first.
 .It Fl V
 Display the version number and exit.
-.It Fl w Ar min Ns Op , Ns Ar max Ns Op , Ns Ar timeout
+.It Fl w Ar min Ns Xo
+.Oo , Ns Ar max Ns
+.Op , Ns Ar timeout
+.Oc
+.Xc
 Start at least
 .Ar min
 but no more than
@@ -221,7 +249,9 @@ The following hash algorithms are available:
 .It Cm simple_list
 A simple doubly-linked list.
 Not recommended for production use.
-.It Cm classic Ns Op Ns , Ns Ar buckets
+.It Cm classic Ns Xo
+.Op Ns , Ns Ar buckets
+.Xc
 A standard hash table.
 This is the default.
 .Pp
@@ -238,7 +268,9 @@ The default is 16383.
 .Ss Storage Types
 The following storage types are available:
 .Bl -tag -width 4n
-.It Cm malloc Ns Op Ns , Ns Ar size Ns
+.It Cm malloc Ns Xo
+.Op Ns , Ns Ar size Ns
+.Xc
 Storage for each object is allocated with
 .Xr malloc 3 .
 .Pp
@@ -259,7 +291,12 @@ The size is expressed in tebibytes.
 .El
 .Pp
 The default size is unlimited.
-.It Cm file Ns Op Ns , Ns Ar path Ns Op Ns , Ns Ar size Ns Op Ns , Ns Ar granularity
+.It Cm file Ns Xo
+.Oo Ns , Ns Ar path Ns
+.Oo Ns , Ns Ar size Ns
+.Op Ns , Ns Ar granularity
+.Oc Oc
+.Xc
 Storage for each object is allocated from an arena backed by a file.
 This is the default.
 .Pp
@@ -358,7 +395,10 @@ is specified, display only the value and explanation f
 parameter.
 .It Cm ping Op Ns Ar timestamp
 Ping the Varnish cache process, keeping the connection alive.
-.It Cm purge Ar field Ar operator Ar argument Op && Ar field Ar operator Ar argument Op ...
+.It Cm purge Ar field Ar operator Ar argument Xo
+.Oo && Ar field Ar operator Ar argument Oo ...
+.Oc Oc
+.Xc
 Immediately invalidate all documents matching the purge expression.
 See
 .Va Purge expressions
@@ -622,7 +662,7 @@ and
 .Va group
 are specified, the latter should be specified last.
 .Pp
-The default is "nobody".
+The default is "_varnish".
 .It Va vcl_trace
 Whether to issue log entries for calls to VCL code and their results.
 Note that this will generate large amounts of log data.
