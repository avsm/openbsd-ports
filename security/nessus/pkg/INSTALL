#!/bin/sh
#
# $OpenBSD: INSTALL,v 1.3 2002/05/25 10:38:58 reinhard Exp $
#
# Post-installation script for nessus port
#

set -e
PATH=/bin
PREFIX=${PKG_PREFIX:-/usr/local}

umask 022

if [ x$2 = xPOST-INSTALL ]
then
	# See if /etc/nessus exists; if it doesn't, create and populate.
	if [ -d /etc/nessus ]
	then
		cat <<EOT

+---------------
| Example configuration files have been copied to
| $PREFIX/share/examples/nessus.  Your existing /etc/nessus has
| been left untouched.
+---------------
EOT
	else
		mkdir -p /etc/nessus
		cp -R $PREFIX/share/examples/nessus/* /etc/nessus/
	fi

	# Make /var/nessus directory for logs and pidfile and etc.
	if [ ! -d /var/nessus ]
	then
		mkdir -pm 0700 /var/nessus
		mkdir -pm 0700 /var/nessus/jobs
                mkdir -pm 0700 /var/nessus/logs
                mkdir -pm 0700 /var/nessus/users
	fi
fi

exit 0

