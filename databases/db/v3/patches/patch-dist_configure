$OpenBSD: patch-dist_configure,v 1.2 2004/09/24 20:47:22 sturm Exp $
--- dist/configure.orig	Mon Jul 31 18:58:18 2000
+++ dist/configure	Thu Sep 16 21:07:31 2004
@@ -1602,7 +1602,6 @@ echo "configure:1601: checking libtool c
 	${CONFIG_SHELL-/bin/sh} $srcdir/ltconfig \
 		--no-verify $srcdir/ltmain.sh \
 		--output=./libtool $host_os \
-		--disable-static \
 	|| { echo "configure: error: libtool configure failed" 1>&2; exit 1; }
 
 	SOSUFFIX=`sed -e '/^library_names_spec=/!d' -e 's/.*\.\([a-zA-Z0-9_]*\).*/\1/' ./libtool`
@@ -1617,7 +1616,7 @@ echo "configure:1601: checking libtool c
 
 	INSTALLER="\$(LIBTOOL) --mode=install cp"
 	POSTLINK="\$(LIBTOOL) --mode=execute true"
-	SOLINK="\$(LIBTOOL) --mode=link ${SAVE_CC} -avoid-version"
+	SOLINK="\$(LIBTOOL) --mode=link ${SAVE_CC} -version-info @DB_VERSION_MAJOR@:@DB_VERSION_MINOR@"
 	SOFLAGS="-rpath \$(libdir)"
 	o=".lo"
 fi
@@ -1936,7 +1935,7 @@ echo "configure:1911: checking for exist
 		TCFLAGS="-I$TCL_PREFIX/include"
 	fi
 
-	LIBS="$LIBS $TCL_LIB_SPEC $TCL_LIBS"
+	LIBTSO_LIBS="$TCL_LIB_SPEC $TCL_LIBS"
 
 	ADDITIONAL_LIBS="$ADDITIONAL_LIBS \$(libtso_target)"
 	DEFAULT_INSTALL="${DEFAULT_INSTALL} install_tcl"
@@ -3911,7 +3910,7 @@ else
 #line 3912 "configure"
 #include "confdefs.h"
 main(){
-#if defined(i386)
+#if defined(__i386__)
 #if defined(__GNUC__)
 	exit(0);
 #endif
