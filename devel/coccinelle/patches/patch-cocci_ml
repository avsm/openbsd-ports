$OpenBSD: patch-cocci_ml,v 1.2 2011/06/16 23:24:49 sthen Exp $
--- cocci.ml.orig	Fri Jun  3 17:55:52 2011
+++ cocci.ml	Thu Jun 16 23:48:24 2011
@@ -263,8 +263,8 @@ let show_or_not_diff2 cfile outfile =
 
 	let line =
 	  match !Flag_parsing_c.diff_lines with
-	  | None ->   "diff -u -p " ^ cfile ^ " " ^ outfile
-	  | Some n -> "diff -U "^n^" -p "^cfile^" "^outfile in
+	  | None ->   "gdiff -u -p " ^ cfile ^ " " ^ outfile
+	  | Some n -> "gdiff -U "^n^" -p "^cfile^" "^outfile in
 	let xs =
 	  let res = Common.cmd_to_list line in
 	  match (!Flag.patch,res) with
@@ -501,7 +501,7 @@ let worth_trying cfiles tokens =
 	| _ -> s
 
       ) in
-      let com = sprintf "egrep -q '(%s)' %s" (join "|" tokens) (join " " cfiles)
+      let com = sprintf "gegrep -q '(%s)' %s" (join "|" tokens) (join " " cfiles)
       in
       (match Sys.command com with
       | 0 (* success *) -> true
@@ -1995,7 +1995,7 @@ let check_duplicate_modif2 xs =
               match res2 with
               | None -> false
               | Some res2 ->
-                  let diff = Common.cmd_to_list ("diff -u -b -B "^res^" "^res2)
+                  let diff = Common.cmd_to_list ("gdiff -u -b -B "^res^" "^res2)
                   in
                   null diff
             ) xs) then begin
