$OpenBSD: patch-base_src_common_FsDir_c,v 1.1 2003/05/23 13:22:14 todd Exp $
--- base/src/common/FsDir.c.orig	Sat Mar 29 16:15:22 2003
+++ base/src/common/FsDir.c	Thu May 22 17:46:42 2003
@@ -43,7 +43,7 @@
 FsDir *
 fsdir_create(uint64_t rev, Change *cfg, const char *path)
 {
-  FsDir *f = (FsDir *) GC_MALLOC(sizeof(FsDir));
+  FsDir *f = (FsDir *) malloc(sizeof(FsDir));
 
   ser_init(f, &FsDir_SerType, FsDir_SerType.ver);
   SER_MODIFIED(f);
@@ -59,7 +59,8 @@ void
 fsdir_show(const void *vp)
 {
   const FsDir *f = vp;
-  report(0, "Revisions:       %s\n", xunsigned64_str(f->rev));
+  char *xstr = xunsigned64_str(f->rev);
+  report(0, "Revisions:       %s\n", xstr);
   report(0, "Config name:     %s\n", ser_getTrueName(f->cfg));
   report(0, "Path:            %s\n", f->path);
 
