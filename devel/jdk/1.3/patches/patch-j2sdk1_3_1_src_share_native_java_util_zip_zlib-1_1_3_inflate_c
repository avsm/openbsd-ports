$OpenBSD: patch-j2sdk1_3_1_src_share_native_java_util_zip_zlib-1_1_3_inflate_c,v 1.1 2005/08/10 22:36:27 kurt Exp $
--- j2sdk1.3.1/src/share/native/java/util/zip/zlib-1.1.3/inflate.c.orig	Sun May  6 08:20:31 2001
+++ j2sdk1.3.1/src/share/native/java/util/zip/zlib-1.1.3/inflate.c	Tue Aug  9 18:20:33 2005
@@ -231,6 +231,11 @@ int f;
         return r;
       r = f;
       inflate_blocks_reset(z->state->blocks, z, &z->state->sub.check.was);
+
+      /* zlib.h inflate() doc states that z->adler contains a checksum
+	 of all uncompressed output even when returning Z_STREAM_END. */
+      z->adler = z->state->sub.check.was;
+
       if (z->state->nowrap)
       {
         z->state->mode = DONE;
