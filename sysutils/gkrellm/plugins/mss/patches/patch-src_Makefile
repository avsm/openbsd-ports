$OpenBSD: patch-src_Makefile,v 1.1.1.1 2003/11/03 20:34:17 sturm Exp $
--- src/Makefile.orig	2002-10-26 20:48:59.000000000 -0700
+++ src/Makefile	2003-11-01 13:50:46.000000000 -0800
@@ -1,8 +1,8 @@
 INSTALLDIR ?= /usr/local/lib/gkrellm2/plugins
 INSTALL ?= install
 
-GTK_INCLUDE = `pkg-config gtk+-2.0 --cflags`
-GTK_LIB = `pkg-config gtk+-2.0 --libs`
+GTK_INCLUDE = `pkg-config gtk+-2.0 gthread-2.0 --cflags`
+GTK_LIB = `pkg-config gtk+-2.0 gthread-2.0 --libs`
 
 OS_NAME=$(shell uname -s)
 
@@ -18,15 +18,15 @@ FFTW_LIB_DIR ?=
 
 FFTW_LIB = $(FFTW_LIB_DIR) -lrfftw -lfftw
 
-FLAGS = -O2 -Wall -fPIC $(GTK_INCLUDE) $(SD_INCLUDE)
-LIBS = $(GTK_LIB) $(SD_LIB) $(FFTW_LIB) -lm
+FLAGS += -fPIC $(GTK_INCLUDE) $(SD_INCLUDE) -I${LOCALBASE}/include
+LIBS += $(GTK_LIB) $(SD_LIB) $(FFTW_LIB) -lm
 
 ifeq ($(OS_NAME),Darwin)
 LFLAGS = -bundle -bundle_loader `which gkrellm`
 STRIP =
 FLAGS += -DDARWIN
 else
-LFLAGS = -shared
+LFLAGS += -shared
 STRIP ?= -s
 endif
 
@@ -42,8 +42,7 @@ ifeq ($(alsa5),1)
 	FLAGS += -DGKRELLM_ALSA5
 endif
 
-CC = gcc $(FLAGS) $(CFLAGS)
-
+CFLAGS += ${FLAGS}
 OBJS = gkrellmss.o oscope.o spectrum.o sdlib.o
 
 all:	gkrellmss.so
