$OpenBSD: patch-objreq_c,v 1.2 2004/12/04 01:01:42 fgsch Exp $
--- objreq.c.orig	Tue Apr 20 05:08:43 2004
+++ objreq.c	Fri Dec  3 20:35:32 2004
@@ -75,7 +75,7 @@ void auth_fn(struct dialog_data *dlg)
 
 int auth_cancel(struct dialog_data *dlg, struct dialog_item_data *item)
 {
-	struct object_request *rq = find_rq((int)dlg->dlg->udata2);
+	struct object_request *rq = find_rq((intptr_t)dlg->dlg->udata2);
 	if (rq) {
 		rq->state = O_OK;
 		if (rq->timer != -1) kill_timer(rq->timer);
@@ -88,7 +88,7 @@ int auth_cancel(struct dialog_data *dlg,
 
 int auth_ok(struct dialog_data *dlg, struct dialog_item_data *item)
 {
-	struct object_request *rq = find_rq((int)dlg->dlg->udata2);
+	struct object_request *rq = find_rq((intptr_t)dlg->dlg->udata2);
 	if (rq) {
 		struct auth_dialog *a = dlg->dlg->udata;
 		struct session *ses;
@@ -153,7 +153,7 @@ int auth_window(struct object_request *r
 	a->proxy = rq->stat.ce->http_code == 407;
 	a->realm = stracpy(realm);
 	d->udata = a;
-	d->udata2 = (void *)rq->count;
+	d->udata2 = (void *)(intptr_t)rq->count;
 	if (rq->stat.ce->http_code == 401) d->title = TEXT(T_AUTHORIZATION_REQUIRED);
 	else d->title = TEXT(T_PROXY_AUTHORIZATION_REQUIRED);
 	d->fn = auth_fn;
