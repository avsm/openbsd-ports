$OpenBSD: patch-panels_printers_pp-new-printer-dialog_c,v 1.3 2011/09/27 12:15:23 ajacoutot Exp $

No PackageKit on OpenBSD.

--- panels/printers/pp-new-printer-dialog.c.orig	Mon Sep 19 16:04:52 2011
+++ panels/printers/pp-new-printer-dialog.c	Mon Sep 26 14:01:06 2011
@@ -1514,6 +1514,7 @@ new_printer_add_button_cb (GtkButton *button,
                        pp->devices[device_id].device_make_and_model,
                        pp->devices[device_id].device_uri);
 
+#ifndef __OpenBSD__
           if (ppd_name == NULL || ppd_name->ppd_match_level < PPD_EXACT_MATCH)
             {
               /* Try PackageKit to install printer driver */
@@ -1568,6 +1569,7 @@ new_printer_add_button_cb (GtkButton *button,
                   g_free (device_ids);
                 }
             }
+#endif
 
           /* Add the new printer */
           if (ppd_name && ppd_name->ppd_name)
@@ -1665,8 +1667,10 @@ new_printer_add_button_cb (GtkButton *button,
 
 
               /* Set default PaperSize according to the locale */
+#ifndef __OpenBSD__
               locale = setlocale (LC_PAPER, NULL);
               if (locale == NULL)
+#endif
                 locale = setlocale (LC_MESSAGES, NULL);
 
               if (locale)
