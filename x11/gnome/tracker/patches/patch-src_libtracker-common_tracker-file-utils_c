$OpenBSD: patch-src_libtracker-common_tracker-file-utils_c,v 1.1.1.1 2009/04/21 21:34:46 jasper Exp $

O_NOATIME doesn't exist on *BSD or Solaris.

--- src/libtracker-common/tracker-file-utils.c.orig	Thu Apr  9 21:39:38 2009
+++ src/libtracker-common/tracker-file-utils.c	Thu Apr  9 21:44:46 2009
@@ -63,11 +63,17 @@ tracker_file_open (const gchar *uri,
 		int fd;
 
 		fd = fileno (file);
-		
+
+#if defined(__linux__)
 		/* Make sure we set the NOATIME flag if we have permissions to */
 		if ((flags = fcntl (fd, F_GETFL, 0)) != -1) {
 			fcntl (fd, F_SETFL, flags | O_NOATIME);
 		}
+#else
+		if ((flags = fcntl (fd, F_GETFL, 0)) != -1) {
+			fcntl (fd, F_SETFL, flags);
+		}
+#endif
 
 #ifdef HAVE_POSIX_FADVISE
 		if (sequential_access) {
