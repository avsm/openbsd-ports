# $OpenBSD: Makefile,v 1.42 2010/05/26 20:24:23 sthen Exp $

COMMENT =		download BBC iPlayer and ITV programmes

DISTNAME =		get_iplayer-2.77
PKGNAME =		${DISTNAME}p0
CATEGORIES =		multimedia

HOMEPAGE =		http://linuxcentre.net/get_iplayer/

MAINTAINER =		Stuart Henderson <sthen@openbsd.org>

# GPLv3+
PERMIT_PACKAGE_CDROM =	Yes 
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes

MAINTAINER =		Stuart Henderson <sthen@openbsd.org>

MASTER_SITES =		ftp://ftp.infradead.org/pub/get_iplayer/

RUN_DEPENDS =		::audio/id3lib \
			::multimedia/atomicparsley \
			:rtmpdump->=2.1:net/rtmpdump \
			::textproc/p5-XML-Simple \
			::www/p5-HTML-Parser \
			:p5-libwww->=5.826:www/p5-libwww

NO_BUILD =		Yes
NO_REGRESS =		Yes
PKG_ARCH =		*

pre-configure:
	${SUBST_CMD} ${WRKSRC}/get_iplayer
	${SUBST_CMD} -c ${FILESDIR}/options.sample ${WRKSRC}/options.sample

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/get_iplayer/plugins
	${INSTALL_DATA} ${WRKSRC}/options.sample ${PREFIX}/share/get_iplayer
	${INSTALL_SCRIPT} ${WRKSRC}/get_iplayer ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/plugins/* \
	    ${PREFIX}/share/get_iplayer/plugins

.include <bsd.port.mk>
