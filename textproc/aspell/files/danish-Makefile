# $OpenBSD: danish-Makefile,v 1.1.1.1 2001/05/23 21:25:43 lebel Exp $

CONFIG=dansk.dat
PHONET=dansk_phonet.dat

INSTALL_DATA = ${INSTALL} -m 644

pkgdatadir = `$(WRKSRC)/src/aspell dump config | grep "data-dir current" | grep -v "local-data-dir current" | sed 's/^.*: \(.*\)$$/\1/'`
pkglibdir  = `$(WRKSRC)/src/aspell dump config | grep "dict-dir current" | grep -v "local-data-dir current" | sed 's/^.*: \(.*\)$$/\1/'`
pspell_pkgdatadir=`pspell-config pkgdatadir`

all:	build da-aspell.pwli

build: 
	@(for i in $(WRKSRC)/data/*.dat; do ln -sf $$i; done)
	./unsq < words-da.sq | $(WRKSRC)/src/aspell --data-dir=. --lang=dansk \
	   create master ./dansk

da-aspell.pwli:
	@echo $(pkglibdir)/dansk > da-aspell.pwli

install: dansk
	${INSTALL} -d $(DESTDIR)$(pkgdatadir) $(DESTDIR)$(pkglibdir) $(DESTDIR)$(pspell_pkgdatadir)
	${INSTALL_DATA} $(CONFIG) $(DESTDIR)$(pkgdatadir)
	${INSTALL_DATA} $(PHONET) $(DESTDIR)$(pkgdatadir)
	${INSTALL_DATA} ./dansk  $(DESTDIR)$(pkglibdir)
	ln -sf dansk $(DESTDIR)$(pkglibdir)/danish
	${INSTALL_DATA} da-aspell.pwli $(DESTDIR)$(pspell_pkgdatadir)

# vim:sw=8:tw=72:ts=8:ft=make
