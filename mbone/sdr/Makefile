#   $OpenBSD: Makefile,v 1.13 2000/04/07 12:57:29 kevlo Exp $

DISTNAME=	sdr-2.7e
CATEGORIES=	mbone
NEED_VERSION=	1.230
MASTER_SITES=	http://www-mice.cs.ucl.ac.uk/multimedia/software/sdr/2.7e/

MAINTAINER=	angelos@openbsd.org

LICENSE_TYPE=		BSD
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

LIB_DEPENDS=	tcl80.1.5::lang/tcl/8.0 \
		tk80.1.5::x11/tk/8.0

USE_X11=	Yes
USE_GMAKE=	Yes
HAS_CONFIGURE=	Yes
FAKE=		Yes

# src/libs.tcl is autogenerated from the tcl/tk installed on the
# build system, so we shouldn't use the one in the distribution.
# Makefile.work and configure help to work with the sdr multi-platform
# build structure.
post-extract:
	@rm -f ${WRKSRC}/src/libs.tcl
	@cp ${FILESDIR}/Makefile.work ${WRKSRC}/Makefile
	@cp ${FILESDIR}/configure ${WRKSRC}
	@cp ${FILESDIR}/image_directory.xbm ${WRKSRC}/sdr/src/
	@${CHMOD} 755 ${WRKSRC}/configure

post-install:
	${INSTALL_PROGRAM} ${WRKSRC}/sdr/freebsd/sdr ${PREFIX}/bin

.include <bsd.port.mk>
