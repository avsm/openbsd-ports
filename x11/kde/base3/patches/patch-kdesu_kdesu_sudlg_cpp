$OpenBSD: patch-kdesu_kdesu_sudlg_cpp,v 1.3 2004/09/18 09:36:43 espie Exp $
--- kdesu/kdesu/sudlg.cpp.orig	Sat May 22 22:26:47 2004
+++ kdesu/kdesu/sudlg.cpp	Mon Sep  6 11:44:30 2004
@@ -12,10 +12,11 @@
 #include "sudlg.h"
 
 
-KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep, const QString& icon)
+KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep, const QString& icon, bool useSudo)
     : KPasswordDialog(Password, enableKeep, User1, icon)
 {
     m_User = auth_user;
+    m_Sudo = useSudo;
     setCaption(i18n("Run as %1").arg(user));
 
     QString prompt;
@@ -41,6 +42,7 @@ bool KDEsuDialog::checkPassword(const ch
 {
     SuProcess proc;
     proc.setUser(m_User);
+    proc.setUseSudo(m_Sudo);
     int status = proc.checkInstall(password);
     switch (status)
     {
