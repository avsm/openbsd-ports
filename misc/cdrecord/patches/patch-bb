--- cdrecord/scsi-bsd.c-	Fri Oct  9 04:21:39 1998
+++ cdrecord/scsi-bsd.c 	Tue Nov  2 22:49:29 1999
@@ -56,7 +56,13 @@
 #define	SADDR_TARGET(a)	(SADDR_ISSCSI(a)?(a).addr.scsi.target:(a).addr.atapi.atbus*2+(a).addr.atapi.drive)
 #define	SADDR_LUN(a)	(SADDR_ISSCSI(a)?(a).addr.scsi.lun:0)
 #else
+
+#if     defined(__OpenBSD__) && defined(TYPE_ATAPI)
+#define MAYBE_ATAPI
+#define	SADDR_ISSCSI(a)	((a).type == TYPE_SCSI)
+#else
 #define	SADDR_ISSCSI(a)	(1)
+#endif  /* OpenBSD */
 
 #define	SADDR_BUS(a)	(a).scbus
 #define	SADDR_TARGET(a)	(a).target

