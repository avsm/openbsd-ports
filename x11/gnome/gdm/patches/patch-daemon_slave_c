$OpenBSD: patch-daemon_slave_c,v 1.4 2004/09/15 04:15:25 marcm Exp $
--- daemon/slave.c.orig	Wed Aug 18 12:57:19 2004
+++ daemon/slave.c	Fri Sep 10 20:42:41 2004
@@ -2658,7 +2658,7 @@ gdm_slave_greeter (void)
 
 	exec_command (EXPANDED_BINDIR "/gdmlogin", NULL);
 
-	VE_IGNORE_EINTR (execl (EXPANDED_BINDIR "/gdmlogin", EXPANDED_BINDIR "/gdmlogin", NULL));
+	VE_IGNORE_EINTR (execl (EXPANDED_BINDIR "/gdmlogin", EXPANDED_BINDIR "/gdmlogin", (void *)NULL));
 
 	gdm_error_box (d,
 		       GTK_MESSAGE_ERROR,
@@ -3561,8 +3561,7 @@ session_child_run (struct passwd *pwent,
 	if (setusercontext (NULL, pwent, pwent->pw_uid,
 			    LOGIN_SETLOGIN | LOGIN_SETPATH |
 			    LOGIN_SETPRIORITY | LOGIN_SETRESOURCES |
-			    LOGIN_SETUMASK | LOGIN_SETUSER |
-			    LOGIN_SETENV) < 0)
+			    LOGIN_SETUMASK | LOGIN_SETUSER) < 0)
 		gdm_child_exit (DISPLAY_REMANAGE,
 				_("%s: setusercontext() failed for %s. "
 				  "Aborting."), "session_child_run",
@@ -4838,7 +4837,7 @@ check_for_interruption (const char *msg)
 					execl (GdmSoundProgram,
 					       GdmSoundProgram,
 					       GdmSoundOnLoginFile,
-					       NULL);
+					       (void *)NULL);
 
 					_exit (0);
 				}
