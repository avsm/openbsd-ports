$OpenBSD: patch-ffmpeg_frame_h,v 1.1.1.1 2009/08/16 20:04:39 jolan Exp $
--- ffmpeg_frame.h.orig	Mon Oct 13 18:02:40 2008
+++ ffmpeg_frame.h	Fri Nov 21 14:54:36 2008
@@ -38,6 +38,8 @@
 
 #include "php_version.h"
 
+#include "php_ffmpeg.h"
+
 #include <avcodec.h>
 #include <avformat.h>
 
@@ -45,7 +47,7 @@
 #include "config.h"
 #endif
 
-/* object can't be created from user space so no PHP constructor */
+/* ffmpeg_frame can't be instantiated from user space so no PHP constructor */
 //FFMPEG_PHP_METHOD(ffmpeg_frame, __construct);
 
 /* frame methods */
@@ -71,17 +73,6 @@ ff_frame_context* _php_create_ffmpeg_frame(INTERNAL_FU
 
 int _php_convert_frame(ff_frame_context *ff_frame, int new_fmt);
 
-#define GET_FRAME_RESOURCE(ffmpeg_frame_object, ffmpeg_frame) {\
-	zval **_tmp_zval;\
-    if (zend_hash_find(Z_OBJPROP_P(ffmpeg_frame_object), "ffmpeg_frame",\
-                sizeof("ffmpeg_frame"), (void **)&_tmp_zval) == FAILURE) {\
-        zend_error(E_ERROR, "Unable to locate ffmpeg_frame resource in this object.");\
-        RETURN_FALSE;\
-    }\
-\
-    ZEND_FETCH_RESOURCE(ffmpeg_frame, ff_frame_context*, _tmp_zval, -1,\
-            "ffmpeg_frame", le_ffmpeg_frame);\
-}\
 
 #endif // FFMPEG_FRAME_H
 
