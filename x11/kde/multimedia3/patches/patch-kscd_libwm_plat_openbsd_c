$OpenBSD: patch-kscd_libwm_plat_openbsd_c,v 1.4 2004/09/18 09:36:44 espie Exp $
--- kscd/libwm/plat_openbsd.c.orig	Sat May 22 22:56:56 2004
+++ kscd/libwm/plat_openbsd.c	Tue Sep  7 17:25:44 2004
@@ -127,10 +127,9 @@ wmcd_open(struct wm_drive *d)
   
   find_drive_struct(vendor, model, rev);
   
-  (d->init)(d);
-  
   d->fd = fd;
-  
+  if (d->proto->gen_init)
+  	return (d->proto->gen_init)(d);
   return (0);
 } /* wmcd_open() */
 
@@ -314,7 +313,7 @@ gen_get_cdlen(struct wm_drive *d, int *f
  * Play the CD from one position to another (both in frames.)
  */
 int
-gen_play(struct wm_drive *d, int start, int end)
+gen_play(struct wm_drive *d, int start, int end, int realstart)
 {
   struct ioc_play_msf	msf;
   
