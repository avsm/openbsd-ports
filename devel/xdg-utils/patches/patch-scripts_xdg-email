$OpenBSD: patch-scripts_xdg-email,v 1.3 2008/11/26 17:49:39 ajacoutot Exp $
--- scripts/xdg-email.orig	Sun Jun 24 21:58:04 2007
+++ scripts/xdg-email	Wed Nov 26 18:45:09 2008
@@ -480,7 +480,7 @@ result=$(echo "$1" | $utf8 | awk '
 
 options=
 mailto=
-utf8="iconv -t utf8"
+utf8="iconv -t UTF-8"
 while [ $# -gt 0 ] ; do
     parm="$1"
     shift
@@ -607,12 +607,21 @@ if which xdg-email-hook.sh > /dev/null 2> /dev/null; t
     fi
 fi
 
+if which xdg-email-hook > /dev/null 2> /dev/null; then
+    xdg-email-hook "${mailto}"
+    if [ $? -eq 0 ]; then
+        exit_success
+    else
+        exit_failure_operation_failed
+    fi
+fi
+
 detectDE
 
 if [ x"$DE" = x"" ]; then
     # if BROWSER variable is not set, check some well known browsers instead
     if [ x"$BROWSER" = x"" ]; then
-        BROWSER=firefox:mozilla:netscape
+        BROWSER=firefox:seamonkey:epiphany:opera:mozilla:netscape
     fi
     DE=generic
 fi
