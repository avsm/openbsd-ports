$OpenBSD: patch-proto_h,v 1.1 2002/01/24 23:25:32 naddy Exp $
--- proto.h.orig	Fri Nov 30 01:21:09 2001
+++ proto.h	Thu Jan 24 23:35:43 2002
@@ -15,10 +15,12 @@ int read_batch_flist_file(char *buff, in
 unsigned char read_batch_flags();
 void read_batch_flist_info(struct file_struct **fptr);
 void write_batch_csums_file(char *buff, int bytes_to_write);
-void close_batch_csums_file() ;
-void write_batch_csum_info(int *flist_entry, int flist_count, struct sum_struct *s);
+void close_batch_csums_file();
+void write_batch_csum_info(int *flist_entry, int flist_count,
+			   struct sum_struct *s);
 int read_batch_csums_file(char *buff, int len);
-void read_batch_csum_info(int flist_entry, struct sum_struct *s, int *checksums_match);
+void read_batch_csum_info(int flist_entry, struct sum_struct *s,
+			  int *checksums_match);
 void write_batch_delta_file(char *buff, int bytes_to_write);
 void close_batch_delta_file();
 int read_batch_delta_file(char *buff, int len);
@@ -55,7 +57,7 @@ void add_exclude_line(char *p);
 void add_include_line(char *p);
 void add_cvs_excludes(void);
 int sparse_end(int f);
-int write_file(int f,char *buf,int len);
+int write_file(int f,char *buf,size_t len);
 struct map_struct *map_file(int fd,OFF_T len);
 char *map_ptr(struct map_struct *map,OFF_T offset,int len);
 void unmap_file(struct map_struct *map);
@@ -81,21 +83,21 @@ void do_hard_links(struct file_list *fli
 void io_set_error_fd(int fd);
 int32 read_int(int f);
 int64 read_longint(int f);
-void read_buf(int f,char *buf,int len);
-void read_sbuf(int f,char *buf,int len);
+void read_buf(int f,char *buf,size_t len);
+void read_sbuf(int f,char *buf,size_t len);
 unsigned char read_byte(int f);
 void io_start_buffering(int fd);
 void io_flush(void);
 void io_end_buffering(int fd);
 void write_int(int f,int32 x);
 void write_longint(int f, int64 x);
-void write_buf(int f,char *buf,int len);
+void write_buf(int f,char *buf,size_t len);
 void write_byte(int f,unsigned char c);
-int read_line(int f, char *buf, int maxlen);
+int read_line(int f, char *buf, size_t maxlen);
 void io_printf(int fd, const char *format, ...);
 void io_start_multiplex_out(int fd);
 void io_start_multiplex_in(int fd);
-int io_multiplex_write(enum logcode code, char *buf, int len);
+int io_multiplex_write(enum logcode code, char *buf, size_t len);
 void io_multiplexing_close(void);
 char *lp_motd_file(void);
 char *lp_log_file(void);
@@ -166,6 +168,9 @@ int set_perms(char *fname,struct file_st
 void sig_int(void);
 void finish_transfer(char *fname, char *fnametmp, struct file_struct *file);
 void send_files(struct file_list *flist,int f_out,int f_in);
+int try_bind_local(int s,
+		   int ai_family, int ai_socktype,
+		   const char *bind_address);
 int open_socket_out(char *host, int port, const char *bind_address,
 		    int af_hint);
 int open_socket_out_wrapped (char *host,
