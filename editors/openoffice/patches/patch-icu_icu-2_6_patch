$OpenBSD: patch-icu_icu-2_6_patch,v 1.1.1.1 2006/08/17 14:56:22 robert Exp $
--- icu/icu-2.6.patch.orig	Tue Jun 20 02:19:36 2006
+++ icu/icu-2.6.patch	Tue Aug 15 14:03:10 2006
@@ -74,32 +74,6 @@
       /** Default constructor.  Creates an empty shell of an iterator, with no
        *  rules or text to iterate over.   Object can subsequently be assigned to.
        *  @draft ICU 2.2
-*** misc/icu/source/config/mh-bsd-gcc	2002-05-02 01:48:10.000000000 +0200
---- misc/build/icu/source/config/mh-bsd-gcc	2006-03-09 16:00:48.000000000 +0100
-***************
-*** 10,21 ****
---- 10,30 ----
-  GEN_DEPS.cc=	$(CXX) -E -MM $(DEFS) $(CPPFLAGS)
-  
-  ## Flags for position independent code
-+ STATICCFLAGS = -fPIC 
-+ STATICCXXFLAGS = -fPIC 
-+ STATICCPPFLAGS = -DPIC 
-  SHAREDLIBCFLAGS = -fPIC
-  SHAREDLIBCXXFLAGS = -fPIC
-  SHAREDLIBCPPFLAGS = -DPIC
-  
-  ## Compiler switch to embed a runtime search path
-  LD_RPATH=	
-+ ## Force RPATH=$ORIGIN to locate own dependencies w/o need for LD_LIBRARY_PATH
-+ ENABLE_RPATH=YES
-+ RPATHLDFLAGS=${LD_RPATH_PRE}'$$ORIGIN'
-+ 
-+ #SH#	ENABLE_RPATH=YES
-+ #SH#	RPATHLDFLAGS="${LD_RPATH_PRE}'$$ORIGIN'"
-  LD_RPATH_PRE=	-Wl,-rpath,
-  
-  ## Compiler switch to embed a library name
 *** misc/icu/source/config/mh-darwin	2003-06-03 22:52:56.000000000 +0200
 --- misc/build/icu/source/config/mh-darwin	2006-03-09 16:00:46.000000000 +0100
 ***************
@@ -2929,4 +2903,56 @@
 !     return doCaseCompare(start, destLength, srcText.fArray, srcStart, srcLength, options);
     }
   }
+  
+*** misc/icu/source/stubdata/stubdata.c    Tue Nov 20 21:28:14 2001
+--- misc/build/icu/source/stubdata/stubdata.c Sat Jul 29 10:20:42 2006
+***************
+*** 28,41 ****
+      UDataInfo info;
+      char padding[8];
+      uint32_t count, reserved;
+-     /*
+      const struct {
+      const char *const name; 
+      const void *const data;
+!     } toc[1];
+!     */
+!    int   fakeNameAndData[4];       /* TODO:  Change this header type from */
+!                                    /*        pointerTOC to OffsetTOC.     */
+  } ICU_Data_Header;
+  
+  U_EXPORT const ICU_Data_Header U_ICUDATA_ENTRY_POINT = {
+--- 28,37 ----
+      UDataInfo info;
+      char padding[8];
+      uint32_t count, reserved;
+      const struct {
+      const char *const name; 
+      const void *const data;
+!     } toc[295];  /* set to real toc size to avoid symbol size mismatch runtime link errors */
+  } ICU_Data_Header;
+  
+  U_EXPORT const ICU_Data_Header U_ICUDATA_ENTRY_POINT = {
+***************
+*** 64,73 ****
+      0,                  /* count        */
+      0,                  /* Reserved     */
+      {                   /*  TOC structure */
+! /*        {    */
+!           0 , 0 , 0, 0  /* name and data entries.  Count says there are none,  */
+                          /*  but put one in just in case.                       */
+! /*        }  */
+      }
+  };
+  
+--- 60,69 ----
+      0,                  /* count        */
+      0,                  /* Reserved     */
+      {                   /*  TOC structure */
+!           {
+!                 {0 , 0} /* name and data entries.  Count says there are none,  */
+                          /*  but put one in just in case.                       */
+!           }
+      }
+  };
   
