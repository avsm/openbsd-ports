$OpenBSD: patch-configure,v 1.3 2005/01/05 15:45:15 alek Exp $
--- configure.orig	Wed Apr 23 04:33:56 2003
+++ configure	Wed Jan  5 16:10:31 2005
@@ -8029,13 +8029,13 @@ LIBTOOL='$(SHELL) $(top_builddir)/libtoo
 
 
 	PTHREAD_LIB=""
-	echo "$as_me:$LINENO: checking for pthread_create in -lpthread" >&5
-echo $ECHO_N "checking for pthread_create in -lpthread... $ECHO_C" >&6
+	echo "$as_me:$LINENO: checking for pthread_create in -pthread" >&5
+echo $ECHO_N "checking for pthread_create in -pthread... $ECHO_C" >&6
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 #include "confdefs.h"
@@ -8085,15 +8085,15 @@ fi
 echo "$as_me:$LINENO: result: $ac_cv_lib_pthread_pthread_create" >&5
 echo "${ECHO_T}$ac_cv_lib_pthread_pthread_create" >&6
 if test $ac_cv_lib_pthread_pthread_create = yes; then
-  PTHREAD_LIB="-lpthread"
+  PTHREAD_LIB="-pthread"
 else
-  echo "$as_me:$LINENO: checking for pthread_create in -lpthreads" >&5
-echo $ECHO_N "checking for pthread_create in -lpthreads... $ECHO_C" >&6
+  echo "$as_me:$LINENO: checking for pthread_create in -pthreads" >&5
+echo $ECHO_N "checking for pthread_create in -pthreads... $ECHO_C" >&6
 if test "${ac_cv_lib_pthreads_pthread_create+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthreads  $LIBS"
+LIBS="-pthreads  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 #include "confdefs.h"
@@ -8143,7 +8143,7 @@ fi
 echo "$as_me:$LINENO: result: $ac_cv_lib_pthreads_pthread_create" >&5
 echo "${ECHO_T}$ac_cv_lib_pthreads_pthread_create" >&6
 if test $ac_cv_lib_pthreads_pthread_create = yes; then
-  PTHREAD_LIB="-lpthreads"
+  PTHREAD_LIB="-pthreads"
 else
   echo "$as_me:$LINENO: checking for pthread_create in -lc_r" >&5
 echo $ECHO_N "checking for pthread_create in -lc_r... $ECHO_C" >&6
@@ -11324,7 +11324,7 @@ cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 if test "$ac_cv_search_ID3Tag_Link" = no; then
-  for ac_lib in "id3 -lz -lstdc++"; do
+  for ac_lib in "id3 -lm -lz -lstdc++"; do
     LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
     cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
@@ -11437,7 +11437,7 @@ if { (eval echo "$as_me:$LINENO: \"$ac_l
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  . conftest.id3
+  . $srcdir/conftest.id3
    echo "${ID3LIB_MAJOR}.${ID3LIB_MINOR}.${ID3LIB_PATCH}"
 else
   echo "$as_me: program exited with status $ac_status" >&5
