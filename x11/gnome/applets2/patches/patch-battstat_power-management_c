$OpenBSD: patch-battstat_power-management_c,v 1.2 2007/05/16 22:18:38 jasper Exp $
--- battstat/power-management.c.orig	Tue Oct 24 00:50:49 2006
+++ battstat/power-management.c	Sat Dec 23 21:10:00 2006
@@ -28,6 +28,7 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #ifdef HAVE_SYS_SYSCTL_H
+#include <sys/param.h>
 #include <sys/sysctl.h>
 #endif
 
@@ -248,12 +249,13 @@ apm_readinfo (BatteryStatus *status)
   /* Code for OpenBSD by Joe Ammond <jra@twinight.org>. Using the same
      procedure as for FreeBSD.
   */
-  struct apm_info apminfo;
   int fd;
 
 #if defined(__NetBSD__)
+  struct apm_info apminfo;
   if (DEBUG) g_print("apm_readinfo() (NetBSD)\n");
 #else /* __OpenBSD__ */
+  struct apm_power_info apminfo;
   if (DEBUG) g_print("apm_readinfo() (OpenBSD)\n");
 #endif
 
