# $OpenBSD: Makefile,v 1.7 2001/09/07 11:32:54 wilfried Exp $

COMMENT=		'wm-app; minesweeper'

DISTNAME=		wmtimebomb.20
PKGNAME=		wmtimebomb-0.2.0
CATEGORIES=		games x11 x11/windowmaker
NEED_VERSION=		1.454

HOMEPAGE=		http://www.maliwan.org/wmtimebomb.shtml

MAINTAINER=		Peter Stromberg <wilfried@openbsd.org>

PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=		ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/local-distfiles/mharo/ \
			ftp://ftp.sra.co.jp/pub/os/FreeBSD/distfiles/

LIB_DEPENDS=		wraster.4::x11/windowmaker \
			intl::devel/gettext \
			PropList.2::devel/libproplist

USE_X11=		Yes
CONFIGURE_STYLE=	imake

FLAVORS=		8bpp
FLAVOR?=

WRKDIST=		${WRKDIR}/wmtimebomb.app

SAMPLE_DIR=		${PREFIX}/share/examples/wmtimebomb
SUBST_VARS+=		SAMPLE_DIR

pre-configure:
.if ${FLAVOR:L:M8pp}
	cd ${WRKSRC} && \
		rm XPM && ln -s XPM.lo XPM
.else
	cd ${WRKSRC} && \
		rm XPM && ln -s XPM.hi XPM
.endif

do-install:
	${INSTALL_PROGRAM} ${WRKBUILD}/wmtimebomb ${PREFIX}/bin
	${INSTALL_DATA_DIR} ${SAMPLE_DIR}
	${INSTALL_DATA} ${WRKSRC}/example.modefile ${SAMPLE_DIR}

.include <bsd.port.mk>
