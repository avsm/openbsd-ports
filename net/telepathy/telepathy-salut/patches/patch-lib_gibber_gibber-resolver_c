$OpenBSD: patch-lib_gibber_gibber-resolver_c,v 1.2 2010/09/23 13:47:35 jasper Exp $

Use GETSHORT instead of NS_GET16 which comes with libresolv.

--- lib/gibber/gibber-resolver.c.orig	Tue Sep 21 20:10:57 2010
+++ lib/gibber/gibber-resolver.c	Tue Sep 21 20:12:26 2010
@@ -683,8 +683,8 @@ gibber_resolver_res_query_to_list (guchar *answer, int
 
        /* Ignore the initial string, which has the query in it */
        pos += len;
-       NS_GET16 (type, pos);
-       NS_GET16 (class, pos);
+       GETSHORT (type, pos);
+       GETSHORT (class, pos);
 
        if (type != T_SRV || class != C_IN)
          goto failed;
@@ -692,9 +692,9 @@ gibber_resolver_res_query_to_list (guchar *answer, int
        /* skip ttl and dlen */
        pos += 6;
 
-       NS_GET16 (pref, pos);
-       NS_GET16 (weight, pos);
-       NS_GET16 (port, pos);
+       GETSHORT (pref, pos);
+       GETSHORT (weight, pos);
+       GETSHORT (port, pos);
        len = dn_expand (answer, end, pos, name, 255);
 
        list = g_list_prepend (list,
