$OpenBSD: patch-src_xine-engine_xine_c,v 1.11 2010/11/22 11:15:55 sthen Exp $
--- src/xine-engine/xine.c.orig	Thu Apr 29 12:55:02 2010
+++ src/xine-engine/xine.c	Sat Nov 13 13:31:08 2010
@@ -1561,6 +1561,8 @@ void xine_exit (xine_t *this) {
   if(this->port_ticket)
     this->port_ticket->dispose(this->port_ticket);
 
+  pthread_mutex_destroy(&this->log_lock);
+
 #if defined(WIN32)
   WSACleanup();
 #endif
@@ -1604,6 +1606,7 @@ xine_t *xine_new (void) {
    * log buffers
    */
   memset(this->log_buffers, 0, sizeof(this->log_buffers));
+  pthread_mutex_init (&this->log_lock, NULL);
 
 
 #ifdef WIN32
@@ -1679,7 +1682,7 @@ static void config_save_cb (void *this_gen, xine_cfg_e
     pthread_mutex_lock(&this->streams_lock);
     if ( (ite = xine_list_front(this->streams)) ) {
       stream = xine_list_get_value(this->streams, ite);
-      _x_message(stream, XINE_MSG_SECURITY, _("The specified save_dir might be a security risk."), NULL);
+      _x_message(stream, XINE_MSG_SECURITY, _("The specified save_dir might be a security risk."), (char *)NULL);
     }
     pthread_mutex_unlock(&this->streams_lock);
   }
@@ -1696,7 +1699,6 @@ void xine_init (xine_t *this) {
    * locks
    */
   pthread_mutex_init (&this->streams_lock, NULL);
-  pthread_mutex_init (&this->log_lock, NULL);
 
   /* initialize color conversion tables and functions */
   init_yuv_conversion();
