$OpenBSD: patch-http_load_c,v 1.1.1.1 2001/08/06 00:35:05 brad Exp $
--- http_load.c.orig	Thu Apr  5 21:07:27 2001
+++ http_load.c	Sun Aug  5 18:45:02 2001
@@ -137,6 +137,7 @@ static int max_connections, num_connecti
 
 static char* argv0;
 static int do_checksum, do_throttle, do_verbose, do_jitter, do_proxy;
+static int idle_secs = IDLE_SECS;
 static float throttle;
 static char* proxy_host;
 static int proxy_port;
@@ -309,6 +310,16 @@ main( int argc, char** argv )
 		*colon = '\0';
 		}
 	    }
+       else if ( strncmp( argv[argn], "-timeout", sizeof("-timeout") ) == 0 && argn + 1 < argc )
+           {
+           idle_secs = atoi( argv[++argn] );
+           if ( idle_secs < 1 )
+               {
+               (void) fprintf(
+                   stderr, "%s: timeout seconds must be at least 1\n", argv0 );
+               exit( 1 );
+               }
+           }
 	else
 	    usage();
 	++argn;
@@ -456,6 +467,8 @@ usage( void )
 	"usage:  %s [-checksum] [-throttle] [-proxy host:port] [-verbose]\n", argv0 );
     (void) fprintf( stderr,
 	"            -parallel N | -rate N [-jitter]\n" );
+    (void) fprintf( stderr,
+       "            -timeout N\n" );
     (void) fprintf( stderr,
 	"            -fetches N | -seconds N\n" );
     (void) fprintf( stderr,
