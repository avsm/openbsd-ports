$OpenBSD: patch-Makefile,v 1.1.1.1 2001/05/11 01:15:25 naddy Exp $
--- Makefile.orig	Wed Jan 10 19:51:47 2001
+++ Makefile	Fri May 11 03:09:54 2001
@@ -19,15 +19,15 @@ EXTRA_LIBS += -lXext
 
 # This should be set to the location of the X installation you want to
 # compile against.
-XROOT = /usr/X11R6
+XROOT = ${X11BASE}
 
 # --------------------------------------------------------------------
 
-CC       = gcc
-CFLAGS   = -g -O2 -Wall
+#CC       = gcc
+#CFLAGS   = -g -O2 -Wall
 
-BINDIR   = $(DESTDIR)$(XROOT)/bin
-MANDIR   = $(DESTDIR)$(XROOT)/man/man1
+BINDIR   = ${PREFIX}/bin
+MANDIR   = ${PREFIX}/man/man1
 INCLUDES = -I$(XROOT)/include
 LDPATH   = -L$(XROOT)/lib
 LIBS     = -lX11 $(EXTRA_LIBS)
@@ -38,6 +38,7 @@ OBJS     = main.o events.o client.o new.
 HEADERS  = aewm.h
 
 all: $(PROG)
+	cd goodies; ${MAKE}
 
 $(PROG): $(OBJS)
 	$(CC) $(OBJS) $(LDPATH) $(LIBS) -o $@
@@ -46,9 +47,9 @@ $(OBJS): %.o: %.c $(HEADERS)
 	$(CC) $(CFLAGS) $(DEFINES) $(INCLUDES) -c $< -o $@
 
 install: all
-	install -s $(PROG) $(BINDIR)
-	install -m 644 $(MANPAGE) $(MANDIR)
-	gzip -9vf $(MANDIR)/$(MANPAGE)
+	${BSD_INSTALL_PROGRAM} $(PROG) $(BINDIR)
+	${BSD_INSTALL_MAN} $(MANPAGE) $(MANDIR)
+	cd goodies; ${MAKE} install
 
 clean:
 	rm -f $(PROG) $(OBJS)
