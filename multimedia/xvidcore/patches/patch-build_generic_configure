$OpenBSD: patch-build_generic_configure,v 1.2 2008/07/14 06:02:31 brad Exp $
--- build/generic/configure.orig	Thu Jun 28 11:27:27 2007
+++ build/generic/configure	Mon Jul  7 23:31:24 2008
@@ -1316,8 +1316,8 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
 
-API_MAJOR="4"
-API_MINOR="1"
+API_MAJOR="$API_MAJOR"
+API_MINOR="$API_MINOR"
 
 minimum_nasm_patch_version=34
 nasm_prog="nasm"
@@ -2613,7 +2613,7 @@ echo $ECHO_N "checking for architecture type... $ECHO_
 echo "${ECHO_T}ia32" >&6
 	  	ARCHITECTURE="IA32"
                 ;;
-          x86_64)
+          x86_64 | amd64)
                 echo "$as_me:$LINENO: result: x86_64" >&5
 echo "${ECHO_T}x86_64" >&6
                 ARCHITECTURE="X86_64"
@@ -3838,7 +3838,7 @@ echo "${ECHO_T}ok" >&6
 echo "${ECHO_T}ok" >&6
 	STATIC_LIB="libxvidcore.\$(STATIC_EXTENSION)"
 	SHARED_LIB="libxvidcore.\$(SHARED_EXTENSION).\$(API_MAJOR).\$(API_MINOR)"
-	SPECIFIC_LDFLAGS="-Wl,-soname,libxvidcore.\$(SHARED_EXTENSION).\$(API_MAJOR) -shared -lc -lm"
+	SPECIFIC_LDFLAGS="-shared -lm"
 	SPECIFIC_CFLAGS="-fPIC"
 	;;
      [cC][yY][gG][wW][iI][nN]*|mingw32*|mks*)
