$OpenBSD: patch-ext_xml_config_m4,v 1.1.1.1 2002/06/24 19:27:48 avsm Exp $
--- ext/xml/config.m4.orig	Fri Nov 30 20:00:06 2001
+++ ext/xml/config.m4	Wed Jun 19 13:17:32 2002
@@ -13,11 +13,12 @@ else
   order=12
 fi
 
-PHP_ARG_ENABLE(xml,whether to enable XML support,
-[  --disable-xml           Disable XML support using bundled expat lib], yes)
-
 PHP_ARG_WITH(expat-dir, external libexpat install dir,
 [  --with-expat-dir=DIR    XML: external libexpat install dir])
+remember_ext_shared=$ext_shared
+
+PHP_ARG_ENABLE(xml,whether to enable XML support,
+[  --disable-xml           Disable XML support using bundled expat lib], yes)
 
 if test "$PHP_XML" = "yes"; then
 if test "$PHP_EXPAT_DIR" = "no"; then
@@ -52,6 +53,7 @@ else
     AC_MSG_ERROR(not found. Please reinstall the expat distribution.)
   fi
 
+  ext_shared=$remember_ext_shared
   PHP_ADD_INCLUDE($EXPAT_DIR/include)
   PHP_ADD_LIBRARY_WITH_PATH(expat, $EXPAT_DIR/lib, EXPAT_SHARED_LIBADD)
 fi
