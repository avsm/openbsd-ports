$OpenBSD: patch-configure_in,v 1.1 2002/03/03 01:37:38 brad Exp $
--- configure.in.orig	Tue Aug  7 22:52:19 2001
+++ configure.in	Sat Feb  9 01:10:35 2002
@@ -55,16 +55,16 @@ if test "x$enable_fsstd" = "xyes"; then
 else
 	ICECAST_BINDIR=${prefix}/bin
 	ICECAST_SBINDIR=${prefix}/bin
-	ICECAST_ETCDIR=conf
-	ICECAST_ETCDIR_INST=${prefix}/conf
-	ICECAST_SHAREDIR=${prefix}
-	ICECAST_LOGDIR=logs
-	ICECAST_LOGDIR_INST=${prefix}/logs
-	ICECAST_TEMPLATEDIR=templates
-	ICECAST_TEMPLATEDIR_INST=${prefix}/templates
-	ICECAST_STATICDIR=static
-	ICECAST_STATICDIR_INST=${prefix}/static
-	ICECAST_DOCDIR=${prefix}/doc
+	ICECAST_ETCDIR=${sysconfdir}
+	ICECAST_ETCDIR_INST=${prefix}/share/examples/icecast
+	ICECAST_SHAREDIR=${prefix}/share/icecast
+	ICECAST_LOGDIR=/var/log/icecast
+	ICECAST_LOGDIR_INST=/var/log/icecast
+	ICECAST_TEMPLATEDIR=${prefix}/share/icecast/templates
+	ICECAST_TEMPLATEDIR_INST=${prefix}/share/icecast/templates
+	ICECAST_STATICDIR=${prefix}/share/icecast/static
+	ICECAST_STATICDIR_INST=${prefix}/share/icecast/static
+	ICECAST_DOCDIR=${prefix}/share/doc/icecast
 	USE_FSSTD=no
 fi
 
@@ -95,6 +95,7 @@ AC_PROG_RANLIB
 
 dnl Checks for programs.
 AC_PROG_CC
+AC_CANONICAL_HOST
 
 if test "$CC" = "gcc"; then
 	CFLAGS="$CFLAGS -Wall" 
@@ -156,17 +157,6 @@ case $system in
 		__SOMEBSD__=yes
 		AC_DEFINE(__SOMEBSD__)
 		AC_MSG_RESULT(Some BSD variant)
-		OLDCPPFLAGS=$CPPFLAGS
-		THREADCPPFLAGS="-pthread"
-		CPPFLAGS="$OLDCPPFLAGS $THREADCPPFLAGS"
-		AC_TRY_COMPILE([#include <pthread.h>],
-			       [pthread_t thread; ],	
-	       		       ,
-			       	CPPFLAGS="$OLDCPPFLAGS")
-		CPPFLAGS=$OLDCPPFLAGS
-		if test "$CC" = gcc; then
-			CFLAGS="-pthreads $CFLAGS"
-		fi
 		;;
 	*)
 		AC_MSG_RESULT($system)
@@ -362,6 +352,14 @@ THREADLIBS="no"
 
 AC_MSG_CHECKING(for pthread functions in standard libraries)
 AC_TRY_LINK(, [pthread_create();],AC_MSG_RESULT(yes);THREADLIBS="",AC_MSG_RESULT(no))
+
+case "$host_os" in
+*openbsd*)
+  AC_MSG_CHECKING(for pthreads on OpenBSD)
+  THREADLIBS="-pthread"
+  AC_MSG_RESULT($THREADLIBS)
+  ;;
+esac
 
 if test "$THREADLIBS" = ""; then
 	AC_MSG_CHECKING(if that definition really works)
