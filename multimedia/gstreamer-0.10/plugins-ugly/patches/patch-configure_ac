$OpenBSD: patch-configure_ac,v 1.3 2010/09/03 15:49:07 ajacoutot Exp $
--- configure.ac.orig	Thu Sep  2 23:25:08 2010
+++ configure.ac	Fri Sep  3 12:11:50 2010
@@ -366,7 +366,7 @@ AG_GST_CHECK_FEATURE(TWOLAME, [twolame], twolame, [
 dnl *** x264 (MPEG-4 part 10/h.264/AVC encoder) ***
 translit(dnm, m, l) AM_CONDITIONAL(USE_X264, true)
 AG_GST_CHECK_FEATURE(X264, [x264 plug-in], x264, [
-  AG_GST_CHECK_LIBHEADER(X264, x264, x264_encoder_encode, -lm, x264.h,
+  AG_GST_CHECK_LIBHEADER(X264, x264, x264_encoder_encode, -pthread -lm, x264.h,
       AC_MSG_CHECKING([for uptodate x264 API version])
       dnl _stdint not yet generated, so no compiling
       AC_TRY_CPP([
@@ -376,8 +376,8 @@ AG_GST_CHECK_FEATURE(X264, [x264 plug-in], x264, [
         #endif
       ], [
         AC_MSG_RESULT(yes)
-        X264_LIBS="$LDFLAGS -lx264 -lm"
-        X264_CFLAGS="$CFLAGS"
+        X264_LIBS="$LDFLAGS -lx264 -pthread -lm"
+        X264_CFLAGS="$CFLAGS -pthread"
         AC_SUBST(X264_LIBS)
         AC_SUBST(X264_CFLAGS)
       ], [
