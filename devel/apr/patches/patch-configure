$OpenBSD: patch-configure,v 1.5 2007/04/01 20:03:07 kurt Exp $
--- configure.orig	Sun Apr  9 16:32:36 2006
+++ configure	Wed Mar 28 09:57:24 2007
@@ -4317,6 +4317,11 @@ if test "x$apr_preload_done" != "xyes" ; then
         ;;
     *-openbsd*)
 
+  if test -z "$apr_lock_method"; then
+    test "x$silent" != "xyes" && echo "  setting apr_lock_method to \"USE_FLOCK_SERIALIZE\""
+    apr_lock_method="USE_FLOCK_SERIALIZE"
+  fi
+
   if test "x$CPPFLAGS" = "x"; then
     test "x$silent" != "xyes" && echo "  setting CPPFLAGS to \"-D_POSIX_THREADS\""
     CPPFLAGS="-D_POSIX_THREADS"
@@ -26147,7 +26152,7 @@ if test "${apr_cv_pthreads_lib+set}" = set; then
 else
 
   apr_ptc_libs=$LIBS
-  for lib in -lpthread -lpthreads -lc_r; do
+  for lib in -pthread -lpthread -lpthreads -lc_r; do
     LIBS="$apr_ptc_libs $lib"
 
 if test "$cross_compiling" = yes; then
@@ -26705,7 +26710,7 @@ if test "${apr_cv_pthreads_lib+set}" = set; then
 else
 
   apr_ptc_libs=$LIBS
-  for lib in -lpthread -lpthreads -lc_r; do
+  for lib in -pthread -lpthread -lpthreads -lc_r; do
     LIBS="$apr_ptc_libs $lib"
 
 if test "$cross_compiling" = yes; then
@@ -39523,7 +39528,7 @@ for ac_spec in func:semget func:semctl define:SEM_UNDO
 done
 if test ".$ac_rc" = .yes; then
     :
-    hassysvser="1"
+    hassysvser="0"
 else
     :
     hassysvser="0"
@@ -43558,7 +43563,7 @@ esac
 
 
 
-                                                            ac_config_files="$ac_config_files Makefile include/apr.h build/apr_rules.mk build/pkg/pkginfo apr-$APR_MAJOR_VERSION-config:apr-config.in apr.pc"
+                                                            ac_config_files="$ac_config_files Makefile include/apr.h build/apr_rules.mk build/pkg/pkginfo apr-$APR_MAJOR_VERSION-config:apr-config.in apr.pc apr-mt.pc"
 
 
 if test -d $srcdir/test; then
