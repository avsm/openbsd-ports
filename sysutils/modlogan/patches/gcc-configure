$OpenBSD: gcc-configure,v 1.1 2003/08/22 23:07:48 naddy Exp $
--- configure.orig	2003-08-23 00:43:32.000000000 +0200
+++ configure	2003-08-23 00:45:16.000000000 +0200
@@ -10119,6 +10119,8 @@ exit (malloc (0) ? 0 : 1);
 }
 _ACEOF
 rm -f conftest$ac_exeext
+_SAVE_CFLAGS=$CFLAGS
+CFLAGS=-O0
 if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
@@ -10138,6 +10140,7 @@ sed 's/^/| /' conftest.$ac_ext >&5
 ( exit $ac_status )
 ac_cv_func_malloc_0_nonnull=no
 fi
+CFLAGS=$_SAVE_CFLAGS
 rm -f core core.* *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
