$OpenBSD: patch-CPP_myWindows_myGetNumberOfProcessors_cpp,v 1.1.1.1 2007/04/20 17:50:05 steven Exp $
--- CPP/myWindows/myGetNumberOfProcessors.cpp.orig	Sat Jan 20 18:06:41 2007
+++ CPP/myWindows/myGetNumberOfProcessors.cpp	Sat Apr 14 07:28:38 2007
@@ -14,16 +14,16 @@ namespace NWindows
 	{
 		#if defined (__NetBSD__) || defined(__OpenBSD__)
 		int GetNumberOfProcessors() {
-			int mib[2];
-			size_t value[2];
+			int mib[2], value;
+			size_t len;
         		int nbcpu = 1;
 
         		mib[0] = CTL_HW;
         		mib[1] = HW_NCPU;
-        		value[1] = sizeof(size_t);
-        		if (sysctl(mib, 2, value, value+1, NULL, 0) >= 0)
-           		if (value[0] > nbcpu)
-                    		nbcpu = value[0];
+			len = sizeof(value);
+        		if (sysctl(mib, 2, &value, &len, NULL, 0) >= 0)
+           		if (value > nbcpu)
+                    		nbcpu = value;
 			return nbcpu;
 		}
 		#elif defined (__FreeBSD__)
