$OpenBSD: patch-jdk_src_solaris_native_sun_awt_awt_motif21_c,v 1.1 2008/03/19 18:05:46 kurt Exp $
--- jdk/src/solaris/native/sun/awt/awt_motif21.c.orig	Tue Dec  4 04:05:27 2007
+++ jdk/src/solaris/native/sun/awt/awt_motif21.c	Thu Feb 14 17:49:05 2008
@@ -33,9 +33,13 @@
 #include "awt_p.h"
 #include "awt_Component.h"
 
+#if (XmVersion >= 2001)
+#include <Xm/XmIm.h>
+#else
 #define XmPER_SHELL 0
 extern int32_t _XmImGetGeo(
                         Widget vw) ;
+#endif
 
 #define MAXARGS 10
 static Arg xic_vlist[MAXARGS];
@@ -102,9 +106,12 @@ awt_motif_getIMStatusHeight(Widget w, jobject tc)
         }
     }
 
+/* XXXBSD: resolve missing symbol? */
+#if !defined(_ALLBSD_SOURCE)
     if (im_height == 0) {
         im_height = _XmImGetGeo(w);
     }
+#endif
 
 #if defined(DEBUG)
     jio_fprintf(stderr,"awt_motif_getIMStatusHeight: Height = %d",im_height);
