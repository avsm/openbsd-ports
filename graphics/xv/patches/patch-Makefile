$OpenBSD: patch-Makefile,v 1.1 2005/06/23 20:23:05 sturm Exp $
--- Makefile.orig	Thu Jun 23 21:59:31 2005
+++ Makefile	Thu Jun 23 21:59:31 2005
@@ -1,7 +1,7 @@
 # Makefile for xv
 
 # your C compiler (and options) of choice
-CC = cc
+#CC = cc
 #CC = gcc -ansi
 # note that -ansi kills __USE_MISC (gcc 2.95.3), which (at least in Linux)
 # determines whether stdlib.h includes prototypes for mktemp(), random(), etc.
@@ -34,8 +34,8 @@ CCOPTS = -O
 ### In general, if your X11 include files and libX11.a library aren't in the
 ### 'standard' places in which the C compiler looks, you should add '-L' and
 ### '-I' options on the CCOPTS line to tell the compiler where said files are.
+CCOPTS += -I$(X11BASE)/include -L$(X11BASE)/lib $(USERCFLAGS)
 
-
 # BeOS _may_ need to use a different version (below), but probably not
 CLEANDIR = cleandir
 
@@ -47,7 +47,6 @@ MANDIR = $(PREFIX)/man/man1
 MANSUF = 1
 DOCDIR = $(PREFIX)/doc/xv-3.10a
 LIBDIR = $(PREFIX)/lib/xv
-SYSCONFDIR = $(PREFIX)/etc
 DESTDIR =
 
 
@@ -64,8 +63,8 @@ buildit: all
 ###
 JPEG    = -DDOJPEG
 #JPEGDIR = jpeg
-JPEGDIR = /usr
-#JPEGDIR = /usr/local
+#JPEGDIR = /usr
+JPEGDIR = $(LOCALBASE)
 #JPEGDIR = ../../libjpeg
 ###
 JPEGINC = -I$(JPEGDIR)/include
@@ -89,11 +88,11 @@ JPEGLIB = -L$(JPEGDIR)/lib -ljpeg
 ### on your machine, *COMMENT OUT* the following lines
 ###
 PNG    = -DDOPNG
-PNGDIR = /usr
-#PNGDIR = /usr/local
+#PNGDIR = /usr
+PNGDIR = $(LOCALBASE)
 #PNGDIR = ../../libpng
 ###
-PNGINC = -I$(PNGDIR)/include
+PNGINC = -I$(PNGDIR)/include/libpng
 #PNGINC = -I$(PNGDIR)
 ###
 PNGLIB = -L$(PNGDIR)/lib -lpng
@@ -131,8 +130,8 @@ ZLIBLIB = -L$(ZLIBDIR)/lib -lz
 #TIFF    = -DDOTIFF
 TIFF    = -DDOTIFF -DUSE_TILED_TIFF_BOTLEFT_FIX
 #TIFFDIR = tiff
-TIFFDIR = /usr
-#TIFFDIR = /usr/local
+#TIFFDIR = /usr
+TIFFDIR = $(LOCALBASE)
 #TIFFDIR = ../../libtiff
 ###
 TIFFINC = -I$(TIFFDIR)/include
@@ -298,7 +297,7 @@ CFLAGS = $(CCOPTS) $(PNG) $(PNGINC) $(ZL
 	-DSYSCONFDIR=\"$(SYSCONFDIR)\" -DXVEXECPATH=\"$(LIBDIR)\"
 
 ### remove -lm for BeOS:
-LIBS = $(TIFFLIB) $(JPEGLIB) $(PNGLIB) $(ZLIBLIB) -L/usr/X11R6/lib -lX11 -lm
+LIBS = $(TIFFLIB) $(JPEGLIB) $(PNGLIB) $(ZLIBLIB) -L$(X11BASE)/lib -lX11 -lm
 #LIBS = $(TIFFLIB) $(JPEGLIB) $(PNGLIB) $(ZLIBLIB) -lX11
 
 OBJS = 	xv.o xvevent.o xvroot.o xvmisc.o xvimage.o xvcolor.o xvsmooth.o \
@@ -359,7 +358,6 @@ install: all
 	cp docs/xcmap.man  $(DESTDIR)$(MANDIR)/xcmap.$(MANSUF)
 	cp docs/xvp2p.man  $(DESTDIR)$(MANDIR)/xvpictoppm.$(MANSUF)
 	cp docs/vdcomp.man $(DESTDIR)$(MANDIR)/vdcomp.$(MANSUF)
-	cp docs/xvdocs.ps* $(DESTDIR)$(LIBDIR) # or $(DESTDIR)$(DOCDIR)
 	#cp xv_mgcsfx.sample $(DESTDIR)$(SYSCONFDIR)/xv_mgcsfx
 
 tar:
