# $OpenBSD: Makefile,v 1.54 2004/06/05 11:15:42 brad Exp $
# $FreeBSD: Makefile,v 1.13 1999/03/01 16:18:30 mph Exp $

COMMENT=	"(E)nhanced (P)rogrammable (I)RC-II (C)lient"

VERSION=	2.0
HELP_DATE=	20040308
DISTNAME=	epic4-${VERSION}
PKGNAME=	${DISTNAME}p1
CATEGORIES=	net
MASTER_SITES=	ftp://ftp.epicsol.org/pub/epic/EPIC4-PRODUCTION/
DISTFILES=	epic4-${VERSION}.tar.bz2 epic4-help-${HELP_DATE}.tar.gz

HOMEPAGE=	http://www.epicsol.org/

MAINTAINER=	Brad Smith <brad@openbsd.org>

# BSD
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

SUBST_VARS=	VERSION

FAKE_FLAGS=	IP="${WRKINST}" \
		INSTALL_PROGRAM="${INSTALL_PROGRAM}" \
		INSTALL_DATA="${INSTALL_DATA}"

SEPARATE_BUILD=	simple
CONFIGURE_STYLE= gnu 
CONFIGURE_ARGS+= --program-transform-name=s,epic,epic4, \
		 --without-perl \
		 --without-tcl

INSTALL_TARGET=	install installhelp

NO_REGRESS=	Yes

DOCS=	README

post-extract:
	@mv -f ${WRKDIR}/help ${WRKSRC}

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/epic4
	@cd ${PREFIX}/bin && mv -f epic4-EPIC4-${VERSION} epic4
	@cd ${PREFIX}/libexec && mv -f wserv4 epic4-wserv4
	cd ${WRKSRC}; ${INSTALL_DATA} ${DOCS} ${PREFIX}/share/doc/epic4
	@find ${PREFIX}/share/epic4 -name 'CVS' -print0 | xargs -0 rm -rf

.include <bsd.port.mk>
