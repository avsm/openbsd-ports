$OpenBSD: patch-nsprpub_pr_include_md__openbsd_h,v 1.5 2004/11/05 07:37:56 jolan Exp $
--- nsprpub/pr/include/md/_openbsd.h.orig	Tue Jun 20 16:23:18 2000
+++ nsprpub/pr/include/md/_openbsd.h	Thu Nov  4 22:55:31 2004
@@ -43,6 +43,8 @@
 #define _PR_SI_ARCHITECTURE "x86"
 #elif defined(__alpha__)
 #define _PR_SI_ARCHITECTURE "alpha"
+#elif defined(__amd64__)
+#define _PR_SI_ARCHITECTURE "amd64"
 #elif defined(__m68k__)
 #define _PR_SI_ARCHITECTURE "m68k"
 #elif defined(__powerpc__)
@@ -80,10 +82,14 @@
 
 #define CONTEXT(_th) ((_th)->md.context)
 
-#if defined(__i386__) || defined(__sparc__) || defined(__m68k__) || defined(__powerpc__)
+#if defined(__i386__) || defined(__sparc__) || defined(__m68k__)
 #define JB_SP_INDEX 2
+#elif defined(__powerpc__)
+#define JB_SP_INDEX 1
 #elif defined(__alpha__)
 #define JB_SP_INDEX 34
+#elif defined(__amd64__)
+#define JB_SP_INDEX 6
 #elif defined(__arm32__)
 /*
  * On the arm32, the jmpbuf regs underwent a name change after OpenBSD 1.3.
