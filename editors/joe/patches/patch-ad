*** main.c.orig	Sun Jan 22 06:21:08 1995
--- main.c	Thu Nov 12 16:43:59 1998
***************
*** 119,124 ****
--- 119,125 ----
   if(flg)
    if(maint->curwin->watom->what==TYPETW) return 0;
    else maint->curwin->notify= &term;
+  nredraw(n);
   while(!leave && (!flg || !term))
    {
    MACRO *m;
***************
*** 187,198 ****
   run=namprt(argv[0]);
  #endif 
  
!  if(s=getenv("LINES")) sscanf(s,"%d",&lines);
!  if(s=getenv("COLUMNS")) sscanf(s,"%d",&columns);
!  if(s=getenv("BAUD")) sscanf(s,"%u",&Baud);
   if(getenv("DOPADDING")) dopadding=1;
   if(getenv("NOXON")) noxon=1;
!  if(s=getenv("JOETERM")) joeterm=s;
  
  #ifndef __MSDOS__
   if(!(cap=getcap(NULL,9600,NULL,NULL)))
--- 188,199 ----
   run=namprt(argv[0]);
  #endif 
  
!  if(s=(char *)getenv("LINES")) sscanf(s,"%d",&lines);
!  if(s=(char *)getenv("COLUMNS")) sscanf(s,"%d",&columns);
!  if(s=(char *)getenv("BAUD")) sscanf(s,"%u",&Baud);
   if(getenv("DOPADDING")) dopadding=1;
   if(getenv("NOXON")) noxon=1;
!  if(s=(char *)getenv("JOETERM")) joeterm=s;
  
  #ifndef __MSDOS__
   if(!(cap=getcap(NULL,9600,NULL,NULL)))
***************
*** 249,255 ****
    }
  
   vsrm(s);
!  s=getenv("HOME");
   if(s)
    {
    s=vsncpy(NULL,0,sz(s));
--- 250,256 ----
    }
  
   vsrm(s);
!  s=(char *)getenv("HOME");
   if(s)
    {
    s=vsncpy(NULL,0,sz(s));
