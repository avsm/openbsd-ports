$OpenBSD: patch-nessus-libraries_Makefile,v 1.2 2001/02/13 03:00:12 matt Exp $
--- nessus-libraries/Makefile.orig	Tue Dec 26 11:20:05 2000
+++ nessus-libraries/Makefile	Sun Feb 11 15:31:53 2001
@@ -3,7 +3,6 @@ include nessus.tmpl
 ALLDEPS = nessus.tmpl nessus-config
 
 all: $(ALLDEPS) $(CIPHER_MAKE)
-	cd libpcap-nessus && ${MAKE}
 	cd libnessus && ${MAKE}
 	cd libhosts_gatherer && ${MAKE}
 
@@ -22,7 +21,6 @@ nessus.tmpl: nessus.tmpl.in configure VE
 	touch $@
 
 win32:
-	-cd libpcap-nessus    && ${MAKE} distclean
 	-cd libhosts_gatherer && ${MAKE} distclean
 	cd $(CIPHER_SUBDIR)   && ${MAKE} win32-prep
 	@echo
@@ -37,14 +35,13 @@ cipher-make :
 	cd $(CIPHER_SUBDIR) && ${MAKE}
 
 cipher-install :
-	cd $(CIPHER_SUBDIR) && ${MAKE} install
+	cd $(CIPHER_SUBDIR) && ${MAKE} prefix=${prefix} install
 
 install : $(CIPHER_INSTALL)
 	test -d ${prefix} || ${INSTALL_DIR} -m 755 ${prefix}
 	test -d ${includedir}/nessus || ${INSTALL_DIR} -m 755 ${includedir}/nessus
-	cd libnessus && ${MAKE} install
-	cd libhosts_gatherer && ${MAKE} install
-	cd libpcap-nessus && ${MAKE} install 
+	cd libnessus && ${MAKE} prefix=${prefix} install
+	cd libhosts_gatherer && ${MAKE} prefix=${prefix} install
 
 	$(INSTALL) -m 0444 include/includes.h ${includedir}/nessus
 	$(INSTALL) -m 0444 include/libnessus.h ${includedir}/nessus
@@ -69,7 +66,6 @@ install : $(CIPHER_INSTALL)
 clean :
 	-cd libnessus && ${MAKE} clean
 	-cd libhosts_gatherer && ${MAKE} clean
-	-cd libpcap-nessus && ${MAKE} clean
 	[ ! -d "$(CIPHER_SUBDIR)" ] || (cd $(CIPHER_SUBDIR) && [ ! -f Makefile ] || ${MAKE} $@)
 
 distclean : clean
@@ -77,7 +73,6 @@ distclean : clean
 	config.status config.log ${rootdir}/include/libvers.h 
 	-cd libnessus && ${MAKE} distclean
 	-cd libhosts_gatherer && ${MAKE} distclean
-	-cd libpcap-nessus && ${MAKE} distclean
 	[ ! -d "$(CIPHER_SUBDIR)" ] || (cd $(CIPHER_SUBDIR) && [ ! -f Makefile ] || ${MAKE} $@)
 	rm -f nessus.tmpl nessus-config nessus-config.pre uninstall-nessus
 
@@ -100,10 +95,5 @@ distcheck:
 			     -e '/config\.log$$/d' \
 			     -e '/config\.status$$/d' \
 			     -e '/^include\/config\.h$$/d' \
-			     -e '/^libpcap-nessus\/scanner\.c$$/d' \
-			     -e '/^libpcap-nessus\/tokdefs\.h$$/d' \
-			     -e '/^libpcap-nessus\/version\.c$$/d' \
-			     -e '/^libpcap-nessus\/grammar\.c$$/d' \
-			     -e '/^libpcap-nessus\/Makefile$$/d' \
 			     -e '/\.libs\//d' -e '/\.la$$/d' \
 		| sort | diff -cb - MANIFEST
