$OpenBSD: patch-ompi_mca_btl_tcp_btl_tcp_component_c,v 1.1.1.1 2009/10/10 18:11:42 jasper Exp $
--- ompi/mca/btl/tcp/btl_tcp_component.c.orig	Fri Jul 10 00:46:56 2009
+++ ompi/mca/btl/tcp/btl_tcp_component.c	Fri Aug 21 15:08:45 2009
@@ -561,7 +561,7 @@ static int mca_btl_tcp_component_create_listen(uint16_
         addrlen = res->ai_addrlen;
         freeaddrinfo (res);
 
-#ifdef IPV6_V6ONLY
+#if defined(IPV6_V6ONLY) && !defined(__OpenBSD__)
         /* in case of AF_INET6, disable v4-mapped addresses */
         if (AF_INET6 == af_family) {
             int flg = 0;
