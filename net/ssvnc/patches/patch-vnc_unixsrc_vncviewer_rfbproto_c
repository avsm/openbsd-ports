$OpenBSD: patch-vnc_unixsrc_vncviewer_rfbproto_c,v 1.4 2009/12/31 14:49:45 sthen Exp $

allow to build with GCC 2

--- vnc_unixsrc/vncviewer/rfbproto.c.orig	Fri Nov 27 16:50:35 2009
+++ vnc_unixsrc/vncviewer/rfbproto.c	Wed Dec 30 22:34:56 2009
@@ -2357,8 +2357,8 @@ extern void raiseme(int force);
 Bool
 SendTextChatOpen(void)
 {
-	raiseme(0);
 	rfbTextChatMsg chat;
+	raiseme(0);
 	chat.type = rfbTextChat;
 	chat.pad1 = 0;
 	chat.pad2 = 0;
@@ -2727,6 +2727,7 @@ HandleRFBServerMessage()
 	int try_delay_sync = 0;
 	int cnt_pseudo = 0;
 	int cnt_image  = 0;
+	int skip_incFBU = 0;
 
 	if (db) fprintf(stderr, "FBU-0:    %.6f\n", dnow());
 	if (rdb < 0) {
@@ -2745,7 +2746,6 @@ HandleRFBServerMessage()
 		}
 	}
 
-	int skip_incFBU = 0;
 	sent_FBU = -1;
 
 	if (appData.pipelineUpdates) {
