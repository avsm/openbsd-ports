$OpenBSD: patch-hotspot_src_cpu_amd64_vm_c2_globals_amd64_hpp,v 1.3 2007/04/08 12:43:06 kurt Exp $
--- hotspot/src/cpu/amd64/vm/c2_globals_amd64.hpp.orig	Fri Apr  6 09:08:49 2007
+++ hotspot/src/cpu/amd64/vm/c2_globals_amd64.hpp	Fri Apr  6 09:10:19 2007
@@ -51,13 +51,17 @@ define_pd_global(bool, OptoBundling,                 f
 // insn rather than the expensive sequence of isns to load a 64 bit
 // pointer.  Note that CALL rel32off insns must be patched for
 // safepoints
-define_pd_global(intx, InitialCodeCacheSize,         1024*K);
 #ifdef __OpenBSD__
-define_pd_global(intx, ReservedCodeCacheSize,        256*M);
+// backport OpenJDK 1.7 settings
+// InitialCodeCacheSize derived from specjbb2000 run.
+define_pd_global(intx, InitialCodeCacheSize,         2496*K); // Integral multiple of CodeCacheExpansionSize
+define_pd_global(intx, ReservedCodeCacheSize,        48*M);
+define_pd_global(intx, CodeCacheExpansionSize,       64*K);
 #else
+define_pd_global(intx, InitialCodeCacheSize,         1024*K);
 define_pd_global(intx, ReservedCodeCacheSize,        1024*M);
-#endif
 define_pd_global(intx, CodeCacheExpansionSize,       64*K);
+#endif
 define_pd_global(uintx,CodeCacheMinBlockLength,      4);
 define_pd_global(intx, LoopUnrollLimit,		     60);
 define_pd_global(uintx, PermSize, ScaleForWordSize(16*M));
