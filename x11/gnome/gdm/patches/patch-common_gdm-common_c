$OpenBSD: patch-common_gdm-common_c,v 1.2 2010/06/04 07:45:56 ajacoutot Exp $

Make sure user password does not end-up in /var/log/messages.
GNOME bug #571846

--- common/gdm-common.c.orig	Thu Jun  3 03:06:25 2010
+++ common/gdm-common.c	Fri Jun  4 08:10:50 2010
@@ -217,7 +217,7 @@ ve_locale_to_utf8 (const char *str)
 	char *ret = g_locale_to_utf8 (str, -1, NULL, NULL, NULL);
 
 	if (ret == NULL) {
-		g_warning ("string not in proper locale encoding: \"%s\"", str);
+		g_warning ("string not in proper locale encoding");
 		return g_strdup (str);
 	} else {
 		return ret;
@@ -230,7 +230,7 @@ ve_locale_from_utf8 (const char *str)
 	char *ret = g_locale_from_utf8 (str, -1, NULL, NULL, NULL);
 
 	if (ret == NULL) {
-		g_warning ("string not in proper utf8 encoding: \"%s\"", str);
+		g_warning ("string not in proper utf8 encoding");
 		return g_strdup (str);
 	} else {
 		return ret;
@@ -242,7 +242,7 @@ ve_filename_to_utf8 (const char *str)
 {
 	char *ret = g_filename_to_utf8 (str, -1, NULL, NULL, NULL);
 	if (ret == NULL) {
-		g_warning ("string not in proper locale encoding: \"%s\"", str);
+		g_warning ("string not in proper locale encoding");
 		return g_strdup (str);
 	} else {
 		return ret;
@@ -254,7 +254,7 @@ ve_filename_from_utf8 (const char *str)
 {
 	char *ret = g_filename_from_utf8 (str, -1, NULL, NULL, NULL);
 	if (ret == NULL) {
-		g_warning ("string not in proper utf8 encoding: \"%s\"", str);
+		g_warning ("string not in proper utf8 encoding");
 		return g_strdup (str);
 	} else {
 		return ret;
