$OpenBSD: patch-t_t4019-diff-wserror_sh,v 1.2 2008/04/26 09:24:04 bernd Exp $
--- t/t4019-diff-wserror.sh.orig	Tue Apr  8 09:10:01 2008
+++ t/t4019-diff-wserror.sh	Thu Apr 10 10:42:58 2008
@@ -22,8 +22,8 @@ blue_grep='7;34m' ;# ESC [ 7 ; 3 4 m
 test_expect_success default '
 
 	git diff --color >output
-	grep "$blue_grep" output >error
-	grep -v "$blue_grep" output >normal
+	grep -a "$blue_grep" output >error
+	grep -a -v "$blue_grep" output >normal
 
 	grep Eight normal >/dev/null &&
 	grep HT error >/dev/null &&
@@ -37,8 +37,8 @@ test_expect_success 'without -trail' '
 
 	git config core.whitespace -trail
 	git diff --color >output
-	grep "$blue_grep" output >error
-	grep -v "$blue_grep" output >normal
+	grep -a "$blue_grep" output >error
+	grep -a -v "$blue_grep" output >normal
 
 	grep Eight normal >/dev/null &&
 	grep HT error >/dev/null &&
@@ -53,8 +53,8 @@ test_expect_success 'without -trail (attribute)' '
 	git config --unset core.whitespace
 	echo "F whitespace=-trail" >.gitattributes
 	git diff --color >output
-	grep "$blue_grep" output >error
-	grep -v "$blue_grep" output >normal
+	grep -a "$blue_grep" output >error
+	grep -a -v "$blue_grep" output >normal
 
 	grep Eight normal >/dev/null &&
 	grep HT error >/dev/null &&
@@ -69,8 +69,8 @@ test_expect_success 'without -space' '
 	rm -f .gitattributes
 	git config core.whitespace -space
 	git diff --color >output
-	grep "$blue_grep" output >error
-	grep -v "$blue_grep" output >normal
+	grep -a "$blue_grep" output >error
+	grep -a -v "$blue_grep" output >normal
 
 	grep Eight normal >/dev/null &&
 	grep HT normal >/dev/null &&
@@ -85,8 +85,8 @@ test_expect_success 'without -space (attribute)' '
 	git config --unset core.whitespace
 	echo "F whitespace=-space" >.gitattributes
 	git diff --color >output
-	grep "$blue_grep" output >error
-	grep -v "$blue_grep" output >normal
+	grep -a "$blue_grep" output >error
+	grep -a -v "$blue_grep" output >normal
 
 	grep Eight normal >/dev/null &&
 	grep HT normal >/dev/null &&
@@ -101,8 +101,8 @@ test_expect_success 'with indent-non-tab only' '
 	rm -f .gitattributes
 	git config core.whitespace indent,-trailing,-space
 	git diff --color >output
-	grep "$blue_grep" output >error
-	grep -v "$blue_grep" output >normal
+	grep -a "$blue_grep" output >error
+	grep -a -v "$blue_grep" output >normal
 
 	grep Eight error >/dev/null &&
 	grep HT normal >/dev/null &&
@@ -117,8 +117,8 @@ test_expect_success 'with indent-non-tab only (attribu
 	git config --unset core.whitespace
 	echo "F whitespace=indent,-trailing,-space" >.gitattributes
 	git diff --color >output
-	grep "$blue_grep" output >error
-	grep -v "$blue_grep" output >normal
+	grep -a "$blue_grep" output >error
+	grep -a -v "$blue_grep" output >normal
 
 	grep Eight error >/dev/null &&
 	grep HT normal >/dev/null &&
@@ -133,8 +133,8 @@ test_expect_success 'with cr-at-eol' '
 	rm -f .gitattributes
 	git config core.whitespace cr-at-eol
 	git diff --color >output
-	grep "$blue_grep" output >error
-	grep -v "$blue_grep" output >normal
+	grep -a "$blue_grep" output >error
+	grep -a -v "$blue_grep" output >normal
 
 	grep Eight normal >/dev/null &&
 	grep HT error >/dev/null &&
@@ -149,8 +149,8 @@ test_expect_success 'with cr-at-eol (attribute)' '
 	git config --unset core.whitespace
 	echo "F whitespace=trailing,cr-at-eol" >.gitattributes
 	git diff --color >output
-	grep "$blue_grep" output >error
-	grep -v "$blue_grep" output >normal
+	grep -a "$blue_grep" output >error
+	grep -a -v "$blue_grep" output >normal
 
 	grep Eight normal >/dev/null &&
 	grep HT error >/dev/null &&
