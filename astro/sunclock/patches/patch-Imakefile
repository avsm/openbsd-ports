$OpenBSD: patch-Imakefile,v 1.4 2007/12/18 09:43:37 ajacoutot Exp $
--- Imakefile.orig	Sun Jun 18 21:58:50 2006
+++ Imakefile	Tue Dec 18 10:10:55 2007
@@ -1,5 +1,5 @@
 XCOMM Should install to /usr or /usr/local ??
-DESTDIR=/usr
+#DESTDIR=/usr
 
 XCOMM Name of man subdirectory of DESTDIR:
 MANDIR=/X11R6/man/man1
@@ -8,7 +8,7 @@ XCOMM Name of bin subdirectory of DESTDIR: /X11R6/bin 
 BINDIR=/X11R6/bin
 
 XCOMM Name of share subdirectory of DESTDIR:
-SHAREDIR=/share/sunclock
+SHAREDIR=${PREFIX}/share/sunclock
 
 XCOMM Name of DOCDIR's subdirectories of DESTDIR:
 DOCDIR=/X11R6/lib/X11/doc 
@@ -42,13 +42,14 @@ CCOPTIONS = -Ae $(XPMINC) $(JINC) -DZLIB -DSHAREDIR=\"
 #CCOPTIONS=-O -DZLIB -DNEW_CTIME -DSHAREDIR=\"$(DESTDIR)$(SHAREDIR)\"
 
 # Solaris, Linux
-#XPMLIBDIR=-L/usr/X11R6/lib
-#XPMINC=-I/usr/X11R6/include/X11
-#JLIBDIR=-L/usr/lib
-#ZLIBDIR=-L/usr/lib
-#JINC=-I/usr/include
+XPMLIBDIR=-L${X11BASE}/lib
+XPMINC=-I${X11BASE}/include/X11
+JLIBDIR=-L${DEPBASE}/lib
+ZLIBDIR=
+JINC=-I${DEPBASE}/include
+PINC=-I${DEPBASE}/include/libpng
 
-CCOPTIONS=-O -DZLIB -DSHAREDIR=\"$(DESTDIR)$(SHAREDIR)\"
+CCOPTIONS+= $(JINC) $(PINC) $(XPMINC) -DZLIB -DSHAREDIR=\"$(DESTDIR)$(SHAREDIR)\"
 #endif
 
 SRCS=sunclock.c astro.c widgets.c tildepath.c dirlist.c \
@@ -60,13 +61,6 @@ LOCAL_LIBRARIES=$(XLIB) $(XPMLIBDIR) -lXpm $(ZLIBDIR) 
 DEPLIBS=		# I don't know what I'm doing, and I hate imake!
 
 ComplexProgramTarget(sunclock)
-
-all::
-	cd editkit ; xmkmf ; make emx \
-          DESTDIR=$(DESTDIR) \
-	  BINDIR=$(SHAREDIR)/bin \
-	  MANDIR=$(SHAREDIR)/editkit \
-	  SHAREDIR=$(DESTDIR)$(SHAREDIR)/editkit
 
 install.man::
 	if [ -r $(DESTDIR)$(MANDIR)/sunclock.1x.gz ] ; \
