$OpenBSD: patch-src_lib_drivers_OssDriver_cpp,v 1.2 2007/05/02 17:51:16 grange Exp $
--- src/lib/drivers/OssDriver.cpp.orig	Tue Oct 18 02:32:04 2005
+++ src/lib/drivers/OssDriver.cpp	Wed May  2 21:36:46 2007
@@ -41,6 +41,7 @@ unsigned nNextFrames = 0;
 
 void* ossDriver_processCaller(void* param)
 {
+#ifndef __OpenBSD__
 	// stolen from amSynth
 	struct sched_param sched;
 	sched.sched_priority = 50;
@@ -50,6 +51,7 @@ void* ossDriver_processCaller(void* param)
 		m_pOssDriverInstance->warningLog("Can't set realtime scheduling for OSS Driver");
 	}
 	m_pOssDriverInstance->infoLog( "Scheduling priority = " + toString( sched.sched_priority ) );
+#endif
 
 	OssDriver *ossDriver = (OssDriver*)param;
 
@@ -126,7 +128,7 @@ int OssDriver::connect() {
 	int bs;
 
 	string audioDevice;
-#ifdef __NetBSD__
+#if defined(__NetBSD__) || defined(__OpenBSD__)
 	audioDevice = "/dev/audio";
 #else
 	audioDevice = preferencesMng->m_sOSSDevice;
@@ -178,11 +180,13 @@ int OssDriver::connect() {
 
 	infoLog( "Blocksize audio = " + toString( bs ) );
 
+#ifndef __OpenBSD__
 	if (bs != ( 1 << bufferBits) ){
 		errorLog("ERROR_IOCTL: unable to set BlockSize");
 		close(fd);
 		return 1;
 	}
+#endif
 
 	int format = AFMT_S16_LE;
 	if (ioctl(fd, SNDCTL_DSP_SETFMT, &format) == -1) {
