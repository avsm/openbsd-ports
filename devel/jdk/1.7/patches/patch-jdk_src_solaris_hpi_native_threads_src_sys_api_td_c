$OpenBSD: patch-jdk_src_solaris_hpi_native_threads_src_sys_api_td_c,v 1.1 2008/03/19 18:05:46 kurt Exp $
--- jdk/src/solaris/hpi/native_threads/src/sys_api_td.c.orig	Tue Oct 30 05:04:03 2007
+++ jdk/src/solaris/hpi/native_threads/src/sys_api_td.c	Wed Nov  7 18:16:19 2007
@@ -39,6 +39,10 @@
 #include <sys/ioctl.h>
 #endif
 
+#ifdef __OpenBSD__
+#include <sys/ioctl.h>
+#endif
+
 #include <sys/socket.h>
 #include <setjmp.h>
 #include <signal.h>
@@ -54,6 +58,10 @@
 #include "mutex_md.h"
 
 #if defined(__solaris__) && defined(NO_INTERRUPTIBLE_IO)
+#error If there was no policy change, this could be a makefile error.
+#endif
+
+#if defined(_ALLBSD_SOURCE) && defined(NO_INTERRUPTIBLE_IO)
 #error If there was no policy change, this could be a makefile error.
 #endif
 
