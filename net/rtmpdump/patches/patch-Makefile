$OpenBSD: patch-Makefile,v 1.4 2009/12/26 08:49:10 benoit Exp $

avoid gmake-isms

--- Makefile.orig	Mon Dec 21 13:39:51 2009
+++ Makefile	Fri Dec 25 17:01:53 2009
@@ -1,3 +1,7 @@
+.SUFFIXES: .cpp
+.cpp.o:
+	$(CXX) $(CXXFLAGS) -c $< -o $@
+
 CC=$(CROSS_COMPILE)gcc
 LD=$(CROSS_COMPILE)ld
 
@@ -5,7 +9,7 @@
 CFLAGS=-Wall $(XCFLAGS) $(INC) $(OPT)
 LDFLAGS=-Wall $(XLDFLAGS)
 LIBS=-lcrypto
-THREADLIB=-lpthread
+THREADLIB=-pthread
 SLIBS=$(THREADLIB) $(LIBS)
 
 EXT=
@@ -38,10 +42,10 @@
 	rm -f *.o rtmpdump$(EXT) streams$(EXT)
 
 streams: log.o rtmp.o amf.o streams.o parseurl.o
-	$(CC) $(LDFLAGS) $^ -o $@$(EXT) $(SLIBS)
+	$(CC) $(LDFLAGS) $> -o $@$(EXT) $(SLIBS)
 
 rtmpdump: log.o rtmp.o amf.o rtmpdump.o parseurl.o
-	$(CC) $(LDFLAGS) $^ -o $@$(EXT) $(LIBS)
+	$(CC) $(LDFLAGS) $> -o $@$(EXT) $(LIBS)
 
 log.o: log.c log.h Makefile
 parseurl.o: parseurl.c parseurl.h log.h Makefile
