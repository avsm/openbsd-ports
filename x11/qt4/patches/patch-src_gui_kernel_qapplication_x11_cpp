$OpenBSD: patch-src_gui_kernel_qapplication_x11_cpp,v 1.8 2007/03/17 17:58:17 espie Exp $
--- src/gui/kernel/qapplication_x11.cpp.orig	Wed Feb 21 10:58:48 2007
+++ src/gui/kernel/qapplication_x11.cpp	Sat Mar 17 10:47:27 2007
@@ -4715,7 +4715,7 @@ static void sm_performSaveYourself(QSessionManagerPriv
     sm_setProperty(QString::fromLatin1(SmProgram), argument0);
     // tell the session manager about our user as well.
     struct passwd *entryPtr = 0;
-#if !defined(QT_NO_THREAD) && defined(_POSIX_THREAD_SAFE_FUNCTIONS)
+#if !defined(QT_NO_THREAD) && defined(_POSIX_THREAD_SAFE_FUNCTIONS) && !defined(Q_OS_OPENBSD)
     QVarLengthArray<char, 1024> buf(sysconf(_SC_GETPW_R_SIZE_MAX));
     struct passwd entry;
     getpwuid_r(geteuid(), &entry, buf.data(), buf.size(), &entryPtr);
