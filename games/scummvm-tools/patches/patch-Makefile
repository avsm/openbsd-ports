$OpenBSD: patch-Makefile,v 1.6 2007/07/07 01:39:47 jsg Exp $
--- Makefile.orig	Sun Jun 17 07:00:22 2007
+++ Makefile	Tue Jun 26 22:57:57 2007
@@ -3,9 +3,10 @@
 
 SRC=.
 
-CC      := gcc
-CXX     := g++
-CFLAGS  += -g -O -Wall -Wuninitialized -Wno-long-long -Wno-multichar -DUNIX
+#CC      := gcc
+#CXX     := g++
+CFLAGS  += -Wall -Wno-long-long -Wno-multichar -DUNIX
+CXXFLAGS  += -Wall -Wno-long-long -Wno-multichar -DUNIX
 # LDFLAGS +=
 
 # Additional warnings
@@ -29,7 +30,6 @@ TARGETS := \
 	dekyra$(EXEEXT) \
 	descumm$(EXEEXT) \
 	desword2$(EXEEXT) \
-	encode_dxa$(EXEEXT) \
 	extract_agos$(EXEEXT) \
 	extract_kyra$(EXEEXT) \
 	extract_loom_tg16$(EXEEXT) \
@@ -89,7 +89,7 @@ desword2$(EXEEXT): desword2.o util.o
 	$(CXX) $(LDFLAGS) -o $@ $+
 
 encode_dxa$(EXEEXT): encode_dxa.o compress.o util.o
-	$(CXX) $(LDFLAGS) -o $@ $+ -lpng -lz
+	$(CXX) $(LDFLAGS) `pkg-config --cflags --libs libpng` -o $@ $+ -lz
 
 extract_agos$(EXEEXT): extract_agos.o
 	$(CC) $(LDFLAGS) -o $@ $+
@@ -148,7 +148,7 @@ clean:
 	rm -f *.o utils/*.o $(TARGETS)
 
 .cpp.o:
-	$(CXX) $(CFLAGS) $(CPPFLAGS) -c $(<) -o $*.o
+	$(CXX) $(CXXFLAGS) $(CPPFLAGS) -c $(<) -o $*.o
 
 .c.o:
 	$(CC) $(CFLAGS) $(CPPFLAGS) -c $(<) -o $*.o
