# $OpenBSD: Makefile,v 1.13 2000/02/11 00:37:37 espie Exp $
# $FreeBSD: Makefile,v 1.3 1997/07/17 15:12:58 max Exp $

PKGNAME=	rsaref-2.0
DISTNAME=	rsaref20.1996
CATEGORIES=	security
MASTER_SITES=	ftp://ftp.replay.com/pub/crypto/crypto/LIBS/rsa/ \
		http://the.wiretapped.net/security/cryptography/libs/rsa/ \
		ftp://utopia.hacktic.nl/pub/replay/pub/crypto/LIBS/rsa/
EXTRACT_SUFX=	.tar.Z

NO_CDROM=	"CRYPTO: Third party crypto not allowed."
RESTRICTED=	"Crypto"

NEED_VERSION=	1.191

MAINTAINER=	niklas@openbsd.org

WRKDIST=	${WRKDIR}/source

pre-configure:
	@cp ${FILESDIR}/Makefile ${WRKSRC}
	@cp ${FILESDIR}/shlib_version ${WRKSRC}
	@cd ${WRKSRC} && \
		cp des.h _des.h && \
		cp md2.h _md2.h && \
		cp md5.h _md5.h

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/rsaref
	cd ${WRKSRC} && ${INSTALL_DATA} rsa.h _des.h _md2.h _md5.h \
	    rsaref.h global.h ${PREFIX}/include
	cd ${WRKDIR}/doc && ${INSTALL_DATA} info.txt rsaref.txt \
	    ${PREFIX}/share/doc/rsaref
	${INSTALL_DATA} ${WRKSRC}/librsaref.a ${PREFIX}/lib
	@if [ -f ${WRKSRC}/librsaref.so.2.0 ]; then \
	 ${INSTALL_DATA} ${WRKSRC}/librsaref.so.2.0 ${PREFIX}/lib; \
	 ${LDCONFIG} -m ${PREFIX}/lib; \
	fi

.include <bsd.port.mk>
