$OpenBSD: patch-src_rss_c,v 1.1 2008/07/08 22:38:53 jasper Exp $
--- src/rss.c.orig	Wed Jul  9 00:25:50 2008
+++ src/rss.c	Wed Jul  9 00:28:22 2008
@@ -1589,6 +1589,7 @@ rss_mozilla_init(void)
 }
 #endif
 
+#ifdef HAVE_GTKMOZEMBED
 void
 render_set_preferences(void)
 {
@@ -1603,6 +1604,7 @@ render_set_preferences(void)
 	gecko_prefs_set_string("general.useragent.extra.firefox", agstr); 
 	g_free(agstr);
 }
+#endif
 
 #ifdef HAVE_RENDERKIT
 static gboolean
@@ -3239,6 +3241,8 @@ rss_finalize(void)
 		gconf_client_get_int(rss_gconf, 
 			GCONF_KEY_HTML_RENDER, 
 			NULL));
+
+#ifdef HAVE_GTKMOZEMBED
 	//really find a better way to deal with this//
 	//I do not know how to shutdown gecko (gtk_moz_embed_pop_startup)
 	//crash in nsCOMPtr_base::assign_with_AddRef
@@ -3247,6 +3251,7 @@ rss_finalize(void)
 		system("killall -SIGTERM evolution");
 #else
 	gecko_shutdown();
+#endif
 #endif
 }
 
