$OpenBSD: patch-src_Audacity_h,v 1.2 2009/03/14 03:49:43 jakemsr Exp $
--- src/Audacity.h.orig	Tue Jan 27 12:50:58 2009
+++ src/Audacity.h	Tue Feb 10 03:21:35 2009
@@ -89,8 +89,9 @@ void QuitAudacity();
 #endif //_MSC_VER
 
 /* The GCC-elf implementation */
-#ifdef HAVE_VISIBILITY // this is provided by the configure script, is only
+#if defined HAVE_VISIBILITY // this is provided by the configure script, is only
 // enabled for suitable GCC versions
+#if HAVE_VISIBILITY
 /* The incantation is a bit weird here because it uses ELF symbol stuff. If we 
  * make a symbol "default" it makes it visible (for import or export). Making it
  * "hidden" means it is invisible outside the shared object. */
@@ -101,6 +102,9 @@ void QuitAudacity();
          #define AUDACITY_DLL_API __attribute__((visibility("default")))
       #endif
    #endif
+#else
+  #define AUDACITY_DLL_API
+#endif
 #endif
 
 /* The GCC-win32 implementation */
