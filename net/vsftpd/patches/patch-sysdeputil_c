$OpenBSD: patch-sysdeputil_c,v 1.2 2006/01/28 21:57:51 aanriot Exp $
--- sysdeputil.c.orig	Tue May 24 00:34:23 2005
+++ sysdeputil.c	Thu Jan 26 06:39:07 2006
@@ -74,6 +74,13 @@
   #endif
 #endif
 
+#if defined(__OpenBSD__)
+  #undef VSF_BUILD_PAM
+  #undef VSF_SYSDEP_HAVE_SHADOW
+  #include <stdlib.h>
+  #define VSF_SYSDEP_HAVE_SETPROCTITLE
+#endif
+
 #if (defined(__FreeBSD__) && __FreeBSD__ >= 3)
   #define VSF_SYSDEP_HAVE_FREEBSD_SENDFILE
   #define VSF_SYSDEP_HAVE_SETPROCTITLE
@@ -623,13 +630,13 @@ static int do_sendfile(const int out_fd,
   static char* p_recvbuf;
   unsigned int total_written = 0;
   int retval;
-  enum EVSFSysUtilError error;
   (void) start_pos;
 #if defined(VSF_SYSDEP_HAVE_LINUX_SENDFILE) || \
     defined(VSF_SYSDEP_HAVE_FREEBSD_SENDFILE) || \
     defined(VSF_SYSDEP_HAVE_HPUX_SENDFILE) || \
     defined(VSF_SYSDEP_HAVE_AIX_SENDFILE) || \
     defined(VSF_SYSDEP_HAVE_SOLARIS_SENDFILE)
+  enum EVSFSysUtilError error;
   if (tunable_use_sendfile)
   {
     static int s_sendfile_checked;
