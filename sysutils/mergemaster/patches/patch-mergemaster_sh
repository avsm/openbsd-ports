$OpenBSD: patch-mergemaster_sh,v 1.3 2002/02/12 16:22:05 naddy Exp $
--- mergemaster.sh.orig	Tue Feb 12 14:28:36 2002
+++ mergemaster.sh	Tue Feb 12 14:45:12 2002
@@ -354,7 +354,7 @@ SOURCEDIR=${SOURCEDIR:-/usr/src/etc}
 
 # Define what CVS $Id tag to look for to aid portability.
 #
-CVS_ID_TAG=FreeBSD
+CVS_ID_TAG=OpenBSD
 
 case "${RERUN}" in
 '')
@@ -450,10 +450,7 @@ case "${RERUN}" in
       make DESTDIR=${DESTDIR} distrib-dirs
       ;;
     esac
-    make DESTDIR=${TEMPROOT} distrib-dirs &&
-    make MAKEOBJDIRPREFIX=${TEMPROOT}/usr/obj obj &&
-    make MAKEOBJDIRPREFIX=${TEMPROOT}/usr/obj DESTDIR=${TEMPROOT} \
-        -DNO_MAKEDEV_RUN distribution;} ||
+    make DESTDIR=${TEMPROOT} -DNOMAKEDEV distribution-etc-root-var;} ||
   { echo '';
     echo "  *** FATAL ERROR: Cannot 'cd' to ${SOURCEDIR} and install files to";
     echo "      the temproot environment";
@@ -491,11 +488,6 @@ case "${RERUN}" in
      ;;
   esac
 
-  # Avoid trying to update MAKEDEV if /dev is on a devfs
-  if /sbin/sysctl vfs.devfs.generation > /dev/null 2>&1 ; then
-    rm ${TEMPROOT}/dev/MAKEDEV ${TEMPROOT}/dev/MAKEDEV.local
-  fi
-
   ;; # End of the "RERUN" test
 esac
 
@@ -506,6 +498,7 @@ esac
 [ -f "${TEMPROOT}/etc/spwd.db" ] && rm "${TEMPROOT}/etc/spwd.db"
 [ -f "${TEMPROOT}/etc/passwd" ]  && rm "${TEMPROOT}/etc/passwd"
 [ -f "${TEMPROOT}/etc/pwd.db" ]  && rm "${TEMPROOT}/etc/pwd.db"
+[ -f "${TEMPROOT}/etc/mail/aliases.db" ] && rm "${TEMPROOT}/etc/mail/aliases.db"
 
 # Get ready to start comparing files
 
