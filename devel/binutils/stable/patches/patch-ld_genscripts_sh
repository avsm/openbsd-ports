$OpenBSD: patch-ld_genscripts_sh,v 1.5 2003/10/11 00:52:22 brad Exp $
--- ld/genscripts.sh.orig	2003-09-04 20:58:32.000000000 -0400
+++ ld/genscripts.sh	2003-09-04 20:54:36.000000000 -0400
@@ -110,13 +110,6 @@ if [ "x${LIB_PATH}" = "x" ] && [ "x${USE
   LIB_PATH=${LIB_PATH}${LIB_PATH2}
 fi
 
-
-# Always search $(tooldir)/lib, aka /usr/local/TARGET/lib, except for
-# sysrooted configurations.
-if [ "x${use_sysroot}" != "xyes" ] ; then
-  LIB_PATH=${tool_lib}:${LIB_PATH}
-fi
-
 LIB_SEARCH_DIRS=`echo ${LIB_PATH} | sed -e 's/:/ /g' -e 's/\([^ ][^ ]*\)/SEARCH_DIR(\\"\1\\");/g'`
 
 # Generate 5 or 6 script files from a master script template in
@@ -229,6 +222,12 @@ if test -n "$GENERATE_SHLIB_SCRIPT"; the
   fi
 fi
 
+LD_FLAG=Z
+DATA_ALIGNMENT=${DATA_ALIGNMENT_}
+RELOCATING=" "
+(. ${srcdir}/scripttempl/${SCRIPT_NAME}.sc) | sed -e '/^ *$/d' > \
+  ldscripts/${EMULATION_NAME}.xz
+
 case " $EMULATION_LIBPATH " in
     *" ${EMULATION_NAME} "*) COMPILE_IN=true;;
 esac
