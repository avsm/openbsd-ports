$OpenBSD: patch-net_base_dnsrr_resolver_cc,v 1.1 2011/02/08 09:43:02 espie Exp $
--- net/base/dnsrr_resolver.cc.orig	Fri Jan 21 10:19:57 2011
+++ net/base/dnsrr_resolver.cc	Mon Jan 24 13:04:07 2011
@@ -4,6 +4,12 @@
 
 #include "net/base/dnsrr_resolver.h"
 
+#if defined(OS_OPENBSD)
+#include <sys/types.h>
+#include <sys/socket.h>
+#include <netinet/in.h>
+#endif
+
 #if defined(OS_POSIX)
 #include <resolv.h>
 #endif
@@ -170,10 +176,12 @@ class RRResolverWorker {
     }
 
     bool r = true;
+#if !defined(OS_OPENBSD)
     if ((_res.options & RES_INIT) == 0) {
       if (res_ninit(&_res) != 0)
         r = false;
     }
+#endif
 
     if (r) {
       unsigned long saved_options = _res.options;
