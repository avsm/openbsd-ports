--- ./sbr/m_tmpfil.c.orig	Thu Jul  9 13:52:24 1998
+++ ./sbr/m_tmpfil.c	Sat Mar 20 17:09:20 1999
@@ -12,9 +12,14 @@
 m_tmpfil (char *template)
 {
     static char tmpfil[BUFSIZ];
+    int fd;
 
     snprintf (tmpfil, sizeof(tmpfil), "/tmp/%sXXXXXX", template);
-    unlink(mktemp(tmpfil));
+    fd = mkstemp (tmpfil);
+    if (fd == -1)
+	return 0;
+    close (fd);
+    unlink (tmpfil);
 
     return tmpfil;
 }
